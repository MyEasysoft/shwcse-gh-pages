"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6510],{52328:(e,t,a)=>{a.d(t,{Z:()=>S});var i=a(72791),n=a(52007),l=a.n(n),r=a(41418),s=a.n(r),o=a(77832),c=a.n(o),m=(a(73665),a(80948)),u=a(81301);const g="ListingImageGallery_root__JzVnD",d="ListingImageGallery_itemWrapper__GsTrh",h="ListingImageGallery_itemWrapperFullscreen__TFjqf",p="ListingImageGallery_noImage__yDC3O",y="ListingImageGallery_itemCentering__jTpce",I="ListingImageGallery_item__AtBV+",v="ListingImageGallery_thumb__OIZkp",E="ListingImageGallery_navLeft__5w7Fd",L="ListingImageGallery_navRight__cZ6df",b="ListingImageGallery_navArrowWrapper__zq5yN",_="ListingImageGallery_openFullscreen__1b4QD marketplaceTinyFontStyles",f="ListingImageGallery_close__q0Y79 marketplaceModalCloseStyles",N="ListingImageGallery_closeText__O+9m- marketplaceModalCloseText",C="ListingImageGallery_closeIcon__oq8Oi marketplaceModalCloseIcon",P={showPlayButton:!1,disableThumbnailScroll:!0},T=e=>{const[t,a]=(0,i.useState)(!1),{intl:n,rootClassName:l,className:r,images:o,imageVariants:T,thumbnailVariants:w}=e,D=w||T,{aspectWidth:S,aspectHeight:k}=((e,t)=>{var a,i;if(!e)return{aspectWidth:1,aspectHeight:1};const n=null===e||void 0===e||null===(a=e.attributes)||void 0===a||null===(i=a.variants)||void 0===i?void 0:i[t],l=null===n||void 0===n?void 0:n.width,r=null===n||void 0===n?void 0:n.height,s=!!l&&!!r,o=l/r;return s&&o>=2?{aspectWidth:2,aspectHeight:1}:s&&o<=1.3333333333333333?{aspectWidth:4,aspectHeight:3}:s?{aspectWidth:l,aspectHeight:r}:{aspectWidth:1,aspectHeight:1}})(null===o||void 0===o?void 0:o[0],T[0]),O=o.map(((e,t)=>{var a,i;return{original:"",alt:n.formatMessage({id:"ListingImageGallery.imageAltText"},{index:t+1,count:o.length}),thumbAlt:n.formatMessage({id:"ListingImageGallery.imageThumbnailAltText"},{index:t+1,count:o.length}),thumbnail:null===(a=e.attributes)||void 0===a||null===(i=a.variants)||void 0===i?void 0:i[D[0]],image:e}})),Z=t?{}:{sizes:"(max-width: 1024px) 100vw, (max-width: 1200px) calc(100vw - 192px), 708px"};if(0===O.length)return i.createElement(u.t3,{className:p,image:null,variants:[],alt:""});const q=s()(l||g,r);return i.createElement(c(),Object.assign({additionalClass:q,items:O,renderItem:e=>i.createElement(u.Zz,{width:S||1,height:k||1,className:t?h:d},i.createElement("div",{className:y},i.createElement(u.t3,Object.assign({rootClassName:I,image:e.image,alt:e.alt,variants:T},Z)))),renderThumbInner:e=>i.createElement("div",null,i.createElement(u.t3,{rootClassName:v,image:e.image,alt:e.thumbAlt,variants:D,sizes:"88px"})),onScreenChange:e=>{a(e)},renderLeftNav:(e,t)=>i.createElement("button",{className:E,disabled:t,onClick:e},i.createElement("div",{className:b},i.createElement(u.JT,{direction:"left",size:"big"}))),renderRightNav:(e,t)=>i.createElement("button",{className:L,disabled:t,onClick:e},i.createElement("div",{className:b},i.createElement(u.JT,{direction:"right",size:"big"}))),renderFullscreenButton:(e,t)=>t?i.createElement(u.zx,{onClick:e,rootClassName:f,title:n.formatMessage({id:"ListingImageGallery.closeModalTitle"})},i.createElement("span",{className:N},i.createElement(m._H,{id:"ListingImageGallery.closeModal"})),i.createElement(u.bM,{rootClassName:C})):i.createElement("button",{className:_,onClick:e},i.createElement(m._H,{id:"ListingImageGallery.viewImagesButton",values:{count:o.length}}))},P))};T.defaultProps={rootClassName:null,className:null,thumbnailVariants:null};const{string:w,arrayOf:D}=l(),S=(0,m.XN)(T)},98631:(e,t,a)=>{a.r(t),a.d(t,{ListingPageComponent:()=>M,default:()=>A});var i=a(72791),n=a(42789),l=a(47375),r=a(58272),s=a(6639),o=a(86134),c=a(80948),m=a(73665),u=a(66319),g=a(21102),d=a(79908),h=a(10314),p=a(7414),y=a(7285),I=a(25863),v=a(46902),E=a(43093),L=a(81301),b=a(52745),_=a(67600),f=a(36963),N=a(2145),C=a(70059),P=a(36898),T=a(29997),w=a(29489),D=a(28390),S=a(66978),k=a(7207),O=a(43820),Z=a(52328),q=a(77352);const F=e=>{const{listing:t,variantPrefix:a}=e,n=t.images,l=[a,"".concat(a,"-2x"),"".concat(a,"-4x")];return i.createElement("div",{className:q.Z.productGallery,"data-testid":"carousel"},i.createElement(Z.Z,{images:n,imageVariants:["scaled-small","scaled-medium","scaled-large","scaled-xlarge"],thumbnailVariants:l}))},{UUID:x}=u.types,M=e=>{var t,a,n;const[l,r]=(0,i.useState)(e.inquiryModalOpenForListingId===e.params.id),{isAuthenticated:s,currentUser:o,getListing:u,getOwnListing:I,intl:v,onManageDisableScrolling:E,params:Z,location:M,scrollingDisabled:A,showListingError:G,reviews:H,fetchReviewsError:W,sendInquiryInProgress:U,sendInquiryError:V,monthlyTimeSlots:R,onFetchTimeSlots:z,onFetchTransactionLineItems:B,lineItems:j,fetchLineItemsInProgress:Y,fetchLineItemsError:J,history:K,callSetInitialValues:$,onSendInquiry:X,onInitializeCardPaymentData:Q,config:ee,routeConfiguration:te}=e,ae=ee.listing,ie=new x(Z.id),ne=Z.variant===g.l4,le=Z.variant===g.my,re=ne||le?(0,h.YC)(I(ie)):(0,h.Me)(u(ie)),se=Z.slug||(0,g.qi)(re.attributes.title||""),oe={slug:se,...Z},ce=le?g.Ms:g.Am,me=le?"photos":"details",ue=re.id&&re.attributes.state!==m.v7,ge=ne&&ue,de=(ne||le)&&G&&403===G.status;if(ge||de)return i.createElement(L.d9,{name:"ListingPage",params:oe,search:M.search});const he=i.createElement(b.Z,null);if(G&&404===G.status)return i.createElement(f.Z,null);if(G)return i.createElement(C.mf,{topbar:he,scrollingDisabled:A,intl:v});if(!re.id)return i.createElement(C.h2,{topbar:he,scrollingDisabled:A,intl:v});const{description:pe="",geolocation:ye=null,price:Ie=null,title:ve="",publicData:Ee={},metadata:Le={}}=re.attributes,be=i.createElement("span",null,(0,p.qO)(ve,{longWordMinLength:16,longWordClass:q.Z.longWord})),_e=re&&re.author,fe=!(!o||!_e)&&re.author.id.uuid===o.id.uuid,Ne=null===Ee||void 0===Ee?void 0:Ee.transactionProcessAlias,Ce=(0,y.b$)(Ne.split("/")[0]),Pe=(0,y.YL)(Ce)?"booking":"purchase",Te=_e?re.author:null,we=(0,h.oY)(Te),De=fe&&!(null!==o&&void 0!==o&&null!==(t=o.attributes)&&void 0!==t&&t.stripeConnected),Se=De?i.createElement("span",{className:q.Z.payoutDetailsWarning},i.createElement(c._H,{id:"ListingPage.payoutDetailsWarning",values:{processType:Pe}}),i.createElement(L.RC,{name:"StripePayoutPage"},i.createElement(c._H,{id:"ListingPage.payoutDetailsWarningLink"}))):null,ke=(0,h.d8)(we,""),{formattedPrice:Oe}=(0,C.MT)(Ie,ee.currency,v),Ze={params:oe,history:K,routes:te},qe=(0,C.kN)({...Ze,currentUser:o,callSetInitialValues:$,location:M,setInitialValues:N.LA,setInquiryModalOpen:r}),Fe=(0,C.j3)({...Ze,getListing:u,onSendInquiry:X,setInquiryModalOpen:r}),xe=(0,C.ip)({...Ze,currentUser:o,callSetInitialValues:$,getListing:u,onInitializeCardPaymentData:Q}),Me=(0,C.Ib)(re,"facebook"),Ae=(0,C.Ib)(re,"twitter"),Ge=(0,C.Ib)(re,"".concat(ee.layout.listingImage.variantPrefix,"-2x")).map((e=>e.url)),He=ee.marketplaceName,We=v.formatMessage({id:"ListingPage.schemaTitle"},{title:ve,price:Oe,marketplaceName:He}),Ue="".concat(ee.marketplaceRootURL).concat(M.pathname).concat(M.search).concat(M.hash),Ve=Ie?{price:v.formatNumber((0,d.ud)(Ie),{minimumFractionDigits:2,maximumFractionDigits:2}),priceCurrency:Ie.currency}:{},Re=((null===(a=re.currentStock)||void 0===a||null===(n=a.attributes)||void 0===n?void 0:n.quantity)||0)>0?"https://schema.org/InStock":"https://schema.org/OutOfStock";return i.createElement(L.T3,{title:We,scrollingDisabled:A,author:ke,description:pe,facebookImages:Me,twitterImages:Ae,schema:{"@context":"http://schema.org","@type":"Product",description:pe,name:We,image:Ge,offers:{"@type":"Offer",url:Ue,...Ve,availability:Re}}},i.createElement(L.ip,{className:q.Z.pageRoot,topbar:he,footer:i.createElement(_.Z,null)},i.createElement("div",{className:q.Z.contentWrapperForProductLayout},i.createElement("div",{className:q.Z.mainColumnForProductLayout},re.id&&De?i.createElement(P.Z,{className:q.Z.actionBarForProductLayout,isOwnListing:fe,listing:re,showNoPayoutDetailsSet:De}):null,re.id?i.createElement(P.Z,{className:q.Z.actionBarForProductLayout,isOwnListing:fe,listing:re,editParams:{id:ie.uuid,slug:se,type:ce,tab:me}}):null,i.createElement(F,{listing:re,variantPrefix:ee.layout.listingImage.variantPrefix}),i.createElement("div",{className:q.Z.mobileHeading},i.createElement(L.H4,{as:"h1",className:q.Z.orderPanelTitle},i.createElement(c._H,{id:"ListingPage.orderTitle",values:{title:be}}))),i.createElement(T.Z,{text:pe,showAsIngress:!0}),i.createElement(w.Z,{publicData:Ee,metadata:Le,listingConfig:ae,intl:v}),ae.listingFields.reduce(((e,t)=>{var a,n;const{key:l,enumOptions:r,includeForListingTypes:s,scope:o="public"}=t,c=null===Ee||void 0===Ee?void 0:Ee.listingType,u=null==s||s.includes(c),g="public"===o?Ee[l]:"metadata"===o?Le[l]:null,d=null!=g;return u&&t.schemaType===m.KP?[...e,i.createElement(D.Z,{key:l,heading:null===t||void 0===t||null===(a=t.showConfig)||void 0===a?void 0:a.label,options:(h=r,h.map((e=>({key:"".concat(e.option),label:e.label})))),selectedOptions:g||[]})]:u&&d&&t.schemaType===m.d$?[...e,i.createElement(T.Z,{key:l,heading:null===t||void 0===t||null===(n=t.showConfig)||void 0===n?void 0:n.label,text:g})]:e;var h}),[]),i.createElement(O.Z,{geolocation:ye,publicData:Ee,listingId:re.id,mapsConfig:ee.maps}),i.createElement(S.Z,{reviews:H,fetchReviewsError:W}),i.createElement(k.Z,{title:ve,listing:re,authorDisplayName:ke,onContactUser:qe,isInquiryModalOpen:s&&l,onCloseInquiryModal:()=>r(!1),sendInquiryError:V,sendInquiryInProgress:U,onSubmitInquiry:Fe,currentUser:o,onManageDisableScrolling:E})),i.createElement("div",{className:q.Z.orderColumnForProductLayout},i.createElement(L.el,{className:q.Z.productOrderPanel,listing:re,isOwnListing:fe,onSubmit:e=>{const t=re.attributes.state===m._L;fe||t?window.scrollTo(0,0):xe(e)},authorLink:i.createElement(L.RC,{className:q.Z.authorNameLink,name:"ListingPage",params:oe,to:{hash:"#author"}},ke),title:i.createElement(c._H,{id:"ListingPage.orderTitle",values:{title:be}}),titleDesktop:i.createElement(L.H4,{as:"h1",className:q.Z.orderPanelTitle},i.createElement(c._H,{id:"ListingPage.orderTitle",values:{title:be}})),payoutDetailsWarning:Se,author:we,onManageDisableScrolling:E,onContactUser:qe,monthlyTimeSlots:R,onFetchTimeSlots:z,onFetchTransactionLineItems:B,lineItems:j,fetchLineItemsInProgress:Y,fetchLineItemsError:J,validListingTypes:ee.listing.listingTypes,marketplaceCurrency:ee.currency,dayCountAvailableForBooking:ee.stripe.dayCountAvailableForBooking,marketplaceName:ee.marketplaceName})))))};M.defaultProps={currentUser:null,inquiryModalOpenForListingId:null,showListingError:null,reviews:[],fetchReviewsError:null,monthlyTimeSlots:null,sendInquiryError:null,lineItems:null,fetchLineItemsError:null};const A=(0,n.qC)((0,l.$j)((e=>{const{isAuthenticated:t}=e.auth,{showListingError:a,reviews:i,fetchReviewsError:n,monthlyTimeSlots:l,sendInquiryInProgress:r,sendInquiryError:s,lineItems:o,fetchLineItemsInProgress:c,fetchLineItemsError:m,inquiryModalOpenForListingId:u}=e.ListingPage,{currentUser:g}=e.user;return{isAuthenticated:t,currentUser:g,getListing:t=>{const a={id:t,type:"listing"},i=(0,I.EV)(e,[a]);return 1===i.length?i[0]:null},getOwnListing:t=>{const a={id:t,type:"ownListing"},i=(0,I.EV)(e,[a]);return 1===i.length?i[0]:null},scrollingDisabled:(0,v.uS)(e),inquiryModalOpenForListingId:u,showListingError:a,reviews:i,fetchReviewsError:n,monthlyTimeSlots:l,lineItems:o,fetchLineItemsInProgress:c,fetchLineItemsError:m,sendInquiryInProgress:r,sendInquiryError:s}}),(e=>({onManageDisableScrolling:(t,a)=>e((0,v.R4)(t,a)),callSetInitialValues:(t,a,i)=>e(t(a,i)),onFetchTransactionLineItems:t=>e((0,N.nd)(t)),onSendInquiry:(t,a)=>e((0,N.DE)(t,a)),onInitializeCardPaymentData:()=>e((0,E.aw)()),onFetchTimeSlots:(t,a,i,n)=>e((0,N.HA)(t,a,i,n))}))))((e=>{const t=(0,s.mX)(),a=(0,o.a5)(),n=(0,c.YB)(),l=(0,r.k6)(),m=(0,r.TH)();return i.createElement(M,Object.assign({config:t,routeConfiguration:a,intl:n,history:l,location:m},e))}))}}]);
//# sourceMappingURL=ListingPageCarousel.b8e20d4b.chunk.js.map