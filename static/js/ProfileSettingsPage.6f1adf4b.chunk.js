"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8319],{30408:(e,t,a)=>{a.r(t),a.d(t,{ProfileSettingsPageComponent:()=>G,default:()=>Y});var r=a(72791),l=a(42789),i=a(47375),o=a(6639),s=a(80948),n=(a(73665),a(10314)),m=a(46902),d=a(81301),c=a(52745),g=a(67600),f=a(55269),u=a(18111),p=a.n(u),P=a(41418),_=a.n(P),E=a(84480),S=a(35074);const N="ProfileSettingsForm_root__08ZA6",I="ProfileSettingsForm_sectionContainer__b-9mI",F="ProfileSettingsForm_sectionTitle__7hzrL",h="ProfileSettingsForm_lastSection__RAzhW",b="ProfileSettingsForm_uploadAvatarInput__RyQpK",v="ProfileSettingsForm_uploadAvatarWrapper__4f6Ov",y="ProfileSettingsForm_label__8dLxQ",C="ProfileSettingsForm_avatarPlaceholder__RyHC7",H="ProfileSettingsForm_avatarContainer__Ctpxb",U="ProfileSettingsForm_avatarPlaceholderTextMobile__nKz01",D="ProfileSettingsForm_avatarPlaceholderText__8Q6-J",L="ProfileSettingsForm_avatarUploadError__8eEut",k="ProfileSettingsForm_error__sXHS5 h4",x="ProfileSettingsForm_avatar__JxnAW",A="ProfileSettingsForm_changeAvatar__8Gnur h5",T="ProfileSettingsForm_uploadingImage__miU4s",M="ProfileSettingsForm_uploadingImageOverlay__kwAOr",w="ProfileSettingsForm_avatarInvisible__71PPr",O="ProfileSettingsForm_tip__U1C9Z marketplaceDefaultFontStyles",R="ProfileSettingsForm_fileInfo__DBGRG h5",j="ProfileSettingsForm_nameContainer__7aef9",W="ProfileSettingsForm_firstName__RjFd2",B="ProfileSettingsForm_lastName__orpIw",V="ProfileSettingsForm_bioInfo__HTT+j textSmall",q="ProfileSettingsForm_submitButton__WjN6X";class z extends r.Component{constructor(e){super(e),this.uploadDelayTimeoutId=null,this.state={uploadDelay:!1},this.submittedValues={}}componentDidUpdate(e){e.uploadInProgress&&!this.props.uploadInProgress&&(this.setState({uploadDelay:!0}),this.uploadDelayTimeoutId=window.setTimeout((()=>{this.setState({uploadDelay:!1})}),2e3))}componentWillUnmount(){window.clearTimeout(this.uploadDelayTimeoutId)}render(){return r.createElement(f.l0,Object.assign({},this.props,{render:e=>{const{className:t,currentUser:a,handleSubmit:l,intl:i,invalid:o,onImageUpload:m,pristine:c,profileImage:g,rootClassName:u,updateInProgress:P,updateProfileError:z,uploadImageError:X,uploadInProgress:K,form:Q,marketplaceName:Z,values:G}=e,J=(0,n.j0)(a),Y=i.formatMessage({id:"ProfileSettingsForm.firstNameLabel"}),$=i.formatMessage({id:"ProfileSettingsForm.firstNamePlaceholder"}),ee=i.formatMessage({id:"ProfileSettingsForm.firstNameRequired"}),te=E.C1(ee),ae=i.formatMessage({id:"ProfileSettingsForm.lastNameLabel"}),re=i.formatMessage({id:"ProfileSettingsForm.lastNamePlaceholder"}),le=i.formatMessage({id:"ProfileSettingsForm.lastNameRequired"}),ie=E.C1(le),oe=i.formatMessage({id:"ProfileSettingsForm.bioLabel"}),se=i.formatMessage({id:"ProfileSettingsForm.bioPlaceholder"}),ne=K||this.state.uploadDelay?r.createElement("div",{className:M},r.createElement(d.vM,null)):null,me=!!X&&!K,de=_()({[L]:me}),ce=g.uploadedImage||J.profileImage,ge={...J,profileImage:ce},fe=!!g.file,ue=K&&fe,pe=g.imageId&&this.state.uploadDelay,Pe=fe&&(ue||pe)?r.createElement(d.k0,{id:g.id,className:de,rootClassName:T,aspectWidth:1,aspectHeight:1,file:g.file},ne):null,_e=_()(de,x,{[w]:this.state.uploadDelay}),Ee=!ue&&g.imageId?r.createElement(d.qE,{className:_e,renderSizes:"(max-width: 767px) 96px, 240px",user:ge,disableProfileLink:!0}):null,Se=g.imageId||ue?r.createElement("div",{className:H},Pe,Ee,r.createElement("div",{className:A},r.createElement(s._H,{id:"ProfileSettingsForm.changeAvatar"}))):r.createElement("div",{className:C},r.createElement("div",{className:D},r.createElement(s._H,{id:"ProfileSettingsForm.addYourProfilePicture"})),r.createElement("div",{className:U},r.createElement(s._H,{id:"ProfileSettingsForm.addYourProfilePictureMobile"}))),Ne=z?r.createElement("div",{className:k},r.createElement(s._H,{id:"ProfileSettingsForm.updateProfileFailed"})):null,Ie=_()(u||N,t),Fe=P,he=Object.keys(this.submittedValues).length>0&&p()(G,this.submittedValues),be=o||c||he||K||Fe;return r.createElement(d.l0,{className:Ie,onSubmit:e=>{this.submittedValues=G,l(e)}},r.createElement("div",{className:I},r.createElement(d.H4,{as:"h2",className:F},r.createElement(s._H,{id:"ProfileSettingsForm.yourProfilePicture"})),r.createElement(f.gN,{accept:"image/*",id:"profileImage",name:"profileImage",label:Se,type:"file",form:null,uploadImageError:X,disabled:K},(e=>{const{accept:t,id:a,input:l,label:i,disabled:o,uploadImageError:n}=e,{name:d,type:c}=l;let g=null;return(0,S.kv)(n)?g=r.createElement("div",{className:k},r.createElement(s._H,{id:"ProfileSettingsForm.imageUploadFailedFileTooLarge"})):n&&(g=r.createElement("div",{className:k},r.createElement(s._H,{id:"ProfileSettingsForm.imageUploadFailed"}))),r.createElement("div",{className:v},r.createElement("label",{className:y,htmlFor:a},i),r.createElement("input",{accept:t,id:a,name:d,className:b,disabled:o,onChange:e=>{const t=e.target.files[0];if(Q.change("profileImage",t),Q.blur("profileImage"),null!=t){const e="".concat(t.name,"_").concat(Date.now());m({id:e,file:t})}},type:c}),g)})),r.createElement("div",{className:O},r.createElement(s._H,{id:"ProfileSettingsForm.tip"})),r.createElement("div",{className:R},r.createElement(s._H,{id:"ProfileSettingsForm.fileInfo"}))),r.createElement("div",{className:I},r.createElement(d.H4,{as:"h2",className:F},r.createElement(s._H,{id:"ProfileSettingsForm.yourName"})),r.createElement("div",{className:j},r.createElement(d.gC,{className:W,type:"text",id:"firstName",name:"firstName",label:Y,placeholder:$,validate:te}),r.createElement(d.gC,{className:B,type:"text",id:"lastName",name:"lastName",label:ae,placeholder:re,validate:ie}))),r.createElement("div",{className:_()(I,h)},r.createElement(d.H4,{as:"h2",className:F},r.createElement(s._H,{id:"ProfileSettingsForm.bioHeading"})),r.createElement(d.gC,{type:"textarea",id:"bio",name:"bio",label:oe,placeholder:se}),r.createElement("p",{className:V},r.createElement(s._H,{id:"ProfileSettingsForm.bioInfo",values:{marketplaceName:Z}}))),Ne,r.createElement(d.zx,{className:q,type:"submit",inProgress:Fe,disabled:be,ready:he},r.createElement(s._H,{id:"ProfileSettingsForm.saveChanges"})))}}))}}z.defaultProps={rootClassName:null,className:null,uploadImageError:null,updateProfileError:null,updateProfileReady:!1};const X=(0,l.qC)(s.XN)(z);X.displayName="ProfileSettingsForm";const K=X;var Q=a(33422);const Z={root:"ProfileSettingsPage_root__Wc4ke",content:"ProfileSettingsPage_content__U-ScU",headingContainer:"ProfileSettingsPage_headingContainer__w4e5o",heading:"ProfileSettingsPage_heading__BCBVA",profileLink:"ProfileSettingsPage_profileLink__Q8Pad buttonSecondaryInline"},G=e=>{const t=(0,o.mX)(),{currentUser:a,image:l,onImageUpload:i,onUpdateProfile:m,scrollingDisabled:f,updateInProgress:u,updateProfileError:p,uploadImageError:P,uploadInProgress:_,intl:E}=e,S=(0,n.j0)(a),{firstName:N,lastName:I,bio:F}=S.attributes.profile,h=S.profileImage?S.profileImage.id:null,b=l||{imageId:h},v=S.id?r.createElement(K,{className:Z.form,currentUser:a,initialValues:{firstName:N,lastName:I,bio:F,profileImage:S.profileImage},profileImage:b,onImageUpload:e=>((e,t)=>{const{id:a,imageId:r,file:l}=e;l&&t({id:a,imageId:r,file:l})})(e,i),uploadInProgress:_,updateInProgress:u,uploadImageError:P,updateProfileError:p,onSubmit:t=>{const{firstName:a,lastName:r,bio:l}=t,i=l||"",o={firstName:a.trim(),lastName:r.trim(),bio:i},s=e.image,n=s&&s.imageId&&s.file?{...o,profileImageId:s.imageId}:o;m(n)},marketplaceName:t.marketplaceName}):null,y=E.formatMessage({id:"ProfileSettingsPage.title"});return r.createElement(d.T3,{className:Z.root,title:y,scrollingDisabled:f},r.createElement(d.ip,{topbar:r.createElement(r.Fragment,null,r.createElement(c.Z,{currentPage:"ProfileSettingsPage"}),r.createElement(d.Tb,{currentPage:"ProfileSettingsPage"})),footer:r.createElement(g.Z,null)},r.createElement("div",{className:Z.content},r.createElement("div",{className:Z.headingContainer},r.createElement(d.H3,{as:"h1",className:Z.heading},r.createElement(s._H,{id:"ProfileSettingsPage.heading"})),S.id?r.createElement(d.RC,{className:Z.profileLink,name:"ProfilePage",params:{id:S.id.uuid}},r.createElement(s._H,{id:"ProfileSettingsPage.viewProfileLink"})):null),v)))};G.defaultProps={currentUser:null,uploadImageError:null,updateProfileError:null,image:null,config:null};const J=(0,l.qC)((0,i.$j)((e=>{const{currentUser:t}=e.user,{image:a,uploadImageError:r,uploadInProgress:l,updateInProgress:i,updateProfileError:o}=e.ProfileSettingsPage;return{currentUser:t,image:a,scrollingDisabled:(0,m.uS)(e),updateInProgress:i,updateProfileError:o,uploadImageError:r,uploadInProgress:l}}),(e=>({onImageUpload:t=>e((0,Q.Ix)(t)),onUpdateProfile:t=>e((0,Q.ck)(t))}))),s.XN)(G),Y=J}}]);
//# sourceMappingURL=ProfileSettingsPage.6f1adf4b.chunk.js.map