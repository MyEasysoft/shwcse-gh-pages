"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3904],{13363:(e,t,a)=>{a.r(t),a.d(t,{InboxItem:()=>Z,InboxPageComponent:()=>j,default:()=>w});var s=a(72791),n=a(42789),o=a(47375),i=a(41418),r=a.n(i),l=a(6639),c=a(80948),d=a(73665),m=a(53176),u=a(7285),p=a(25863),N=a(46902),E=a(81301),_=a(52745),g=a(67600),b=a(36963),v=a(59288);const I="InboxPage_mobileTopbar__4PjGM",P="InboxPage_desktopTopbar__Xa66G",S="InboxPage_navigation__FV-nc",x="InboxPage_title__zSoVd",D="InboxPage_tabs__vAH6s",R="InboxPage_tab__p+Bq3",f="InboxPage_error__mXyRA",T="InboxPage_noResults__CfSks",C="InboxPage_itemList__TKDkD",y="InboxPage_listItemsLoading__dubhi",A="InboxPage_listItem__TbZxn",L="InboxPage_item__KE9NU",O="InboxPage_itemAvatar__9c1y1",h="InboxPage_itemLink__61KZ-",k="InboxPage_itemUsername__RWVM8 textSmall",U="InboxPage_rowNotificationDot__8q7bH",F="InboxPage_notificationDot__9utFD",H="InboxPage_itemTitle__HmOsL marketplaceTinyFontStyles",Y="InboxPage_itemDetails__1jowG marketplaceTinyFontStyles",V="InboxPage_itemState__RA4qF marketplaceTinyFontStyles",q="InboxPage_pagination__mqQEI",M="InboxPage_stateName__at1xq",Q="InboxPage_stateActionNeeded__cDfpI",B="InboxPage_stateNoActionNeeded__TBJ0K",W="InboxPage_stateConcluded__xCnHg",G="InboxPage_bannedUserLink__NxshM",K=e=>{var t,a,n,o,i,r,l,c;const{transaction:p,...N}=e,_=(0,u.b$)(null===p||void 0===p||null===(t=p.attributes)||void 0===t?void 0:t.processName),g=(0,u.Yt)(_);if(g.getState(p)===g.states.INQUIRY)return null;const b=(null===p||void 0===p||null===(a=p.attributes)||void 0===a||null===(n=a.lineItems)||void 0===n?void 0:n.length)>0?null===(o=p.attributes)||void 0===o||null===(i=o.lineItems)||void 0===i?void 0:i.find((e=>d.Y8.includes(e.code)&&!e.reversal)):null,v=b?b.code:null,I=v===d.PC?d.In:d.FJ,P=(null===p||void 0===p||null===(r=p.listing)||void 0===r||null===(l=r.attributes)||void 0===l||null===(c=l.availabilityPlan)||void 0===c?void 0:c.timezone)||"Etc/UTC",{bookingStart:S,bookingEnd:x}=((e,t,a)=>{const{start:s,end:n,displayStart:o,displayEnd:i}=e.booking.attributes,r=o||s,l=i||n,c=t===d.mi,u=t===d.PC;return{bookingStart:r,bookingEnd:c||u?l:(0,m.U2)(l,1,"days",a)}})(p,v,P);return s.createElement(E.tn,Object.assign({startDate:S,endDate:x,dateType:I,timeZone:P},N))},Z=e=>{var t,a;const{transactionRole:n,tx:o,intl:i,stateData:l,isBooking:m,stockType:p=d.p9}=e,{customer:N,provider:_,listing:g}=o,{processName:b,processState:v,actionNeeded:I,isSaleNotification:P,isFinal:S}=l,x=n===u.AL,D=null===(t=o.attributes)||void 0===t?void 0:t.lineItems,R=D.length>0,f=(e=>null===e||void 0===e?void 0:e.find((e=>d.Y8.includes(e.code)&&!e.reversal)))(D),T=R&&!m?f.quantity.toString():null,C=p===d.p9||T&&f.quantity>1,y=x?_:N,A=s.createElement(E.GI,{user:y,intl:i}),q=y.attributes.banned,Z=P?s.createElement("div",{className:F}):null,j=r()(h,{[G]:q}),w=r()(M,{[W]:S,[Q]:I,[B]:!I});return s.createElement("div",{className:L},s.createElement("div",{className:O},s.createElement(E.qE,{user:y})),s.createElement(E.RC,{className:j,name:x?"OrderDetailsPage":"SaleDetailsPage",params:{id:o.id.uuid}},s.createElement("div",{className:U},Z),s.createElement("div",{className:k},A),s.createElement("div",{className:H},null===g||void 0===g||null===(a=g.attributes)||void 0===a?void 0:a.title),s.createElement("div",{className:Y},m?s.createElement(K,{transaction:o}):R&&C?s.createElement(c._H,{id:"InboxPage.quantity",values:{quantity:T}}):null),s.createElement("div",{className:V},s.createElement("div",{className:w},s.createElement(c._H,{id:"InboxPage.".concat(b,".").concat(v,".status"),values:{transactionRole:n}})))))},j=e=>{const t=(0,l.mX)(),{currentUser:a,fetchInProgress:n,fetchOrdersOrSalesError:o,intl:i,pagination:r,params:d,providerNotificationCount:m,scrollingDisabled:p,transactions:N}=e,{tab:L}=d;if(!("orders"===L||"sales"===L))return s.createElement(b.Z,null);const O="orders"===L,h=!n&&0===N.length&&!o,k=i.formatMessage({id:"InboxPage.ordersTitle"}),U=i.formatMessage({id:"InboxPage.salesTitle"}),F=O?k:U,H=!n&&((e,t,a)=>{var s,n;return t?(null===a||void 0===a?void 0:a.id)&&e&&e.length>0&&e[0].customer.id.uuid===(null===a||void 0===a||null===(s=a.id)||void 0===s?void 0:s.uuid):(null===a||void 0===a?void 0:a.id)&&e&&e.length>0&&e[0].provider.id.uuid===(null===a||void 0===a||null===(n=a.id)||void 0===n?void 0:n.uuid)})(N,O,a),Y=[{text:s.createElement("span",null,s.createElement(c._H,{id:"InboxPage.ordersTabTitle"})),selected:O,linkProps:{name:"InboxPage",params:{tab:"orders"}}},{text:s.createElement("span",null,s.createElement(c._H,{id:"InboxPage.salesTabTitle"}),m>0?s.createElement(E.Cc,{count:m}):null),selected:!O,linkProps:{name:"InboxPage",params:{tab:"sales"}}}];return s.createElement(E.T3,{title:F,scrollingDisabled:p},s.createElement(E.i_,{sideNavClassName:S,topbar:s.createElement(_.Z,{mobileRootClassName:I,desktopClassName:P,currentPage:"InboxPage"}),sideNav:s.createElement(s.Fragment,null,s.createElement(E.H2,{as:"h1",className:x},s.createElement(c._H,{id:"InboxPage.title"})),s.createElement(E.KT,{rootClassName:D,tabRootClassName:R,tabs:Y})," "),footer:s.createElement(g.Z,null)},o?s.createElement("p",{className:f},s.createElement(c._H,{id:"InboxPage.fetchFailed"})):null,s.createElement("ul",{className:C},n?s.createElement("li",{className:y},s.createElement(E.vM,null)):N.map((e=>{var a,n,o;const r=O?u.AL:u.Q;let l=null;try{l=(0,v.O)({transaction:e,transactionRole:r,intl:i})}catch(_){}const c=(e=>{var a;const s=null===(a=t.listing)||void 0===a?void 0:a.listingTypes,{listingType:n}=e||{};var o;return null===s||void 0===s?void 0:s.find((o=n,e=>e.listingType===o))})((null===e||void 0===e||null===(a=e.listing)||void 0===a||null===(n=a.attributes)||void 0===n?void 0:n.publicData)||{}),{transactionType:d,stockType:m}=c||{},p=(null===e||void 0===e||null===(o=e.attributes)||void 0===o?void 0:o.processName)||(null===d||void 0===d?void 0:d.transactionType),N=(0,u.b$)(p),E=(0,u.YL)(N);return l?s.createElement("li",{key:e.id.uuid,className:A},s.createElement(Z,{transactionRole:r,tx:e,intl:i,stateData:l,stockType:m,isBooking:E})):null})),h?s.createElement("li",{key:"noResults",className:T},s.createElement(c._H,{id:O?"InboxPage.noOrdersFound":"InboxPage.noSalesFound"})):null),H&&r&&r.totalPages>1?s.createElement(E.iE,{className:q,pageName:"InboxPage",pagePathParams:d,pagination:r}):null))};j.defaultProps={currentUser:null,currentUserHasOrders:null,fetchOrdersOrSalesError:null,pagination:null,providerNotificationCount:0,sendVerificationEmailError:null};const w=(0,n.qC)((0,o.$j)((e=>{const{fetchInProgress:t,fetchOrdersOrSalesError:a,pagination:s,transactionRefs:n}=e.InboxPage,{currentUser:o,currentUserNotificationCount:i}=e.user;return{currentUser:o,fetchInProgress:t,fetchOrdersOrSalesError:a,pagination:s,providerNotificationCount:i,scrollingDisabled:(0,N.uS)(e),transactions:(0,p.EV)(e,n)}})),c.XN)(j)},59288:(e,t,a)=>{a.d(t,{O:()=>o});var s=a(52007),n=a(7285);(0,s.shape)({processName:s.string.isRequired,processState:s.string.isRequired,actionNeeded:s.bool,isFinal:s.bool,isSaleNotification:s.bool});const o=e=>{var t;const{transaction:a}=e,s=(0,n.b$)(null===a||void 0===a||null===(t=a.attributes)||void 0===t?void 0:t.processName),o=(0,n.Yt)(s),i=()=>{const{getState:e,states:t}=o,n=e(a);return{processName:s,processState:n,states:t}};return s===n.fv?((e,t)=>{const{transactionRole:a}=e,{processName:s,processState:o,states:i}=t,r=n.h2;return new n.iW([o,a]).cond([i.INQUIRY,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.PENDING_PAYMENT,n.AL],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.PENDING_PAYMENT,n.Q],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.CANCELED,r],(()=>({processName:s,processState:o,isFinal:!0}))).cond([i.PURCHASED,n.Q],(()=>({processName:s,processState:o,actionNeeded:!0,isSaleNotification:!0}))).cond([i.DELIVERED,n.AL],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.DISPUTED,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.COMPLETED,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED_BY_PROVIDER,n.AL],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED_BY_CUSTOMER,n.Q],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED,r],(()=>({processName:s,processState:o,isFinal:!0}))).default((()=>({processName:s,processState:o}))).resolve()})(e,i()):s===n.j5?((e,t)=>{const{transactionRole:a}=e,{processName:s,processState:o,states:i}=t,r=n.h2;return new n.iW([o,a]).cond([i.INQUIRY,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.PENDING_PAYMENT,n.AL],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.CANCELED,r],(()=>({processName:s,processState:o,isFinal:!0}))).cond([i.PREAUTHORIZED,n.Q],(()=>({processName:s,processState:o,actionNeeded:!0,isSaleNotification:!0}))).cond([i.ACCEPTED,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.DECLINED,r],(()=>({processName:s,processState:o,isFinal:!0}))).cond([i.EXPIRED,r],(()=>({processName:s,processState:o,isFinal:!0}))).cond([i.DELIVERED,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED_BY_PROVIDER,n.AL],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED_BY_CUSTOMER,n.Q],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED,r],(()=>({processName:s,processState:o,isFinal:!0}))).default((()=>({processName:s,processState:o}))).resolve()})(e,i()):s===n.N5?((e,t)=>{const{transactionRole:a}=e,{processName:s,processState:o,states:i}=t,r=n.h2;return new n.iW([o,a]).cond([i.FREE_INQUIRY,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).default((()=>({processName:s,processState:o}))).resolve()})(e,i()):{}}}}]);
//# sourceMappingURL=InboxPage.63bb36b5.chunk.js.map