"use strict";exports.id=510,exports.ids=[510],exports.modules={2328:(e,t,a)=>{a.d(t,{Z:()=>Z});var i=a(6689),n=a.n(i),l=a(580),r=a.n(l),s=a(9003),o=a.n(s),c=a(9585),m=a.n(c),u=(a(3665),a(1233)),g=a(9930);const d="ListingImageGallery_root__JzVnD",p="ListingImageGallery_itemWrapper__GsTrh",h="ListingImageGallery_itemWrapperFullscreen__TFjqf",y="ListingImageGallery_noImage__yDC3O",I="ListingImageGallery_itemCentering__jTpce",v="ListingImageGallery_item__AtBV+",E="ListingImageGallery_thumb__OIZkp",L="ListingImageGallery_navLeft__5w7Fd",b="ListingImageGallery_navRight__cZ6df",f="ListingImageGallery_navArrowWrapper__zq5yN",_="ListingImageGallery_openFullscreen__1b4QD marketplaceTinyFontStyles",P="ListingImageGallery_close__q0Y79 marketplaceModalCloseStyles",N="ListingImageGallery_closeText__O+9m- marketplaceModalCloseText",C="ListingImageGallery_closeIcon__oq8Oi marketplaceModalCloseIcon",T={showPlayButton:!1,disableThumbnailScroll:!0},w=e=>{const[t,a]=(0,i.useState)(!1),{intl:l,rootClassName:r,className:s,images:c,imageVariants:w,thumbnailVariants:S}=e,k=S||w,{aspectWidth:Z,aspectHeight:x}=((e,t)=>{var a,i;if(!e)return{aspectWidth:1,aspectHeight:1};const n=null===e||void 0===e||null===(a=e.attributes)||void 0===a||null===(i=a.variants)||void 0===i?void 0:i[t],l=null===n||void 0===n?void 0:n.width,r=null===n||void 0===n?void 0:n.height,s=!!l&&!!r,o=l/r;return s&&o>=2?{aspectWidth:2,aspectHeight:1}:s&&o<=1.3333333333333333?{aspectWidth:4,aspectHeight:3}:s?{aspectWidth:l,aspectHeight:r}:{aspectWidth:1,aspectHeight:1}})(null===c||void 0===c?void 0:c[0],w[0]),D=c.map(((e,t)=>{var a,i;return{original:"",alt:l.formatMessage({id:"ListingImageGallery.imageAltText"},{index:t+1,count:c.length}),thumbAlt:l.formatMessage({id:"ListingImageGallery.imageThumbnailAltText"},{index:t+1,count:c.length}),thumbnail:null===(a=e.attributes)||void 0===a||null===(i=a.variants)||void 0===i?void 0:i[k[0]],image:e}})),q=t?{}:{sizes:"(max-width: 1024px) 100vw, (max-width: 1200px) calc(100vw - 192px), 708px"};if(0===D.length)return n().createElement(g.t3,{className:y,image:null,variants:[],alt:""});const F=o()(r||d,s);return n().createElement(m(),Object.assign({additionalClass:F,items:D,renderItem:e=>n().createElement(g.Zz,{width:Z||1,height:x||1,className:t?h:p},n().createElement("div",{className:I},n().createElement(g.t3,Object.assign({rootClassName:v,image:e.image,alt:e.alt,variants:w},q)))),renderThumbInner:e=>n().createElement("div",null,n().createElement(g.t3,{rootClassName:E,image:e.image,alt:e.thumbAlt,variants:k,sizes:"88px"})),onScreenChange:e=>{a(e)},renderLeftNav:(e,t)=>n().createElement("button",{className:L,disabled:t,onClick:e},n().createElement("div",{className:f},n().createElement(g.JT,{direction:"left",size:"big"}))),renderRightNav:(e,t)=>n().createElement("button",{className:b,disabled:t,onClick:e},n().createElement("div",{className:f},n().createElement(g.JT,{direction:"right",size:"big"}))),renderFullscreenButton:(e,t)=>t?n().createElement(g.zx,{onClick:e,rootClassName:P,title:l.formatMessage({id:"ListingImageGallery.closeModalTitle"})},n().createElement("span",{className:N},n().createElement(u._H,{id:"ListingImageGallery.closeModal"})),n().createElement(g.bM,{rootClassName:C})):n().createElement("button",{className:_,onClick:e},n().createElement(u._H,{id:"ListingImageGallery.viewImagesButton",values:{count:c.length}}))},T))};w.defaultProps={rootClassName:null,className:null,thumbnailVariants:null};const{string:S,arrayOf:k}=r(),Z=(0,u.XN)(w)},8631:(e,t,a)=>{a.r(t),a.d(t,{ListingPageComponent:()=>G,default:()=>H});var i=a(6689),n=a.n(i),l=a(6695),r=a(6022),s=a(4661),o=a(6639),c=a(6134),m=a(1233),u=a(3665),g=a(6319),d=a(5161),p=a(5198),h=a(4941),y=a(5154),I=a(7285),v=a(5863),E=a(6902),L=a(3093),b=a(9930),f=a(2745),_=a(7600),P=a(6963),N=a(2145),C=a(59),T=a(6898),w=a(9997),S=a(9489),k=a(8390),Z=a(6978),x=a(7207),D=a(3820),q=a(2328),F=a(7352);const O=e=>{const{listing:t,variantPrefix:a}=e,i=t.images,l=[a,"".concat(a,"-2x"),"".concat(a,"-4x")];return n().createElement("div",{className:F.Z.productGallery,"data-testid":"carousel"},n().createElement(q.Z,{images:i,imageVariants:["scaled-small","scaled-medium","scaled-large","scaled-xlarge"],thumbnailVariants:l}))},{UUID:M}=g.types,G=e=>{var t,a,l;const[r,s]=(0,i.useState)(e.inquiryModalOpenForListingId===e.params.id),{isAuthenticated:o,currentUser:c,getListing:g,getOwnListing:v,intl:E,onManageDisableScrolling:L,params:q,location:G,scrollingDisabled:H,showListingError:W,reviews:A,fetchReviewsError:V,sendInquiryInProgress:R,sendInquiryError:U,monthlyTimeSlots:z,onFetchTimeSlots:B,onFetchTransactionLineItems:j,lineItems:Y,fetchLineItemsInProgress:J,fetchLineItemsError:X,history:$,callSetInitialValues:K,onSendInquiry:Q,onInitializeCardPaymentData:ee,config:te,routeConfiguration:ae}=e,ie=te.listing,ne=new M(q.id),le=q.variant===d.l4,re=q.variant===d.my,se=le||re?(0,h.YC)(v(ne)):(0,h.Me)(g(ne)),oe=q.slug||(0,d.qi)(se.attributes.title||""),ce={slug:oe,...q},me=re?d.Ms:d.Am,ue=re?"photos":"details",ge=se.id&&se.attributes.state!==u.v7,de=le&&ge,pe=(le||re)&&W&&403===W.status;if(de||pe)return n().createElement(b.d9,{name:"ListingPage",params:ce,search:G.search});const he=n().createElement(f.Z,null);if(W&&404===W.status)return n().createElement(P.Z,null);if(W)return n().createElement(C.mf,{topbar:he,scrollingDisabled:H,intl:E});if(!se.id)return n().createElement(C.h2,{topbar:he,scrollingDisabled:H,intl:E});const{description:ye="",geolocation:Ie=null,price:ve=null,title:Ee="",publicData:Le={},metadata:be={}}=se.attributes,fe=n().createElement("span",null,(0,y.qO)(Ee,{longWordMinLength:16,longWordClass:F.Z.longWord})),_e=se&&se.author,Pe=!(!c||!_e)&&se.author.id.uuid===c.id.uuid,Ne=null===Le||void 0===Le?void 0:Le.transactionProcessAlias,Ce=(0,I.b$)(Ne.split("/")[0]),Te=(0,I.YL)(Ce)?"booking":"purchase",we=_e?se.author:null,Se=(0,h.oY)(we),ke=Pe&&!(null!==c&&void 0!==c&&null!==(t=c.attributes)&&void 0!==t&&t.stripeConnected),Ze=ke?n().createElement("span",{className:F.Z.payoutDetailsWarning},n().createElement(m._H,{id:"ListingPage.payoutDetailsWarning",values:{processType:Te}}),n().createElement(b.RC,{name:"StripePayoutPage"},n().createElement(m._H,{id:"ListingPage.payoutDetailsWarningLink"}))):null,xe=(0,h.d8)(Se,""),{formattedPrice:De}=(0,C.MT)(ve,te.currency,E),qe={params:ce,history:$,routes:ae},Fe=(0,C.kN)({...qe,currentUser:c,callSetInitialValues:K,location:G,setInitialValues:N.LA,setInquiryModalOpen:s}),Oe=(0,C.j3)({...qe,getListing:g,onSendInquiry:Q,setInquiryModalOpen:s}),Me=(0,C.ip)({...qe,currentUser:c,callSetInitialValues:K,getListing:g,onInitializeCardPaymentData:ee}),Ge=(0,C.Ib)(se,"facebook"),He=(0,C.Ib)(se,"twitter"),We=(0,C.Ib)(se,"".concat(te.layout.listingImage.variantPrefix,"-2x")).map((e=>e.url)),Ae=te.marketplaceName,Ve=E.formatMessage({id:"ListingPage.schemaTitle"},{title:Ee,price:De,marketplaceName:Ae}),Re="".concat(te.marketplaceRootURL).concat(G.pathname).concat(G.search).concat(G.hash),Ue=ve?{price:E.formatNumber((0,p.ud)(ve),{minimumFractionDigits:2,maximumFractionDigits:2}),priceCurrency:ve.currency}:{},ze=((null===(a=se.currentStock)||void 0===a||null===(l=a.attributes)||void 0===l?void 0:l.quantity)||0)>0?"https://schema.org/InStock":"https://schema.org/OutOfStock";return n().createElement(b.T3,{title:Ve,scrollingDisabled:H,author:xe,description:ye,facebookImages:Ge,twitterImages:He,schema:{"@context":"http://schema.org","@type":"Product",description:ye,name:Ve,image:We,offers:{"@type":"Offer",url:Re,...Ue,availability:ze}}},n().createElement(b.ip,{className:F.Z.pageRoot,topbar:he,footer:n().createElement(_.Z,null)},n().createElement("div",{className:F.Z.contentWrapperForProductLayout},n().createElement("div",{className:F.Z.mainColumnForProductLayout},se.id&&ke?n().createElement(T.Z,{className:F.Z.actionBarForProductLayout,isOwnListing:Pe,listing:se,showNoPayoutDetailsSet:ke}):null,se.id?n().createElement(T.Z,{className:F.Z.actionBarForProductLayout,isOwnListing:Pe,listing:se,editParams:{id:ne.uuid,slug:oe,type:me,tab:ue}}):null,n().createElement(O,{listing:se,variantPrefix:te.layout.listingImage.variantPrefix}),n().createElement("div",{className:F.Z.mobileHeading},n().createElement(b.H4,{as:"h1",className:F.Z.orderPanelTitle},n().createElement(m._H,{id:"ListingPage.orderTitle",values:{title:fe}}))),n().createElement(w.Z,{text:ye,showAsIngress:!0}),n().createElement(S.Z,{publicData:Le,metadata:be,listingConfig:ie,intl:E}),ie.listingFields.reduce(((e,t)=>{var a,i;const{key:l,enumOptions:r,includeForListingTypes:s,scope:o="public"}=t,c=null===Le||void 0===Le?void 0:Le.listingType,m=null==s||s.includes(c),g="public"===o?Le[l]:"metadata"===o?be[l]:null,d=null!=g;return m&&t.schemaType===u.KP?[...e,n().createElement(k.Z,{key:l,heading:null===t||void 0===t||null===(a=t.showConfig)||void 0===a?void 0:a.label,options:(p=r,p.map((e=>({key:"".concat(e.option),label:e.label})))),selectedOptions:g||[]})]:m&&d&&t.schemaType===u.d$?[...e,n().createElement(w.Z,{key:l,heading:null===t||void 0===t||null===(i=t.showConfig)||void 0===i?void 0:i.label,text:g})]:e;var p}),[]),n().createElement(D.Z,{geolocation:Ie,publicData:Le,listingId:se.id,mapsConfig:te.maps}),n().createElement(Z.Z,{reviews:A,fetchReviewsError:V}),n().createElement(x.Z,{title:Ee,listing:se,authorDisplayName:xe,onContactUser:Fe,isInquiryModalOpen:o&&r,onCloseInquiryModal:()=>s(!1),sendInquiryError:U,sendInquiryInProgress:R,onSubmitInquiry:Oe,currentUser:c,onManageDisableScrolling:L})),n().createElement("div",{className:F.Z.orderColumnForProductLayout},n().createElement(b.el,{className:F.Z.productOrderPanel,listing:se,isOwnListing:Pe,onSubmit:e=>{const t=se.attributes.state===u._L;Pe||t?window.scrollTo(0,0):Me(e)},authorLink:n().createElement(b.RC,{className:F.Z.authorNameLink,name:"ListingPage",params:ce,to:{hash:"#author"}},xe),title:n().createElement(m._H,{id:"ListingPage.orderTitle",values:{title:fe}}),titleDesktop:n().createElement(b.H4,{as:"h1",className:F.Z.orderPanelTitle},n().createElement(m._H,{id:"ListingPage.orderTitle",values:{title:fe}})),payoutDetailsWarning:Ze,author:Se,onManageDisableScrolling:L,onContactUser:Fe,monthlyTimeSlots:z,onFetchTimeSlots:B,onFetchTransactionLineItems:j,lineItems:Y,fetchLineItemsInProgress:J,fetchLineItemsError:X,validListingTypes:te.listing.listingTypes,marketplaceCurrency:te.currency,dayCountAvailableForBooking:te.stripe.dayCountAvailableForBooking,marketplaceName:te.marketplaceName})))))};G.defaultProps={currentUser:null,inquiryModalOpenForListingId:null,showListingError:null,reviews:[],fetchReviewsError:null,monthlyTimeSlots:null,sendInquiryError:null,lineItems:null,fetchLineItemsError:null};const H=(0,l.compose)((0,r.connect)((e=>{const{isAuthenticated:t}=e.auth,{showListingError:a,reviews:i,fetchReviewsError:n,monthlyTimeSlots:l,sendInquiryInProgress:r,sendInquiryError:s,lineItems:o,fetchLineItemsInProgress:c,fetchLineItemsError:m,inquiryModalOpenForListingId:u}=e.ListingPage,{currentUser:g}=e.user;return{isAuthenticated:t,currentUser:g,getListing:t=>{const a={id:t,type:"listing"},i=(0,v.EV)(e,[a]);return 1===i.length?i[0]:null},getOwnListing:t=>{const a={id:t,type:"ownListing"},i=(0,v.EV)(e,[a]);return 1===i.length?i[0]:null},scrollingDisabled:(0,E.uS)(e),inquiryModalOpenForListingId:u,showListingError:a,reviews:i,fetchReviewsError:n,monthlyTimeSlots:l,lineItems:o,fetchLineItemsInProgress:c,fetchLineItemsError:m,sendInquiryInProgress:r,sendInquiryError:s}}),(e=>({onManageDisableScrolling:(t,a)=>e((0,E.R4)(t,a)),callSetInitialValues:(t,a,i)=>e(t(a,i)),onFetchTransactionLineItems:t=>e((0,N.nd)(t)),onSendInquiry:(t,a)=>e((0,N.DE)(t,a)),onInitializeCardPaymentData:()=>e((0,L.aw)()),onFetchTimeSlots:(t,a,i,n)=>e((0,N.HA)(t,a,i,n))}))))((e=>{const t=(0,o.mX)(),a=(0,c.a5)(),i=(0,m.YB)(),l=(0,s.useHistory)(),r=(0,s.useLocation)();return n().createElement(G,Object.assign({config:t,routeConfiguration:a,intl:i,history:l,location:r},e))}))}};
//# sourceMappingURL=ListingPageCarousel.5b293141.chunk.js.map