{"version":3,"file":"main.27d00df0.js","mappings":"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wBCAzBikH,EAAOC,QAAUlkH,QAAQ,iC,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,a,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,a,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,a,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,oB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,Y,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,Y,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,S,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,kB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,oB,uBCAzBikH,EAAOC,QAAUlkH,QAAQ,sB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,mB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,iB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,sB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,iB,uBCAzBikH,EAAOC,QAAUlkH,QAAQ,iB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,mB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,c,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,c,uBCAzBikH,EAAOC,QAAUlkH,QAAQ,gB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,gB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,kB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,S,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,qE,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,mB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,mB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,mB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,mB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,mB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,yB,uBCAzBikH,EAAOC,QAAUlkH,QAAQ,a,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,Q,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,c,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,yB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,Y,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,mB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,mB,wBCAzBikH,EAAOC,QAAUlkH,QAAQ,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","sources":["app.js","webpack://app/./src/components/AspectRatioWrapper/AspectRatioWrapper.module.css?96ec","components/AspectRatioWrapper/AspectRatioWrapper.js","webpack://app/./src/components/Avatar/Avatar.module.css?74bd","components/Avatar/Avatar.js","webpack://app/./src/components/Button/Button.module.css?ce6f","components/Button/Button.js","../external commonjs \"autosize\"","components/ExpandingTextarea/ExpandingTextarea.js","components/ExternalLink/ExternalLink.js","components/FieldBoolean/FieldBoolean.js","webpack://app/./src/components/FieldCheckboxGroup/FieldCheckboxGroup.module.css?2df4","components/FieldCheckboxGroup/FieldCheckboxGroup.js","webpack://app/./src/components/FieldCheckbox/FieldCheckbox.module.css?9af6","components/FieldCheckbox/FieldCheckbox.js","components/FieldCurrencyInput/FieldCurrencyInput.module.css","components/FieldCurrencyInput/FieldCurrencyInput.js","components/FieldPhoneNumberInput/e164Formatter.js","components/FieldPhoneNumberInput/FieldPhoneNumberInput.js","webpack://app/./src/components/FieldRadioButton/FieldRadioButton.module.css?b8e6","components/FieldRadioButton/FieldRadioButton.js","webpack://app/./src/components/FieldReviewRating/FieldReviewRating.module.css?611c","components/FieldReviewRating/FieldReviewRating.js","webpack://app/./src/components/FieldSelect/FieldSelect.module.css?5a83","components/FieldSelect/FieldSelect.js","webpack://app/./src/components/FieldTextInput/FieldTextInput.module.css?4469","components/FieldTextInput/FieldTextInput.js","components/Form/Form.js","components/Heading/Heading.module.css","components/Heading/Heading.js","webpack://app/./src/components/IconAdd/IconAdd.module.css?780c","components/IconAdd/IconAdd.js","webpack://app/./src/components/IconArrowHead/IconArrowHead.module.css?12d3","components/IconArrowHead/IconArrowHead.js","webpack://app/./src/components/IconBannedUser/IconBannedUser.module.css?be02","components/IconBannedUser/IconBannedUser.js","webpack://app/./src/components/IconCheckmark/IconCheckMark.module.css?e816","components/IconCheckmark/IconCheckmark.js","webpack://app/./src/components/IconClose/IconClose.module.css?de5f","components/IconClose/IconClose.js","webpack://app/./src/components/IconDelete/IconDelete.module.css?7a47","components/IconDelete/IconDelete.js","components/IconDisputeOrder/IconDisputeOrder.module.css","components/IconDisputeOrder/IconDisputeOrder.js","webpack://app/./src/components/IconEdit/IconEdit.module.css?ce75","components/IconEdit/IconEdit.js","webpack://app/./src/components/IconEmailAttention/IconEmailAttention.module.css?a8fa","components/IconEmailAttention/IconEmailAttention.js","webpack://app/./src/components/IconEmailSent/IconEmailSent.module.css?d5a7","components/IconEmailSent/IconEmailSent.js","webpack://app/./src/components/IconEmailSuccess/IconEmailSuccess.module.css?5161","components/IconEmailSuccess/IconEmailSuccess.js","components/IconInquiry/IconInquiry.module.css","components/IconInquiry/IconInquiry.js","webpack://app/./src/components/IconKeysSuccess/IconKeysSuccess.module.css?c90b","components/IconKeysSuccess/IconKeysSuccess.js","components/IconKeys/IconKeys.module.css","components/IconKeys/IconKeys.js","webpack://app/./src/components/IconReviewStar/IconReviewStar.module.css?fadc","components/IconReviewStar/IconReviewStar.js","components/IconReviewUser/IconReviewUser.module.css","components/IconReviewUser/IconReviewUser.js","webpack://app/./src/components/IconSearch/IconSearch.module.css?bcb0","components/IconSearch/IconSearch.js","webpack://app/./src/components/IconSocialMediaFacebook/IconSocialMediaFacebook.module.css?7293","components/IconSocialMediaFacebook/IconSocialMediaFacebook.js","webpack://app/./src/components/IconSocialMediaInstagram/IconSocialMediaInstagram.module.css?979f","components/IconSocialMediaInstagram/IconSocialMediaInstagram.js","webpack://app/./src/components/IconSocialMediaTwitter/IconSocialMediaTwitter.module.css?747c","components/IconSocialMediaTwitter/IconSocialMediaTwitter.js","webpack://app/./src/components/IconSpinner/IconSpinner.module.css?7b53","components/IconSpinner/IconSpinner.js","webpack://app/./src/components/IconSuccess/IconSuccess.module.css?7bd6","components/IconSuccess/IconSuccess.js","webpack://app/./src/components/ImageFromFile/ImageFromFile.module.css?a39e","components/ImageFromFile/ImageFromFile.js","components/LayoutComposer/LayoutComposer.js","webpack://app/./src/components/LayoutComposer/LayoutSingleColumn/LayoutSingleColumn.module.css?58b8","components/LayoutComposer/LayoutSingleColumn/LayoutSingleColumn.js","components/LayoutComposer/LayoutSideNavigation/hookGlobalState.js","webpack://app/./src/components/LayoutComposer/LayoutSideNavigation/LayoutSideNavigation.module.css?b611","components/LayoutComposer/LayoutSideNavigation/LayoutWrapperAccountSettingsSideNav.js","components/LayoutComposer/LayoutSideNavigation/LayoutSideNavigation.js","components/LayoutComposer/index.js","webpack://app/./src/components/LimitedAccessBanner/LimitedAccessBanner.module.css?ab7f","components/LimitedAccessBanner/LimitedAccessBanner.js","webpack://app/./src/components/ListingCard/ListingCard.module.css?d127","components/ListingCard/ListingCard.js","webpack://app/./src/components/ListingLink/ListingLink.module.css?0754","components/ListingLink/ListingLink.js","components/LocationAutocompleteInput/LocationAutocompleteInput.js","components/Logo/LinkedLogo.js","webpack://app/./src/components/Logo/Logo.module.css?6a46","components/Logo/Logo.js","webpack://app/./src/components/MaintenanceMode/MaintenanceMode.module.css?8b09","components/MaintenanceMode/MaintenanceMode.js","../external commonjs \"mapbox-gl-multitouch\"","../external commonjs \"lodash/uniqueId\"","components/Map/DynamicMapboxMap.js","../external commonjs \"@mapbox/polyline\"","components/Map/StaticMapboxMap.js","components/Map/MapboxMap.js","components/Map/DynamicGoogleMap.js","components/Map/StaticGoogleMap.js","components/Map/GoogleMap.js","webpack://app/./src/components/Map/Map.module.css?2f12","components/Map/Map.js","webpack://app/./src/components/MenuContent/MenuContent.module.css?c4d7","components/MenuContent/MenuContent.js","webpack://app/./src/components/MenuItem/MenuItem.module.css?2aaa","components/MenuItem/MenuItem.js","webpack://app/./src/components/MenuLabel/MenuLabel.module.css?3d80","components/MenuLabel/MenuLabel.js","webpack://app/./src/components/Menu/Menu.module.css?1a95","components/Menu/Menu.js","webpack://app/./src/components/ModalInMobile/ModalInMobile.module.css?8d75","components/ModalInMobile/ModalInMobile.js","webpack://app/./src/components/ModalMissingInformation/ModalMissingInformation.module.css?4b78","components/ModalMissingInformation/EmailReminder.js","components/ModalMissingInformation/ModalMissingInformation.js","webpack://app/./src/components/Modal/Modal.module.css?28d7","components/Modal/Modal.js","components/NamedLink/NamedLink.js","components/NamedRedirect/NamedRedirect.js","webpack://app/./src/components/NotificationBadge/NotificationBadge.module.css?68f9","components/NotificationBadge/NotificationBadge.js","webpack://app/./src/components/OrderBreakdown/OrderBreakdown.module.css?8ed0","components/OrderBreakdown/LineItemBookingPeriod.js","components/OrderBreakdown/LineItemBasePriceMaybe.js","components/OrderBreakdown/LineItemSubTotalMaybe.js","components/OrderBreakdown/LineItemShippingFeeMaybe.js","components/OrderBreakdown/LineItemPickupFeeMaybe.js","components/OrderBreakdown/LineItemCustomerCommissionMaybe.js","components/OrderBreakdown/LineItemCustomerCommissionRefundMaybe.js","components/OrderBreakdown/LineItemProviderCommissionMaybe.js","components/OrderBreakdown/LineItemProviderCommissionRefundMaybe.js","components/OrderBreakdown/LineItemRefundMaybe.js","components/OrderBreakdown/LineItemTotalPrice.js","components/OrderBreakdown/LineItemUnknownItemsMaybe.js","components/OrderBreakdown/OrderBreakdown.js","components/OrderPanel/OrderPanel.js","webpack://app/./src/components/OutsideClickHandler/OutsideClickHandler.module.css?6747","components/OutsideClickHandler/OutsideClickHandler.js","util/seo.js","webpack://app/./src/components/Page/Page.module.css?cfe1","components/Page/Page.js","../external commonjs \"lodash/range\"","webpack://app/./src/components/PaginationLinks/PaginationLinks.module.css?9a7b","components/PaginationLinks/PaginationLinks.js","components/Promised/Promised.js","../external commonjs \"lodash/includes\"","webpack://app/./src/components/PropertyGroup/PropertyGroup.module.css?5934","components/PropertyGroup/PropertyGroup.js","webpack://app/./src/components/RangeSlider/Handle.module.css?7a9e","components/RangeSlider/Handle.js","webpack://app/./src/components/RangeSlider/Track.module.css?4cf8","components/RangeSlider/Track.js","webpack://app/./src/components/RangeSlider/RangeSlider.module.css?82ed","components/RangeSlider/RangeSlider.js","webpack://app/./src/components/ResponsiveBackgroundImageContainer/ResponsiveBackgroundImageContainer.module.css?50ca","components/ResponsiveBackgroundImageContainer/ResponsiveBackgroundImageContainer.js","components/ResponsiveImage/NoImageIcon.js","webpack://app/./src/components/ResponsiveImage/ResponsiveImage.module.css?2b2c","components/ResponsiveImage/ResponsiveImage.js","components/ReviewRating/ReviewRating.js","webpack://app/./src/components/Reviews/Reviews.module.css?7248","components/Reviews/Reviews.js","components/SavedCardDetails/IconCard/IconCard.module.css","components/SavedCardDetails/IconCard/IconCard.js","webpack://app/./src/components/SavedCardDetails/SavedCardDetails.module.css?7cf5","components/SavedCardDetails/SavedCardDetails.js","webpack://app/./src/components/StripeBankAccountTokenInputField/StripeBankAccountTokenInputField.module.css?832b","components/StripeBankAccountTokenInputField/StripeBankAccountRequiredInput.js","components/StripeBankAccountTokenInputField/StripeBankAccountTokenInputField.js","components/StripeBankAccountTokenInputField/StripeBankAccountTokenInputField.util.js","webpack://app/./src/components/StripeConnectAccountForm/StripeConnectAccountForm.module.css?d174","components/StripeConnectAccountForm/StripeConnectAccountForm.js","webpack://app/./src/components/StripeConnectAccountStatusBox/StripeConnectAccountStatusBox.module.css?ddad","components/StripeConnectAccountStatusBox/StripeConnectAccountStatusBox.js","webpack://app/./src/components/StripePaymentAddress/StripePaymentAddress.module.css?8dba","components/StripePaymentAddress/StripePaymentAddress.js","webpack://app/./src/components/TabNavHorizontal/TabNavHorizontal.module.css?457d","components/TabNavHorizontal/TabNavHorizontal.js","webpack://app/./src/components/TabNav/TabNav.module.css?74e8","components/TabNav/TabNav.js","webpack://app/./src/components/Tabs/Tabs.module.css?936c","components/Tabs/Tabs.js","webpack://app/./src/components/TimeRange/TimeRange.module.css?f157","components/TimeRange/TimeRange.js","components/UserDisplayName/UserDisplayName.js","webpack://app/./src/components/UserNav/UserNav.module.css?58d8","components/UserNav/UserNav.js","webpack://app/./src/components/ValidationError/ValidationError.module.css?603a","components/ValidationError/ValidationError.js","components/index.js","config/configStripe.js","config/configListing.js","config/configSearch.js","config/configDefaultLocationSearches.js","config/configMaps.js","config/configBranding.js","config/configLayout.js","config/configAnalytics.js","config/configDefault.js","config/settings.js","config/settingsCurrency.js","containers/AuthenticationPage/AuthenticationPage.duck.js","containers/CheckoutPage/CheckoutPage.duck.js","../external commonjs \"lodash/merge\"","containers/ContactDetailsPage/ContactDetailsPage.duck.js","containers/EditListingPage/EditListingPage.duck.js","containers/FooterContainer/FooterContainer.js","../external commonjs \"lodash/reverse\"","../external commonjs \"lodash/sortBy\"","containers/InboxPage/InboxPage.duck.js","containers/LandingPage/LandingPage.duck.js","containers/ListingPage/ListingPage.duck.js","containers/ManageListingsPage/ManageListingsPage.duck.js","webpack://app/./src/containers/NotFoundPage/SearchForm/SearchForm.module.css?f569","containers/NotFoundPage/SearchForm/IconSearchDesktop.js","containers/NotFoundPage/SearchForm/SearchForm.js","webpack://app/./src/containers/NotFoundPage/NotFoundPage.module.css?7c8b","containers/NotFoundPage/NotFoundPage.js","containers/PasswordChangePage/PasswordChangePage.duck.js","containers/PasswordRecoveryPage/PasswordRecoveryPage.duck.js","containers/PasswordResetPage/PasswordResetPage.duck.js","containers/PaymentMethodsPage/PaymentMethodsPage.duck.js","containers/PreviewResolverPage/PreviewResolverPage.js","containers/PrivacyPolicyPage/PrivacyPolicyPage.duck.js","containers/ProfilePage/ProfilePage.duck.js","containers/ProfileSettingsPage/ProfileSettingsPage.duck.js","containers/SearchPage/SearchPage.duck.js","containers/StripePayoutPage/StripePayoutPage.duck.js","containers/TermsOfServicePage/TermsOfServicePage.duck.js","containers/TopbarContainer/TopbarContainer.js","containers/TransactionPage/TransactionPage.duck.js","containers/CMSPage/CMSPage.duck.js","containers/EmailVerificationPage/EmailVerificationPage.duck.js","containers/pageDataLoadingAPI.js","context/configurationContext.js","context/routeConfigurationContext.js","ducks/auth.duck.js","ducks/emailVerification.duck.js","ducks/hostedAssets.duck.js","ducks/marketplaceData.duck.js","ducks/paymentMethods.duck.js","ducks/routing.duck.js","ducks/stripe.duck.js","ducks/stripeConnectAccount.duck.js","ducks/ui.duck.js","ducks/user.duck.js","../external commonjs \"core-js/modules/esnext.map.delete-all.js\"","../external commonjs \"core-js/modules/esnext.map.every.js\"","../external commonjs \"core-js/modules/esnext.map.filter.js\"","../external commonjs \"core-js/modules/esnext.map.find.js\"","../external commonjs \"core-js/modules/esnext.map.find-key.js\"","../external commonjs \"core-js/modules/esnext.map.from.js\"","../external commonjs \"core-js/modules/esnext.map.group-by.js\"","../external commonjs \"core-js/modules/esnext.map.includes.js\"","../external commonjs \"core-js/modules/esnext.map.key-by.js\"","../external commonjs \"core-js/modules/esnext.map.key-of.js\"","../external commonjs \"core-js/modules/esnext.map.map-keys.js\"","../external commonjs \"core-js/modules/esnext.map.map-values.js\"","../external commonjs \"core-js/modules/esnext.map.merge.js\"","../external commonjs \"core-js/modules/esnext.map.of.js\"","../external commonjs \"core-js/modules/esnext.map.reduce.js\"","../external commonjs \"core-js/modules/esnext.map.some.js\"","../external commonjs \"core-js/modules/esnext.map.update.js\"","../external commonjs \"core-js/modules/web.dom-collections.iterator.js\"","../external commonjs \"core-js/modules/esnext.set.add-all.js\"","../external commonjs \"core-js/modules/esnext.set.delete-all.js\"","../external commonjs \"core-js/modules/esnext.set.difference.js\"","../external commonjs \"core-js/modules/esnext.set.every.js\"","../external commonjs \"core-js/modules/esnext.set.filter.js\"","../external commonjs \"core-js/modules/esnext.set.find.js\"","../external commonjs \"core-js/modules/esnext.set.from.js\"","../external commonjs \"core-js/modules/esnext.set.intersection.js\"","../external commonjs \"core-js/modules/esnext.set.is-disjoint-from.js\"","../external commonjs \"core-js/modules/esnext.set.is-subset-of.js\"","../external commonjs \"core-js/modules/esnext.set.is-superset-of.js\"","../external commonjs \"core-js/modules/esnext.set.join.js\"","../external commonjs \"core-js/modules/esnext.set.map.js\"","../external commonjs \"core-js/modules/esnext.set.of.js\"","../external commonjs \"core-js/modules/esnext.set.reduce.js\"","../external commonjs \"core-js/modules/esnext.set.some.js\"","../external commonjs \"core-js/modules/esnext.set.symmetric-difference.js\"","../external commonjs \"core-js/modules/esnext.set.union.js\"","../external commonjs \"raf/polyfill\"","analytics/handlers.js","index.js","webpack://app/./src/routing/LoadableComponentErrorBoundary/LoadableComponentErrorBoundary.module.css?e329","routing/LoadableComponentErrorBoundary/LoadableComponentErrorBoundaryPage.js","routing/LoadableComponentErrorBoundary/LoadableComponentErrorBoundary.js","routing/Routes.js","routing/routeConfiguration.js","../external commonjs \"redux-thunk\"","reducers.js","analytics/analytics.js","store.js","transactions/transactionProcessPurchase.js","transactions/transactionProcessBooking.js","transactions/transactionProcessInquiry.js","transactions/transaction.js","translations/countryCodes.js","util/api.js","util/configHelpers.js","../external commonjs \"lodash/has\"","../external commonjs \"lodash/trimEnd\"","util/currency.js","../external commonjs \"lodash/isArray\"","util/data.js","util/dates.js","util/errors.js","util/generators.js","util/includeScripts.js","../external commonjs \"@sentry/browser\"","util/log.js","../external commonjs \"lodash/memoize\"","../external commonjs \"seedrandom\"","util/maps.js","util/polyfills.js","util/reactIntl.js","../external commonjs \"lodash/flow\"","../external commonjs \"lodash/flatMap\"","../external commonjs \"lodash/map\"","util/richText.js","../external commonjs \"lodash/find\"","../external commonjs \"path-to-regexp\"","util/routes.js","util/sanitize.js","util/sdkLoader.js","util/search.js","util/types.js","../external commonjs \"lodash/throttle\"","util/uiHelpers.js","../external commonjs \"query-string\"","util/urlHelpers.js","../external commonjs \"lodash/toPairs\"","util/validators.js","webpack://app/./src/components/Logo/LinkedLogo.module.css?c7af","webpack://app/./src/components/OrderPanel/OrderPanel.module.css?e2f5","../external commonjs \"@fortawesome/free-solid-svg-icons\"","../external commonjs \"@fortawesome/react-fontawesome\"","../external commonjs \"classnames\"","../external commonjs \"decimal.js\"","../external commonjs \"final-form\"","../external commonjs \"final-form-arrays\"","../external commonjs \"invariant\"","../external commonjs \"js-cookie\"","../external commonjs \"lodash\"","../external commonjs \"lodash/debounce\"","../external commonjs \"lodash/difference\"","../external commonjs \"lodash/differenceBy\"","../external commonjs \"lodash/dropWhile\"","../external commonjs \"lodash/groupBy\"","../external commonjs \"lodash/intersection\"","../external commonjs \"lodash/isEmpty\"","../external commonjs \"lodash/isEqual\"","../external commonjs \"lodash/mapValues\"","../external commonjs \"lodash/omit\"","../external commonjs \"lodash/pick\"","../external commonjs \"lodash/pickBy\"","../external commonjs \"lodash/reduce\"","../external commonjs \"lodash/truncate\"","../external commonjs \"moment\"","../external commonjs \"moment-timezone/builds/moment-timezone-with-data-10-year-range.min\"","../external commonjs \"moment/locale/de\"","../external commonjs \"moment/locale/es\"","../external commonjs \"moment/locale/fi\"","../external commonjs \"moment/locale/fr\"","../external commonjs \"moment/locale/nl\"","../external commonjs \"moment/min/locales.min\"","../external commonjs \"prop-types\"","../external commonjs \"react\"","../external commonjs \"react-dates\"","../external commonjs \"react-dates/initialize\"","../external commonjs \"react-dom\"","../external commonjs \"react-dom/server\"","../external commonjs \"react-final-form\"","../external commonjs \"react-final-form-arrays\"","../external commonjs \"react-helmet-async\"","../external commonjs \"react-image-gallery\"","../external commonjs \"react-intl\"","../external commonjs \"react-redux\"","../external commonjs \"react-router-dom\"","../external commonjs \"redux\"","../external commonjs \"rehype-react\"","../external commonjs \"rehype-sanitize\"","../external commonjs \"remark-parse\"","../external commonjs \"remark-rehype\"","../external commonjs \"sharetribe-flex-sdk\"","../external commonjs \"smoothscroll-polyfill\"","../external commonjs \"unified\"","../external commonjs2 \"@loadable/component\"","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/chunk prefetch function","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/publicPath","../webpack/runtime/css loading","../webpack/runtime/require chunk loading","../webpack/runtime/startup prefetch","../webpack/startup"],"sourcesContent":["import React from 'react';\r\nimport { any, string } from 'prop-types';\r\nimport ReactDOMServer from 'react-dom/server';\r\n\r\n// react-dates needs to be initialized before using any react-dates component\r\n// https://github.com/airbnb/react-dates#initialize\r\n// NOTE: Initializing it here will initialize it also for app.test.js\r\nimport 'react-dates/initialize';\r\nimport { HelmetProvider } from 'react-helmet-async';\r\nimport { BrowserRouter, StaticRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport loadable from '@loadable/component';\r\nimport difference from 'lodash/difference';\r\nimport mapValues from 'lodash/mapValues';\r\nimport moment from 'moment';\r\n\r\n// Configs and store setup\r\nimport defaultConfig from './config/configDefault';\r\nimport appSettings from './config/settings';\r\nimport configureStore from './store';\r\n\r\n// utils\r\nimport { RouteConfigurationProvider } from './context/routeConfigurationContext';\r\nimport { ConfigurationProvider } from './context/configurationContext';\r\nimport { mergeConfig } from './util/configHelpers';\r\nimport { IntlProvider } from './util/reactIntl';\r\nimport { IncludeScripts } from './util/includeScripts';\r\n\r\nimport { MaintenanceMode } from './components';\r\n\r\n// routing\r\nimport routeConfiguration from './routing/routeConfiguration';\r\nimport Routes from './routing/Routes';\r\n\r\n// Sharetribe Web Template uses English translations as default translations.\r\nimport defaultMessages from './translations/en.json';\r\n\r\n// If you want to change the language of default (fallback) translations,\r\n// change the imports to match the wanted locale:\r\n//\r\n//   1) Change the language in the config.js file!\r\n//   2) Import correct locale rules for Moment library\r\n//   3) Use the `messagesInLocale` import to add the correct translation file.\r\n//   4) (optionally) To support older browsers you need add the intl-relativetimeformat npm packages\r\n//      and take it into use in `util/polyfills.js`\r\n\r\n// Note that there is also translations in './translations/countryCodes.js' file\r\n// This file contains ISO 3166-1 alpha-2 country codes, country names and their translations in our default languages\r\n// This used to collect billing address in StripePaymentAddress on CheckoutPage\r\n\r\n// Step 2:\r\n// If you are using a non-english locale with moment library,\r\n// you should also import time specific formatting rules for that locale\r\n// There are 2 ways to do it:\r\n// - you can add your preferred locale to MomentLocaleLoader or\r\n// - stop using MomentLocaleLoader component and directly import the locale here.\r\n// E.g. for French:\r\n// import 'moment/locale/fr';\r\n// const hardCodedLocale = process.env.NODE_ENV === 'test' ? 'en' : 'fr';\r\n\r\n// Step 3:\r\n// The \"./translations/en.json\" has generic English translations\r\n// that should work as a default translation if some translation keys are missing\r\n// from the hosted translation.json (which can be edited in Console). The other files\r\n// (e.g. en.json) in that directory has Biketribe themed translations.\r\n//\r\n// If you are using a non-english locale, point `messagesInLocale` to correct <lang>.json file.\r\n// That way the priority order would be:\r\n//   1. hosted translation.json\r\n//   2. <lang>.json\r\n//   3. en.json\r\n//\r\n// I.e. remove \"const messagesInLocale\" and add import for the correct locale:\r\n// import messagesInLocale from './translations/fr.json';\r\nconst messagesInLocale = {};\r\n\r\n// If translation key is missing from `messagesInLocale` (e.g. fr.json),\r\n// corresponding key will be added to messages from `defaultMessages` (en.json)\r\n// to prevent missing translation key errors.\r\nconst addMissingTranslations = (sourceLangTranslations, targetLangTranslations) => {\r\n  const sourceKeys = Object.keys(sourceLangTranslations);\r\n  const targetKeys = Object.keys(targetLangTranslations);\r\n\r\n  // if there's no translations defined for target language, return source translations\r\n  if (targetKeys.length === 0) {\r\n    return sourceLangTranslations;\r\n  }\r\n  const missingKeys = difference(sourceKeys, targetKeys);\r\n\r\n  const addMissingTranslation = (translations, missingKey) => ({\r\n    ...translations,\r\n    [missingKey]: sourceLangTranslations[missingKey],\r\n  });\r\n\r\n  return missingKeys.reduce(addMissingTranslation, targetLangTranslations);\r\n};\r\n\r\n// Get default messages for a given locale.\r\n//\r\n// Note: Locale should not affect the tests. We ensure this by providing\r\n//       messages with the key as the value of each message and discard the value.\r\n//       { 'My.translationKey1': 'My.translationKey1', 'My.translationKey2': 'My.translationKey2' }\r\nconst isTestEnv = process.env.NODE_ENV === 'test';\r\nconst localeMessages = isTestEnv\r\n  ? mapValues(defaultMessages, (val, key) => key)\r\n  : addMissingTranslations(defaultMessages, messagesInLocale);\r\n\r\n// For customized apps, this dynamic loading of locale files is not necessary.\r\n// It helps locale change from configDefault.js file or hosted configs, but customizers should probably\r\n// just remove this and directly import the necessary locale on step 2.\r\nconst MomentLocaleLoader = props => {\r\n  const { children, locale } = props;\r\n  const isAlreadyImportedLocale =\r\n    typeof hardCodedLocale !== 'undefined' && locale === hardCodedLocale;\r\n\r\n  // Moment's built-in locale does not need loader\r\n  const NoLoader = props => <>{props.children()}</>;\r\n\r\n  // The default locale is en (en-US). Here we dynamically load one of the other common locales.\r\n  // However, the default is to include all supported locales package from moment library.\r\n  const MomentLocale =\r\n    ['en', 'en-US'].includes(locale) || isAlreadyImportedLocale\r\n      ? NoLoader\r\n      : ['fr', 'fr-FR'].includes(locale)\r\n      ? loadable.lib(() => import(/* webpackChunkName: \"fr\" */ 'moment/locale/fr'))\r\n      : ['de', 'de-DE'].includes(locale)\r\n      ? loadable.lib(() => import(/* webpackChunkName: \"de\" */ 'moment/locale/de'))\r\n      : ['es', 'es-ES'].includes(locale)\r\n      ? loadable.lib(() => import(/* webpackChunkName: \"es\" */ 'moment/locale/es'))\r\n      : ['fi', 'fi-FI'].includes(locale)\r\n      ? loadable.lib(() => import(/* webpackChunkName: \"fi\" */ 'moment/locale/fi'))\r\n      : ['nl', 'nl-NL'].includes(locale)\r\n      ? loadable.lib(() => import(/* webpackChunkName: \"nl\" */ 'moment/locale/nl'))\r\n      : loadable.lib(() => import(/* webpackChunkName: \"locales\" */ 'moment/min/locales.min'));\r\n\r\n  return (\r\n    <MomentLocale>\r\n      {() => {\r\n        // Set the Moment locale globally\r\n        // See: http://momentjs.com/docs/#/i18n/changing-locale/\r\n        moment.locale(locale);\r\n        return children;\r\n      }}\r\n    </MomentLocale>\r\n  );\r\n};\r\n\r\nconst Configurations = props => {\r\n  const { appConfig, children } = props;\r\n  const routeConfig = routeConfiguration(appConfig.layout);\r\n  const locale = isTestEnv ? 'en' : appConfig.localization.locale;\r\n\r\n  return (\r\n    <ConfigurationProvider value={appConfig}>\r\n      <MomentLocaleLoader locale={locale}>\r\n        <RouteConfigurationProvider value={routeConfig}>{children}</RouteConfigurationProvider>\r\n      </MomentLocaleLoader>\r\n    </ConfigurationProvider>\r\n  );\r\n};\r\n\r\nconst MaintenanceModeError = props => {\r\n  const { locale, messages, helmetContext } = props;\r\n  return (\r\n    <IntlProvider locale={locale} messages={messages} textComponent=\"span\">\r\n      <HelmetProvider context={helmetContext}>\r\n        <MaintenanceMode />\r\n      </HelmetProvider>\r\n    </IntlProvider>\r\n  );\r\n};\r\n\r\n// This displays a warning if environment variable key contains a string \"SECRET\"\r\nconst EnvironmentVariableWarning = props => {\r\n  const suspiciousEnvKey = props.suspiciousEnvKey;\r\n  // https://github.com/sharetribe/flex-integration-api-examples#warning-usage-with-your-web-app--website\r\n  const containsINTEG = str => str.toUpperCase().includes('INTEG');\r\n  return (\r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        height: '100vh',\r\n      }}\r\n    >\r\n      <div style={{ width: '600px' }}>\r\n        <p>\r\n          Are you sure you want to reveal to the public web an environment variable called:{' '}\r\n          <b>{suspiciousEnvKey}</b>\r\n        </p>\r\n        <p>\r\n          All the environment variables that start with <i>REACT_APP_</i> prefix will be part of the\r\n          published React app that's running on a browser. Those variables are, therefore, visible\r\n          to anyone on the web. Secrets should only be used on a secure environment like the server.\r\n        </p>\r\n        {containsINTEG(suspiciousEnvKey) ? (\r\n          <p>\r\n            {'Note: '}\r\n            <span style={{ color: 'red' }}>\r\n              Do not use Integration API directly from the web app.\r\n            </span>\r\n          </p>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const ClientApp = props => {\r\n  const { store, hostedTranslations = {}, hostedConfig = {} } = props;\r\n  const appConfig = mergeConfig(hostedConfig, defaultConfig);\r\n\r\n  // Show warning on the localhost:3000, if the environment variable key contains \"SECRET\"\r\n  if (appSettings.dev) {\r\n    const envVars = process.env || {};\r\n    const envVarKeys = Object.keys(envVars);\r\n    const containsSECRET = str => str.toUpperCase().includes('SECRET');\r\n    const suspiciousSECRETKey = envVarKeys.find(\r\n      key => key.startsWith('REACT_APP_') && containsSECRET(key)\r\n    );\r\n\r\n    if (suspiciousSECRETKey) {\r\n      return <EnvironmentVariableWarning suspiciousEnvKey={suspiciousSECRETKey} />;\r\n    }\r\n  }\r\n\r\n  // Show MaintenanceMode if the mandatory configurations are not available\r\n  if (!appConfig.hasMandatoryConfigurations) {\r\n    return (\r\n      <MaintenanceModeError\r\n        locale={appConfig.localization.locale}\r\n        messages={{ ...localeMessages, ...hostedTranslations }}\r\n      />\r\n    );\r\n  }\r\n\r\n  // Marketplace color and branding image comes from configs\r\n  // If set, we need to create CSS Property and set it to DOM (documentElement is selected here)\r\n  // This provides marketplace color for everything under <html> tag (including modals/portals)\r\n  // Note: This is also set on Page component to provide server-side rendering.\r\n  const elem = window.document.documentElement;\r\n  if (appConfig.branding.marketplaceColor) {\r\n    elem.style.setProperty('--marketplaceColor', appConfig.branding.marketplaceColor);\r\n    elem.style.setProperty('--marketplaceColorDark', appConfig.branding.marketplaceColorDark);\r\n    elem.style.setProperty('--marketplaceColorLight', appConfig.branding.marketplaceColorLight);\r\n  }\r\n  // This gives good input for debugging issues on live environments, but with test it's not needed.\r\n  const logLoadDataCalls = appSettings?.env !== 'test';\r\n\r\n  return (\r\n    <Configurations appConfig={appConfig}>\r\n      <IntlProvider\r\n        locale={appConfig.localization.locale}\r\n        messages={{ ...localeMessages, ...hostedTranslations }}\r\n        textComponent=\"span\"\r\n      >\r\n        <Provider store={store}>\r\n          <HelmetProvider>\r\n            <IncludeScripts config={appConfig} />\r\n            <BrowserRouter>\r\n              <Routes logLoadDataCalls={logLoadDataCalls} />\r\n            </BrowserRouter>\r\n          </HelmetProvider>\r\n        </Provider>\r\n      </IntlProvider>\r\n    </Configurations>\r\n  );\r\n};\r\n\r\nClientApp.propTypes = { store: any.isRequired };\r\n\r\nexport const ServerApp = props => {\r\n  const { url, context, helmetContext, store, hostedTranslations = {}, hostedConfig = {} } = props;\r\n  const appConfig = mergeConfig(hostedConfig, defaultConfig);\r\n  HelmetProvider.canUseDOM = false;\r\n\r\n  // Show MaintenanceMode if the mandatory configurations are not available\r\n  if (!appConfig.hasMandatoryConfigurations) {\r\n    return (\r\n      <MaintenanceModeError\r\n        locale={appConfig.localization.locale}\r\n        messages={{ ...localeMessages, ...hostedTranslations }}\r\n        helmetContext={helmetContext}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Configurations appConfig={appConfig}>\r\n      <IntlProvider\r\n        locale={appConfig.localization.locale}\r\n        messages={{ ...localeMessages, ...hostedTranslations }}\r\n        textComponent=\"span\"\r\n      >\r\n        <Provider store={store}>\r\n          <HelmetProvider context={helmetContext}>\r\n            <IncludeScripts config={appConfig} />\r\n            <StaticRouter location={url} context={context}>\r\n              <Routes />\r\n            </StaticRouter>\r\n          </HelmetProvider>\r\n        </Provider>\r\n      </IntlProvider>\r\n    </Configurations>\r\n  );\r\n};\r\n\r\nServerApp.propTypes = { url: string.isRequired, context: any.isRequired, store: any.isRequired };\r\n\r\n/**\r\n * Render the given route.\r\n *\r\n * @param {String} url Path to render\r\n * @param {Object} serverContext Server rendering context from react-router\r\n *\r\n * @returns {Object} Object with keys:\r\n *  - {String} body: Rendered application body of the given route\r\n *  - {Object} head: Application head metadata from react-helmet\r\n */\r\nexport const renderApp = (\r\n  url,\r\n  serverContext,\r\n  preloadedState,\r\n  hostedTranslations,\r\n  hostedConfig,\r\n  collectChunks\r\n) => {\r\n  // Don't pass an SDK instance since we're only rendering the\r\n  // component tree with the preloaded store state and components\r\n  // shouldn't do any SDK calls in the (server) rendering lifecycle.\r\n  const store = configureStore(preloadedState);\r\n\r\n  const helmetContext = {};\r\n\r\n  // When rendering the app on server, we wrap the app with webExtractor.collectChunks\r\n  // This is needed to figure out correct chunks/scripts to be included to server-rendered page.\r\n  // https://loadable-components.com/docs/server-side-rendering/#3-setup-chunkextractor-server-side\r\n  const WithChunks = collectChunks(\r\n    <ServerApp\r\n      url={url}\r\n      context={serverContext}\r\n      helmetContext={helmetContext}\r\n      store={store}\r\n      hostedTranslations={hostedTranslations}\r\n      hostedConfig={hostedConfig}\r\n    />\r\n  );\r\n  const body = ReactDOMServer.renderToString(WithChunks);\r\n  const { helmet: head } = helmetContext;\r\n  return { head, body };\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"AspectRatioWrapper_root__yBlNN\",\"aspectPadding\":\"AspectRatioWrapper_aspectPadding__XPFSi\",\"aspectBox\":\"AspectRatioWrapper_aspectBox__VCe7r\"};","import React from 'react';\r\nimport { node, number, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './AspectRatioWrapper.module.css';\r\n\r\nconst AspectRatioWrapper = props => {\r\n  const { children, className, rootClassName, width, height, ...rest } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  const aspectRatio = (height / width) * 100;\r\n  const paddingBottom = `${aspectRatio}%`;\r\n\r\n  return (\r\n    <div className={classes} {...rest}>\r\n      <div className={css.aspectPadding} style={{ paddingBottom }}>\r\n        <div className={css.aspectBox}>{children}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nAspectRatioWrapper.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  children: null,\r\n};\r\n\r\nAspectRatioWrapper.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  width: number.isRequired,\r\n  height: number.isRequired,\r\n  children: node,\r\n};\r\n\r\nexport default AspectRatioWrapper;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"avatarBase\":\"Avatar_avatarBase__eKx1k\",\"root\":\"Avatar_root__bR+tG Avatar_avatarBase__eKx1k\",\"initials\":\"Avatar_initials__UKU8u textXSmall\",\"avatarImage\":\"Avatar_avatarImage__OyBcB\",\"smallAvatar\":\"Avatar_smallAvatar__LRRfn Avatar_avatarBase__eKx1k\",\"initialsSmall\":\"Avatar_initialsSmall__h0zj+\",\"mediumAvatar\":\"Avatar_mediumAvatar__Ky+mT Avatar_avatarBase__eKx1k\",\"initialsMedium\":\"Avatar_initialsMedium__-+6sO textLarge\",\"largeAvatar\":\"Avatar_largeAvatar__JacUh Avatar_avatarBase__eKx1k\",\"initialsLarge\":\"Avatar_initialsLarge__ClYd3 h3\",\"bannedUserIcon\":\"Avatar_bannedUserIcon__NStj4\"};","import React from 'react';\r\nimport { string, oneOfType, bool } from 'prop-types';\r\nimport { injectIntl, intlShape } from '../../util/reactIntl';\r\nimport classNames from 'classnames';\r\nimport { propTypes } from '../../util/types';\r\nimport {\r\n  ensureUser,\r\n  ensureCurrentUser,\r\n  userDisplayNameAsString,\r\n  userAbbreviatedName,\r\n} from '../../util/data';\r\nimport { ResponsiveImage, IconBannedUser, NamedLink } from '../../components/';\r\n\r\nimport css from './Avatar.module.css';\r\n\r\n// Responsive image sizes hint\r\nconst AVATAR_SIZES = '40px';\r\nconst AVATAR_SIZES_MEDIUM = '60px';\r\nconst AVATAR_SIZES_LARGE = '96px';\r\n\r\nconst AVATAR_IMAGE_VARIANTS = [\r\n  // 40x40\r\n  'square-xsmall',\r\n\r\n  // 80x80\r\n  'square-xsmall2x',\r\n\r\n  // 240x240\r\n  'square-small',\r\n\r\n  // 480x480\r\n  'square-small2x',\r\n];\r\n\r\nexport const AvatarComponent = props => {\r\n  const {\r\n    rootClassName,\r\n    className,\r\n    initialsClassName,\r\n    user,\r\n    renderSizes,\r\n    disableProfileLink,\r\n    intl,\r\n  } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  const userIsCurrentUser = user && user.type === 'currentUser';\r\n  const avatarUser = userIsCurrentUser ? ensureCurrentUser(user) : ensureUser(user);\r\n\r\n  const isBannedUser = avatarUser.attributes.banned;\r\n  const isDeletedUser = avatarUser.attributes.deleted;\r\n\r\n  const defaultUserDisplayName = isBannedUser\r\n    ? intl.formatMessage({ id: 'Avatar.bannedUserDisplayName' })\r\n    : isDeletedUser\r\n    ? intl.formatMessage({ id: 'Avatar.deletedUserDisplayName' })\r\n    : '';\r\n\r\n  const defaultUserAbbreviatedName = '';\r\n\r\n  const displayName = userDisplayNameAsString(avatarUser, defaultUserDisplayName);\r\n  const abbreviatedName = userAbbreviatedName(avatarUser, defaultUserAbbreviatedName);\r\n  const rootProps = { className: classes, title: displayName };\r\n  const linkProps = avatarUser.id\r\n    ? { name: 'ProfilePage', params: { id: avatarUser.id.uuid } }\r\n    : { name: 'ProfileBasePage' };\r\n  const hasProfileImage = avatarUser.profileImage && avatarUser.profileImage.id;\r\n  const profileLinkEnabled = !disableProfileLink;\r\n\r\n  if (isBannedUser || isDeletedUser) {\r\n    return (\r\n      <div {...rootProps}>\r\n        <IconBannedUser className={css.bannedUserIcon} />\r\n      </div>\r\n    );\r\n  } else if (hasProfileImage && profileLinkEnabled) {\r\n    return (\r\n      <NamedLink {...rootProps} {...linkProps}>\r\n        <ResponsiveImage\r\n          rootClassName={css.avatarImage}\r\n          alt={displayName}\r\n          image={avatarUser.profileImage}\r\n          variants={AVATAR_IMAGE_VARIANTS}\r\n          sizes={renderSizes}\r\n        />\r\n      </NamedLink>\r\n    );\r\n  } else if (hasProfileImage) {\r\n    return (\r\n      <div {...rootProps}>\r\n        <ResponsiveImage\r\n          rootClassName={css.avatarImage}\r\n          alt={displayName}\r\n          image={avatarUser.profileImage}\r\n          variants={AVATAR_IMAGE_VARIANTS}\r\n          sizes={renderSizes}\r\n        />\r\n      </div>\r\n    );\r\n  } else if (profileLinkEnabled) {\r\n    // Placeholder avatar (initials)\r\n    return (\r\n      <NamedLink {...rootProps} {...linkProps}>\r\n        <span className={initialsClassName || css.initials}>{abbreviatedName}</span>\r\n      </NamedLink>\r\n    );\r\n  } else {\r\n    // Placeholder avatar (initials)\r\n    return (\r\n      <div {...rootProps}>\r\n        <span className={initialsClassName || css.initials}>{abbreviatedName}</span>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nAvatarComponent.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  user: null,\r\n  renderSizes: AVATAR_SIZES,\r\n  disableProfileLink: false,\r\n};\r\n\r\nAvatarComponent.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  user: oneOfType([propTypes.user, propTypes.currentUser]),\r\n\r\n  renderSizes: string,\r\n  disableProfileLink: bool,\r\n\r\n  // from injectIntl\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nconst Avatar = injectIntl(AvatarComponent);\r\n\r\nexport default Avatar;\r\n\r\nexport const AvatarSmall = props => (\r\n  <Avatar\r\n    rootClassName={css.smallAvatar}\r\n    initialsClassName={css.initialsSmall}\r\n    renderSizes={AVATAR_SIZES_MEDIUM}\r\n    {...props}\r\n  />\r\n);\r\nAvatarSmall.displayName = 'AvatarSmall';\r\n\r\nexport const AvatarMedium = props => (\r\n  <Avatar\r\n    rootClassName={css.mediumAvatar}\r\n    initialsClassName={css.initialsMedium}\r\n    renderSizes={AVATAR_SIZES_MEDIUM}\r\n    {...props}\r\n  />\r\n);\r\nAvatarMedium.displayName = 'AvatarMedium';\r\n\r\nexport const AvatarLarge = props => (\r\n  <Avatar\r\n    rootClassName={css.largeAvatar}\r\n    initialsClassName={css.initialsLarge}\r\n    renderSizes={AVATAR_SIZES_LARGE}\r\n    {...props}\r\n  />\r\n);\r\nAvatarLarge.displayName = 'AvatarLarge';\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Button_root__i+Ogj buttonDefault\",\"primaryButtonRoot\":\"Button_primaryButtonRoot__7VB93 buttonPrimary\",\"primaryButtonInlineRoot\":\"Button_primaryButtonInlineRoot__bult9 buttonPrimaryInline\",\"secondaryButtonRoot\":\"Button_secondaryButtonRoot__j7h3F buttonSecondary\",\"secondaryButtonInlineRoot\":\"Button_secondaryButtonInlineRoot__35+o1 buttonSecondaryInline\",\"inlineTextButtonRoot\":\"Button_inlineTextButtonRoot__gzUOg a textSmall\",\"primaryButton\":\"Button_primaryButton__8e5+J\",\"secondaryButton\":\"Button_secondaryButton__WLSpp\",\"secondaryButtonInline\":\"Button_secondaryButtonInline__tVOVB\",\"inProgress\":\"Button_inProgress__cj-y3\",\"ready\":\"Button_ready__T7c3y\",\"spinner\":\"Button_spinner__q+fxs\",\"checkmark\":\"Button_checkmark__3h1rf\",\"checkmarkAnimation\":\"Button_checkmarkAnimation__Ra4Xf\",\"socialButtonRoot\":\"Button_socialButtonRoot__UbgP-\",\"socialButton\":\"Button_socialButton__zlTwW\"};","import React, { useEffect, useState } from 'react';\r\nimport { bool, node, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { useRouteConfiguration } from '../../context/routeConfigurationContext';\r\nimport { findRouteByRouteName } from '../../util/routes';\r\nimport { IconSpinner, IconCheckmark } from '../../components';\r\n\r\nimport css from './Button.module.css';\r\n\r\nconst PlainButton = props => {\r\n  const [mounted, setMounted] = useState(false);\r\n  const routeConfiguration = useRouteConfiguration();\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  const {\r\n    children,\r\n    className,\r\n    rootClassName,\r\n    spinnerClassName,\r\n    checkmarkClassName,\r\n    inProgress,\r\n    ready,\r\n    disabled,\r\n    enforcePagePreloadFor,\r\n    ...rest\r\n  } = props;\r\n\r\n  const rootClass = rootClassName || css.root;\r\n  const classes = classNames(rootClass, className, {\r\n    [css.ready]: ready,\r\n    [css.inProgress]: inProgress,\r\n  });\r\n\r\n  let content;\r\n\r\n  if (inProgress) {\r\n    content = <IconSpinner rootClassName={spinnerClassName || css.spinner} />;\r\n  } else if (ready) {\r\n    content = <IconCheckmark rootClassName={checkmarkClassName || css.checkmark} />;\r\n  } else {\r\n    content = children;\r\n  }\r\n\r\n  const onOverButtonFn = enforcePreloadOfPage => () => {\r\n    // Enforce preloading of given page (loadable component)\r\n    const { component: Page } = findRouteByRouteName(enforcePreloadOfPage, routeConfiguration);\r\n    // Loadable Component has a \"preload\" function.\r\n    if (Page.preload) {\r\n      Page.preload();\r\n    }\r\n  };\r\n\r\n  const onOverButton = enforcePagePreloadFor ? onOverButtonFn(enforcePagePreloadFor) : null;\r\n  const onOverButtonMaybe = onOverButton\r\n    ? {\r\n        onMouseOver: onOverButton,\r\n        onTouchStart: onOverButton,\r\n      }\r\n    : {};\r\n\r\n  // All buttons are disabled until the component is mounted. This\r\n  // prevents e.g. being able to submit forms to the backend before\r\n  // the client side is handling the submit.\r\n  const buttonDisabled = mounted ? disabled : true;\r\n\r\n  return (\r\n    <button className={classes} {...onOverButtonMaybe} {...rest} disabled={buttonDisabled}>\r\n      {content}\r\n    </button>\r\n  );\r\n};\r\n\r\n// Some buttons are link to other pages.\r\n// If enforcePagePreloadFor property is given, lets enhance the Button a bit.\r\nconst ButtonWithPagePreload = props => {\r\n  const routeConfiguration = useRouteConfiguration();\r\n  const { enforcePagePreloadFor, ...restProps } = props;\r\n\r\n  const onOverButtonFn = enforcePreloadOfPage => () => {\r\n    // Enforce preloading of given page (loadable component)\r\n    const { component: Page } = findRouteByRouteName(enforcePreloadOfPage, routeConfiguration);\r\n    // Loadable Component has a \"preload\" function.\r\n    if (Page.preload) {\r\n      Page.preload();\r\n    }\r\n  };\r\n\r\n  const onOverButton = enforcePagePreloadFor ? onOverButtonFn(enforcePagePreloadFor) : null;\r\n  const onOverButtonMaybe = onOverButton\r\n    ? {\r\n        onMouseOver: onOverButton,\r\n        onTouchStart: onOverButton,\r\n      }\r\n    : {};\r\n\r\n  return <PlainButton {...restProps} {...onOverButtonMaybe} />;\r\n};\r\n\r\nconst Button = props => {\r\n  const { enforcePagePreloadFor, ...restProps } = props;\r\n  return enforcePagePreloadFor ? (\r\n    <ButtonWithPagePreload {...props} />\r\n  ) : (\r\n    <PlainButton {...restProps} />\r\n  );\r\n};\r\n\r\nButton.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  spinnerClassName: null,\r\n  checkmarkClassName: null,\r\n  inProgress: false,\r\n  ready: false,\r\n  disabled: false,\r\n  enforcePagePreloadFor: null,\r\n  children: null,\r\n};\r\n\r\nButton.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  spinnerClassName: string,\r\n  checkmarkClassName: string,\r\n\r\n  inProgress: bool,\r\n  ready: bool,\r\n  disabled: bool,\r\n  enforcePagePreloadFor: string,\r\n\r\n  children: node,\r\n};\r\n\r\nexport default Button;\r\n\r\nexport const PrimaryButton = props => {\r\n  const classes = classNames(props.rootClassName || css.primaryButtonRoot, css.primaryButton);\r\n  return <Button {...props} rootClassName={classes} />;\r\n};\r\nPrimaryButton.displayName = 'PrimaryButton';\r\n\r\nexport const PrimaryButtonInline = props => {\r\n  const classes = classNames(props.rootClassName || css.primaryButtonInlineRoot, css.primaryButton);\r\n  return <Button {...props} rootClassName={classes} />;\r\n};\r\nPrimaryButtonInline.displayName = 'PrimaryButtonInline';\r\n\r\nexport const SecondaryButton = props => {\r\n  const classes = classNames(props.rootClassName || css.secondaryButtonRoot, css.secondaryButton);\r\n  return <Button {...props} rootClassName={classes} />;\r\n};\r\nSecondaryButton.displayName = 'SecondaryButton';\r\n\r\nexport const SecondaryButtonInline = props => {\r\n  const classes = classNames(\r\n    props.rootClassName || css.secondaryButtonInlineRoot,\r\n    css.secondaryButtonInline\r\n  );\r\n  return <Button {...props} rootClassName={classes} />;\r\n};\r\nSecondaryButton.displayName = 'SecondaryButton';\r\n\r\nexport const InlineTextButton = props => {\r\n  const classes = classNames(props.rootClassName || css.inlineTextButtonRoot, css.inlineTextButton);\r\n  return <Button {...props} rootClassName={classes} />;\r\n};\r\nInlineTextButton.displayName = 'InlineTextButton';\r\n\r\nexport const SocialLoginButton = props => {\r\n  const classes = classNames(props.rootClassName || css.socialButtonRoot, css.socialButton);\r\n  return <Button {...props} rootClassName={classes} />;\r\n};\r\n\r\nSocialLoginButton.displayName = 'SocialLoginButton';\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"autosize\");","import React, { Component } from 'react';\r\nimport autosize from 'autosize';\r\n\r\nclass ExpandingTextarea extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.timeoutId = null;\r\n    this.textarea = null;\r\n    this.update = this.update.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    // Delay the autosize initialisation so that the autosize can\r\n    // correctly calculate the height with the textarea value\r\n    this.timeoutId = window.setTimeout(() => {\r\n      autosize(this.textarea);\r\n\r\n      // Listen to resize events so autosize can pick up updated CSS\r\n      // values (like max-height) when breakpoints change.\r\n      window.addEventListener('resize', this.update);\r\n    }, 100);\r\n  }\r\n  componentDidUpdate() {\r\n    this.update();\r\n  }\r\n  componentWillUnmount() {\r\n    autosize.destroy(this.textarea);\r\n    window.clearTimeout(this.timeoutId);\r\n    window.removeEventListener('resize', this.update);\r\n  }\r\n  update() {\r\n    autosize.update(this.textarea);\r\n  }\r\n  render() {\r\n    return (\r\n      <textarea\r\n        {...this.props}\r\n        ref={textarea => {\r\n          this.textarea = textarea;\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default ExpandingTextarea;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// External link that opens in a new tab/window, ensuring that the\r\n// opened page doesn't have access to the current page.\r\n//\r\n// See: https://mathiasbynens.github.io/rel-noopener/\r\nconst ExternalLink = props => {\r\n  const { children, ...rest } = props;\r\n  return (\r\n    <a {...rest} target=\"_blank\" rel=\"noopener noreferrer\">\r\n      {children}\r\n    </a>\r\n  );\r\n};\r\n\r\nExternalLink.defaultProps = { children: null };\r\n\r\nconst { node } = PropTypes;\r\n\r\nExternalLink.propTypes = { children: node };\r\n\r\nexport default ExternalLink;\r\n","import React from 'react';\r\nimport { injectIntl, intlShape } from '../../util/reactIntl';\r\nimport { FieldSelect } from '../../components';\r\n\r\nconst FieldBoolean = props => {\r\n  const { placeholder, intl, ...rest } = props;\r\n  const trueLabel = intl.formatMessage({\r\n    id: 'FieldBoolean.yes',\r\n  });\r\n  const falseLabel = intl.formatMessage({\r\n    id: 'FieldBoolean.no',\r\n  });\r\n  const selectProps = {\r\n    ...rest,\r\n    format: option => {\r\n      if (option === true) {\r\n        return 'true';\r\n      } else if (option === false) {\r\n        return 'false';\r\n      }\r\n      return '';\r\n    },\r\n    parse: value => {\r\n      if (value === 'true') {\r\n        return true;\r\n      } else if (value === 'false') {\r\n        return false;\r\n      }\r\n      return '';\r\n    },\r\n  };\r\n  return (\r\n    <FieldSelect {...selectProps}>\r\n      <option value=\"\">{placeholder}</option>\r\n      <option value=\"true\">{trueLabel}</option>\r\n      <option value=\"false\">{falseLabel}</option>\r\n    </FieldSelect>\r\n  );\r\n};\r\n\r\nFieldBoolean.propTypes = {\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default injectIntl(FieldBoolean);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"FieldCheckboxGroup_root__JDoZl\",\"list\":\"FieldCheckboxGroup_list__e9ou0\",\"twoColumns\":\"FieldCheckboxGroup_twoColumns__VZ474\",\"item\":\"FieldCheckboxGroup_item__GE1Og\"};","/*\r\n * Renders a group of checkboxes that can be used to select\r\n * multiple values from a set of options.\r\n *\r\n * The corresponding component when rendering the selected\r\n * values is PropertyGroup.\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport { arrayOf, bool, node, shape, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { FieldArray } from 'react-final-form-arrays';\r\nimport { FieldCheckbox, ValidationError } from '../../components';\r\n\r\nimport css from './FieldCheckboxGroup.module.css';\r\n\r\nconst FieldCheckboxRenderer = props => {\r\n  const {\r\n    className,\r\n    rootClassName,\r\n    label,\r\n    optionLabelClassName,\r\n    twoColumns,\r\n    id,\r\n    fields,\r\n    options,\r\n    meta,\r\n  } = props;\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  const listClasses = twoColumns ? classNames(css.list, css.twoColumns) : css.list;\r\n\r\n  return (\r\n    <fieldset className={classes}>\r\n      {label ? <legend>{label}</legend> : null}\r\n      <ul className={listClasses}>\r\n        {options.map((option, index) => {\r\n          const fieldId = `${id}.${option.key}`;\r\n          const textClassName = optionLabelClassName;\r\n          const textClassNameMaybe = textClassName ? { textClassName } : {};\r\n          return (\r\n            <li key={fieldId} className={css.item}>\r\n              <FieldCheckbox\r\n                id={fieldId}\r\n                name={fields.name}\r\n                label={option.label}\r\n                value={option.key}\r\n                {...textClassNameMaybe}\r\n              />\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n      <ValidationError fieldMeta={{ ...meta }} />\r\n    </fieldset>\r\n  );\r\n};\r\n\r\nFieldCheckboxRenderer.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  label: null,\r\n  twoColumns: false,\r\n};\r\n\r\nFieldCheckboxRenderer.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  id: string.isRequired,\r\n  label: node,\r\n  options: arrayOf(\r\n    shape({\r\n      key: string.isRequired,\r\n      label: node.isRequired,\r\n    })\r\n  ).isRequired,\r\n  twoColumns: bool,\r\n};\r\n\r\nconst FieldCheckboxGroup = props => <FieldArray component={FieldCheckboxRenderer} {...props} />;\r\n\r\n// Name and component are required fields for FieldArray.\r\n// Component-prop we define in this file, name needs to be passed in\r\nFieldCheckboxGroup.propTypes = {\r\n  name: string.isRequired,\r\n};\r\n\r\nexport default FieldCheckboxGroup;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"FieldCheckbox_root__4pfgI\",\"input\":\"FieldCheckbox_input__m4P9o\",\"box\":\"FieldCheckbox_box__t891N\",\"boxSuccess\":\"FieldCheckbox_boxSuccess__DLa3N\",\"boxDisabled\":\"FieldCheckbox_boxDisabled__bz-0M\",\"checked\":\"FieldCheckbox_checked__EIULA\",\"checkedSuccess\":\"FieldCheckbox_checkedSuccess__3An7Q\",\"checkedDisabled\":\"FieldCheckbox_checkedDisabled__m+MOb\",\"text\":\"FieldCheckbox_text__k5wy1\",\"label\":\"FieldCheckbox_label__Q2X1m\",\"checkboxWrapper\":\"FieldCheckbox_checkboxWrapper__fXAbY\",\"textRoot\":\"FieldCheckbox_textRoot__4-QZe marketplaceListingAttributeFontStyles\"};","import React from 'react';\r\nimport { node, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { Field } from 'react-final-form';\r\n\r\nimport css from './FieldCheckbox.module.css';\r\n\r\nconst IconCheckbox = props => {\r\n  const { className, checkedClassName, boxClassName } = props;\r\n  return (\r\n    <svg className={className} width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <g fill=\"none\" fillRule=\"evenodd\">\r\n        <g transform=\"translate(2 2)\">\r\n          <path\r\n            className={checkedClassName || css.checked}\r\n            d=\"M9.9992985 1.5048549l-.0194517 6.9993137C9.977549 9.3309651 9.3066522 10 8.4798526 10H1.5001008c-.8284271 0-1.5-.6715729-1.5-1.5l-.000121-7c0-.8284271.6715728-1.5 1.5-1.5h.000121l6.9993246.0006862c.8284272.000067 1.4999458.671694 1.499879 1.5001211a1.5002208 1.5002208 0 0 1-.0000059.0040476z\"\r\n          />\r\n          <path\r\n            className={boxClassName || css.box}\r\n            strokeWidth=\"2\"\r\n            d=\"M10.9992947 1.507634l-.0194518 6.9993137C10.9760133 9.8849417 9.8578519 11 8.4798526 11H1.5001008c-1.3807119 0-2.5-1.1192881-2.5-2.4999827L-1.0000202 1.5c0-1.3807119 1.119288-2.5 2.500098-2.5l6.9994284.0006862c1.3807118.0001115 2.4999096 1.11949 2.4997981 2.5002019-.0000018.003373-.0000018.003373-.0000096.0067458z\"\r\n          />\r\n        </g>\r\n        <path\r\n          d=\"M5.636621 10.7824771L3.3573694 8.6447948c-.4764924-.4739011-.4764924-1.2418639 0-1.7181952.4777142-.473901 1.251098-.473901 1.7288122 0l1.260291 1.1254782 2.8256927-4.5462307c.3934117-.5431636 1.1545778-.6695372 1.7055985-.278265.5473554.3912721.6731983 1.150729.2797866 1.6951077l-3.6650524 5.709111c-.2199195.306213-.5803433.5067097-.9920816.5067097-.3225487 0-.6328797-.1263736-.8637952-.3560334z\"\r\n          fill=\"#FFF\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconCheckbox.defaultProps = { className: null, checkedClassName: null, boxClassName: null };\r\n\r\nIconCheckbox.propTypes = { className: string, checkedClassName: string, boxClassName: string };\r\n\r\nconst FieldCheckboxComponent = props => {\r\n  const {\r\n    rootClassName,\r\n    className,\r\n    svgClassName,\r\n    textClassName,\r\n    id,\r\n    label,\r\n    useSuccessColor,\r\n    ...rest\r\n  } = props;\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  // This is a workaround for a bug in Firefox & React Final Form.\r\n  // https://github.com/final-form/react-final-form/issues/134\r\n  const handleOnChange = (input, event) => {\r\n    const { onBlur, onChange } = input;\r\n    onChange(event);\r\n    onBlur(event);\r\n\r\n    // If onChange has been passed as a props to FieldCheckbox\r\n    if (rest.onChange) {\r\n      rest.onChange(event);\r\n    }\r\n  };\r\n\r\n  const successColorVariantMaybe = useSuccessColor\r\n    ? {\r\n        checkedClassName: css.checkedSuccess,\r\n        boxClassName: css.boxSuccess,\r\n      }\r\n    : {};\r\n  const disabledColorMaybe = rest.disabled\r\n    ? {\r\n        checkedClassName: css.checkedDisabled,\r\n        boxClassName: css.boxDisabled,\r\n      }\r\n    : {};\r\n\r\n  return (\r\n    <span className={classes}>\r\n      <Field type=\"checkbox\" {...rest}>\r\n        {props => {\r\n          const { input, disabled } = props;\r\n          return (\r\n            <input\r\n              id={id}\r\n              className={css.input}\r\n              {...input}\r\n              onChange={event => handleOnChange(input, event)}\r\n              disabled={disabled}\r\n            />\r\n          );\r\n        }}\r\n      </Field>\r\n      <label htmlFor={id} className={css.label}>\r\n        <span className={css.checkboxWrapper}>\r\n          <IconCheckbox\r\n            className={svgClassName}\r\n            {...successColorVariantMaybe}\r\n            {...disabledColorMaybe}\r\n          />\r\n        </span>\r\n        <span className={classNames(css.text, textClassName || css.textRoot)}>{label}</span>\r\n      </label>\r\n    </span>\r\n  );\r\n};\r\n\r\nFieldCheckboxComponent.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  svgClassName: null,\r\n  textClassName: null,\r\n  label: null,\r\n};\r\n\r\nFieldCheckboxComponent.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  svgClassName: string,\r\n  textClassName: string,\r\n\r\n  // Id is needed to connect the label with input.\r\n  id: string.isRequired,\r\n  label: node,\r\n\r\n  // Name groups several checkboxes to an array of selected values\r\n  name: string.isRequired,\r\n\r\n  // Checkbox needs a value that is passed forward when user checks the checkbox\r\n  value: string.isRequired,\r\n};\r\n\r\nexport default FieldCheckboxComponent;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"FieldCurrencyInput_root__Xk1iH\"};","/**\r\n * CurrencyInput renders an input field that format it's value according to currency formatting rules\r\n * onFocus: renders given value in unformatted manner: \"9999,99\"\r\n * onBlur: formats the given input: \"9 999,99 \"\r\n */\r\nimport React, { Component } from 'react';\r\nimport { bool, func, number, object, oneOfType, shape, string } from 'prop-types';\r\nimport { Field } from 'react-final-form';\r\nimport classNames from 'classnames';\r\nimport Decimal from 'decimal.js';\r\n\r\nimport { intlShape, injectIntl } from '../../util/reactIntl';\r\nimport { types as sdkTypes } from '../../util/sdkLoader';\r\nimport {\r\n  isSafeNumber,\r\n  unitDivisor,\r\n  convertUnitToSubUnit,\r\n  convertMoneyToNumber,\r\n  ensureDotSeparator,\r\n  ensureSeparator,\r\n  truncateToSubUnitPrecision,\r\n} from '../../util/currency';\r\nimport { propTypes } from '../../util/types';\r\nimport * as log from '../../util/log';\r\n\r\nimport { ValidationError } from '../../components';\r\n\r\nimport css from './FieldCurrencyInput.module.css';\r\n\r\nconst { Money } = sdkTypes;\r\n\r\nconst allowedInputProps = allProps => {\r\n  // Strip away props that are not passed to input element (or are overwritten)\r\n  // eslint-disable-next-line no-unused-vars\r\n  const { currencyConfig, defaultValue, intl, input, meta, ...inputProps } = allProps;\r\n  return inputProps;\r\n};\r\n\r\n// Convert unformatted value (e.g. 10,00) to Money (or null)\r\nconst getPrice = (unformattedValue, currencyConfig) => {\r\n  const isEmptyString = unformattedValue === '';\r\n  try {\r\n    return isEmptyString\r\n      ? null\r\n      : new Money(\r\n          convertUnitToSubUnit(unformattedValue, unitDivisor(currencyConfig.currency)),\r\n          currencyConfig.currency\r\n        );\r\n  } catch (e) {\r\n    return null;\r\n  }\r\n};\r\n\r\nclass CurrencyInputComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { currencyConfig, defaultValue, input, intl } = props;\r\n    const initialValueIsMoney = input.value instanceof Money;\r\n\r\n    if (initialValueIsMoney && input.value.currency !== currencyConfig.currency) {\r\n      const e = new Error('Value currency different from marketplace currency');\r\n      log.error(e, 'currency-input-invalid-currency', { currencyConfig, inputValue: input.value });\r\n      throw e;\r\n    }\r\n\r\n    const initialValue = initialValueIsMoney ? convertMoneyToNumber(input.value) : defaultValue;\r\n    const hasInitialValue = typeof initialValue === 'number' && !isNaN(initialValue);\r\n\r\n    // We need to handle number format - some locales use dots and some commas as decimal separator\r\n    // TODO Figure out if this could be digged from React-Intl directly somehow\r\n    const testSubUnitFormat = intl.formatNumber('1.1', currencyConfig);\r\n    const usesComma = testSubUnitFormat.indexOf(',') >= 0;\r\n\r\n    try {\r\n      // whatever is passed as a default value, will be converted to currency string\r\n      // Unformatted value is digits + localized sub unit separator (\"9,99\")\r\n      const unformattedValue = hasInitialValue\r\n        ? truncateToSubUnitPrecision(\r\n            ensureSeparator(initialValue.toString(), usesComma),\r\n            unitDivisor(currencyConfig.currency),\r\n            usesComma\r\n          )\r\n        : '';\r\n      // Formatted value fully localized currency string (\"$1,000.99\")\r\n      const formattedValue = hasInitialValue\r\n        ? intl.formatNumber(ensureDotSeparator(unformattedValue), currencyConfig)\r\n        : '';\r\n\r\n      this.state = {\r\n        formattedValue,\r\n        unformattedValue,\r\n        value: formattedValue,\r\n        usesComma,\r\n      };\r\n    } catch (e) {\r\n      log.error(e, 'currency-input-init-failed', { currencyConfig, defaultValue, initialValue });\r\n      throw e;\r\n    }\r\n\r\n    this.onInputChange = this.onInputChange.bind(this);\r\n    this.onInputBlur = this.onInputBlur.bind(this);\r\n    this.onInputFocus = this.onInputFocus.bind(this);\r\n    this.updateValues = this.updateValues.bind(this);\r\n  }\r\n\r\n  onInputChange(event) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    // Update value strings on state\r\n    const { unformattedValue } = this.updateValues(event);\r\n    // Notify parent component about current price change\r\n    const price = getPrice(ensureDotSeparator(unformattedValue), this.props.currencyConfig);\r\n    this.props.input.onChange(price);\r\n  }\r\n\r\n  onInputBlur(event) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    const {\r\n      currencyConfig,\r\n      input: { onBlur },\r\n    } = this.props;\r\n    this.setState(prevState => {\r\n      if (onBlur) {\r\n        // If parent component has provided onBlur function, call it with current price.\r\n        const price = getPrice(ensureDotSeparator(prevState.unformattedValue), currencyConfig);\r\n        onBlur(price);\r\n      }\r\n      return {\r\n        value: prevState.formattedValue,\r\n      };\r\n    });\r\n  }\r\n\r\n  onInputFocus(event) {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    const {\r\n      currencyConfig,\r\n      input: { onFocus },\r\n    } = this.props;\r\n    this.setState(prevState => {\r\n      if (onFocus) {\r\n        // If parent component has provided onFocus function, call it with current price.\r\n        const price = getPrice(ensureDotSeparator(prevState.unformattedValue), currencyConfig);\r\n        onFocus(price);\r\n      }\r\n      return {\r\n        value: prevState.unformattedValue,\r\n      };\r\n    });\r\n  }\r\n\r\n  updateValues(event) {\r\n    try {\r\n      const { currencyConfig, intl } = this.props;\r\n      const targetValue = event.target.value.trim();\r\n      const isEmptyString = targetValue === '';\r\n      const valueOrZero = isEmptyString ? '0' : targetValue;\r\n\r\n      const targetDecimalValue = isEmptyString\r\n        ? null\r\n        : new Decimal(ensureDotSeparator(targetValue));\r\n\r\n      const isSafeValue =\r\n        isEmptyString || (targetDecimalValue.isPositive() && isSafeNumber(targetDecimalValue));\r\n      if (!isSafeValue) {\r\n        throw new Error(`Unsafe money value: ${targetValue}`);\r\n      }\r\n\r\n      // truncate decimals to subunit precision: 10000.999 => 10000.99\r\n      const truncatedValueString = truncateToSubUnitPrecision(\r\n        valueOrZero,\r\n        unitDivisor(currencyConfig.currency),\r\n        this.state.usesComma\r\n      );\r\n      const unformattedValue = !isEmptyString ? truncatedValueString : '';\r\n      const formattedValue = !isEmptyString\r\n        ? intl.formatNumber(ensureDotSeparator(truncatedValueString), currencyConfig)\r\n        : '';\r\n\r\n      this.setState({\r\n        formattedValue,\r\n        value: unformattedValue,\r\n        unformattedValue,\r\n      });\r\n\r\n      return { formattedValue, value: unformattedValue, unformattedValue };\r\n    } catch (e) {\r\n      // eslint-disable-next-line no-console\r\n      console.warn('Not a valid value.', e);\r\n\r\n      // If an error occurs while filling input field, use previous values\r\n      // This ensures that string like '12.3r' doesn't end up to a state.\r\n      const { formattedValue, unformattedValue, value } = this.state;\r\n      return { formattedValue, unformattedValue, value };\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { className, currencyConfig, defaultValue, placeholder, intl } = this.props;\r\n    const placeholderText = placeholder || intl.formatNumber(defaultValue, currencyConfig);\r\n    return (\r\n      <input\r\n        className={className}\r\n        {...allowedInputProps(this.props)}\r\n        value={this.state.value}\r\n        onChange={this.onInputChange}\r\n        onBlur={this.onInputBlur}\r\n        onFocus={this.onInputFocus}\r\n        type=\"text\"\r\n        placeholder={placeholderText}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nCurrencyInputComponent.defaultProps = {\r\n  className: null,\r\n  defaultValue: null,\r\n  input: null,\r\n  placeholder: null,\r\n};\r\n\r\nCurrencyInputComponent.propTypes = {\r\n  className: string,\r\n  currencyConfig: propTypes.currencyConfig.isRequired,\r\n  defaultValue: number,\r\n  intl: intlShape.isRequired,\r\n  input: shape({\r\n    value: oneOfType([string, propTypes.money]),\r\n    onBlur: func,\r\n    onChange: func.isRequired,\r\n    onFocus: func,\r\n  }).isRequired,\r\n\r\n  placeholder: string,\r\n};\r\n\r\nexport const CurrencyInput = injectIntl(CurrencyInputComponent);\r\n\r\nconst FieldCurrencyInputComponent = props => {\r\n  const { rootClassName, className, id, label, input, meta, hideErrorMessage, ...rest } = props;\r\n\r\n  if (label && !id) {\r\n    throw new Error('id required when a label is given');\r\n  }\r\n\r\n  const { valid, invalid, touched, error } = meta;\r\n\r\n  // Error message and input error styles are only shown if the\r\n  // field has been touched and the validation has failed.\r\n  const hasError = touched && invalid && error;\r\n\r\n  const inputClasses = classNames(css.input, {\r\n    [css.inputSuccess]: valid,\r\n    [css.inputError]: hasError,\r\n  });\r\n\r\n  const inputProps = { className: inputClasses, id, input, ...rest };\r\n  const classes = classNames(rootClassName, className);\r\n  return (\r\n    <div className={classes}>\r\n      {label ? <label htmlFor={id}>{label}</label> : null}\r\n      <CurrencyInput {...inputProps} />\r\n      {hideErrorMessage ? null : <ValidationError fieldMeta={meta} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nFieldCurrencyInputComponent.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  id: null,\r\n  label: null,\r\n  hideErrorMessage: false,\r\n};\r\n\r\nFieldCurrencyInputComponent.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n\r\n  // Label is optional, but if it is given, an id is also required so\r\n  // the label can reference the input in the `for` attribute\r\n  id: string,\r\n  label: string,\r\n  hideErrorMessage: bool,\r\n\r\n  // Generated by final-form's Field component\r\n  input: object.isRequired,\r\n  meta: object.isRequired,\r\n};\r\n\r\nconst FieldCurrencyInput = props => {\r\n  return <Field component={FieldCurrencyInputComponent} {...props} />;\r\n};\r\n\r\nexport default FieldCurrencyInput;\r\n","// Add format and parse functions. This file follows E.164 format for international numbers\r\n// if the input starts with '+'.\r\n// Note: this does not format phone numbers that don't start with '+'\r\n//\r\n// If you want to have a localized phone number formatting, you could create own format and parse functions.\r\n// Check this Final Form example: https://codesandbox.io/s/10rzowm323\r\n\r\n/**\r\n * Check if string starts with '+' character.\r\n * @param {String} str\r\n * @returns true if string starts with '+' character.\r\n */\r\nconst hasLeadingPlus = str => str.match(/^\\+/g);\r\n\r\n/**\r\n * Pick only digits from a string\r\n * @param {String} str\r\n * @returns string that contains only numbers\r\n */\r\nconst pickOnlyDigits = str => str.replace(/[^\\d]/g, '');\r\n\r\n/**\r\n * This picks only correct characters for e.164 formatted phone numbers if the phoneNumber starts with a '+' character.\r\n * Otherwise, the phone number is left as it is.\r\n *\r\n * @param {String} phoneNumber\r\n * @returns formatted E.164 phone number or a string that has not been formatted at all.\r\n */\r\nconst pickValidCharsForE164 = phoneNumber => {\r\n  const number = phoneNumber || '';\r\n  const startsWithPlus = !!hasLeadingPlus(number);\r\n  const digitsOnly = pickOnlyDigits(number);\r\n  // Digits must start with 1-9 and there can't be more than 15 digits altogether in E.164\r\n  const noLeadingZeroDigits =\r\n    digitsOnly.length > 0 && digitsOnly.charAt(0) === '0' ? digitsOnly.slice(1) : digitsOnly;\r\n\r\n  return startsWithPlus && noLeadingZeroDigits.length > 15\r\n    ? `+${noLeadingZeroDigits.slice(0, 15)}`\r\n    : startsWithPlus\r\n    ? `+${noLeadingZeroDigits}`\r\n    : number;\r\n};\r\n\r\n/**\r\n * Format a phone number according to E.164 format.\r\n * This formats the value that form has. This is executed first if there are initial values given to the form.\r\n *\r\n * Matches with the following format:\r\n * +123 55 1234567, which is formatted as +123551234567\r\n */\r\nexport const format = value => {\r\n  if (!value) {\r\n    return '';\r\n  }\r\n\r\n  return pickValidCharsForE164(value);\r\n};\r\n\r\n/**\r\n * Parser that handles the input string so that the plain number can be saved.\r\n * This is executed, when user manually types or copy-pastes a phone number to the input field.\r\n */\r\nexport const parse = value => {\r\n  return pickValidCharsForE164(value);\r\n};\r\n","/**\r\n * A text field with phone number formatting. By default uses formatting\r\n * rules defined in the fiFormatter.js file. To change the formatting\r\n * provide alternative implementations for the format and parse functions\r\n * that are passed to the input field.\r\n */\r\nimport React from 'react';\r\n\r\nimport { FieldTextInput } from '../../components';\r\n// This formatter formats phone numbers that start with leading '+' sign,\r\n// but for other inputs it just strips space characters off.\r\nimport { format, parse } from './e164Formatter';\r\n\r\nconst FieldPhoneNumberInput = props => {\r\n  const inputProps = {\r\n    type: 'text',\r\n    format: format,\r\n    parse: parse,\r\n    ...props,\r\n  };\r\n\r\n  return <FieldTextInput {...inputProps} />;\r\n};\r\n\r\nexport default FieldPhoneNumberInput;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"FieldRadioButton_root__WsrU-\",\"input\":\"FieldRadioButton_input__ARFU2\",\"checked\":\"FieldRadioButton_checked__w1WiF\",\"notChecked\":\"FieldRadioButton_notChecked__ye8nk\",\"required\":\"FieldRadioButton_required__KiKuS\",\"text\":\"FieldRadioButton_text__6YN3L marketplaceListingAttributeFontStyles\",\"label\":\"FieldRadioButton_label__K5aDh\",\"radioButtonWrapper\":\"FieldRadioButton_radioButtonWrapper__mjxD9\",\"checkedStyle\":\"FieldRadioButton_checkedStyle__x5Bhr\"};","import React from 'react';\r\nimport { node, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { Field } from 'react-final-form';\r\n\r\nimport css from './FieldRadioButton.module.css';\r\n\r\nconst IconRadioButton = props => {\r\n  const { checkedClassName } = props;\r\n  return (\r\n    <div>\r\n      <svg className={props.className} width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <circle\r\n          className={props.showAsRequired ? css.required : css.notChecked}\r\n          cx=\"5\"\r\n          cy=\"19\"\r\n          r=\"6\"\r\n          transform=\"translate(2 -12)\"\r\n          strokeWidth=\"2\"\r\n          fill=\"none\"\r\n          fillRule=\"evenodd\"\r\n        />\r\n\r\n        <g\r\n          className={classNames(css.checked, checkedClassName || css.checkedStyle)}\r\n          transform=\"translate(2 -12)\"\r\n          fill=\"none\"\r\n          fillRule=\"evenodd\"\r\n        >\r\n          <circle strokeWidth=\"2\" cx=\"5\" cy=\"19\" r=\"6\" />\r\n          <circle fill=\"#FFF\" fillRule=\"nonzero\" cx=\"5\" cy=\"19\" r=\"3\" />\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nIconRadioButton.defaultProps = { className: null };\r\n\r\nIconRadioButton.propTypes = { className: string };\r\n\r\nconst FieldRadioButtonComponent = props => {\r\n  const {\r\n    rootClassName,\r\n    className,\r\n    svgClassName,\r\n    checkedClassName,\r\n    id,\r\n    label,\r\n    showAsRequired,\r\n    ...rest\r\n  } = props;\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  const radioButtonProps = {\r\n    id,\r\n    className: css.input,\r\n    component: 'input',\r\n    type: 'radio',\r\n    ...rest,\r\n  };\r\n\r\n  return (\r\n    <span className={classes}>\r\n      <Field {...radioButtonProps} />\r\n      <label htmlFor={id} className={css.label}>\r\n        <span className={css.radioButtonWrapper}>\r\n          <IconRadioButton\r\n            className={svgClassName}\r\n            checkedClassName={checkedClassName}\r\n            showAsRequired={showAsRequired}\r\n          />\r\n        </span>\r\n        <span className={css.text}>{label}</span>\r\n      </label>\r\n    </span>\r\n  );\r\n};\r\n\r\nFieldRadioButtonComponent.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  svgClassName: null,\r\n  checkedClassName: null,\r\n  label: null,\r\n};\r\n\r\nFieldRadioButtonComponent.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  svgClassName: string,\r\n  checkedClassName: string,\r\n\r\n  // Id is needed to connect the label with input.\r\n  id: string.isRequired,\r\n  label: node,\r\n\r\n  // Name groups several RadioButtones to an array of selected values\r\n  name: string.isRequired,\r\n\r\n  // RadioButton needs a value that is passed forward when user checks the RadioButton\r\n  value: string.isRequired,\r\n};\r\n\r\nexport default FieldRadioButtonComponent;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"ratingFieldSet\":\"FieldReviewRating_ratingFieldSet__NHj5-\",\"rating\":\"FieldReviewRating_rating__CzQ57\",\"rateInput\":\"FieldReviewRating_rateInput__f3lmw\",\"label\":\"FieldReviewRating_label__J0Rgz\",\"star\":\"FieldReviewRating_star__DtbBr\"};","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { intlShape, injectIntl } from '../../util/reactIntl';\r\nimport { Field } from 'react-final-form';\r\nimport classNames from 'classnames';\r\nimport { IconReviewStar, ValidationError } from '../../components';\r\n\r\nimport css from './FieldReviewRating.module.css';\r\n\r\nconst FieldReviewRatingComponent = props => {\r\n  /* eslint-disable no-unused-vars */\r\n  const {\r\n    rootClassName,\r\n    className,\r\n    inputRootClass,\r\n    customErrorText,\r\n    id,\r\n    intl,\r\n    label,\r\n    input,\r\n    meta,\r\n    ...rest\r\n  } = props;\r\n  /* eslint-enable no-unused-vars */\r\n\r\n  const handleChange = event => {\r\n    input.onChange(event.target.value);\r\n  };\r\n\r\n  const { touched, error } = meta;\r\n  const errorText = customErrorText || error;\r\n  const fieldMeta = { touched, error: errorText };\r\n\r\n  const { value, checked, ...restInputProps } = input;\r\n  const inputProps = { ...restInputProps, type: 'radio', name: 'rating', ...rest };\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  const createStarRating = starCount => {\r\n    let inputsAndLabels = [];\r\n\r\n    // Star inpu order: reverse order expected (5 -> 1) and also input before label\r\n    // This is due to CSS selectors.\r\n    // Sibling combinator (~) selects following siblings, but we want to select previous siblings\r\n    for (let i = starCount; i > 0; i--) {\r\n      const inputValue = `${i}`;\r\n      const starId = `star${i}`;\r\n      const inputId = `${id}.${starId}`;\r\n\r\n      inputsAndLabels.push(\r\n        <input\r\n          key={inputId}\r\n          id={inputId}\r\n          className={css.rateInput}\r\n          value={inputValue}\r\n          checked={typeof checked !== 'undefined' ? checked : value === inputValue}\r\n          {...inputProps}\r\n        />\r\n      );\r\n\r\n      inputsAndLabels.push(\r\n        <label\r\n          key={`label.${inputId}`}\r\n          className={css.label}\r\n          htmlFor={inputId}\r\n          title={intl.formatMessage({ id: `FieldReviewRating.${starId}` })}\r\n        >\r\n          <IconReviewStar rootClassName={css.star} />\r\n        </label>\r\n      );\r\n    }\r\n    return inputsAndLabels;\r\n  };\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <fieldset className={css.ratingFieldSet}>\r\n        {label ? <legend>{label}</legend> : null}\r\n        <div className={css.rating}>{createStarRating(5)}</div>\r\n      </fieldset>\r\n      <ValidationError fieldMeta={fieldMeta} />\r\n    </div>\r\n  );\r\n};\r\n\r\nFieldReviewRatingComponent.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  customErrorText: null,\r\n  label: null,\r\n};\r\n\r\nconst { string, shape, func, object } = PropTypes;\r\n\r\nFieldReviewRatingComponent.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  id: string.isRequired,\r\n  label: string,\r\n\r\n  // Error message that can be manually passed to input field,\r\n  // overrides default validation message\r\n  customErrorText: string,\r\n\r\n  // Generated by final-form's Field component\r\n  input: shape({\r\n    onChange: func.isRequired,\r\n  }).isRequired,\r\n  meta: object.isRequired,\r\n\r\n  // from injectIntl\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nconst FieldReviewRating = props => {\r\n  return <Field component={FieldReviewRatingComponent} {...props} />;\r\n};\r\n\r\nexport default injectIntl(FieldReviewRating);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"FieldSelect_root__0wMTy\",\"selectError\":\"FieldSelect_selectError__atbEh\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Field } from 'react-final-form';\r\nimport classNames from 'classnames';\r\nimport { ValidationError } from '../../components';\r\n\r\nimport css from './FieldSelect.module.css';\r\n\r\nconst FieldSelectComponent = props => {\r\n  const {\r\n    rootClassName,\r\n    className,\r\n    selectClassName,\r\n    id,\r\n    label,\r\n    input,\r\n    meta,\r\n    children,\r\n    onChange,\r\n    ...rest\r\n  } = props;\r\n\r\n  if (label && !id) {\r\n    throw new Error('id required when a label is given');\r\n  }\r\n\r\n  const { valid, invalid, touched, error } = meta;\r\n\r\n  // Error message and input error styles are only shown if the\r\n  // field has been touched and the validation has failed.\r\n  const hasError = touched && invalid && error;\r\n\r\n  const selectClasses = classNames({\r\n    [selectClassName]: selectClassName,\r\n    [css.selectError]: hasError,\r\n  });\r\n  const handleChange = e => {\r\n    input.onChange(e);\r\n    if (onChange) {\r\n      onChange(e.currentTarget.value);\r\n    }\r\n  };\r\n\r\n  const selectProps = { className: selectClasses, id, ...input, onChange: handleChange, ...rest };\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <div className={classes}>\r\n      {label ? <label htmlFor={id}>{label}</label> : null}\r\n      <select {...selectProps}>{children}</select>\r\n      <ValidationError fieldMeta={meta} />\r\n    </div>\r\n  );\r\n};\r\n\r\nFieldSelectComponent.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  selectClassName: null,\r\n  id: null,\r\n  label: null,\r\n  children: null,\r\n};\r\n\r\nconst { string, object, node } = PropTypes;\r\n\r\nFieldSelectComponent.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  selectClassName: string,\r\n\r\n  // Label is optional, but if it is given, an id is also required so\r\n  // the label can reference the input in the `for` attribute\r\n  id: string,\r\n  label: string,\r\n\r\n  // Generated by final-form's Field component\r\n  input: object.isRequired,\r\n  meta: object.isRequired,\r\n\r\n  children: node,\r\n};\r\n\r\nconst FieldSelect = props => {\r\n  return <Field component={FieldSelectComponent} {...props} />;\r\n};\r\n\r\nexport default FieldSelect;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"FieldTextInput_root__aHmXX\",\"inputError\":\"FieldTextInput_inputError__x6kyi\"};","import React, { Component } from 'react';\r\nimport { bool, func, object, shape, string } from 'prop-types';\r\nimport { Field } from 'react-final-form';\r\nimport classNames from 'classnames';\r\nimport { ValidationError, ExpandingTextarea } from '../../components';\r\n\r\nimport css from './FieldTextInput.module.css';\r\n\r\nconst CONTENT_MAX_LENGTH = 5000;\r\n\r\nconst FieldTextInputComponent = props => {\r\n  const {\r\n    rootClassName,\r\n    className,\r\n    inputRootClass,\r\n    customErrorText,\r\n    id,\r\n    label,\r\n    input,\r\n    meta,\r\n    onUnmount,\r\n    isUncontrolled,\r\n    inputRef,\r\n    hideErrorMessage,\r\n    ...rest\r\n  } = props;\r\n\r\n  if (label && !id) {\r\n    throw new Error('id required when a label is given');\r\n  }\r\n\r\n  const { valid, invalid, touched, error } = meta;\r\n  const isTextarea = input.type === 'textarea';\r\n\r\n  const errorText = customErrorText || error;\r\n\r\n  // Error message and input error styles are only shown if the\r\n  // field has been touched and the validation has failed.\r\n  const hasError = !!customErrorText || !!(touched && invalid && error);\r\n\r\n  const fieldMeta = { touched: hasError, error: errorText };\r\n\r\n  // Textarea doesn't need type.\r\n  const { type, ...inputWithoutType } = input;\r\n  // Uncontrolled input uses defaultValue instead of value.\r\n  const { value: defaultValue, ...inputWithoutValue } = input;\r\n  // Use inputRef if it is passed as prop.\r\n  const refMaybe = inputRef ? { ref: inputRef } : {};\r\n\r\n  const inputClasses =\r\n    inputRootClass ||\r\n    classNames(css.input, {\r\n      [css.inputSuccess]: valid,\r\n      [css.inputError]: hasError,\r\n      [css.textarea]: isTextarea,\r\n    });\r\n  const maxLength = CONTENT_MAX_LENGTH;\r\n  const inputProps = isTextarea\r\n    ? {\r\n        className: inputClasses,\r\n        id,\r\n        rows: 1,\r\n        maxLength,\r\n        ...refMaybe,\r\n        ...inputWithoutType,\r\n        ...rest,\r\n      }\r\n    : isUncontrolled\r\n    ? {\r\n        className: inputClasses,\r\n        id,\r\n        type,\r\n        defaultValue,\r\n        ...refMaybe,\r\n        ...inputWithoutValue,\r\n        ...rest,\r\n      }\r\n    : { className: inputClasses, id, type, ...refMaybe, ...input, ...rest };\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <div className={classes}>\r\n      {label ? <label htmlFor={id}>{label}</label> : null}\r\n      {isTextarea ? <ExpandingTextarea {...inputProps} /> : <input {...inputProps} />}\r\n      {hideErrorMessage ? null : <ValidationError fieldMeta={fieldMeta} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nFieldTextInputComponent.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  inputRootClass: null,\r\n  onUnmount: null,\r\n  customErrorText: null,\r\n  id: null,\r\n  label: null,\r\n  isUncontrolled: false,\r\n  inputRef: null,\r\n};\r\n\r\nFieldTextInputComponent.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  inputRootClass: string,\r\n\r\n  onUnmount: func,\r\n\r\n  // Error message that can be manually passed to input field,\r\n  // overrides default validation message\r\n  customErrorText: string,\r\n\r\n  // Label is optional, but if it is given, an id is also required so\r\n  // the label can reference the input in the `for` attribute\r\n  id: string,\r\n  label: string,\r\n\r\n  // Uncontrolled input uses defaultValue prop, but doesn't pass value from form to the field.\r\n  // https://reactjs.org/docs/uncontrolled-components.html#default-values\r\n  isUncontrolled: bool,\r\n  // a ref object passed for input element.\r\n  inputRef: object,\r\n\r\n  // Generated by final-form's Field component\r\n  input: shape({\r\n    onChange: func.isRequired,\r\n    // Either 'textarea' or something that is passed to the input element\r\n    type: string.isRequired,\r\n  }).isRequired,\r\n  meta: object.isRequired,\r\n};\r\n\r\nclass FieldTextInput extends Component {\r\n  componentWillUnmount() {\r\n    // Unmounting happens too late if it is done inside Field component\r\n    // (Then Form has already registered its (new) fields and\r\n    // changing the value without corresponding field is prohibited in Final Form\r\n    if (this.props.onUnmount) {\r\n      this.props.onUnmount();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <Field component={FieldTextInputComponent} {...this.props} />;\r\n  }\r\n}\r\n\r\nexport default FieldTextInput;\r\n","import React from 'react';\r\nimport { func, node, string } from 'prop-types';\r\n\r\nimport { useRouteConfiguration } from '../../context/routeConfigurationContext';\r\nimport { findRouteByRouteName } from '../../util/routes';\r\n\r\nconst PlainForm = props => {\r\n  const { children, contentRef, ...restProps } = props;\r\n\r\n  const formProps = {\r\n    // These are mainly default values for the server\r\n    // rendering. Otherwise the form would submit potentially\r\n    // sensitive data with the default GET method until the client\r\n    // side code is loaded.\r\n    method: 'post',\r\n    action: '/',\r\n\r\n    // allow content ref function to be passed to the form\r\n    ref: contentRef,\r\n\r\n    ...restProps,\r\n  };\r\n\r\n  return <form {...formProps}>{children}</form>;\r\n};\r\n\r\nconst FormWithPagePreload = props => {\r\n  const routeConfiguration = useRouteConfiguration();\r\n  const { enforcePagePreloadFor, ...restProps } = props;\r\n\r\n  const onOverFormFn = enforcePreloadOfPage => () => {\r\n    // Enforce preloading of given page (loadable component)\r\n    const { component: Page } = findRouteByRouteName(enforcePreloadOfPage, routeConfiguration);\r\n    // Loadable Component has a \"preload\" function.\r\n    if (Page.preload) {\r\n      Page.preload();\r\n    }\r\n  };\r\n\r\n  const onOverForm = onOverFormFn(enforcePagePreloadFor);\r\n  const onOverFormProps = {\r\n    onMouseOver: onOverForm,\r\n    onTouchStart: onOverForm,\r\n  };\r\n\r\n  return <PlainForm {...restProps} {...onOverFormProps} />;\r\n};\r\n\r\nconst Form = props => {\r\n  const { enforcePagePreloadFor, ...restProps } = props;\r\n  return enforcePagePreloadFor ? <FormWithPagePreload {...props} /> : <PlainForm {...restProps} />;\r\n};\r\n\r\nForm.defaultProps = {\r\n  children: null,\r\n  contentRef: null,\r\n  enforcePagePreloadFor: null,\r\n};\r\n\r\nForm.propTypes = {\r\n  children: node,\r\n  contentRef: func,\r\n  enforcePagePreloadFor: string,\r\n};\r\n\r\nexport default Form;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"h1\":\"Heading_h1__xrwSs h1\",\"h2\":\"Heading_h2__xXp2K h2\",\"h3\":\"Heading_h3__Dyd0O h3\",\"h4\":\"Heading_h4__vlOA+ h4\",\"h5\":\"Heading_h5__V9Tuj h5\",\"h6\":\"Heading_h6__G3HZp h6\"};","import React from 'react';\r\nimport { node, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './Heading.module.css';\r\n\r\n// Make it possible to use custom styling of H1, while the rendered HTML element is `<h2>`\r\nexport const Heading = props => {\r\n  const { className, rootClassName, as, styledAs, tagRef, ...otherProps } = props;\r\n  const Tag = as || 'h2';\r\n  const rootClass = rootClassName\r\n    ? rootClassName\r\n    : styledAs === 'h1'\r\n    ? css.h1\r\n    : styledAs === 'h2'\r\n    ? css.h2\r\n    : styledAs === 'h3'\r\n    ? css.h3\r\n    : styledAs === 'h4'\r\n    ? css.h4\r\n    : styledAs === 'h5'\r\n    ? css.h5\r\n    : styledAs === 'h6'\r\n    ? css.h6\r\n    : null;\r\n  const classes = classNames(rootClass, className);\r\n\r\n  return <Tag className={classes} ref={tagRef} {...otherProps} />;\r\n};\r\n\r\nconst defaultPropsHeading = {\r\n  rootClassName: null,\r\n  className: null,\r\n  children: null,\r\n  as: null,\r\n};\r\n\r\nconst propTypesHeading = {\r\n  rootClassName: string,\r\n  className: string,\r\n  children: node,\r\n  as: string,\r\n};\r\nHeading.displayName = 'Heading';\r\nHeading.defaultProps = defaultPropsHeading;\r\nHeading.propTypes = propTypesHeading;\r\n\r\nexport const H1 = React.forwardRef((props, ref) => {\r\n  const { rootClassName: rootClass, as, ...otherProps } = props;\r\n  return (\r\n    <Heading rootClassName={rootClass || css.h1} as={as || 'h1'} tagRef={ref} {...otherProps} />\r\n  );\r\n});\r\nH1.displayName = 'H1';\r\nH1.defaultProps = defaultPropsHeading;\r\nH1.propTypes = propTypesHeading;\r\n\r\nexport const H2 = React.forwardRef((props, ref) => {\r\n  const { rootClassName: rootClass, as, ...otherProps } = props;\r\n  return (\r\n    <Heading rootClassName={rootClass || css.h2} as={as || 'h2'} tagRef={ref} {...otherProps} />\r\n  );\r\n});\r\nH2.displayName = 'H2';\r\nH2.defaultProps = defaultPropsHeading;\r\nH2.propTypes = propTypesHeading;\r\n\r\nexport const H3 = React.forwardRef((props, ref) => {\r\n  const { rootClassName: rootClass, as, ...otherProps } = props;\r\n  return (\r\n    <Heading rootClassName={rootClass || css.h3} as={as || 'h3'} tagRef={ref} {...otherProps} />\r\n  );\r\n});\r\nH3.displayName = 'H3';\r\nH3.defaultProps = defaultPropsHeading;\r\nH3.propTypes = propTypesHeading;\r\n\r\nexport const H4 = React.forwardRef((props, ref) => {\r\n  const { rootClassName: rootClass, as, ...otherProps } = props;\r\n  return (\r\n    <Heading rootClassName={rootClass || css.h4} as={as || 'h4'} tagRef={ref} {...otherProps} />\r\n  );\r\n});\r\nH4.displayName = 'H4';\r\nH4.defaultProps = defaultPropsHeading;\r\nH4.propTypes = propTypesHeading;\r\n\r\nexport const H5 = React.forwardRef((props, ref) => {\r\n  const { rootClassName: rootClass, as, ...otherProps } = props;\r\n  return (\r\n    <Heading rootClassName={rootClass || css.h5} as={as || 'h5'} tagRef={ref} {...otherProps} />\r\n  );\r\n});\r\nH5.displayName = 'H5';\r\nH5.defaultProps = defaultPropsHeading;\r\nH5.propTypes = propTypesHeading;\r\n\r\nexport const H6 = React.forwardRef((props, ref) => {\r\n  const { rootClassName: rootClass, as, ...otherProps } = props;\r\n  return (\r\n    <Heading rootClassName={rootClass || css.h6} as={as || 'h6'} tagRef={ref} {...otherProps} />\r\n  );\r\n});\r\nH6.displayName = 'H6';\r\nH6.defaultProps = defaultPropsHeading;\r\nH6.propTypes = propTypesHeading;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconAdd_root__y9ttj\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconAdd.module.css';\r\n\r\nconst IconAdd = props => {\r\n  const { className, rootClassName } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  return (\r\n    <svg className={classes} width=\"12\" height=\"12\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path\r\n        d=\"M6.89 10.4V6.888h3.509a.889.889 0 1 0 0-1.779H6.89V1.6a.89.89 0 0 0-1.778 0v3.511h-3.51a.888.888 0 1 0 0 1.778h3.51v3.51a.889.889 0 1 0 1.778 0\"\r\n        fillRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconAdd.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n};\r\n\r\nIconAdd.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n};\r\n\r\nexport default IconAdd;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconArrowHead_root__2feF3\"};","import React from 'react';\r\nimport { oneOf, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconArrowHead.module.css';\r\n\r\nconst DIRECTION_RIGHT = 'right';\r\nconst DIRECTION_LEFT = 'left';\r\nconst DIRECTION_DOWN = 'down';\r\nconst DIRECTION_UP = 'up';\r\nconst SIZE_BIG = 'big';\r\nconst SIZE_SMALL = 'small';\r\n\r\nconst IconArrowHead = props => {\r\n  const { className, rootClassName, direction, size } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  const isRight = direction === DIRECTION_RIGHT;\r\n  const isLeft = direction === DIRECTION_LEFT;\r\n  const isDown = direction === DIRECTION_DOWN;\r\n  const isUp = direction === DIRECTION_UP;\r\n  const isBig = size === SIZE_BIG;\r\n  const isSmall = size === SIZE_SMALL;\r\n\r\n  if (isRight && isSmall) {\r\n    return (\r\n      <svg\r\n        className={classes}\r\n        width=\"9\"\r\n        height=\"13\"\r\n        viewBox=\"0 0 9 13\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <path\r\n          d=\"M7.472 6.97c.26-.26.26-.68 0-.94L2.14.694c-.263-.26-.684-.26-.944 0-.26.26-.26.683 0 .943L6.056 6.5l-4.86 4.862c-.26.26-.26.683 0 .943.26.26.68.26.943 0L7.47 6.97z\"\r\n          fillRule=\"evenodd\"\r\n        />\r\n      </svg>\r\n    );\r\n  } else if (isLeft && isSmall) {\r\n    return (\r\n      <svg\r\n        className={classes}\r\n        width=\"9\"\r\n        height=\"13\"\r\n        viewBox=\"0 0 9 13\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <path\r\n          d=\"M1.195 6.03c-.26.26-.26.68 0 .94l5.333 5.335c.262.26.683.26.943 0 .262-.26.262-.683 0-.943L2.61 6.5l4.86-4.862c.262-.26.262-.683 0-.943-.26-.26-.68-.26-.942 0L1.195 6.03z\"\r\n          fillRule=\"evenodd\"\r\n        />\r\n      </svg>\r\n    );\r\n  } else if (isDown && isSmall) {\r\n    return (\r\n      <svg\r\n        className={classes}\r\n        width=\"13\"\r\n        height=\"9\"\r\n        viewBox=\"0 0 13 9\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <path\r\n          d=\"M6.03 6.805c.26.26.68.26.94 0l5.335-5.333a.668.668 0 0 0-.943-.943L6.5 5.39 1.638.53a.666.666 0 1 0-.943.942L6.03 6.805z\"\r\n          fillRule=\"evenodd\"\r\n        />\r\n      </svg>\r\n    );\r\n  } else if (isUp && isSmall) {\r\n    return (\r\n      <svg\r\n        className={classes}\r\n        width=\"13\"\r\n        height=\"9\"\r\n        viewBox=\"0 0 13 9\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <path\r\n          d=\"M6.97.195a.664.664 0 0 0-.94 0L.695 5.528a.668.668 0 0 0 .943.943L6.5 1.61l4.862 4.86a.666.666 0 1 0 .943-.942L6.97.195z\"\r\n          fillRule=\"evenodd\"\r\n        />\r\n      </svg>\r\n    );\r\n  } else if (isRight && isBig) {\r\n    return (\r\n      <svg\r\n        className={classes}\r\n        width=\"11\"\r\n        height=\"15\"\r\n        viewBox=\"0 0 11 15\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <path\r\n          d=\"M1.6 14c-.17 0-.34-.065-.458-.192-.214-.228-.182-.57.07-.764L8.472 7.5 1.21 1.955c-.252-.194-.284-.535-.07-.763.214-.23.592-.257.846-.064l7.8 5.958c.135.104.212.255.212.414 0 .16-.077.31-.212.414l-7.8 5.958c-.113.086-.25.128-.388.128\"\r\n          fillRule=\"evenodd\"\r\n        />\r\n      </svg>\r\n    );\r\n  } else if (isLeft && isBig) {\r\n    return (\r\n      <svg\r\n        className={classes}\r\n        width=\"11\"\r\n        height=\"15\"\r\n        viewBox=\"0 0 11 15\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <path\r\n          d=\"M9.4 1c.17 0 .34.065.458.192.214.228.182.57-.07.764L2.528 7.5l7.26 5.545c.252.194.284.535.07.763-.214.23-.592.257-.846.064l-7.8-5.958C1.077 7.81 1 7.66 1 7.5c0-.16.077-.31.212-.414l7.8-5.958C9.125 1.042 9.262 1 9.4 1\"\r\n          fillRule=\"evenodd\"\r\n        />\r\n      </svg>\r\n    );\r\n  } else if (isDown && isBig) {\r\n    return (\r\n      <svg\r\n        className={classes}\r\n        width=\"15\"\r\n        height=\"11\"\r\n        viewBox=\"0 0 15 11\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <path\r\n          d=\"M.5 1.1C.5.93.565.76.692.642a.508.508 0 0 1 .764.07L7 7.972 12.545.71a.506.506 0 0 1 .763-.07c.23.214.257.592.064.846l-5.958 7.8A.524.524 0 0 1 7 9.498a.522.522 0 0 1-.414-.212l-5.958-7.8A.638.638 0 0 1 .5 1.098\"\r\n          fillRule=\"evenodd\"\r\n        />\r\n      </svg>\r\n    );\r\n  } else if (isUp && isBig) {\r\n    return (\r\n      <svg\r\n        className={classes}\r\n        width=\"15\"\r\n        height=\"11\"\r\n        viewBox=\"0 0 15 11\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <path\r\n          d=\"M13.5 8.9c0 .17-.065.34-.192.458a.508.508 0 0 1-.764-.07L7 2.028 1.455 9.29a.506.506 0 0 1-.763.07.644.644 0 0 1-.064-.846l5.958-7.8A.524.524 0 0 1 7 .502c.16 0 .31.077.414.212l5.958 7.8c.086.113.128.25.128.388\"\r\n          fillRule=\"evenodd\"\r\n        />\r\n      </svg>\r\n    );\r\n  }\r\n};\r\n\r\nIconArrowHead.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  size: SIZE_SMALL,\r\n};\r\n\r\nIconArrowHead.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  direction: oneOf([DIRECTION_RIGHT, DIRECTION_LEFT, DIRECTION_DOWN, DIRECTION_UP]).isRequired,\r\n  size: oneOf([SIZE_BIG, SIZE_SMALL]),\r\n};\r\n\r\nexport default IconArrowHead;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"backgroundLight\":\"IconBannedUser_backgroundLight__GBXpQ\",\"backgroundDark\":\"IconBannedUser_backgroundDark__FovBG\",\"foregroundFill\":\"IconBannedUser_foregroundFill__4CQGC\",\"foregroundStroke\":\"IconBannedUser_foregroundStroke__+9WC4\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport css from './IconBannedUser.module.css';\r\n\r\nconst IconBannedUser = props => {\r\n  const { className } = props;\r\n  return (\r\n    <svg\r\n      className={className}\r\n      width=\"40\"\r\n      height=\"40\"\r\n      viewBox=\"0 0 40 40\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <defs>\r\n        <linearGradient id=\"background\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\r\n          <stop offset=\"0%\" className={css.backgroundLight} />\r\n          <stop offset=\"100%\" className={css.backgroundDark} />\r\n        </linearGradient>\r\n      </defs>\r\n      <g fill=\"none\" fillRule=\"evenodd\">\r\n        <circle fill=\"url(#background)\" cx=\"20\" cy=\"20\" r=\"20\" />\r\n        <circle className={css.foregroundStroke} strokeWidth=\"3\" cx=\"20\" cy=\"20\" r=\"13\" />\r\n        <path className={css.foregroundFill} d=\"M28.34 9.04l2.12 2.12-19.8 19.8-2.12-2.12z\" />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconBannedUser.defaultProps = { className: null };\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconBannedUser.propTypes = { className: string };\r\n\r\nexport default IconBannedUser;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconCheckMark_root__75FTS\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconCheckMark.module.css';\r\n\r\nconst SIZE_SMALL = 'small';\r\nconst SIZE_BIG = 'big';\r\n\r\nconst IconCheckmark = props => {\r\n  const { rootClassName, className, size } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  if (size === SIZE_SMALL) {\r\n    return (\r\n      <svg className={classes} width=\"16\" height=\"12\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path\r\n          d=\"M14 2l-8 8-4-4\"\r\n          strokeWidth=\"2.5\"\r\n          fill=\"none\"\r\n          fillRule=\"evenodd\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n        />\r\n      </svg>\r\n    );\r\n  } else if (size === SIZE_BIG) {\r\n    return (\r\n      <svg className={classes} strokeWidth=\"2\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path d=\"M22.6 1.2c-.4-.3-1-.2-1.3.2L7.8 19l-5.2-5c-.4-.4-1-.4-1.3 0-.4.3-.4.8 0 1l6 5.6.6.2s.2 0 .4-.4l14.3-18c.3-.5.2-1-.2-1\" />\r\n      </svg>\r\n    );\r\n  }\r\n};\r\n\r\nIconCheckmark.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  size: 'big',\r\n};\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconCheckmark.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  size: string,\r\n};\r\n\r\nexport default IconCheckmark;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconClose_root__TZxbc\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconClose.module.css';\r\nconst SIZE_SMALL = 'small';\r\n\r\nconst IconClose = props => {\r\n  const { className, rootClassName, size } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  if (size === SIZE_SMALL) {\r\n    return (\r\n      <svg className={classes} width=\"9\" height=\"9\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path\r\n          d=\"M2.175 8.396l2.482-2.482 2.482 2.482a.889.889 0 1 0 1.258-1.257L5.914 4.657l2.482-2.483A.89.89 0 0 0 7.139.917L4.657 3.4 2.175.918A.888.888 0 1 0 .917 2.174L3.4 4.657.918 7.139a.889.889 0 1 0 1.257 1.257\"\r\n          fillRule=\"evenodd\"\r\n        />\r\n      </svg>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <svg\r\n      className={classes}\r\n      width=\"12\"\r\n      height=\"12\"\r\n      viewBox=\"0 0 12 12\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <g transform=\"translate(-1 -1)\" fillRule=\"evenodd\">\r\n        <rect transform=\"rotate(45 7 7)\" x=\"-1\" y=\"6\" width=\"16\" height=\"2\" rx=\"1\" />\r\n        <rect transform=\"rotate(-45 7 7)\" x=\"-1\" y=\"6\" width=\"16\" height=\"2\" rx=\"1\" />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconClose.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n};\r\n\r\nIconClose.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n};\r\n\r\nexport default IconClose;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconDelete_root__Yr5E6\"};","import React from 'react';\r\nimport { string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconDelete.module.css';\r\n\r\nconst IconDelete = props => {\r\n  const { className, rootClassName } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  return (\r\n    <svg className={classes} width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path\r\n        d=\"M11.5 14h-7a1 1 0 0 1-1-1V4h9v9a1 1 0 0 1-1 1Zm-5-3V7m3 4V7m-8-3h13m-5-2h-3a1 1 0 0 0-1 1v1h5V3a1 1 0 0 0-1-1Z\"\r\n        strokeWidth=\"1.5\"\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconDelete.defaultProps = { className: null };\r\n\r\nIconDelete.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n};\r\n\r\nexport default IconDelete;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconDisputeOrder_root__h+zUy\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconDisputeOrder.module.css';\r\n\r\nconst IconDisputeOrder = props => {\r\n  const { className, rootClassName } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  return (\r\n    <svg className={classes} width=\"45\" height=\"45\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <g\r\n        strokeWidth=\"2.75\"\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path d=\"M9.063 33.25H7.718a5.375 5.375 0 01-5.375-5.375V22.5a5.375 5.375 0 015.375-5.375h1.343c.743 0 1.344.602 1.344 1.344v13.437c0 .742-.601 1.344-1.344 1.344zm28.218 0h-1.343a1.344 1.344 0 01-1.344-1.344V18.47c0-.742.601-1.344 1.343-1.344h1.344a5.375 5.375 0 015.375 5.375v5.375a5.375 5.375 0 01-5.375 5.375zM7.719 17.125c0-8.163 6.618-14.781 14.781-14.781h0a14.781 14.781 0 0114.781 14.781\" />\r\n        <path d=\"M27.875 39.969h4.031a5.375 5.375 0 005.375-5.375h0V33.25\" />\r\n        <path d=\"M25.188 42.656H22.5a2.687 2.687 0 01-2.688-2.687h0A2.687 2.687 0 0122.5 37.28h2.688a2.687 2.687 0 012.687 2.688h0a2.687 2.687 0 01-2.688 2.687zm-8.063-13.989a7.98 7.98 0 0010.75 0m-10.75-9.777v2.35m10.75-2.35v2.35\" />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconDisputeOrder.defaultProps = { className: null, rootClassName: null };\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconDisputeOrder.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n};\r\n\r\nexport default IconDisputeOrder;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconEdit_root__xdc0G\",\"pencil\":\"IconEdit_pencil__4dFjE\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconEdit.module.css';\r\n\r\nconst IconEdit = props => {\r\n  const { rootClassName, className, pencilClassName } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <svg className={classes} width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <g\r\n        className={pencilClassName || css.pencil}\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path d=\"M5.307 11.155L1 13l1.846-4.308L10.539 1 13 3.461zM11 5L9 3M5 11L3 9\" />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconEdit.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  pencilClassName: null,\r\n};\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconEdit.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  pencilClassName: string,\r\n};\r\n\r\nexport default IconEdit;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconEmailAttention_root__nG6JR\",\"marketplaceStroke\":\"IconEmailAttention_marketplaceStroke__3BzwO\",\"attentionStroke\":\"IconEmailAttention_attentionStroke__u2Fiv\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconEmailAttention.module.css';\r\n\r\nconst IconEmailAttention = props => {\r\n  const { rootClassName, className } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <svg\r\n      className={classes}\r\n      width=\"52\"\r\n      height=\"45\"\r\n      viewBox=\"0 0 52 45\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <g fill=\"none\" fillRule=\"evenodd\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n        <path\r\n          className={css.attentionStroke}\r\n          d=\"M50 30.5C50 37.406 44.406 43 37.5 43S25 37.406 25 30.5C25 23.596 30.594 18 37.5 18S50 23.596 50 30.5z\"\r\n          strokeWidth=\"2.5\"\r\n        />\r\n        <path className={css.attentionStroke} strokeWidth=\"2.5\" d=\"M44 28l-8 8-4-4\" />\r\n        <path\r\n          className={css.marketplaceStroke}\r\n          d=\"M20.43 32H5.07C3.377 32 2 30.558 2 28.786V5.214C2 3.438 3.376 2 5.07 2h36.86C43.623 2 45 3.438 45 5.214v9.643\"\r\n          strokeWidth=\"2.75\"\r\n        />\r\n        <path className={css.marketplaceStroke} strokeWidth=\"2.75\" d=\"M43 4.026L23.015 17 3 4\" />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconEmailAttention.defaultProps = { rootClassName: null, className: null };\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconEmailAttention.propTypes = { rootClassName: string, className: string };\r\n\r\nexport default IconEmailAttention;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconEmailSent_root__WhOmj\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconEmailSent.module.css';\r\n\r\nconst IconEmailSent = props => {\r\n  const { rootClassName, className } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <svg\r\n      className={classes}\r\n      width=\"70\"\r\n      height=\"33\"\r\n      viewBox=\"0 0 70 33\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <g\r\n        strokeWidth=\"3\"\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path d=\"M59.592 26.65c-.958 2.4-3.67 4.35-6.056 4.35H18.93c-2.387 0-3.552-1.95-2.595-4.35l8.075-20.3C25.364 3.95 28.078 2 30.466 2H65.07c2.39 0 3.55 1.95 2.596 4.35l-8.074 20.3z\" />\r\n        <path d=\"M62 8L41.345 19 30 8M22 26l10-7M54 26l-4.5-5.5M17 5H2M6.528 25H2M11.513 15.5H2\" />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconEmailSent.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n};\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconEmailSent.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n};\r\n\r\nexport default IconEmailSent;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconEmailSuccess_root__8RmMn\",\"marketplaceStroke\":\"IconEmailSuccess_marketplaceStroke__Ewf8V\",\"successFill\":\"IconEmailSuccess_successFill__b69hW\",\"checkStroke\":\"IconEmailSuccess_checkStroke__F2Jfo\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconEmailSuccess.module.css';\r\n\r\nconst IconEmailSuccess = props => {\r\n  const { rootClassName, className } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <svg\r\n      className={classes}\r\n      width=\"51\"\r\n      height=\"44\"\r\n      viewBox=\"0 0 51 44\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <g transform=\"translate(2 2)\" fill=\"none\" fillRule=\"evenodd\">\r\n        <circle className={css.successFill} cx=\"35.5\" cy=\"28.5\" r=\"13.5\" />\r\n        <path\r\n          className={css.checkStroke}\r\n          strokeWidth=\"2.5\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          d=\"M42 26l-8 8-4-4\"\r\n        />\r\n        <path\r\n          d=\"M18.43 30H3.07C1.377 30 0 28.558 0 26.786V3.214C0 1.438 1.376 0 3.07 0h36.86C41.623 0 43 1.438 43 3.214v9.643\"\r\n          className={css.marketplaceStroke}\r\n          strokeWidth=\"2.75\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n        />\r\n        <path\r\n          className={css.marketplaceStroke}\r\n          strokeWidth=\"2.75\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          d=\"M41 2.026L21.015 15 1 2\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconEmailSuccess.defaultProps = { rootClassName: null, className: null };\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconEmailSuccess.propTypes = { rootClassName: string, className: string };\r\n\r\nexport default IconEmailSuccess;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconInquiry_root__j1p9u\",\"marketplaceColorStroke\":\"IconInquiry_marketplaceColorStroke__XdBwN\"};","import React from 'react';\r\nimport { string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconInquiry.module.css';\r\n\r\nconst IconInquiry = props => {\r\n  const { rootClassName, className } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <svg className={classes} width=\"47\" height=\"46\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <g\r\n        className={css.marketplaceColorStroke}\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path\r\n          d=\"M37.522 17L45 22.22v19.933C45 43.724 43.744 45 42.196 45H4.804C3.256 45 2 43.724 2 42.153V22.22L9.478 17\"\r\n          strokeWidth=\"2\"\r\n        />\r\n        <path\r\n          strokeWidth=\"2.5\"\r\n          d=\"M8 40l9.412-8h13.176L40 40M45 23l-11 8M2 23l11 8M38 27V2H10v25M15 8h4M19 13h13M15 19h17M15 24h17\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconInquiry.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n};\r\n\r\nIconInquiry.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n};\r\n\r\nexport default IconInquiry;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"strokeMarketplaceColor\":\"IconKeysSuccess_strokeMarketplaceColor__uas4f\",\"fillSuccessColor\":\"IconKeysSuccess_fillSuccessColor__J5r3-\",\"strokeLightColor\":\"IconKeysSuccess_strokeLightColor__dpGnW\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconKeysSuccess.module.css';\r\n\r\nconst IconKeysSuccess = props => {\r\n  const { className } = props;\r\n  return (\r\n    <svg className={className} width=\"52\" height=\"60\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <g transform=\"translate(2 2)\" fill=\"none\" fillRule=\"evenodd\">\r\n        <path\r\n          className={css.strokeMarketplaceColor}\r\n          d=\"M25 19.6C25 12.6 19.4 7 12.5 7 5.5 7 0 12.7 0 19.6c0 5.8 3.8 10.7 9 12.2v2.8L7 37 9 39v2.3L7 43.8 9 46v3.5l3.5 3.5 3.4-3.5V31.8c5.2-1.5 9-6.4 9-12.2z\"\r\n          strokeWidth=\"2.5\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n        />\r\n        <path\r\n          className={css.strokeMarketplaceColor}\r\n          d=\"M16 15.5c0 2-1.6 3.5-3.5 3.5-2 0-3.5-1.6-3.5-3.5 0-2 1.6-3.5 3.5-3.5 2 0 3.5 1.6 3.5 3.5z\"\r\n          strokeWidth=\"2\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n        />\r\n        <path\r\n          className={css.strokeMarketplaceColor}\r\n          d=\"M16 33.5c4 2.2 8.6 2.2 12.5 0l2.5 2.2V39h3.5l1 1.3v3.4h3.2L41 46h5v-4.8L33.4 28.7c2.7-4.8 2-11-2-15-3-3-7-4-10.7-3.6\"\r\n          strokeWidth=\"2.5\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n        />\r\n        <path\r\n          className={css.strokeMarketplaceColor}\r\n          d=\"M13 15V4.6C13 2 15 0 17.5 0S22 2 22 4.6v5.2\"\r\n          strokeWidth=\"2.5\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n        />\r\n        <circle\r\n          className={classNames(css.strokeLightColor, css.fillSuccessColor)}\r\n          strokeWidth=\"2\"\r\n          cx=\"35.5\"\r\n          cy=\"43.5\"\r\n          r=\"13.5\"\r\n        />\r\n        <path\r\n          className={css.strokeLightColor}\r\n          strokeWidth=\"2.5\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          d=\"M42 41l-8 8-4-4\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconKeysSuccess.defaultProps = { className: null };\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconKeysSuccess.propTypes = {\r\n  className: string,\r\n};\r\n\r\nexport default IconKeysSuccess;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"strokeMarketplaceColor\":\"IconKeys_strokeMarketplaceColor__trwfO\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport css from './IconKeys.module.css';\r\n\r\nconst IconKeys = props => {\r\n  const { className } = props;\r\n  return (\r\n    <svg\r\n      className={className}\r\n      width=\"50px\"\r\n      height=\"57px\"\r\n      viewBox=\"0 0 50 57\"\r\n      version=\"1.1\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <g\r\n        stroke=\"none\"\r\n        strokeWidth=\"1\"\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <g className={css.strokeMarketplaceColor} transform=\"translate(-538.000000, -240.000000)\">\r\n          <g transform=\"translate(540.000000, 242.000000)\">\r\n            <g>\r\n              <path\r\n                d=\"M25,19.65 C25,12.6626 19.4022727,7 12.5,7 C5.59772727,7 0,12.6626 0,19.65 C0,25.4391 3.84772727,30.3082 9.09090909,31.8101 L9.09090909,34.6 L6.81818182,36.8977 L9.09090909,39.2 L9.09090909,41.5 L6.81818182,43.8 L9.09090909,46.1 L9.09090909,49.55 L12.5,53 L15.9090909,49.55 L15.9090909,31.8101 C21.1522727,30.3082 25,25.4391 25,19.65 L25,19.65 Z\"\r\n                strokeWidth=\"2.5\"\r\n              />\r\n              <path\r\n                d=\"M16,15.5 C16,17.432 14.432,19 12.5,19 C10.568,19 9,17.432 9,15.5 C9,13.568 10.568,12 12.5,12 C14.432,12 16,13.568 16,15.5 L16,15.5 Z\"\r\n                strokeWidth=\"2\"\r\n              />\r\n              <path\r\n                d=\"M16,33.460821 C19.8584615,35.6660894 24.6353846,35.6843714 28.5192308,33.5362343 L31,35.7163649 L31,39.1442433 L34.4615385,39.1442433 L35.6153846,40.3440007 L35.6153846,43.7147478 L38.6546154,43.7147478 L41.1053846,46 L46,46 L46,41.15298 L33.4138462,28.6892143 C36.1138462,23.9061813 35.4192308,17.7474266 31.3138462,13.6819628 C28.42,10.8162565 24.4784615,9.62335484 20.71,10.1032578\"\r\n                strokeWidth=\"2.5\"\r\n              />\r\n              <path\r\n                d=\"M13,15 L13,4.61538462 C13,2.06769231 15.016,0 17.5,0 C19.984,0 22,2.06769231 22,4.61538462 L22,9.81230769\"\r\n                strokeWidth=\"2.5\"\r\n              />\r\n            </g>\r\n          </g>\r\n        </g>\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconKeys.defaultProps = { className: null };\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconKeys.propTypes = {\r\n  className: string,\r\n};\r\n\r\nexport default IconKeys;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconReviewStar_root__IShrq\",\"filled\":\"IconReviewStar_filled__d+j59\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconReviewStar.module.css';\r\n\r\nconst IconReviewStar = props => {\r\n  const { className, rootClassName, isFilled } = props;\r\n  const filledOrDefault = isFilled ? css.filled : css.root;\r\n  const classes = classNames(rootClassName || filledOrDefault, className);\r\n\r\n  return (\r\n    <svg\r\n      className={classes}\r\n      width=\"23\"\r\n      height=\"23\"\r\n      viewBox=\"0 0 23 23\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path\r\n        d=\"M22.938 8.008c-.15-.412-.544-.69-.985-.69H14.38L12.507.758C12.377.31 11.967 0 11.5 0c-.467 0-.88.31-1.006.76L8.618 7.317H1.046c-.442 0-.833.278-.983.69-.15.414-.025.876.314 1.16l5.7 4.75L3.2 21.59c-.16.43-.02.916.346 1.196.362.28.87.29 1.242.02l6.71-4.79 6.713 4.79c.375.27.88.26 1.245-.02.366-.28.504-.765.343-1.196l-2.875-7.67 5.7-4.75c.34-.284.463-.746.315-1.16\"\r\n        fillRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconReviewStar.defaultProps = { className: null, rootClassName: null, isFilled: false };\r\n\r\nconst { bool, string } = PropTypes;\r\n\r\nIconReviewStar.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  isFilled: bool,\r\n};\r\n\r\nexport default IconReviewStar;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconReviewUser_root__d0XUN\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconReviewUser.module.css';\r\n\r\nconst IconReviewUser = props => {\r\n  const { className, rootClassName } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  return (\r\n    <svg\r\n      className={classes}\r\n      width=\"46\"\r\n      height=\"47\"\r\n      viewBox=\"0 0 46 47\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <g fill=\"none\" fillRule=\"evenodd\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n        <path strokeWidth=\"2.75\" d=\"M8 45h32V2H8z\" />\r\n        <path d=\"M8 2H4c-1.1 0-2 .84-2 1.87v39.26C2 44.16 2.9 45 4 45h4\" strokeWidth=\"2.5\" />\r\n        <path\r\n          d=\"M26.35 24v2.77l4.822 1.34c1.005.278 1.828 1.336 1.828 2.352V36H14v-5.538c0-1.016.823-2.074 1.826-2.352l4.824-1.34V24M29 18c0 3.315-2.464 6-5.5 6-3.038 0-5.5-2.685-5.5-6 0-3.313 2.462-6 5.5-6 3.036 0 5.5 2.687 5.5 6z\"\r\n          strokeWidth=\"2\"\r\n        />\r\n        <path\r\n          d=\"M28.5 17.01c-.847 1-3.27.996-4.183-1.01-1.694 2-4.447 2-5.817.858M41 5h1.333C43.8 5 45 6.62 45 8.6V14h-4M41 14h4v9h-4M41 23h4v10h-4M41 33h4v5.4c0 1.98-1.2 3.6-2.667 3.6H41\"\r\n          strokeWidth=\"1.5\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconReviewUser.defaultProps = { className: null, rootClassName: null };\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconReviewUser.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n};\r\n\r\nexport default IconReviewUser;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconSearch_root__Q7fke\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconSearch.module.css';\r\n\r\nconst IconSearch = props => {\r\n  const { rootClassName, className } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <svg\r\n      className={classes}\r\n      width=\"21\"\r\n      height=\"22\"\r\n      viewBox=\"0 0 21 22\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <g\r\n        transform=\"matrix(-1 0 0 1 20 1)\"\r\n        strokeWidth=\"2\"\r\n        fill=\"none\"\r\n        fillRule=\"evenodd\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      >\r\n        <path d=\"M13 14l5.241 5.241\" />\r\n        <circle cx=\"7.5\" cy=\"7.5\" r=\"7.5\" />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconSearch.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n};\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconSearch.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n};\r\n\r\nexport default IconSearch;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconSocialMediaFacebook_root__jwuBN\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconSocialMediaFacebook.module.css';\r\n\r\nconst IconSocialMediaFacebook = props => {\r\n  const { rootClassName, className } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <svg\r\n      className={classes}\r\n      width=\"10\"\r\n      height=\"17\"\r\n      viewBox=\"0 0 10 17\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path\r\n        d=\"M8.65 1.108C8.413 1.072 7.59 1 6.633 1c-2 0-3.374 1.244-3.374 3.525V6.49H1v2.668h2.258v6.84h2.71V9.16h2.25l.345-2.668H5.968V4.786c0-.766.204-1.298 1.293-1.298h1.39v-2.38z\"\r\n        fillRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconSocialMediaFacebook.defaultProps = { rootClassName: null, className: null };\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconSocialMediaFacebook.propTypes = { rootClassName: string, className: string };\r\n\r\nexport default IconSocialMediaFacebook;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconSocialMediaInstagram_root__xCsnV\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconSocialMediaInstagram.module.css';\r\n\r\nconst IconSocialMediaInstagram = props => {\r\n  const { rootClassName, className } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <svg className={classes} width=\"16\" height=\"17\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path\r\n        d=\"M10.286 8.57C10.286 7.156 9.13 6 7.714 6c-1.416 0-2.57 1.155-2.57 2.57s1.154 2.573 2.57 2.573c1.417 0 2.572-1.155 2.572-2.572zm1.386 0c0 2.19-1.768 3.96-3.958 3.96-2.19 0-3.957-1.77-3.957-3.96 0-2.188 1.768-3.956 3.957-3.956 2.19 0 3.958 1.768 3.958 3.957zm1.085-4.117c0 .512-.412.924-.924.924-.513 0-.925-.412-.925-.924s.412-.924.925-.924c.512 0 .924.41.924.923zm-5.043-2.21c-1.125 0-3.535-.09-4.55.312-.352.14-.613.31-.884.582-.27.27-.442.533-.582.884-.402 1.016-.312 3.426-.312 4.55 0 1.126-.09 3.537.312 4.552.14.35.31.612.582.884.27.27.533.442.884.582 1.015.402 3.425.312 4.55.312s3.536.09 4.55-.312c.352-.14.613-.31.884-.582.272-.272.442-.533.583-.884.403-1.015.312-3.426.312-4.55 0-1.126.09-3.536-.31-4.55-.142-.352-.312-.614-.584-.885-.27-.27-.532-.442-.883-.582-1.015-.402-3.426-.312-4.55-.312zM15.43 8.57c0 1.066.01 2.12-.052 3.186-.06 1.235-.34 2.33-1.245 3.234-.904.904-2 1.185-3.235 1.245-1.064.06-2.12.05-3.184.05s-2.12.01-3.184-.05c-1.235-.06-2.33-.34-3.234-1.245-.904-.904-1.186-2-1.246-3.234C-.01 10.69 0 9.636 0 8.57c0-1.063-.01-2.118.05-3.183.06-1.235.342-2.33 1.246-3.234C2.2 1.25 3.296.968 4.53.907c1.065-.06 2.12-.05 3.184-.05 1.065 0 2.12-.01 3.184.05 1.236.06 2.33.342 3.235 1.246.904.904 1.185 2 1.245 3.234.06 1.065.05 2.12.05 3.184z\"\r\n        fillRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconSocialMediaInstagram.defaultProps = { rootClassName: null, className: null };\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconSocialMediaInstagram.propTypes = { rootClassName: string, className: string };\r\n\r\nexport default IconSocialMediaInstagram;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconSocialMediaTwitter_root__BPdxJ\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconSocialMediaTwitter.module.css';\r\n\r\nconst IconSocialMediaTwitter = props => {\r\n  const { rootClassName, className } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <svg\r\n      className={classes}\r\n      width=\"16\"\r\n      height=\"14\"\r\n      viewBox=\"0 0 16 14\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path\r\n        d=\"M14.956 2.37c-.513.225-1.07.388-1.647.45.592-.36 1.044-.928 1.257-1.604-.55.334-1.17.577-1.816.703-.52-.568-1.265-.92-2.09-.92C9.077 1 7.8 2.307 7.8 3.912c0 .225.028.45.072.667C5.5 4.45 3.382 3.3 1.974 1.53c-.248.433-.39.928-.39 1.47 0 1.01.505 1.9 1.276 2.424-.47-.018-.912-.153-1.293-.37v.036c0 1.416.983 2.587 2.293 2.858-.24.063-.496.1-.752.1-.186 0-.363-.02-.54-.046.362 1.154 1.416 1.992 2.674 2.02-.983.783-2.214 1.243-3.55 1.243-.24 0-.462-.01-.692-.036 1.266.83 2.772 1.308 4.392 1.308 5.26 0 8.138-4.435 8.138-8.284 0-.126 0-.252-.008-.38.557-.413 1.045-.927 1.434-1.504z\"\r\n        fillRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconSocialMediaTwitter.defaultProps = { rootClassName: null, className: null };\r\n\r\nconst { string } = PropTypes;\r\n\r\nIconSocialMediaTwitter.propTypes = { rootClassName: string, className: string };\r\n\r\nexport default IconSocialMediaTwitter;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconSpinner_root__KBUl2\"};","import React, { useEffect, useState } from 'react';\r\nimport { number, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconSpinner.module.css';\r\n\r\nconst IconSpinner = props => {\r\n  const { rootClassName, className } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <svg\r\n      className={classes}\r\n      viewBox=\"0 0 30 30\"\r\n      preserveAspectRatio=\"xMidYMid\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <circle cx=\"15\" cy=\"15\" r=\"12\" fill=\"none\" strokeLinecap=\"round\">\r\n        <animateTransform\r\n          attributeName=\"transform\"\r\n          type=\"rotate\"\r\n          calcMode=\"linear\"\r\n          values=\"0 15 15;180 15 15;720 15 15\"\r\n          keyTimes=\"0;0.5;1\"\r\n          dur=\"0.9s\"\r\n          begin=\"0s\"\r\n          repeatCount=\"indefinite\"\r\n        />\r\n        <animate\r\n          attributeName=\"stroke-dasharray\"\r\n          calcMode=\"linear\"\r\n          values=\"9 56;46 14;9 56\"\r\n          keyTimes=\"0;0.5;1\"\r\n          dur=\"0.9s\"\r\n          begin=\"0s\"\r\n          repeatCount=\"indefinite\"\r\n        />\r\n      </circle>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst DelayedSpinner = props => {\r\n  const [showSpinner, setShowSpinner] = useState(false);\r\n  const { delay = 600, ...restOfProps } = props;\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => setShowSpinner(true), delay);\r\n    return () => clearTimeout(timer);\r\n  });\r\n\r\n  return showSpinner ? <IconSpinner {...restOfProps} /> : null;\r\n};\r\n\r\nDelayedSpinner.propTypes = {\r\n  delay: number.isRequired,\r\n};\r\n\r\nconst Spinner = props => {\r\n  const { delay, ...restOfProps } = props;\r\n\r\n  return delay != null ? <DelayedSpinner {...props} /> : <IconSpinner {...restOfProps} />;\r\n};\r\n\r\nSpinner.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  delay: null,\r\n};\r\n\r\nSpinner.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  delay: number,\r\n};\r\n\r\nexport default Spinner;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconSuccess_root__oYYds\",\"fillColor\":\"IconSuccess_fillColor__PK2NJ\"};","import React from 'react';\r\nimport { string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconSuccess.module.css';\r\n\r\nconst IconSuccess = props => {\r\n  const { rootClassName, className, fillColor } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <svg className={classes} width=\"24\" height=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <g fill=\"none\" fillRule=\"evenodd\">\r\n        <circle className={fillColor || css.fillColor} cx=\"12\" cy=\"12\" r=\"12\" />\r\n        <path\r\n          stroke=\"#FFF\"\r\n          strokeWidth=\"2.5\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n          d=\"M16 8l-5.184 8L8 12.439\"\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nIconSuccess.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  fillColor: null,\r\n};\r\n\r\nIconSuccess.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  fillColor: string,\r\n};\r\n\r\nexport default IconSuccess;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ImageFromFile_root__LUGSh\",\"aspectWrapper\":\"ImageFromFile_aspectWrapper__D0MzP\",\"rootForImage\":\"ImageFromFile_rootForImage__Ad67h\"};","import React, { useState } from 'react';\r\nimport { any, node, number, string } from 'prop-types';\r\nimport { FormattedMessage } from '../../util/reactIntl';\r\nimport classNames from 'classnames';\r\n\r\nimport { AspectRatioWrapper, Promised } from '../../components';\r\n\r\nimport css from './ImageFromFile.module.css';\r\n\r\n// readImage returns a promise which is resolved\r\n// when FileReader has loaded given file as dataURL\r\nconst readImage = file =>\r\n  new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = e => resolve(e.target.result);\r\n    reader.onerror = e => {\r\n      // eslint-disable-next-line\r\n      console.error('Error (', e, `) happened while reading ${file.name}: ${e.target.result}`);\r\n      reject(new Error(`Error reading ${file.name}: ${e.target.result}`));\r\n    };\r\n    reader.readAsDataURL(file);\r\n  });\r\n\r\n// Create elements out of given thumbnail file\r\nconst ImageFromFile = props => {\r\n  const [promisedImage, setPromisedImage] = useState(readImage(props.file));\r\n  const { className, rootClassName, aspectWidth, aspectHeight, file, id, children } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  return (\r\n    <Promised\r\n      key={id}\r\n      promise={promisedImage}\r\n      renderFulfilled={dataURL => {\r\n        return (\r\n          <div className={classes}>\r\n            <AspectRatioWrapper width={aspectWidth} height={aspectHeight}>\r\n              <img src={dataURL} alt={file.name} className={css.rootForImage} />\r\n            </AspectRatioWrapper>\r\n            {children}\r\n          </div>\r\n        );\r\n      }}\r\n      renderRejected={() => (\r\n        <div className={classes}>\r\n          <FormattedMessage id=\"ImageFromFile.couldNotReadFile\" />\r\n        </div>\r\n      )}\r\n    />\r\n  );\r\n};\r\n\r\nImageFromFile.defaultProps = {\r\n  className: null,\r\n  children: null,\r\n  rootClassName: null,\r\n  aspectWidth: 1,\r\n  aspectHeight: 1,\r\n};\r\n\r\nImageFromFile.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  aspectWidth: number,\r\n  aspectHeight: number,\r\n  file: any.isRequired,\r\n  id: string.isRequired,\r\n  children: node,\r\n};\r\n\r\nexport default ImageFromFile;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { func, node, objectOf, shape, string } from 'prop-types';\r\n\r\n// We are standing on the shoulders of giants.\r\n// This component is adapted from the great work done\r\n// in React Layout Areas and Atomic Layouts projects!\r\n// - https://github.com/giuseppeg/react-layout-areas\r\n// - https://github.com/kettanaito/atomic-layout\r\n\r\n// Avoid parsing the same stuff over and over again.\r\nconst cache = {};\r\n\r\n/**\r\n * Parses CSS Grid template areas string.\r\n * For example:\r\n * `\r\n *  topbar\r\n *  main\r\n *  footer\r\n * `\r\n *\r\n * @param {String} areas for CSS Grid\r\n * @returns object containing generated Area *components* and *gridTemplateAreas*. E.g. \"'topbar' 'main' 'footer' \"\r\n */\r\nconst parseAreas = areas => {\r\n  if (cache.hasOwnProperty(areas)) {\r\n    return cache[areas];\r\n  }\r\n\r\n  // Split areas string to rows from line breaks and remove empty lines.\r\n  const splitToRows = areasString =>\r\n    areasString\r\n      .trim()\r\n      .split('\\n')\r\n      .filter(Boolean);\r\n  // Split rows to words (area names) from white-space and remove empty strings\r\n  const splitToAreaNames = rowString => rowString.split(/\\s+/).filter(Boolean);\r\n  // kebab-case to camelCase\r\n  const camelize = s => s.replace(/-(.)/g, l => l[1].toUpperCase());\r\n  // Capitalize initial letter\r\n  const capitalizeWord = s => `${s.charAt(0).toUpperCase()}${s.substr(1)}`;\r\n\r\n  const result = splitToRows(areas)\r\n    .map(row => splitToAreaNames(row))\r\n    .reduce(\r\n      (result, areaNames) => {\r\n        areaNames.forEach(areaName => {\r\n          const Component = React.forwardRef((props, ref) => {\r\n            const { as, style, ...otherProps } = props;\r\n            const Tag = as || 'div';\r\n            return <Tag {...otherProps} style={{ ...style, gridArea: areaName }} ref={ref} />;\r\n          });\r\n\r\n          const displayName = camelize(capitalizeWord(areaName));\r\n          Component.displayName = `LayoutArea.${displayName}`;\r\n          result.components[displayName] = Component;\r\n        });\r\n        result.gridTemplateAreas += `'${areaNames.join(' ')}' `;\r\n        return result;\r\n      },\r\n      { components: {}, gridTemplateAreas: '' }\r\n    );\r\n\r\n  cache[areas] = result;\r\n  return result;\r\n};\r\n\r\n// Handle resize event:\r\n// if event matches with the rule set to MediaQueryList, call callback with parsed areas\r\nconst resize = (config, callback) => e => {\r\n  // If media query matches\r\n  if (e.matches) {\r\n    callback(parseAreas(config.areas));\r\n  }\r\n};\r\n\r\n// Set the current areas according to responsiveAreas config and adds listeners for MediaQueryList changes\r\nconst handleResponsiveAreasOnBrowser = (responsiveAreas, setAreas) => {\r\n  let resizeListeners = [];\r\n  const entries = Object.entries(responsiveAreas);\r\n  entries.forEach(([name, config]) => {\r\n    const { mediaQuery, areas } = config;\r\n    const mediaQueryList = window.matchMedia(mediaQuery);\r\n    // Set areas if current viewport matches\r\n    if (mediaQueryList.matches) {\r\n      setAreas(parseAreas(areas));\r\n    }\r\n    // Create listener for future matches of MQL rule\r\n    const resizeListener = resize(config, setAreas);\r\n    // Save MQL and listener for future \"removeEventListener\" call\r\n    resizeListeners.push({ mediaQueryList, resizeListener });\r\n    // Add the created resizeListener to MQL\r\n    mediaQueryList.addEventListener('change', resizeListener);\r\n  });\r\n  return resizeListeners;\r\n};\r\n\r\n// Parse default areas for state hook.\r\nconst parseDefaultAreasFromProps = props => {\r\n  const { areas, responsiveAreas } = props;\r\n  if (areas) {\r\n    return parseAreas(areas);\r\n  } else if (responsiveAreas) {\r\n    const firstKey = Object.keys(responsiveAreas)[0];\r\n    const firstAreasString = responsiveAreas?.[firstKey]?.areas;\r\n    if (firstAreasString) {\r\n      return parseAreas(firstAreasString);\r\n    }\r\n  }\r\n  throw new Error(\r\n    'LayoutComposer needs to have either \"areas\" or \"responsiveAreas\" included into props.'\r\n  );\r\n};\r\n\r\n/**\r\n * LayoutComposer creates container and area wrappers using CSS Grid Template Areas.\r\n * Example:\r\n *\r\n * const layoutAreas = `\r\n *   topbar\r\n *   main\r\n *   footer\r\n * `;\r\n *\r\n * return (\r\n *   <LayoutComposer areas={layoutAreas} className={css.layout}>\r\n *     {props => {\r\n *       const { Topbar, Main, Footer } = props;\r\n *       return (\r\n *         <>\r\n *           <Topbar as=\"h1\" className={css.topbar}>\r\n *             Hello world!\r\n *           </Topbar>\r\n *           <Main as=\"main\" className={css.main}>\r\n *             Some custom content.\r\n *           </Main>\r\n *           <Footer>\r\n *             Contact us\r\n *           </Footer>\r\n *         </>\r\n *       );\r\n *     }}\r\n *   </LayoutComposer>\r\n * );\r\n *\r\n * Note: \"areas\" and \"responsiveAreas\" are alternative props.\r\n * For the \"responsiveAreas\", the content should look like this:\r\n *  {\r\n *    areasSmall: {\r\n *      mediaQuery: '(max-width: 767px)',\r\n *      areas: `\r\n *        topbar\r\n *        main\r\n *        extra\r\n *        footer\r\n *      `,\r\n *    },\r\n *    areasMedium: {\r\n *      mediaQuery: '(min-width: 768px) and (max-width: 1023px)',\r\n *      areas: `\r\n *      topbar topbar\r\n *      main extra\r\n *      footer footer\r\n *      `,\r\n *    },\r\n *    areasLarge: {\r\n *      mediaQuery: '(min-width: 1024px)',\r\n *      areas: `\r\n *      topbar topbar topbar\r\n *      main extra footer\r\n *      `,\r\n *    },\r\n * }\r\n *\r\n * @param {Props} props for LayoutComposer (at least: children, style, areas, display, as)\r\n * @return LayoutComposer that expects children to be a function.\r\n */\r\nconst LayoutComposer = React.forwardRef((props, ref) => {\r\n  const [currentAreas, setAreas] = useState(parseDefaultAreasFromProps(props));\r\n\r\n  useEffect(() => {\r\n    let resizeListeners = [];\r\n    if (responsiveAreas) {\r\n      resizeListeners = handleResponsiveAreasOnBrowser(responsiveAreas, setAreas);\r\n    }\r\n\r\n    return () => {\r\n      resizeListeners.forEach(listener => {\r\n        const { mediaQueryList, resizeListener } = listener;\r\n        mediaQueryList.removeEventListener('change', resizeListener);\r\n      });\r\n    };\r\n  }, []);\r\n\r\n  const { components, gridTemplateAreas } = currentAreas;\r\n  const { children, style = {}, areas, responsiveAreas, display, as, ...otherProps } = props;\r\n  const Tag = as || 'div';\r\n\r\n  return (\r\n    <Tag\r\n      {...otherProps}\r\n      style={{\r\n        ...style,\r\n        gridTemplateAreas,\r\n        display: display === 'inline' ? 'grid-inline' : 'grid',\r\n      }}\r\n      ref={ref}\r\n    >\r\n      {children(components)}\r\n    </Tag>\r\n  );\r\n});\r\nLayoutComposer.displayName = 'LayoutComposer';\r\n\r\nLayoutComposer.defaultProps = {\r\n  areas: null,\r\n  responsiveAreas: null,\r\n  display: 'grid',\r\n  as: null,\r\n};\r\n\r\nLayoutComposer.propTypes = {\r\n  children: func.isRequired,\r\n  areas: string,\r\n  responsiveAreas: objectOf(\r\n    shape({\r\n      mediaQuery: string.isRequired,\r\n      areas: string.isRequired,\r\n    })\r\n  ),\r\n  display: string,\r\n  as: node,\r\n};\r\n\r\nexport default LayoutComposer;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LayoutSingleColumn_root__ZcraG\",\"topbar\":\"LayoutSingleColumn_topbar__brliL\",\"main\":\"LayoutSingleColumn_main__LwRQa\"};","import React from 'react';\r\nimport { node, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport LayoutComposer from '../LayoutComposer';\r\n\r\nimport css from './LayoutSingleColumn.module.css';\r\n\r\n// Commonly used layout\r\nconst LayoutSingleColumn = props => {\r\n  const {\r\n    className,\r\n    rootClassName,\r\n    mainColumnClassName,\r\n    children,\r\n    topbar: topbarContent,\r\n    footer: footerContent,\r\n    ...rest\r\n  } = props;\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  const layoutAreas = `\r\n    topbar\r\n    main\r\n    footer\r\n  `;\r\n\r\n  return (\r\n    <LayoutComposer areas={layoutAreas} className={classes} {...rest}>\r\n      {layoutProps => {\r\n        const { Topbar, Main, Footer } = layoutProps;\r\n        return (\r\n          <>\r\n            <Topbar as=\"header\" className={css.topbar}>\r\n              {topbarContent}\r\n            </Topbar>\r\n            <Main as=\"main\" className={classNames(css.main, mainColumnClassName)}>\r\n              {children}\r\n            </Main>\r\n            <Footer>{footerContent}</Footer>\r\n          </>\r\n        );\r\n      }}\r\n    </LayoutComposer>\r\n  );\r\n};\r\n\r\nLayoutSingleColumn.displayName = 'LayoutSingleColumn';\r\n\r\nLayoutSingleColumn.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  footer: null,\r\n};\r\n\r\nLayoutSingleColumn.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  children: node.isRequired,\r\n  topbar: node.isRequired,\r\n  footer: node,\r\n};\r\n\r\nexport default LayoutSingleColumn;\r\n","import { useEffect, useState } from 'react';\r\n\r\n// Global state is useful in situations, where UI state needs to be tracked navigation history.\r\n// Alternatively, Redux could be used too, but it's unnecessarily heavy to use for\r\n// a single component to track it's internal UI state (e.g. \"scroll position\").\r\n// If more than one component is needing certain info, the recommendation is to use Redux.\r\n//\r\n// This piece of code is taken from Daishi Kato's blog:\r\n// https://blog.axlight.com/posts/steps-to-develop-global-state-for-react/\r\nexport const createGlobalState = initialState => {\r\n  let globalState = initialState;\r\n  const listeners = Object.fromEntries(Object.keys(initialState).map(key => [key, new Set()]));\r\n\r\n  const setGlobalState = (key, nextValue) => {\r\n    globalState = { ...globalState, [key]: nextValue };\r\n    listeners[key].forEach(listener => listener());\r\n  };\r\n\r\n  const useGlobalState = key => {\r\n    const [state, setState] = useState(globalState[key]);\r\n    useEffect(() => {\r\n      const listener = () => {\r\n        setState(globalState[key]);\r\n      };\r\n      listeners[key].add(listener);\r\n      listener(); // in case it's already changed\r\n      return () => listeners[key].delete(listener); // cleanup\r\n    }, []);\r\n    return [state, nextValue => setGlobalState(key, nextValue)];\r\n  };\r\n\r\n  return {\r\n    setGlobalState,\r\n    useGlobalState,\r\n  };\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LayoutSideNavigation_root__rGkXG\",\"topbar\":\"LayoutSideNavigation_topbar__9-NkX\",\"container\":\"LayoutSideNavigation_container__gQzot\",\"main\":\"LayoutSideNavigation_main__sD-sh\",\"sideNav\":\"LayoutSideNavigation_sideNav__K5GqM\",\"tabs\":\"LayoutSideNavigation_tabs__fiICB\",\"tab\":\"LayoutSideNavigation_tab__GxHsa\"};","/**\r\n * This is a wrapper component for different Layouts.\r\n * Navigational 'aside' content should be added to this wrapper.\r\n */\r\nimport React, { useEffect } from 'react';\r\nimport { node, number, string, shape } from 'prop-types';\r\nimport { compose } from 'redux';\r\n\r\nimport { FormattedMessage } from '../../../util/reactIntl';\r\nimport { withViewport } from '../../../util/uiHelpers';\r\n\r\nimport { TabNav } from '../../../components';\r\n\r\nimport { createGlobalState } from './hookGlobalState';\r\n\r\nimport css from './LayoutSideNavigation.module.css';\r\n\r\nconst MAX_HORIZONTAL_NAV_SCREEN_WIDTH = 1023;\r\n\r\n// Add global state for tab scrolling effect\r\nconst initialScrollState = { scrollLeft: 0 };\r\nconst { useGlobalState } = createGlobalState(initialScrollState);\r\n\r\n// Horizontal scroll animation using element.scrollTo()\r\nconst scrollToTab = (currentPage, scrollLeft, setScrollLeft) => {\r\n  const el = document.querySelector(`#${currentPage}Tab`);\r\n\r\n  if (el) {\r\n    // el.scrollIntoView doesn't work with Safari and it considers vertical positioning too.\r\n    // This scroll behaviour affects horizontal scrolling only\r\n    // and it expects that the immediate parent element is scrollable.\r\n    const parent = el.parentElement;\r\n    const parentRect = parent.getBoundingClientRect();\r\n    const maxScrollDistance = parent.scrollWidth - parentRect.width;\r\n\r\n    const hasParentScrolled = parent.scrollLeft > 0;\r\n    const scrollPositionCurrent = hasParentScrolled ? parent.scrollLeft : scrollLeft;\r\n\r\n    const tabRect = el.getBoundingClientRect();\r\n    const diffLeftBetweenTabAndParent = tabRect.left - parentRect.left;\r\n    const tabScrollPosition = parent.scrollLeft + diffLeftBetweenTabAndParent;\r\n\r\n    const scrollPositionNew =\r\n      tabScrollPosition > maxScrollDistance\r\n        ? maxScrollDistance\r\n        : parent.scrollLeft + diffLeftBetweenTabAndParent;\r\n\r\n    const needsSmoothScroll = scrollPositionCurrent !== scrollPositionNew;\r\n\r\n    if (!hasParentScrolled || (hasParentScrolled && needsSmoothScroll)) {\r\n      // Ensure that smooth scroll animation uses old position as starting point after navigation.\r\n      parent.scrollTo({ left: scrollPositionCurrent });\r\n      // Scroll to new position\r\n      parent.scrollTo({ left: scrollPositionNew, behavior: 'smooth' });\r\n    }\r\n    // Always keep track of new position (even if smooth scrolling is not applied)\r\n    setScrollLeft(scrollPositionNew);\r\n  }\r\n};\r\n\r\nconst LayoutWrapperAccountSettingsSideNavComponent = props => {\r\n  const [scrollLeft, setScrollLeft] = useGlobalState('scrollLeft');\r\n  useEffect(() => {\r\n    const { currentPage, viewport } = props;\r\n    let scrollTimeout = null;\r\n\r\n    const { width } = viewport;\r\n    const hasViewport = width > 0;\r\n    const hasHorizontalTabLayout = hasViewport && width <= MAX_HORIZONTAL_NAV_SCREEN_WIDTH;\r\n\r\n    // Check if scrollToTab call is needed (tab is not visible on mobile)\r\n    if (hasHorizontalTabLayout) {\r\n      scrollTimeout = window.setTimeout(() => {\r\n        scrollToTab(currentPage, scrollLeft, setScrollLeft);\r\n      }, 300);\r\n    }\r\n\r\n    return () => {\r\n      // Update scroll position when unmounting\r\n      const el = document.querySelector(`#${currentPage}Tab`);\r\n      setScrollLeft(el.parentElement.scrollLeft);\r\n      if (scrollTimeout) {\r\n        clearTimeout(scrollTimeout);\r\n      }\r\n    };\r\n  });\r\n\r\n  const { currentPage } = props;\r\n\r\n  const tabs = [\r\n    {\r\n      text: <FormattedMessage id=\"LayoutWrapperAccountSettingsSideNav.contactDetailsTabTitle\" />,\r\n      selected: currentPage === 'ContactDetailsPage',\r\n      id: 'ContactDetailsPageTab',\r\n      linkProps: {\r\n        name: 'ContactDetailsPage',\r\n      },\r\n    },\r\n    {\r\n      text: <FormattedMessage id=\"LayoutWrapperAccountSettingsSideNav.passwordTabTitle\" />,\r\n      selected: currentPage === 'PasswordChangePage',\r\n      id: 'PasswordChangePageTab',\r\n      linkProps: {\r\n        name: 'PasswordChangePage',\r\n      },\r\n    },\r\n    {\r\n      text: <FormattedMessage id=\"LayoutWrapperAccountSettingsSideNav.paymentsTabTitle\" />,\r\n      selected: currentPage === 'StripePayoutPage',\r\n      id: 'StripePayoutPageTab',\r\n      linkProps: {\r\n        name: 'StripePayoutPage',\r\n      },\r\n    },\r\n    {\r\n      text: <FormattedMessage id=\"LayoutWrapperAccountSettingsSideNav.paymentMethodsTabTitle\" />,\r\n      selected: currentPage === 'PaymentMethodsPage',\r\n      id: 'PaymentMethodsPageTab',\r\n      linkProps: {\r\n        name: 'PaymentMethodsPage',\r\n      },\r\n    },\r\n  ];\r\n\r\n  return <TabNav rootClassName={css.tabs} tabRootClassName={css.tab} tabs={tabs} />;\r\n};\r\n\r\nLayoutWrapperAccountSettingsSideNavComponent.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  children: null,\r\n  currentPage: null,\r\n};\r\n\r\nLayoutWrapperAccountSettingsSideNavComponent.propTypes = {\r\n  children: node,\r\n  className: string,\r\n  rootClassName: string,\r\n  currentPage: string,\r\n\r\n  // from withViewport\r\n  viewport: shape({\r\n    width: number.isRequired,\r\n    height: number.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nconst LayoutWrapperAccountSettingsSideNav = compose(withViewport)(\r\n  LayoutWrapperAccountSettingsSideNavComponent\r\n);\r\n\r\nexport default LayoutWrapperAccountSettingsSideNav;\r\n","import React from 'react';\r\nimport { bool, node, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport LayoutComposer from '../LayoutComposer';\r\nimport LayoutWrapperAccountSettingsSideNav from './LayoutWrapperAccountSettingsSideNav';\r\n\r\nimport css from './LayoutSideNavigation.module.css';\r\n\r\n// Commonly used layout\r\nconst LayoutSideNavigation = props => {\r\n  const {\r\n    className,\r\n    rootClassName,\r\n    containerClassName,\r\n    mainColumnClassName,\r\n    sideNavClassName,\r\n    children,\r\n    topbar: topbarContent,\r\n    footer: footerContent,\r\n    sideNav: sideNavContent,\r\n    useAccountSettingsNav,\r\n    currentPage,\r\n    ...rest\r\n  } = props;\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  const containerClasses = containerClassName || css.container;\r\n\r\n  // TODO: since responsiveAreas are still experimental,\r\n  //       we don't separate \"aside\" through layoutComposer\r\n  const layoutAreas = `\r\n    topbar\r\n    main\r\n    footer\r\n  `;\r\n\r\n  return (\r\n    <LayoutComposer areas={layoutAreas} className={classes} {...rest}>\r\n      {layoutProps => {\r\n        const { Topbar, Main, Footer } = layoutProps;\r\n        return (\r\n          <>\r\n            <Topbar as=\"header\" className={css.topbar}>\r\n              {topbarContent}\r\n            </Topbar>\r\n            <Main as=\"div\" className={containerClasses}>\r\n              <aside className={classNames(css.sideNav, sideNavClassName)}>\r\n                {useAccountSettingsNav ? (\r\n                  <LayoutWrapperAccountSettingsSideNav currentPage={currentPage} />\r\n                ) : null}\r\n                {sideNavContent}\r\n              </aside>\r\n              <main className={classNames(css.main, mainColumnClassName)}>{children}</main>\r\n            </Main>\r\n            <Footer>{footerContent}</Footer>\r\n          </>\r\n        );\r\n      }}\r\n    </LayoutComposer>\r\n  );\r\n};\r\n\r\nLayoutSideNavigation.displayName = 'LayoutSideNavigation';\r\n\r\nLayoutSideNavigation.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  sideNav: null,\r\n  footer: null,\r\n  useAccountSettingsNav: false,\r\n  currentPage: null,\r\n};\r\n\r\nLayoutSideNavigation.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  children: node.isRequired,\r\n  topbar: node.isRequired,\r\n  sideNav: node,\r\n  footer: node,\r\n  useAccountSettingsNav: bool,\r\n  currentPage: string,\r\n};\r\n\r\nexport default LayoutSideNavigation;\r\n","import LayoutComposer from './LayoutComposer.js';\r\nimport LayoutSingleColumn from './LayoutSingleColumn/LayoutSingleColumn';\r\nimport LayoutSideNavigation from './LayoutSideNavigation/LayoutSideNavigation';\r\n\r\nexport { LayoutSingleColumn, LayoutSideNavigation };\r\nexport default LayoutComposer;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LimitedAccessBanner_root__ZhYGb\",\"text\":\"LimitedAccessBanner_text__STJi5\",\"button\":\"LimitedAccessBanner_button__6M6b8\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { FormattedMessage } from '../../util/reactIntl';\r\nimport { propTypes } from '../../util/types';\r\nimport { Button } from '../../components';\r\nimport { ensureCurrentUser } from '../../util/data';\r\n\r\nimport css from './LimitedAccessBanner.module.css';\r\n\r\n// Due to the layout structure, do not render the banner on the following pages\r\nconst disabledPages = ['SearchPage'];\r\n\r\nconst LimitedAccessBanner = props => {\r\n  const {\r\n    rootClassName,\r\n    className,\r\n    isAuthenticated,\r\n    authScopes,\r\n    currentUser,\r\n    onLogout,\r\n    currentPage,\r\n  } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  const user = ensureCurrentUser(currentUser);\r\n\r\n  const showBanner =\r\n    user.id &&\r\n    isAuthenticated &&\r\n    authScopes &&\r\n    authScopes.length === 1 &&\r\n    authScopes[0] === 'user:limited' &&\r\n    !disabledPages.includes(currentPage);\r\n\r\n  const { firstName, lastName } = user.attributes.profile;\r\n\r\n  return showBanner ? (\r\n    <div className={classes}>\r\n      <p className={css.text}>\r\n        <FormattedMessage id=\"LimitedAccessBanner.message\" values={{ firstName, lastName }} />\r\n      </p>\r\n      <Button rootClassName={css.button} onClick={onLogout}>\r\n        <FormattedMessage id=\"LimitedAccessBanner.logout\" />\r\n      </Button>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nLimitedAccessBanner.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  currentUser: null,\r\n  authScopes: [],\r\n  currentPage: null,\r\n};\r\n\r\nconst { array, bool, func, string } = PropTypes;\r\n\r\nLimitedAccessBanner.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  isAuthenticated: bool.isRequired,\r\n  authScopes: array,\r\n  currentUser: propTypes.currentUser,\r\n  onLogout: func.isRequired,\r\n  currentPage: string,\r\n};\r\n\r\nexport default LimitedAccessBanner;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ListingCard_root__Cw3Tn\",\"aspectRatioWrapper\":\"ListingCard_aspectRatioWrapper__adKHD\",\"rootForImage\":\"ListingCard_rootForImage__viBrB\",\"info\":\"ListingCard_info__g1lhg\",\"price\":\"ListingCard_price__lWgxB\",\"priceValue\":\"ListingCard_priceValue__gahB- textSmall\",\"perUnit\":\"ListingCard_perUnit__o-26m textSmall\",\"mainInfo\":\"ListingCard_mainInfo__wWMR6\",\"title\":\"ListingCard_title__FiO2Q textSmall\",\"authorInfo\":\"ListingCard_authorInfo__zxILk marketplaceTinyFontStyles\",\"longWord\":\"ListingCard_longWord__QDKTn\"};","import React from 'react';\r\nimport { string, func, bool } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { useConfiguration } from '../../context/configurationContext';\r\n\r\nimport { FormattedMessage, intlShape, injectIntl } from '../../util/reactIntl';\r\nimport { displayPrice } from '../../util/configHelpers';\r\nimport { lazyLoadWithDimensions } from '../../util/uiHelpers';\r\nimport { propTypes } from '../../util/types';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { ensureListing, ensureUser } from '../../util/data';\r\nimport { richText } from '../../util/richText';\r\nimport { createSlug } from '../../util/urlHelpers';\r\nimport { isBookingProcessAlias } from '../../transactions/transaction';\r\n\r\nimport { AspectRatioWrapper, NamedLink, ResponsiveImage } from '../../components';\r\n\r\nimport css from './ListingCard.module.css';\r\n\r\nconst MIN_LENGTH_FOR_LONG_WORDS = 10;\r\n\r\nconst priceData = (price, currency, intl) => {\r\n  if (price && price.currency === currency) {\r\n    const formattedPrice = formatMoney(intl, price);\r\n    return { formattedPrice, priceTitle: formattedPrice };\r\n  } else if (price) {\r\n    return {\r\n      formattedPrice: intl.formatMessage(\r\n        { id: 'ListingCard.unsupportedPrice' },\r\n        { currency: price.currency }\r\n      ),\r\n      priceTitle: intl.formatMessage(\r\n        { id: 'ListingCard.unsupportedPriceTitle' },\r\n        { currency: price.currency }\r\n      ),\r\n    };\r\n  }\r\n  return {};\r\n};\r\n\r\nconst LazyImage = lazyLoadWithDimensions(ResponsiveImage, { loadAfterInitialRendering: 3000 });\r\n\r\nconst PriceMaybe = props => {\r\n  const { price, publicData, config, intl } = props;\r\n  const { listingType } = publicData || {};\r\n  const validListingTypes = config.listing.listingTypes;\r\n  const foundListingTypeConfig = validListingTypes.find(conf => conf.listingType === listingType);\r\n  const showPrice = displayPrice(foundListingTypeConfig);\r\n  if (!showPrice && price) {\r\n    return null;\r\n  }\r\n\r\n  const isBookable = isBookingProcessAlias(publicData?.transactionProcessAlias);\r\n  const { formattedPrice, priceTitle } = priceData(price, config.currency, intl);\r\n  return (\r\n    <div className={css.price}>\r\n      <div className={css.priceValue} title={priceTitle}>\r\n        {formattedPrice}\r\n      </div>\r\n      {isBookable ? (\r\n        <div className={css.perUnit}>\r\n          <FormattedMessage id=\"ListingCard.perUnit\" values={{ unitType: publicData?.unitType }} />\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const ListingCardComponent = props => {\r\n  const config = useConfiguration();\r\n  const {\r\n    className,\r\n    rootClassName,\r\n    intl,\r\n    listing,\r\n    renderSizes,\r\n    setActiveListing,\r\n    showAuthorInfo,\r\n  } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  const currentListing = ensureListing(listing);\r\n  const id = currentListing.id.uuid;\r\n  const { title = '', price, publicData } = currentListing.attributes;\r\n  const slug = createSlug(title);\r\n  const author = ensureUser(listing.author);\r\n  const authorName = author.attributes.profile.displayName;\r\n  const firstImage =\r\n    currentListing.images && currentListing.images.length > 0 ? currentListing.images[0] : null;\r\n\r\n  const {\r\n    aspectWidth = 1,\r\n    aspectHeight = 1,\r\n    variantPrefix = 'listing-card',\r\n  } = config.layout.listingImage;\r\n  const variants = firstImage\r\n    ? Object.keys(firstImage?.attributes?.variants).filter(k => k.startsWith(variantPrefix))\r\n    : [];\r\n\r\n  const setActivePropsMaybe = setActiveListing\r\n    ? {\r\n        onMouseEnter: () => setActiveListing(currentListing.id),\r\n        onMouseLeave: () => setActiveListing(null),\r\n      }\r\n    : null;\r\n\r\n  return (\r\n    <NamedLink className={classes} name=\"ListingPage\" params={{ id, slug }}>\r\n      <AspectRatioWrapper\r\n        className={css.aspectRatioWrapper}\r\n        width={aspectWidth}\r\n        height={aspectHeight}\r\n        {...setActivePropsMaybe}\r\n      >\r\n        <LazyImage\r\n          rootClassName={css.rootForImage}\r\n          alt={title}\r\n          image={firstImage}\r\n          variants={variants}\r\n          sizes={renderSizes}\r\n        />\r\n      </AspectRatioWrapper>\r\n      <div className={css.info}>\r\n        <PriceMaybe price={price} publicData={publicData} config={config} intl={intl} />\r\n        <div className={css.mainInfo}>\r\n          <div className={css.title}>\r\n            {richText(title, {\r\n              longWordMinLength: MIN_LENGTH_FOR_LONG_WORDS,\r\n              longWordClass: css.longWord,\r\n            })}\r\n          </div>\r\n          {showAuthorInfo ? (\r\n            <div className={css.authorInfo}>\r\n              <FormattedMessage id=\"ListingCard.author\" values={{ authorName }} />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </NamedLink>\r\n  );\r\n};\r\n\r\nListingCardComponent.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  renderSizes: null,\r\n  setActiveListing: null,\r\n  showAuthorInfo: true,\r\n};\r\n\r\nListingCardComponent.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  intl: intlShape.isRequired,\r\n  listing: propTypes.listing.isRequired,\r\n  showAuthorInfo: bool,\r\n\r\n  // Responsive image sizes hint\r\n  renderSizes: string,\r\n\r\n  setActiveListing: func,\r\n};\r\n\r\nexport default injectIntl(ListingCardComponent);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"longWord\":\"ListingLink_longWord__HJMAX\"};","/*\r\n  A component so safely link to the ListingPage of the given listing.\r\n\r\n  When the listing is pending approval, the normal ListingPage won't\r\n  work as the listing isn't yet published. This component links to the\r\n  correct pending-approval variant URL or to the normal ListingPage\r\n  based on the listing state.\r\n*/\r\nimport React from 'react';\r\nimport { string, oneOfType, node } from 'prop-types';\r\nimport { richText } from '../../util/richText';\r\nimport { LISTING_STATE_DRAFT, LISTING_STATE_PENDING_APPROVAL, propTypes } from '../../util/types';\r\nimport {\r\n  LISTING_PAGE_DRAFT_VARIANT,\r\n  LISTING_PAGE_PENDING_APPROVAL_VARIANT,\r\n  createSlug,\r\n} from '../../util/urlHelpers';\r\nimport { NamedLink } from '../../components';\r\n\r\nimport css from './ListingLink.module.css';\r\n\r\nconst MIN_LENGTH_FOR_LONG_WORDS = 16;\r\n\r\nconst ListingLink = props => {\r\n  const { className, listing, children } = props;\r\n  const listingLoaded = listing && listing.id;\r\n  if (!listingLoaded) {\r\n    return null;\r\n  }\r\n  const id = listing.id.uuid;\r\n  const { title, state } = listing.attributes;\r\n  const slug = createSlug(title);\r\n  const richTitle = (\r\n    <span>\r\n      {richText(title, {\r\n        longWordMinLength: MIN_LENGTH_FOR_LONG_WORDS,\r\n        longWordClass: css.longWord,\r\n      })}\r\n    </span>\r\n  );\r\n\r\n  const isPendingApproval = state === LISTING_STATE_PENDING_APPROVAL;\r\n  const isDraft = state === LISTING_STATE_DRAFT;\r\n  const variant = isPendingApproval\r\n    ? LISTING_PAGE_PENDING_APPROVAL_VARIANT\r\n    : isDraft\r\n    ? LISTING_PAGE_DRAFT_VARIANT\r\n    : null;\r\n  const linkProps = !!variant\r\n    ? {\r\n        name: 'ListingPageVariant',\r\n        params: {\r\n          id,\r\n          slug,\r\n          variant,\r\n        },\r\n      }\r\n    : {\r\n        name: 'ListingPage',\r\n        params: { id, slug },\r\n      };\r\n  return (\r\n    <NamedLink className={className} {...linkProps}>\r\n      {children ? children : richTitle || ''}\r\n    </NamedLink>\r\n  );\r\n};\r\nListingLink.defaultProps = {\r\n  className: null,\r\n  listing: null,\r\n  children: null,\r\n};\r\n\r\nListingLink.propTypes = {\r\n  className: string,\r\n  listing: oneOfType([propTypes.listing, propTypes.ownListing]),\r\n  children: node,\r\n};\r\n\r\nexport default ListingLink;\r\n","import React, { Component } from 'react';\r\nimport { func, object, shape, string } from 'prop-types';\r\nimport { Field } from 'react-final-form';\r\nimport loadable from '@loadable/component';\r\nimport { ValidationError } from '../../components';\r\n\r\n// LocationAutocompleteInputImpl is a big component that includes code for both Mapbox and Google Maps\r\n// It is loaded dynamically - i.e. it is splitted to its own code chunk.\r\nconst LocationAutocompleteInputImpl = loadable(() =>\r\n  import(/* webpackChunkName: \"LocationAutocompleteInputImpl\" */ './LocationAutocompleteInputImpl')\r\n);\r\n\r\nclass LocationAutocompleteInputComponent extends Component {\r\n  render() {\r\n    /* eslint-disable no-unused-vars */\r\n    const { rootClassName, labelClassName, hideErrorMessage, ...restProps } = this.props;\r\n    const { input, label, meta, valueFromForm, ...otherProps } = restProps;\r\n    /* eslint-enable no-unused-vars */\r\n\r\n    const value = typeof valueFromForm !== 'undefined' ? valueFromForm : input.value;\r\n    const locationAutocompleteProps = { label, meta, ...otherProps, input: { ...input, value } };\r\n    const labelInfo = label ? (\r\n      <label className={labelClassName} htmlFor={input.name}>\r\n        {label}\r\n      </label>\r\n    ) : null;\r\n\r\n    return (\r\n      <div className={rootClassName}>\r\n        {labelInfo}\r\n        <LocationAutocompleteInputImpl {...locationAutocompleteProps} />\r\n        {hideErrorMessage ? null : <ValidationError fieldMeta={meta} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nLocationAutocompleteInputComponent.defaultProps = {\r\n  rootClassName: null,\r\n  labelClassName: null,\r\n  type: null,\r\n  label: null,\r\n};\r\n\r\nLocationAutocompleteInputComponent.propTypes = {\r\n  rootClassName: string,\r\n  labelClassName: string,\r\n  input: shape({\r\n    onChange: func.isRequired,\r\n    name: string.isRequired,\r\n  }).isRequired,\r\n  label: string,\r\n  meta: object.isRequired,\r\n};\r\n\r\nexport default LocationAutocompleteInputImpl;\r\n\r\nexport const FieldLocationAutocompleteInput = props => {\r\n  return <Field component={LocationAutocompleteInputComponent} {...props} />;\r\n};\r\n","import React from 'react';\r\nimport { oneOf, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { NamedLink, Logo } from '../../components';\r\n\r\nimport css from './LinkedLogo.module.css';\r\n\r\nconst LinkedLogo = props => {\r\n  const {\r\n    className,\r\n    rootClassName,\r\n    logoClassName,\r\n    logoImageClassName,\r\n    layout,\r\n    alt,\r\n    ...rest\r\n  } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <NamedLink className={classes} name=\"LandingPage\" {...rest}>\r\n      <Logo\r\n        layout={layout}\r\n        className={logoClassName}\r\n        logoImageClassName={logoImageClassName}\r\n        alt={alt}\r\n      />\r\n    </NamedLink>\r\n  );\r\n};\r\n\r\nLinkedLogo.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  logoClassName: null,\r\n  logoImageClassName: null,\r\n  layout: 'desktop',\r\n};\r\n\r\nLinkedLogo.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  logoClassName: string,\r\n  logoImageClassName: string,\r\n  layout: oneOf(['desktop', 'mobile']),\r\n};\r\n\r\nexport default LinkedLogo;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Logo_root__DrJUg\",\"logo\":\"Logo_logo__yGYXN\",\"logo24\":\"Logo_logo24__xSsom\",\"logo36\":\"Logo_logo36__d7nkS\",\"logo48\":\"Logo_logo48__xWsbE\"};","import React from 'react';\r\nimport { oneOf, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { useConfiguration } from '../../context/configurationContext';\r\nimport { ResponsiveImage } from '../../components/';\r\n\r\nimport css from './Logo.module.css';\r\n\r\nconst HEIGHT_24 = 24;\r\nconst HEIGHT_36 = 36;\r\nconst HEIGHT_48 = 48;\r\nconst HEIGHT_OPTIONS = [HEIGHT_24, HEIGHT_36, HEIGHT_48];\r\n\r\n// logoSettings property supports only 3 types at this point\r\nconst isValidLogoSettings = settings =>\r\n  settings?.format === 'image' && HEIGHT_OPTIONS.includes(settings?.height);\r\nconst isImageAsset = logo => logo?.type === 'imageAsset';\r\n\r\n// Each type can have multiple image variants\r\nconst getVariantNames = variantsObj => {\r\n  return Object.keys(variantsObj) || [];\r\n};\r\n\r\n// Variant data contains width and height among other things\r\n// The width is needed for sizes attribute of responsive logo imgs\r\nconst getVariantData = variants => {\r\n  // This assume that \"scaled\" variant exists\r\n  // If other variants are introduced, this setup might need some tuning.\r\n  return variants['scaled'];\r\n};\r\n\r\n// We have maximum heights for each logo type. It's enforced through classes\r\nconst getHeightClassName = height => {\r\n  return height === HEIGHT_48 ? css.logo48 : height === HEIGHT_36 ? css.logo36 : css.logo24;\r\n};\r\n\r\nexport const LogoComponent = props => {\r\n  const {\r\n    className,\r\n    logoImageClassName,\r\n    layout,\r\n    marketplaceName,\r\n    logoImageDesktop,\r\n    logoImageMobile,\r\n    logoSettings,\r\n    ...rest\r\n  } = props;\r\n\r\n  const hasValidLogoSettings = isValidLogoSettings(logoSettings);\r\n  const logoClasses = className || css.root;\r\n  const logoImageClasses = classNames(\r\n    logoImageClassName || css.logo,\r\n    getHeightClassName(logoSettings?.height)\r\n  );\r\n\r\n  // Logo from hosted asset\r\n  if (isImageAsset(logoImageDesktop) && hasValidLogoSettings && layout === 'desktop') {\r\n    const variants = logoImageDesktop.attributes.variants;\r\n    const variantNames = getVariantNames(variants);\r\n    const { width } = getVariantData(variants);\r\n    return (\r\n      <div className={logoClasses}>\r\n        <ResponsiveImage\r\n          rootClassName={logoImageClasses}\r\n          alt={marketplaceName}\r\n          image={logoImageDesktop}\r\n          variants={variantNames}\r\n          sizes={`${width}px`}\r\n        />\r\n      </div>\r\n    );\r\n  } else if (isImageAsset(logoImageMobile) && hasValidLogoSettings && layout === 'mobile') {\r\n    const variants = logoImageMobile.attributes.variants;\r\n    const variantNames = getVariantNames(variants);\r\n    const { width } = getVariantData(variants);\r\n\r\n    // Sizes on small screens are mainly limited by space: side buttons take 2x66 px, the rest is for logo.\r\n    // If logo's (1x) width is less than 188, we can use logo's width as limit for sizes attribute\r\n    // On general case, up to the screen size of 500px, we could say that the logo _might_ take all the available space\r\n    // However, after 500px, the max aspect ratio for the logo should start limiting the logo's width.\r\n    const sizes =\r\n      width <= 188 ? `${width}px` : `(max-width: 500px) calc(100vw - 132px), ${width}px`;\r\n    return (\r\n      <div className={logoClasses}>\r\n        <ResponsiveImage\r\n          rootClassName={logoImageClasses}\r\n          alt={marketplaceName}\r\n          image={logoImageMobile}\r\n          variants={variantNames}\r\n          sizes={sizes}\r\n        />\r\n      </div>\r\n    );\r\n  } else if (layout === 'desktop') {\r\n    return (\r\n      <div className={logoClasses}>\r\n        <img className={logoImageClasses} src={logoImageDesktop} alt={marketplaceName} {...rest} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={logoClasses}>\r\n      <img className={logoImageClasses} src={logoImageMobile} alt={marketplaceName} {...rest} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Logo = props => {\r\n  const config = useConfiguration();\r\n  // NOTE: logo images are set in hosted branding.json asset or src/config/brandingConfig.js\r\n  const { logoImageDesktop, logoImageMobile, logoSettings } = config.branding;\r\n\r\n  return (\r\n    <LogoComponent\r\n      {...props}\r\n      logoImageDesktop={logoImageDesktop}\r\n      logoImageMobile={logoImageMobile}\r\n      logoSettings={logoSettings}\r\n      marketplaceName={config.marketplaceName}\r\n    />\r\n  );\r\n};\r\n\r\nLogo.defaultProps = {\r\n  className: null,\r\n  layout: 'desktop',\r\n};\r\n\r\nLogo.propTypes = {\r\n  className: string,\r\n  layout: oneOf(['desktop', 'mobile']),\r\n};\r\n\r\nexport default Logo;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"MaintenanceMode_root__cN+4g\",\"header\":\"MaintenanceMode_header__MFUgE\",\"content\":\"MaintenanceMode_content__P3Nr3\"};","import React from 'react';\r\n\r\nimport appSettings from '../../config/settings';\r\nimport { FormattedMessage } from '../../util/reactIntl';\r\n\r\nimport { LayoutSingleColumn } from '../../components';\r\nimport css from './MaintenanceMode.module.css';\r\n\r\n// MaintenanceMode component is shown when mandatory app-wide configurations are not found from assets.\r\n// Note 1: this microcopy/translation does not come from translation file.\r\n//         It needs to be something that is not part of fetched assets but built-in text\r\n// Note 2: In the LandingPage directory, there's a similar content (FallbackPage.js).\r\nconst MaintenanceMode = props => {\r\n  const isDev = appSettings.dev;\r\n  return (\r\n    <LayoutSingleColumn\r\n      mainColumnClassName={css.layoutWrapperMain}\r\n      topbar={<div className={css.header} title=\"Maintenance mode\"></div>}\r\n      footer={null}\r\n    >\r\n      <section id=\"content\" className={css.root}>\r\n        <div className={css.content}>\r\n          <h2>\r\n            <FormattedMessage id=\"MaintenanceMode.title\" defaultMessage=\"Maintenance mode\" />\r\n          </h2>\r\n          <p>\r\n            <FormattedMessage\r\n              id=\"MaintenanceMode.info\"\r\n              defaultMessage=\"The marketplace is not fully operational at the moment.\"\r\n            />\r\n          </p>\r\n          {isDev ? (\r\n            <>\r\n              <p>\r\n                Check that all the configuration assets are added to your marketplace environment\r\n                through the Marketplace Console.\r\n              </p>\r\n              <p>Check also browser's developer tools for printed errors.</p>\r\n            </>\r\n          ) : (\r\n            <p>\r\n              <FormattedMessage\r\n                id=\"MaintenanceMode.howToProceed\"\r\n                defaultMessage=\"Try refreshing the page and if that does not solve the issue, contact the marketplace admins.\"\r\n              />\r\n            </p>\r\n          )}\r\n        </div>\r\n      </section>\r\n    </LayoutSingleColumn>\r\n  );\r\n};\r\n\r\nexport default MaintenanceMode;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"mapbox-gl-multitouch\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/uniqueId\");","import React, { Component } from 'react';\r\nimport { string, shape, number, object } from 'prop-types';\r\n// This MultiTouch lib is used for 2-finger panning.\r\n// which prevents user to experience map-scroll trap, while scrolling the page.\r\n// https://github.com/mapbox/mapbox-gl-js/issues/2618\r\n// TODO: we should add an overlay with text \"use two fingers to pan\".\r\nimport MultiTouch from 'mapbox-gl-multitouch';\r\nimport uniqueId from 'lodash/uniqueId';\r\n\r\nimport { circlePolyline } from '../../util/maps';\r\n\r\nconst mapMarker = () => {\r\n  return new window.mapboxgl.Marker();\r\n};\r\n\r\nconst circleLayer = (center, mapsConfig, layerId) => {\r\n  const path = circlePolyline(center, mapsConfig.fuzzy.offset).map(([lat, lng]) => [lng, lat]);\r\n  return {\r\n    id: layerId,\r\n    type: 'fill',\r\n    source: {\r\n      type: 'geojson',\r\n      data: {\r\n        type: 'Feature',\r\n        geometry: {\r\n          type: 'Polygon',\r\n          coordinates: [path],\r\n        },\r\n      },\r\n    },\r\n    paint: {\r\n      'fill-color': mapsConfig.fuzzy.circleColor,\r\n      'fill-opacity': 0.2,\r\n    },\r\n  };\r\n};\r\n\r\nconst generateFuzzyLayerId = () => {\r\n  return uniqueId('fuzzy_layer_');\r\n};\r\n\r\nclass DynamicMapboxMap extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.mapContainer = null;\r\n    this.map = null;\r\n    this.centerMarker = null;\r\n    this.fuzzyLayerId = generateFuzzyLayerId();\r\n\r\n    this.updateFuzzyCirclelayer = this.updateFuzzyCirclelayer.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    const { center, zoom, mapsConfig } = this.props;\r\n    const position = [center.lng, center.lat];\r\n\r\n    this.map = new window.mapboxgl.Map({\r\n      container: this.mapContainer,\r\n      style: 'mapbox://styles/mapbox/streets-v10',\r\n      center: position,\r\n      zoom,\r\n      scrollZoom: false,\r\n    });\r\n    this.map.addControl(new window.mapboxgl.NavigationControl({ showCompass: false }), 'top-left');\r\n    this.map.addControl(new MultiTouch());\r\n\r\n    if (mapsConfig.fuzzy.enabled) {\r\n      this.map.on('load', () => {\r\n        this.map.addLayer(circleLayer(center, mapsConfig, this.fuzzyLayerId));\r\n      });\r\n    } else {\r\n      this.centerMarker = mapMarker();\r\n      this.centerMarker.setLngLat(position).addTo(this.map);\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    if (this.map) {\r\n      this.centerMarker = null;\r\n      this.map.remove();\r\n      this.map = null;\r\n    }\r\n  }\r\n  componentDidUpdate(prevProps) {\r\n    if (!this.map) {\r\n      return;\r\n    }\r\n\r\n    const { center, zoom, mapsConfig } = this.props;\r\n    const { lat, lng } = center;\r\n    const position = [lng, lat];\r\n\r\n    // zoom change\r\n    if (zoom !== prevProps.zoom) {\r\n      this.map.setZoom(this.props.zoom);\r\n    }\r\n\r\n    const centerChanged = lat !== prevProps.center.lat || lng !== prevProps.center.lng;\r\n\r\n    // center marker change\r\n    if (this.centerMarker && centerChanged) {\r\n      this.centerMarker.setLngLat(position);\r\n      this.map.setCenter(position);\r\n    }\r\n\r\n    // fuzzy circle change\r\n    if (mapsConfig.fuzzy.enabled && centerChanged) {\r\n      if (this.map.loaded()) {\r\n        this.updateFuzzyCirclelayer();\r\n      } else {\r\n        this.map.on('load', this.updateFuzzyCirclelayer);\r\n      }\r\n    }\r\n\r\n    // NOTE: mapsConfig changes are not handled\r\n  }\r\n  updateFuzzyCirclelayer() {\r\n    if (!this.map) {\r\n      // map already removed\r\n      return;\r\n    }\r\n    const { center, mapsConfig } = this.props;\r\n    const { lat, lng } = center;\r\n    const position = [lng, lat];\r\n\r\n    this.map.removeLayer(this.fuzzyLayerId);\r\n\r\n    // We have to use a different layer id to avoid Mapbox errors\r\n    this.fuzzyLayerId = generateFuzzyLayerId();\r\n    this.map.addLayer(circleLayer(center, mapsConfig, this.fuzzyLayerId));\r\n\r\n    this.map.setCenter(position);\r\n  }\r\n  render() {\r\n    const { containerClassName, mapClassName } = this.props;\r\n    return (\r\n      <div className={containerClassName}>\r\n        <div className={mapClassName} ref={el => (this.mapContainer = el)} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nDynamicMapboxMap.defaultProps = {\r\n  address: '',\r\n  center: null,\r\n};\r\n\r\nDynamicMapboxMap.propTypes = {\r\n  address: string, // not used\r\n  center: shape({\r\n    lat: number.isRequired,\r\n    lng: number.isRequired,\r\n  }).isRequired,\r\n  zoom: number.isRequired,\r\n  mapsConfig: object.isRequired,\r\n};\r\n\r\nexport default DynamicMapboxMap;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@mapbox/polyline\");","import React from 'react';\r\nimport { string, shape, number, object } from 'prop-types';\r\nimport polyline from '@mapbox/polyline';\r\n\r\nimport { lazyLoadWithDimensions } from '../../util/uiHelpers';\r\nimport { circlePolyline } from '../../util/maps';\r\n\r\nconst formatColor = color => {\r\n  return color.replace(/^#/, '');\r\n};\r\n\r\nconst fuzzyCircleOverlay = (center, mapsConfig) => {\r\n  const strokeWeight = 1;\r\n  const strokeColor = mapsConfig.fuzzy.circleColor;\r\n  const strokeOpacity = 0.5;\r\n  const fillColor = mapsConfig.fuzzy.circleColor;\r\n  const fillOpacity = 0.2;\r\n\r\n  const path = circlePolyline(center, mapsConfig.fuzzy.offset);\r\n  const styles = `-${strokeWeight}+${formatColor(strokeColor)}-${strokeOpacity}+${formatColor(\r\n    fillColor\r\n  )}-${fillOpacity}`;\r\n  return `path${styles}(${encodeURIComponent(polyline.encode(path))})`;\r\n};\r\n\r\nconst markerOverlay = center => {\r\n  return `pin-s(${center.lng},${center.lat})`;\r\n};\r\n\r\nconst mapOverlay = (center, mapsConfig) => {\r\n  if (mapsConfig.fuzzy.enabled) {\r\n    return fuzzyCircleOverlay(center, mapsConfig);\r\n  }\r\n  return markerOverlay(center);\r\n};\r\n\r\nconst StaticMapboxMap = props => {\r\n  const { address, center, zoom, mapsConfig, dimensions } = props;\r\n  const { width, height } = dimensions;\r\n\r\n  const libLoaded = typeof window !== 'undefined' && window.mapboxgl;\r\n  if (!libLoaded) {\r\n    return null;\r\n  }\r\n\r\n  const overlay = mapOverlay(center, mapsConfig);\r\n  const src =\r\n    'https://api.mapbox.com/styles/v1/mapbox/streets-v10/static' +\r\n    (overlay ? `/${overlay}` : '') +\r\n    `/${center.lng},${center.lat},${zoom}` +\r\n    `/${width}x${height}` +\r\n    `?access_token=${mapsConfig.mapboxAccessToken}`;\r\n\r\n  return <img src={src} alt={address} crossOrigin=\"anonymous\" />;\r\n};\r\n\r\nStaticMapboxMap.defaultProps = {\r\n  address: '',\r\n  center: null,\r\n};\r\n\r\nStaticMapboxMap.propTypes = {\r\n  address: string,\r\n  center: shape({\r\n    lat: number.isRequired,\r\n    lng: number.isRequired,\r\n  }).isRequired,\r\n  zoom: number.isRequired,\r\n  mapsConfig: object.isRequired,\r\n\r\n  // from withDimensions\r\n  dimensions: shape({\r\n    width: number.isRequired,\r\n    height: number.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default lazyLoadWithDimensions(StaticMapboxMap, { maxWidth: '640px' });\r\n","export { default as DynamicMap } from './DynamicMapboxMap';\r\nexport { default as StaticMap } from './StaticMapboxMap';\r\n\r\nexport const isMapsLibLoaded = () => {\r\n  return typeof window !== 'undefined' && window.mapboxgl;\r\n};\r\n","import React, { Component } from 'react';\r\nimport { number, object, shape, string } from 'prop-types';\r\nimport { circlePolyline } from '../../util/maps';\r\n\r\n/**\r\n * DynamicGoogleMap uses Google Maps API.\r\n */\r\nclass DynamicGoogleMap extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.map = null;\r\n    this.mapContainer = null;\r\n\r\n    this.initializeMap = this.initializeMap.bind(this);\r\n  }\r\n\r\n  componentDidMount(prevProps) {\r\n    if (!this.map && this.mapContainer) {\r\n      this.initializeMap();\r\n    }\r\n  }\r\n\r\n  initializeMap() {\r\n    const { offsetHeight, offsetWidth } = this.mapContainer;\r\n    const hasDimensions = offsetHeight > 0 && offsetWidth > 0;\r\n\r\n    if (hasDimensions) {\r\n      const { center, zoom, address, mapsConfig } = this.props;\r\n      const maps = window.google.maps;\r\n      const controlPosition = window.google.maps.ControlPosition.LEFT_TOP;\r\n\r\n      const mapConfig = {\r\n        center,\r\n        zoom,\r\n        // Disable all controls except zoom\r\n        // https://developers.google.com/maps/documentation/javascript/reference/map#MapOptions\r\n\r\n        // Disable map type (ie. Satellite etc.)\r\n        mapTypeControl: false,\r\n        // Disable zooming by scrolling\r\n        scrollwheel: false,\r\n        // Fullscreen control toggle\r\n        fullscreenControl: false,\r\n        // Street View control\r\n        streetViewControl: false,\r\n        // Zoom control position\r\n        zoomControlOptions: {\r\n          position: controlPosition,\r\n        },\r\n      };\r\n\r\n      this.map = new maps.Map(this.mapContainer, mapConfig);\r\n\r\n      if (mapsConfig.fuzzy.enabled) {\r\n        const GoogleLatLng = window.google.maps.LatLng;\r\n        // Origin as object literal (LatLngLiteral)\r\n        const origin = { lat: center.lat, lng: center.lng };\r\n        const radius = mapsConfig.fuzzy.offset;\r\n        const path = circlePolyline(origin, radius).map(c => new GoogleLatLng(c[0], c[1]));\r\n\r\n        const circleProps = {\r\n          options: {\r\n            fillColor: mapsConfig.fuzzy.circleColor,\r\n            fillOpacity: 0.2,\r\n            strokeColor: mapsConfig.fuzzy.circleColor,\r\n            strokeOpacity: 0.5,\r\n            strokeWeight: 1,\r\n            clickable: false,\r\n          },\r\n          path,\r\n          map: this.map,\r\n        };\r\n\r\n        // Add a circle. We use Polygon because the default Circle class is not round enough.\r\n        const Polygon = window.google.maps.Polygon;\r\n        new Polygon(circleProps);\r\n      } else {\r\n        new window.google.maps.Marker({\r\n          position: center,\r\n          map: this.map,\r\n          title: address,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { containerClassName, mapClassName } = this.props;\r\n    return (\r\n      <div className={containerClassName}>\r\n        <div className={mapClassName} ref={el => (this.mapContainer = el)} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nDynamicGoogleMap.defaultProps = {\r\n  address: '',\r\n  center: null,\r\n};\r\n\r\nDynamicGoogleMap.propTypes = {\r\n  address: string,\r\n  center: shape({\r\n    lat: number.isRequired,\r\n    lng: number.isRequired,\r\n  }).isRequired,\r\n  zoom: number.isRequired,\r\n  mapsConfig: object.isRequired,\r\n};\r\n\r\nexport default DynamicGoogleMap;\r\n","import React, { Component } from 'react';\r\nimport { number, object, shape, string } from 'prop-types';\r\nimport pick from 'lodash/pick';\r\nimport isEqual from 'lodash/isEqual';\r\nimport polyline from '@mapbox/polyline';\r\n\r\nimport { encodeLatLng, stringify } from '../../util/urlHelpers';\r\nimport { lazyLoadWithDimensions } from '../../util/uiHelpers';\r\nimport { circlePolyline } from '../../util/maps';\r\n\r\nconst DEFAULT_COLOR = 'FF0000';\r\nconst DEFAULT_STROKE_OPACITY = 0.3;\r\nconst DEFAULT_FILL_OPACITY = 0.2;\r\n\r\n// Extract color from string. Given value should be either with '#' (e.g. #FFFFFF') or without it.\r\nconst formatColorFromString = color => {\r\n  if (typeof color === 'string' && /^#[0-9A-F]{6}$/i.test(color)) {\r\n    return color.substring(1).toUpperCase();\r\n  } else if (typeof color === 'string' && /^[0-9A-F]{6}$/i) {\r\n    return color.toUpperCase();\r\n  } else {\r\n    return DEFAULT_COLOR;\r\n  }\r\n};\r\n\r\n// Convert opacity from floating point value (0.0 -> 1.0) to a hexadecimal format\r\nconst convertOpacity = opacity => {\r\n  if (typeof opacity === 'number' && !isNaN(opacity) && opacity >= 0 && opacity <= 1) {\r\n    // 0.2 => 20\r\n    return Math.floor(opacity * 255)\r\n      .toString(16)\r\n      .toUpperCase();\r\n  }\r\n};\r\n\r\n// Draw a circle polyline for fuzzy location.\r\nconst drawFuzzyCircle = (mapsConfig, center) => {\r\n  if (!(mapsConfig && typeof mapsConfig === 'object' && center && typeof center === 'object')) {\r\n    return '';\r\n  }\r\n\r\n  const fillColor = mapsConfig.fuzzy.circleColor;\r\n  const fillOpacity = 0.2;\r\n  const strokeColor = mapsConfig.fuzzy.circleColor;\r\n  const strokeWeight = 1;\r\n\r\n  const circleRadius = mapsConfig.fuzzy.offset || 500;\r\n  const circleStrokeWeight = strokeWeight || 1;\r\n  const circleStrokeColor = formatColorFromString(strokeColor);\r\n  const circleStrokeOpacity = convertOpacity(DEFAULT_STROKE_OPACITY);\r\n  const circleFill = formatColorFromString(fillColor);\r\n  const circleFillOpacity = convertOpacity(fillOpacity || DEFAULT_FILL_OPACITY);\r\n\r\n  // Encoded polyline string\r\n  const encodedPolyline = polyline.encode(circlePolyline(center, circleRadius));\r\n\r\n  const polylineGraphicTokens = [\r\n    `color:0x${circleStrokeColor}${circleStrokeOpacity}`,\r\n    `fillcolor:0x${circleFill}${circleFillOpacity}`,\r\n    `weight:${circleStrokeWeight}`,\r\n    `enc:${encodedPolyline}`,\r\n  ];\r\n\r\n  return polylineGraphicTokens.join('|');\r\n};\r\n\r\nclass StaticGoogleMap extends Component {\r\n  shouldComponentUpdate(nextProps, prevState) {\r\n    // Do not draw the map unless center, zoom or dimensions change\r\n    // We want to prevent unnecessary calls to Google Maps APIs due\r\n    const currentData = pick(this.props, ['center', 'zoom', 'dimensions']);\r\n    const nextData = pick(nextProps, ['center', 'zoom', 'dimensions']);\r\n    return !isEqual(currentData, nextData);\r\n  }\r\n\r\n  render() {\r\n    const { center, zoom, address, mapsConfig, dimensions } = this.props;\r\n    const { lat, lng } = center || {};\r\n    const { width, height } = dimensions;\r\n\r\n    // Extra graphics for the static map image\r\n    // 1. if fuzzy coordinates are used, return circle path\r\n    // 2. else return default marker\r\n    const targetMaybe = mapsConfig.fuzzy.enabled\r\n      ? { path: drawFuzzyCircle(mapsConfig, center) }\r\n      : { markers: `${lat},${lng}` };\r\n\r\n    const srcParams = stringify({\r\n      center: encodeLatLng(center),\r\n      zoom,\r\n      size: `${width}x${height}`,\r\n      maptype: 'roadmap',\r\n      key: mapsConfig.googleMapsAPIKey,\r\n      ...targetMaybe,\r\n    });\r\n\r\n    return (\r\n      <img\r\n        src={`https://maps.googleapis.com/maps/api/staticmap?${srcParams}`}\r\n        alt={address}\r\n        crossOrigin=\"anonymous\"\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nStaticGoogleMap.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  address: '',\r\n  center: null,\r\n};\r\n\r\nStaticGoogleMap.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  address: string,\r\n  center: shape({\r\n    lat: number.isRequired,\r\n    lng: number.isRequired,\r\n  }).isRequired,\r\n  zoom: number.isRequired,\r\n  mapsConfig: object.isRequired,\r\n\r\n  // from withDimensions\r\n  dimensions: shape({\r\n    width: number.isRequired,\r\n    height: number.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default lazyLoadWithDimensions(StaticGoogleMap, { maxWidth: '640px' });\r\n","export { default as DynamicMap } from './DynamicGoogleMap';\r\nexport { default as StaticMap } from './StaticGoogleMap';\r\n\r\nexport const isMapsLibLoaded = () => {\r\n  return typeof window !== 'undefined' && window.google && window.google.maps;\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Map_root__tDy-U\",\"mapRoot\":\"Map_mapRoot__dk1Uu\"};","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport { useConfiguration } from '../../context/configurationContext';\r\nimport { bool, number, object, string } from 'prop-types';\r\nimport { propTypes } from '../../util/types';\r\nimport { getMapProviderApiAccess } from '../../util/maps';\r\nimport * as mapboxMap from './MapboxMap';\r\nimport * as googleMapsMap from './GoogleMap';\r\n\r\nimport css from './Map.module.css';\r\n\r\nexport const Map = props => {\r\n  const config = useConfiguration();\r\n  const {\r\n    className,\r\n    rootClassName,\r\n    mapRootClassName,\r\n    address,\r\n    center,\r\n    obfuscatedCenter,\r\n    zoom,\r\n    mapsConfig,\r\n    useStaticMap,\r\n  } = props;\r\n  const mapsConfiguration = mapsConfig || config.maps;\r\n  const hasApiAccessForMapProvider = !!getMapProviderApiAccess(mapsConfiguration);\r\n  const isGoogleMapsInUse = mapsConfiguration.mapProvider === 'googleMaps';\r\n  const StaticMap = isGoogleMapsInUse ? googleMapsMap.StaticMap : mapboxMap.StaticMap;\r\n  const DynamicMap = isGoogleMapsInUse ? googleMapsMap.DynamicMap : mapboxMap.DynamicMap;\r\n  const isMapsLibLoaded = isGoogleMapsInUse\r\n    ? googleMapsMap.isMapsLibLoaded\r\n    : mapboxMap.isMapsLibLoaded;\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  const mapClasses = mapRootClassName || css.mapRoot;\r\n\r\n  if (mapsConfiguration.fuzzy.enabled && !obfuscatedCenter) {\r\n    throw new Error(\r\n      'Map: obfuscatedCenter prop is required when config.maps.fuzzy.enabled === true'\r\n    );\r\n  }\r\n  if (!mapsConfiguration.fuzzy.enabled && !center) {\r\n    throw new Error('Map: center prop is required when config.maps.fuzzy.enabled === false');\r\n  }\r\n\r\n  const location = mapsConfiguration.fuzzy.enabled ? obfuscatedCenter : center;\r\n  const zoomLevel =\r\n    zoom || mapsConfiguration.fuzzy.enabled ? mapsConfiguration.fuzzy.defaultZoomLevel : 11;\r\n\r\n  const isMapProviderAvailable = hasApiAccessForMapProvider && isMapsLibLoaded();\r\n  return !isMapProviderAvailable ? (\r\n    <div className={classes} />\r\n  ) : useStaticMap ? (\r\n    <StaticMap\r\n      center={location}\r\n      zoom={zoomLevel}\r\n      address={address}\r\n      mapsConfig={mapsConfiguration}\r\n    />\r\n  ) : (\r\n    <DynamicMap\r\n      containerClassName={classes}\r\n      mapClassName={mapClasses}\r\n      center={location}\r\n      zoom={zoomLevel}\r\n      address={address}\r\n      mapsConfig={mapsConfiguration}\r\n    />\r\n  );\r\n};\r\n\r\nMap.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  mapRootClassName: null,\r\n  address: '',\r\n  zoom: null,\r\n  mapsConfig: null,\r\n  useStaticMap: false,\r\n};\r\n\r\nMap.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  mapRootClassName: string,\r\n  address: string,\r\n  center: propTypes.latlng,\r\n  obfuscatedCenter: propTypes.latlng,\r\n  zoom: number,\r\n  mapsConfig: object,\r\n  useStaticMap: bool,\r\n};\r\n\r\nexport default Map;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"MenuContent_root__BlcPu\",\"isClosed\":\"MenuContent_isClosed__-rAaQ\",\"isOpen\":\"MenuContent_isOpen__5HGy8\",\"content\":\"MenuContent_content__0HxJ2\",\"arrowTop\":\"MenuContent_arrowTop__eimKM\",\"arrowBelow\":\"MenuContent_arrowBelow__JyeFm\"};","/**\r\n * MenuContent is a immediate child of Menu component sibling to MenuLabel.\r\n * Clicking MenuLabel toggles visibility of MenuContent.\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { MenuItem } from '../../components';\r\n\r\nimport css from './MenuContent.module.css';\r\n\r\nconst MenuContent = props => {\r\n  const {\r\n    arrowPosition,\r\n    children,\r\n    className,\r\n    contentClassName,\r\n    contentRef,\r\n    isOpen,\r\n    rootClassName,\r\n    style,\r\n  } = props;\r\n\r\n  const rootClass = rootClassName || css.root;\r\n  const openClasses = isOpen ? css.isOpen : css.isClosed;\r\n  const classes = classNames(rootClass, className, openClasses);\r\n  const contentClasses = classNames(contentClassName || css.content);\r\n\r\n  const arrowPositionStyle =\r\n    arrowPosition && style.right != null\r\n      ? { position: 'absolute', right: arrowPosition, top: 0 }\r\n      : { position: 'absolute', left: arrowPosition, top: 0 };\r\n\r\n  const arrow = arrowPosition ? (\r\n    <div style={arrowPositionStyle}>\r\n      <div className={css.arrowBelow} />\r\n      <div className={css.arrowTop} />\r\n    </div>\r\n  ) : null;\r\n\r\n  React.Children.forEach(children, child => {\r\n    if (child.type !== MenuItem) {\r\n      throw new Error('All children of MenuContent must be MenuItems.');\r\n    }\r\n    if (child.key == null) {\r\n      throw new Error('All children of MenuContent must have a \"key\" prop.');\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div className={classes} ref={contentRef} style={style}>\r\n      {arrow}\r\n      <ul className={contentClasses}>{children}</ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nMenuContent.defaultProps = {\r\n  arrowPosition: null,\r\n  className: null,\r\n  contentClassName: null,\r\n  contentRef: null,\r\n  isOpen: false,\r\n  rootClassName: '',\r\n  style: null,\r\n};\r\n\r\nconst { bool, func, node, number, object, string } = PropTypes;\r\n\r\nMenuContent.propTypes = {\r\n  arrowPosition: number,\r\n  children: node.isRequired,\r\n  className: string,\r\n  contentClassName: string,\r\n  contentRef: func,\r\n  isOpen: bool,\r\n  rootClassName: string,\r\n  style: object,\r\n};\r\n\r\nexport default MenuContent;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"MenuItem_root__cpF8J\"};","/**\r\n * MenuItem is part of Menu and specifically a child of MenuContent.\r\n * MenuItems should have a 'key' prop specified.\r\n * https://facebook.github.io/react/docs/lists-and-keys.html#keys\r\n *\r\n * Example:\r\n *   <MenuItem key=\"item 1\"><a href=\"example.com\">Click me</a><MenuItem>\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './MenuItem.module.css';\r\n\r\nconst MenuItem = props => {\r\n  const { children, className, rootClassName } = props;\r\n  const rootClass = rootClassName || css.root;\r\n  const classes = classNames(rootClass, className);\r\n\r\n  return (\r\n    <li className={classes} role=\"menuitem\">\r\n      {children}\r\n    </li>\r\n  );\r\n};\r\n\r\nMenuItem.defaultProps = {\r\n  className: null,\r\n  rootClassName: '',\r\n};\r\n\r\nconst { node, string } = PropTypes;\r\n\r\nMenuItem.propTypes = {\r\n  children: node.isRequired,\r\n  className: string,\r\n  rootClassName: string,\r\n};\r\n\r\nexport default MenuItem;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"MenuLabel_root__F9bFl\",\"clickedWithMouse\":\"MenuLabel_clickedWithMouse__l4YQ-\",\"isOpen\":\"MenuLabel_isOpen__yGXfg\"};","/**\r\n * MenuLabel is the only always visible part of Menu.\r\n * Clicking it toggles visibility of MenuContent.\r\n */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './MenuLabel.module.css';\r\n\r\nclass MenuLabel extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { clickedWithMouse: false };\r\n    this.onClick = this.onClick.bind(this);\r\n    this.onBlur = this.onBlur.bind(this);\r\n  }\r\n\r\n  onClick(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    this.props.onToggleActive();\r\n\r\n    // Don't show focus outline if user just clicked the element with mouse\r\n    // tab + enter creates also a click event, but its location is origin.\r\n    const nativeEvent = e.nativeEvent;\r\n    const isRealClick = !(nativeEvent.clientX === 0 && nativeEvent.clientY === 0);\r\n    if (isRealClick) {\r\n      this.setState({ clickedWithMouse: true });\r\n    }\r\n  }\r\n\r\n  onBlur() {\r\n    this.setState(() => {\r\n      return { clickedWithMouse: false };\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { children, className, rootClassName, isOpen, isOpenClassName } = this.props;\r\n\r\n    const rootClass = rootClassName || css.root;\r\n    const isOpenClass = isOpenClassName || css.isOpen;\r\n    const classes = classNames(rootClass, className, {\r\n      [css.clickedWithMouse]: this.state.clickedWithMouse,\r\n      [isOpenClass]: isOpen,\r\n    });\r\n\r\n    return (\r\n      <button className={classes} onClick={this.onClick} onBlur={this.onBlur}>\r\n        {children}\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nMenuLabel.defaultProps = {\r\n  className: null,\r\n  isOpenClassName: null,\r\n  isOpen: false,\r\n  onToggleActive: null,\r\n  rootClassName: '',\r\n};\r\n\r\nconst { bool, func, node, string } = PropTypes;\r\n\r\nMenuLabel.propTypes = {\r\n  children: node.isRequired,\r\n  className: string,\r\n  isOpenClassName: string,\r\n  isOpen: bool,\r\n  onToggleActive: func,\r\n  rootClassName: string,\r\n};\r\n\r\nexport default MenuLabel;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Menu_root__oxglR\"};","/**\r\n * Menu is component that shows extra content when it is clicked.\r\n * Clicking it toggles visibility of MenuContent.\r\n *\r\n * Example:\r\n *  <Menu>\r\n *    <MenuLabel>\r\n *      <span>Open menu</span>\r\n *    </MenuLabel>\r\n *    <MenuContent>\r\n *      <MenuItem key=\"first item\">\r\n *        <Button onClick={onClick}>Click this</Button>\r\n *      </MenuItem>\r\n *    </MenuContent>\r\n *  </Menu>\r\n *\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { MenuContent, MenuLabel } from '../../components';\r\nimport css from './Menu.module.css';\r\n\r\nconst KEY_CODE_ESCAPE = 27;\r\nconst CONTENT_PLACEMENT_OFFSET = 0;\r\nconst CONTENT_TO_LEFT = 'left';\r\nconst CONTENT_TO_RIGHT = 'right';\r\nconst MAX_MOBILE_SCREEN_WIDTH = 767;\r\n\r\nconst isControlledMenu = (isOpenProp, onToggleActiveProp) => {\r\n  return isOpenProp !== null && onToggleActiveProp !== null;\r\n};\r\n\r\nclass Menu extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { isOpen: false, ready: false };\r\n\r\n    const { isOpen, onToggleActive } = props;\r\n    const isIndependentMenu = isOpen === null && onToggleActive === null;\r\n    if (!(isIndependentMenu || isControlledMenu(isOpen, onToggleActive))) {\r\n      throw new Error(\r\n        `Menu has invalid props:\r\n          Both isOpen and onToggleActive need to be defined (controlled menu),\r\n          or neither of them (menu uses its own state management).`\r\n      );\r\n    }\r\n\r\n    this.onBlur = this.onBlur.bind(this);\r\n    this.onKeyDown = this.onKeyDown.bind(this);\r\n    this.toggleOpen = this.toggleOpen.bind(this);\r\n    this.prepareChildren = this.prepareChildren.bind(this);\r\n    this.positionStyleForMenuContent = this.positionStyleForMenuContent.bind(this);\r\n    this.positionStyleForArrow = this.positionStyleForArrow.bind(this);\r\n\r\n    this.menu = null;\r\n    this.menuContent = null;\r\n  }\r\n  componentDidMount() {\r\n    // Menu needs to know about DOM before it can calculate it's size proberly.\r\n    this.setState({ ready: true });\r\n  }\r\n\r\n  onBlur(event) {\r\n    // FocusEvent is fired faster than the link elements native click handler\r\n    // gets its own event. Therefore, we need to check the origin of this FocusEvent.\r\n    if (!this.menu.contains(event.relatedTarget)) {\r\n      const { isOpen, onToggleActive } = this.props;\r\n\r\n      if (isControlledMenu(isOpen, onToggleActive)) {\r\n        onToggleActive(false);\r\n      } else {\r\n        this.setState({ isOpen: false });\r\n      }\r\n    }\r\n  }\r\n\r\n  onKeyDown(e) {\r\n    // Gather all escape presses to close menu\r\n    if (e.keyCode === KEY_CODE_ESCAPE) {\r\n      this.toggleOpen(false);\r\n    }\r\n  }\r\n\r\n  toggleOpen(enforcedState) {\r\n    // If state is handled outside of Menu component, we call a passed in onToggleActive func\r\n    const { isOpen, onToggleActive } = this.props;\r\n    if (isControlledMenu(isOpen, onToggleActive)) {\r\n      const isMenuOpen = enforcedState != null ? enforcedState : !isOpen;\r\n      onToggleActive(isMenuOpen);\r\n    } else {\r\n      // If state is handled inside of Menu component, set state\r\n      this.setState(prevState => {\r\n        const isMenuOpen = enforcedState != null ? enforcedState : !prevState.isOpen;\r\n        return { isOpen: isMenuOpen };\r\n      });\r\n    }\r\n  }\r\n\r\n  positionStyleForMenuContent(contentPosition) {\r\n    if (this.menu && this.menuContent) {\r\n      const windowWidth = window.innerWidth;\r\n      const rect = this.menu.getBoundingClientRect();\r\n\r\n      // Calculate wether we should show the menu to the left of the component or right\r\n      const distanceToRight = windowWidth - rect.right;\r\n      const menuWidth = this.menu.offsetWidth;\r\n      const contentWidthBiggerThanLabel = this.menuContent.offsetWidth - menuWidth;\r\n      const usePositionLeftFromLabel = contentPosition === CONTENT_TO_LEFT;\r\n      const contentPlacementOffset = this.props.contentPlacementOffset;\r\n\r\n      if (windowWidth <= MAX_MOBILE_SCREEN_WIDTH) {\r\n        // Take full screen width on mobile\r\n        return {\r\n          left: -1 * (rect.left - 24),\r\n          width: 'calc(100vw - 48px)',\r\n        };\r\n      }\r\n\r\n      // Render menu content to the left according to the contentPosition\r\n      // prop or if the content does not fit to the right. Otherwise render to\r\n      // the right.\r\n      return usePositionLeftFromLabel || distanceToRight < contentWidthBiggerThanLabel\r\n        ? { right: contentPlacementOffset, minWidth: menuWidth }\r\n        : { left: contentPlacementOffset, minWidth: menuWidth };\r\n    }\r\n\r\n    // When the MenuContent is rendered for the first time\r\n    // (for the sake of width calculation),\r\n    // move it outside of viewport to prevent possible overflow.\r\n    return this.state.isOpen ? {} : { left: '-10000px' };\r\n  }\r\n\r\n  positionStyleForArrow(isPositionedRight) {\r\n    if (this.menu) {\r\n      const menuWidth = this.menu.offsetWidth;\r\n      const contentPlacementOffset = this.props.contentPlacementOffset;\r\n      return isPositionedRight\r\n        ? Math.floor(menuWidth / 2) - contentPlacementOffset\r\n        : Math.floor(menuWidth / 2);\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  prepareChildren() {\r\n    if (React.Children.count(this.props.children) !== 2) {\r\n      throw new Error('Menu needs to have two children: MenuLabel and MenuContent.');\r\n    }\r\n\r\n    return React.Children.map(this.props.children, child => {\r\n      const { isOpen: isOpenProp, onToggleActive } = this.props;\r\n      const isOpen = isControlledMenu(isOpenProp, onToggleActive) ? isOpenProp : this.state.isOpen;\r\n\r\n      if (child.type === MenuLabel) {\r\n        // MenuLabel needs toggleOpen function\r\n        // We pass that directly  so that component user doesn't need to worry about that\r\n        return React.cloneElement(child, {\r\n          isOpen,\r\n          onToggleActive: this.toggleOpen,\r\n        });\r\n      } else if (child.type === MenuContent) {\r\n        // MenuContent needs some styling data (width, arrowPosition, and isOpen info)\r\n        // We pass those directly so that component user doesn't need to worry about those.\r\n        const { contentPosition, useArrow } = this.props;\r\n        const positionStyles = this.positionStyleForMenuContent(contentPosition);\r\n        const arrowPosition = useArrow\r\n          ? this.positionStyleForArrow(positionStyles.right != null)\r\n          : null;\r\n        return React.cloneElement(child, {\r\n          arrowPosition,\r\n          contentRef: node => {\r\n            this.menuContent = node;\r\n          },\r\n          isOpen,\r\n          style: { ...child.props.style, ...positionStyles },\r\n        });\r\n      } else {\r\n        throw new Error('Menu has an unknown child. Only MenuLabel and MenuContent are allowed.');\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { className, rootClassName } = this.props;\r\n    const rootClass = rootClassName || css.root;\r\n    const classes = classNames(rootClass, className);\r\n    const menuChildren = this.state.ready ? this.prepareChildren() : null;\r\n\r\n    return (\r\n      <div\r\n        className={classes}\r\n        onBlur={this.onBlur}\r\n        tabIndex={0}\r\n        onKeyDown={this.onKeyDown}\r\n        ref={c => {\r\n          this.menu = c;\r\n        }}\r\n      >\r\n        {menuChildren}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nMenu.defaultProps = {\r\n  className: null,\r\n  rootClassName: '',\r\n  contentPlacementOffset: CONTENT_PLACEMENT_OFFSET,\r\n  contentPosition: CONTENT_TO_RIGHT,\r\n  isOpen: null,\r\n  onToggleActive: null,\r\n  useArrow: true,\r\n};\r\n\r\nconst { bool, func, node, number, string } = PropTypes;\r\n\r\nMenu.propTypes = {\r\n  children: node.isRequired,\r\n  className: string,\r\n  rootClassName: string,\r\n  contentPosition: string,\r\n  contentPlacementOffset: number,\r\n  useArrow: bool,\r\n  isOpen: bool,\r\n  onToggleActive: func,\r\n};\r\n\r\nexport default Menu;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ModalInMobile_root__i8Orb\",\"modalHidden\":\"ModalInMobile_modalHidden__l2HRo\",\"modalContainer\":\"ModalInMobile_modalContainer__mYOcx marketplaceModalInMobileBaseStyles\",\"modalContent\":\"ModalInMobile_modalContent__7DiWl\"};","/**\r\n * ModalInMobile gives possibility separate part of existing DOM so that in mobile views that\r\n * fragment is shown in a separate modal layer on top of the page.\r\n *\r\n * Currently, this does not implement resize listener for window.\r\n *\r\n * Example:\r\n * <Parent>\r\n *   <ModalInMobile isModalOpenOnMobile={this.state.modalOpen} onClose={handleClose}>\r\n *     <FormX />\r\n *   </ModalInMobile>\r\n * </Parent>\r\n */\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { Modal } from '../../components';\r\nimport { withViewport } from '../../util/uiHelpers';\r\n\r\nimport css from './ModalInMobile.module.css';\r\n\r\nclass ModalInMobileComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isOpen: false,\r\n    };\r\n    this.handleClose = this.handleClose.bind(this);\r\n    this.changeOpenStatus = this.changeOpenStatus.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { isModalOpenOnMobile, showAsModalMaxWidth, viewport } = this.props;\r\n\r\n    // After Mounting, component can adapt to responsive screen size\r\n    const isMobileLayout = viewport.width <= showAsModalMaxWidth;\r\n\r\n    if (isMobileLayout && isModalOpenOnMobile) {\r\n      this.changeOpenStatus(isModalOpenOnMobile);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { isModalOpenOnMobile, showAsModalMaxWidth, viewport } = this.props;\r\n\r\n    const isChanging = isModalOpenOnMobile !== this.state.isOpen;\r\n    const isMobileLayout = viewport.width <= showAsModalMaxWidth;\r\n    const shouldBeClosedAsModal = !isMobileLayout && !isModalOpenOnMobile;\r\n\r\n    // Handle change if status is changing on mobile layout or it is closing (on desktop layout)\r\n    if (isChanging && (isMobileLayout || shouldBeClosedAsModal)) {\r\n      this.changeOpenStatus(isModalOpenOnMobile);\r\n    }\r\n  }\r\n\r\n  changeOpenStatus(isOpen) {\r\n    this.setState({ isOpen });\r\n  }\r\n\r\n  handleClose(event) {\r\n    const { onClose } = this.props;\r\n    this.changeOpenStatus(false);\r\n    if (onClose) {\r\n      onClose(event);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      children,\r\n      className,\r\n      containerClassName,\r\n      id,\r\n      showAsModalMaxWidth,\r\n      closeButtonMessage,\r\n      onManageDisableScrolling,\r\n      viewport,\r\n      usePortal,\r\n    } = this.props;\r\n\r\n    const isMobileLayout = viewport.width <= showAsModalMaxWidth;\r\n    const isOpenInMobile = this.state.isOpen;\r\n    const isClosedInMobile = isMobileLayout && !isOpenInMobile;\r\n    const isOpen = isOpenInMobile && isMobileLayout;\r\n\r\n    // We have 3 view states:\r\n    // - default desktop layout (just an extra wrapper)\r\n    // - mobile layout: content visible inside modal popup\r\n    // - mobile layout: content hidden\r\n    const closedClassName = isClosedInMobile ? css.modalHidden : null;\r\n    const classes = classNames(css.root, className);\r\n\r\n    return (\r\n      <Modal\r\n        className={classes}\r\n        containerClassName={containerClassName || css.modalContainer}\r\n        contentClassName={css.modalContent}\r\n        id={id}\r\n        isOpen={isOpen}\r\n        isClosedClassName={closedClassName}\r\n        onClose={this.handleClose}\r\n        closeButtonMessage={closeButtonMessage}\r\n        onManageDisableScrolling={onManageDisableScrolling}\r\n        usePortal={usePortal && isOpen}\r\n      >\r\n        {children}\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nModalInMobileComponent.defaultProps = {\r\n  children: null,\r\n  className: '',\r\n  containerClassName: null,\r\n  onClose: null,\r\n  showAsModalMaxWidth: 0,\r\n  closeButtonMessage: null,\r\n};\r\n\r\nconst { bool, func, node, number, string, shape } = PropTypes;\r\n\r\nModalInMobileComponent.propTypes = {\r\n  children: node,\r\n  className: string,\r\n  containerClassName: string,\r\n  id: string.isRequired,\r\n  isModalOpenOnMobile: bool.isRequired,\r\n  onClose: func,\r\n  showAsModalMaxWidth: number,\r\n  closeButtonMessage: node,\r\n  // eslint-disable-next-line react/no-unused-prop-types\r\n  onManageDisableScrolling: func.isRequired,\r\n\r\n  // from withViewport\r\n  viewport: shape({\r\n    width: number.isRequired,\r\n    height: number.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nconst ModalInMobile = withViewport(ModalInMobileComponent);\r\n\r\nexport default ModalInMobile;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ModalMissingInformation_root__rGucq\",\"modalTitle\":\"ModalMissingInformation_modalTitle__WjgU+ marketplaceModalTitleStyles\",\"modalMessage\":\"ModalMissingInformation_modalMessage__9eok7 marketplaceModalParagraphStyles\",\"email\":\"ModalMissingInformation_email__pt7-R\",\"helperLink\":\"ModalMissingInformation_helperLink__1loz7 a marketplaceModalHelperLink\",\"helperText\":\"ModalMissingInformation_helperText__9Jk2h marketplaceModalHelperText\",\"error\":\"ModalMissingInformation_error__sEEjF marketplaceModalPasswordMargins\",\"bottomWrapper\":\"ModalMissingInformation_bottomWrapper__en4hQ marketplaceModalBottomWrapper\",\"modalIcon\":\"ModalMissingInformation_modalIcon__T2-9O marketplaceModalIconStyles\",\"reminderModalLinkButton\":\"ModalMissingInformation_reminderModalLinkButton__R74Dc buttonPrimary\"};","import React from 'react';\r\nimport { FormattedMessage } from '../../util/reactIntl';\r\nimport { isTooManyEmailVerificationRequestsError } from '../../util/errors';\r\nimport { IconEmailAttention, InlineTextButton, NamedLink } from '../../components';\r\n\r\nimport css from './ModalMissingInformation.module.css';\r\n\r\nconst EmailReminder = props => {\r\n  const {\r\n    className,\r\n    user,\r\n    sendVerificationEmailInProgress,\r\n    sendVerificationEmailError,\r\n    onResendVerificationEmail,\r\n  } = props;\r\n\r\n  const email = user.id ? <span className={css.email}>{user.attributes.email}</span> : '';\r\n\r\n  const resendEmailLink = (\r\n    <InlineTextButton rootClassName={css.helperLink} onClick={onResendVerificationEmail}>\r\n      <FormattedMessage id=\"ModalMissingInformation.resendEmailLinkText\" />\r\n    </InlineTextButton>\r\n  );\r\n\r\n  const fixEmailLink = (\r\n    <NamedLink className={css.helperLink} name=\"ContactDetailsPage\">\r\n      <FormattedMessage id=\"ModalMissingInformation.fixEmailLinkText\" />\r\n    </NamedLink>\r\n  );\r\n\r\n  const resendErrorTranslationId = isTooManyEmailVerificationRequestsError(\r\n    sendVerificationEmailError\r\n  )\r\n    ? 'ModalMissingInformation.resendFailedTooManyRequests'\r\n    : 'ModalMissingInformation.resendFailed';\r\n  const resendErrorMessage = sendVerificationEmailError ? (\r\n    <p className={css.error}>\r\n      <FormattedMessage id={resendErrorTranslationId} />\r\n    </p>\r\n  ) : null;\r\n\r\n  return (\r\n    <div className={className}>\r\n      <IconEmailAttention className={css.modalIcon} />\r\n      <p className={css.modalTitle}>\r\n        <FormattedMessage id=\"ModalMissingInformation.verifyEmailTitle\" />\r\n      </p>\r\n      <p className={css.modalMessage}>\r\n        <FormattedMessage id=\"ModalMissingInformation.verifyEmailText\" />\r\n      </p>\r\n      <p className={css.modalMessage}>\r\n        <FormattedMessage id=\"ModalMissingInformation.checkInbox\" values={{ email }} />\r\n      </p>\r\n      {resendErrorMessage}\r\n\r\n      <div className={css.bottomWrapper}>\r\n        <p className={css.helperText}>\r\n          {sendVerificationEmailInProgress ? (\r\n            <FormattedMessage id=\"ModalMissingInformation.sendingEmail\" />\r\n          ) : (\r\n            <FormattedMessage\r\n              id=\"ModalMissingInformation.resendEmail\"\r\n              values={{ resendEmailLink }}\r\n            />\r\n          )}\r\n        </p>\r\n        <p className={css.helperText}>\r\n          <FormattedMessage id=\"ModalMissingInformation.fixEmail\" values={{ fixEmailLink }} />\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmailReminder;\r\n","import React, { Component } from 'react';\r\nimport { arrayOf, bool, func, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { useRouteConfiguration } from '../../context/routeConfigurationContext';\r\n\r\nimport { FormattedMessage } from '../../util/reactIntl';\r\nimport { ensureCurrentUser } from '../../util/data';\r\nimport { propTypes } from '../../util/types';\r\nimport { pathByRouteName } from '../../util/routes';\r\n\r\nimport { Modal } from '../../components';\r\n\r\nimport EmailReminder from './EmailReminder';\r\nimport css from './ModalMissingInformation.module.css';\r\n\r\nconst MISSING_INFORMATION_MODAL_WHITELIST = [\r\n  'LoginPage',\r\n  'SignupPage',\r\n  'ContactDetailsPage',\r\n  'EmailVerificationPage',\r\n  'PasswordResetPage',\r\n  'StripePayoutPage',\r\n];\r\n\r\nconst EMAIL_VERIFICATION = 'EMAIL_VERIFICATION';\r\n\r\nclass ModalMissingInformation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showMissingInformationReminder: null,\r\n      hasSeenMissingInformationReminder: false,\r\n    };\r\n    this.handleMissingInformationReminder = this.handleMissingInformationReminder.bind(this);\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { currentUser, currentUserHasListings, currentUserHasOrders, location } = this.props;\r\n    const user = ensureCurrentUser(currentUser);\r\n    this.handleMissingInformationReminder(\r\n      user,\r\n      currentUserHasListings,\r\n      currentUserHasOrders,\r\n      location\r\n    );\r\n  }\r\n\r\n  handleMissingInformationReminder(\r\n    currentUser,\r\n    currentUserHasListings,\r\n    currentUserHasOrders,\r\n    newLocation\r\n  ) {\r\n    const routes = this.props.routeConfiguration;\r\n    const whitelistedPaths = MISSING_INFORMATION_MODAL_WHITELIST.map(page =>\r\n      pathByRouteName(page, routes)\r\n    );\r\n\r\n    // Is the current page whitelisted?\r\n    const isPageWhitelisted = whitelistedPaths.includes(newLocation.pathname);\r\n\r\n    // Track if path changes inside Page level component\r\n    const pathChanged = newLocation.pathname !== this.props.location.pathname;\r\n    const notRemindedYet =\r\n      !this.state.showMissingInformationReminder && !this.state.hasSeenMissingInformationReminder;\r\n\r\n    // Is the reminder already shown on current page\r\n    const showOnPathChange = notRemindedYet || pathChanged;\r\n\r\n    if (!isPageWhitelisted && showOnPathChange) {\r\n      // Emails are sent when order is initiated\r\n      // Customer is likely to get email soon when she books something\r\n      // Provider email should work - she should get an email when someone books a listing\r\n      const hasOrders = currentUserHasOrders === true;\r\n      const hasListingsOrOrders = currentUserHasListings || hasOrders;\r\n\r\n      const emailUnverified = !!currentUser.id && !currentUser.attributes.emailVerified;\r\n      const emailVerificationNeeded = hasListingsOrOrders && emailUnverified;\r\n\r\n      // Show reminder\r\n      if (emailVerificationNeeded) {\r\n        this.setState({ showMissingInformationReminder: EMAIL_VERIFICATION });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      rootClassName,\r\n      className,\r\n      containerClassName,\r\n      currentUser,\r\n      sendVerificationEmailInProgress,\r\n      sendVerificationEmailError,\r\n      onManageDisableScrolling,\r\n      onResendVerificationEmail,\r\n    } = this.props;\r\n\r\n    const user = ensureCurrentUser(currentUser);\r\n    const classes = classNames(rootClassName || css.root, className);\r\n\r\n    let content = null;\r\n\r\n    const currentUserLoaded = user && user.id;\r\n    if (currentUserLoaded) {\r\n      if (this.state.showMissingInformationReminder === EMAIL_VERIFICATION) {\r\n        content = (\r\n          <EmailReminder\r\n            className={classes}\r\n            user={user}\r\n            onResendVerificationEmail={onResendVerificationEmail}\r\n            sendVerificationEmailInProgress={sendVerificationEmailInProgress}\r\n            sendVerificationEmailError={sendVerificationEmailError}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    const closeButtonMessage = (\r\n      <FormattedMessage id=\"ModalMissingInformation.closeVerifyEmailReminder\" />\r\n    );\r\n\r\n    return (\r\n      <Modal\r\n        id=\"MissingInformationReminder\"\r\n        containerClassName={containerClassName}\r\n        isOpen={!!this.state.showMissingInformationReminder}\r\n        onClose={() => {\r\n          this.setState({\r\n            showMissingInformationReminder: null,\r\n            hasSeenMissingInformationReminder: true,\r\n          });\r\n        }}\r\n        usePortal\r\n        onManageDisableScrolling={onManageDisableScrolling}\r\n        closeButtonMessage={closeButtonMessage}\r\n      >\r\n        {content}\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nModalMissingInformation.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  currentUser: null,\r\n};\r\n\r\nModalMissingInformation.propTypes = {\r\n  id: string.isRequired,\r\n  className: string,\r\n  rootClassName: string,\r\n  containerClassName: string,\r\n\r\n  currentUser: propTypes.currentUser,\r\n  onManageDisableScrolling: func.isRequired,\r\n  sendVerificationEmailError: propTypes.error,\r\n  sendVerificationEmailInProgress: bool.isRequired,\r\n\r\n  // from useRouteConfiguration\r\n  routeConfiguration: arrayOf(propTypes.route).isRequired,\r\n};\r\n\r\nconst EnhancedModalMissingInformation = props => {\r\n  const routeConfiguration = useRouteConfiguration();\r\n\r\n  return <ModalMissingInformation routeConfiguration={routeConfiguration} {...props} />;\r\n};\r\n\r\nexport default EnhancedModalMissingInformation;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"isOpen\":\"Modal_isOpen__+NMbt\",\"scrollLayer\":\"Modal_scrollLayer__0Z+bq\",\"container\":\"Modal_container__PqhF5\",\"isOpenInPlace\":\"Modal_isOpenInPlace__BAMp1 Modal_isOpen__+NMbt\",\"isOpenInPortal\":\"Modal_isOpenInPortal__v9BaA Modal_isOpen__+NMbt\",\"content\":\"Modal_content__7ZmUY\",\"isClosed\":\"Modal_isClosed__aeEkv\",\"close\":\"Modal_close__MocLw marketplaceModalCloseStyles\",\"closeText\":\"Modal_closeText__nr7ta marketplaceModalCloseText\",\"closeIcon\":\"Modal_closeIcon__u+wbI marketplaceModalCloseIcon\",\"closeLight\":\"Modal_closeLight__reqsr\",\"focusedDiv\":\"Modal_focusedDiv__rYILK\"};","/**\r\n * Modal creates popup which on mobile layout fills the entire visible page.\r\n *\r\n * Example:\r\n * <Parent>\r\n *   <Modal id=\"UniqueIdForThisModal\" isOpen={this.state.modalIsOpen} onClose={handleClose}>\r\n *     <FormX />\r\n *   </Modal>\r\n * </Parent>\r\n */\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { FormattedMessage, intlShape, injectIntl } from '../../util/reactIntl';\r\nimport { Button, IconClose } from '../../components';\r\n\r\nimport css from './Modal.module.css';\r\n\r\nconst KEY_CODE_ESCAPE = 27;\r\n\r\nclass Portal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.el = document.createElement('div');\r\n  }\r\n\r\n  componentDidMount() {\r\n    // The portal element is inserted in the DOM tree after\r\n    // the Modal's children are mounted, meaning that children\r\n    // will be mounted on a detached DOM node. If a child\r\n    // component requires to be attached to the DOM tree\r\n    // immediately when mounted, for example to measure a\r\n    // DOM node, or uses 'autoFocus' in a descendant, add\r\n    // state to Modal and only render the children when Modal\r\n    // is inserted in the DOM tree.\r\n    this.props.portalRoot.appendChild(this.el);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.portalRoot.removeChild(this.el);\r\n  }\r\n\r\n  render() {\r\n    return ReactDOM.createPortal(this.props.children, this.el);\r\n  }\r\n}\r\n\r\nexport class ModalComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleBodyKeyUp = this.handleBodyKeyUp.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n    this.handleResize = this.handleResize.bind(this);\r\n\r\n    this.refDiv = React.createRef();\r\n    this.vh = null;\r\n\r\n    this.state = {\r\n      portalRoot: null,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { id, isOpen, onManageDisableScrolling } = this.props;\r\n    onManageDisableScrolling(id, isOpen);\r\n    window.document.body.addEventListener('keyup', this.handleBodyKeyUp);\r\n\r\n    // A hack to update container height for mobile Safari,\r\n    // when resizing happens due to scroll.\r\n    // css.isOpenInPortal has \"height: calc(var(--vh, 1vh) * 100)\"\r\n    this.vh = window.innerHeight * 0.01;\r\n    window.document.documentElement.style.setProperty('--vh', `${this.vh}px`);\r\n    window.addEventListener('resize', this.handleResize);\r\n\r\n    this.setState({\r\n      portalRoot: document.getElementById('portal-root'),\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { id, isOpen, onManageDisableScrolling } = prevProps;\r\n    if (this.props.isOpen !== isOpen) {\r\n      onManageDisableScrolling(id, this.props.isOpen);\r\n\r\n      // Because we are using portal,\r\n      // we need to set the focus inside Modal manually\r\n      if (this.props.usePortal && this.props.isOpen) {\r\n        this.refDiv.current.focus();\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { id, onManageDisableScrolling } = this.props;\r\n    window.document.body.removeEventListener('keyup', this.handleBodyKeyUp);\r\n    window.document.body.removeEventListener('resize', this.handleResize);\r\n    onManageDisableScrolling(id, false);\r\n  }\r\n\r\n  handleBodyKeyUp(event) {\r\n    const { isOpen } = this.props;\r\n    if (event.keyCode === KEY_CODE_ESCAPE && isOpen) {\r\n      this.handleClose(event);\r\n    }\r\n  }\r\n\r\n  handleClose(event) {\r\n    const { id, onClose, onManageDisableScrolling } = this.props;\r\n    onManageDisableScrolling(id, false);\r\n    onClose(event);\r\n  }\r\n\r\n  handleResize() {\r\n    this.vh = window.innerHeight * 0.01;\r\n    window.document.documentElement.style.setProperty('--vh', `${this.vh}px`);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      children,\r\n      className,\r\n      scrollLayerClassName,\r\n      closeButtonMessage,\r\n      containerClassName,\r\n      contentClassName,\r\n      lightCloseButton,\r\n      intl,\r\n      isClosedClassName,\r\n      isOpen,\r\n      usePortal,\r\n    } = this.props;\r\n\r\n    const closeModalMessage = intl.formatMessage({ id: 'Modal.closeModal' });\r\n    const closeButtonClasses = classNames(css.close, {\r\n      [css.closeLight]: lightCloseButton,\r\n    });\r\n    const closeBtn = isOpen ? (\r\n      <Button\r\n        onClick={this.handleClose}\r\n        rootClassName={closeButtonClasses}\r\n        title={closeModalMessage}\r\n      >\r\n        <span className={css.closeText}>\r\n          {closeButtonMessage || <FormattedMessage id=\"Modal.close\" />}\r\n        </span>\r\n        <IconClose rootClassName={css.closeIcon} />\r\n      </Button>\r\n    ) : null;\r\n\r\n    // Modal uses given styles to wrap child components.\r\n    // If props doesn't contain isClosedClassName, styles default to css.isClosed\r\n    // This makes it possible to create ModalInMobile on top of Modal where style modes are:\r\n    // visible, hidden, or none (ModalInMobile's children are always visible on desktop layout.)\r\n    const isOpenClass = usePortal ? css.isOpenInPortal : css.isOpenInPlace;\r\n    const modalClass = isOpen ? isOpenClass : isClosedClassName;\r\n    const classes = classNames(modalClass, className);\r\n    const scrollLayerClasses = scrollLayerClassName || css.scrollLayer;\r\n    const containerClasses = containerClassName || css.container;\r\n    const portalRoot = this.state.portalRoot;\r\n\r\n    // If you want to use Portal https://reactjs.org/docs/portals.html\r\n    // you need to use 'userPortal' flag.\r\n    // ModalInMobile component needs to use the old Modal without the portal\r\n    // because it's relying that the content is rendered inside\r\n    // the DOM hierarchy of the parent component unlike Modal inside Portal.\r\n\r\n    return !usePortal ? (\r\n      <div className={classes}>\r\n        <div className={scrollLayerClasses}>\r\n          <div className={containerClasses}>\r\n            {closeBtn}\r\n            <div className={classNames(contentClassName || css.content)}>{children}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ) : portalRoot ? (\r\n      <Portal portalRoot={portalRoot}>\r\n        <div className={classes}>\r\n          <div className={scrollLayerClasses}>\r\n            <div\r\n              className={classNames(containerClasses, css.focusedDiv)}\r\n              ref={this.refDiv}\r\n              tabIndex=\"-1\"\r\n            >\r\n              {closeBtn}\r\n              <div className={classNames(contentClassName || css.content)}>{children}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Portal>\r\n    ) : null;\r\n  }\r\n}\r\n\r\nModalComponent.defaultProps = {\r\n  children: null,\r\n  className: null,\r\n  scrollLayerClassName: null,\r\n  closeButtonMessage: null,\r\n  containerClassName: null,\r\n  contentClassName: null,\r\n  lightCloseButton: false,\r\n  isClosedClassName: css.isClosed,\r\n  isOpen: false,\r\n  onClose: null,\r\n  usePortal: false,\r\n};\r\n\r\nconst { bool, func, node, string } = PropTypes;\r\n\r\nModalComponent.propTypes = {\r\n  children: node,\r\n  className: string,\r\n  scrollLayerClassName: string,\r\n  closeButtonMessage: node,\r\n  containerClassName: string,\r\n  contentClassName: string,\r\n  lightCloseButton: bool,\r\n  id: string.isRequired,\r\n  intl: intlShape.isRequired,\r\n  isClosedClassName: string,\r\n  isOpen: bool,\r\n  onClose: func.isRequired,\r\n  usePortal: bool,\r\n\r\n  // eslint-disable-next-line react/no-unused-prop-types\r\n  onManageDisableScrolling: func.isRequired,\r\n};\r\n\r\nexport default injectIntl(ModalComponent);\r\n","/**\r\n * This component wraps React-Router's Link by providing name-based routing.\r\n *\r\n * The `name` prop should match a route in the flattened\r\n * routeConfiguration passed in context by the RoutesProvider\r\n * component. The `params` props is the route params for the route\r\n * path of the given route name.\r\n *\r\n * The `to` prop is an object with the same shape as Link requires,\r\n * but without `pathname` that will be generated from the given route\r\n * name.\r\n *\r\n * Some additional props can be passed for the <a> element like\r\n * `className` and `style`.\r\n *\r\n * The component can also be given the `activeClassName` prop that\r\n * will be added to the element className if the current URL matches\r\n * the one in the generated pathname of the link.\r\n */\r\nimport React from 'react';\r\nimport { object, string, shape, any } from 'prop-types';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport classNames from 'classnames';\r\nimport { useRouteConfiguration } from '../../context/routeConfigurationContext';\r\n\r\nimport { pathByRouteName, findRouteByRouteName } from '../../util/routes';\r\n\r\nexport const NamedLinkComponent = props => {\r\n  const routeConfiguration = useRouteConfiguration();\r\n  const { name, params, title } = props;\r\n\r\n  const onOver = () => {\r\n    const { component: Page } = findRouteByRouteName(name, routeConfiguration);\r\n    // Loadable Component has a \"preload\" function.\r\n    if (Page.preload) {\r\n      Page.preload();\r\n    }\r\n  };\r\n\r\n  // Link props\r\n  const { to, children } = props;\r\n  const pathname = pathByRouteName(name, routeConfiguration, params);\r\n  const { match } = props;\r\n  const active = match.url && match.url === pathname;\r\n\r\n  // <a> element props\r\n  const { className, style, activeClassName } = props;\r\n  const aElemProps = {\r\n    className: classNames(className, { [activeClassName]: active }),\r\n    style,\r\n    title,\r\n  };\r\n\r\n  return (\r\n    <Link onMouseOver={onOver} onTouchStart={onOver} to={{ pathname, ...to }} {...aElemProps}>\r\n      {children}\r\n    </Link>\r\n  );\r\n};\r\n\r\nNamedLinkComponent.defaultProps = {\r\n  params: {},\r\n  to: {},\r\n  children: null,\r\n  className: '',\r\n  style: {},\r\n  activeClassName: 'NamedLink_active',\r\n  title: null,\r\n  match: {},\r\n};\r\n\r\n// This ensures a nice display name in snapshots etc.\r\nNamedLinkComponent.displayName = 'NamedLink';\r\n\r\nNamedLinkComponent.propTypes = {\r\n  // name of the route in routeConfiguration\r\n  name: string.isRequired,\r\n  // params object for the named route\r\n  params: object,\r\n  // Link component props\r\n  to: shape({ search: string, hash: string, state: object }),\r\n  children: any,\r\n\r\n  // generic props for the underlying <a> element\r\n  className: string,\r\n  style: object,\r\n  activeClassName: string,\r\n  title: string,\r\n\r\n  // from withRouter\r\n  match: object,\r\n};\r\n\r\nconst NamedLink = withRouter(NamedLinkComponent);\r\nNamedLink.displayName = 'NamedLink';\r\n\r\nexport default NamedLink;\r\n","/**\r\n * This component wraps React-Router's Redirect by providing name-based routing.\r\n * (Helps to narrow down the scope of possible format changes to routes.)\r\n */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nimport { useRouteConfiguration } from '../../context/routeConfigurationContext';\r\nimport { pathByRouteName } from '../../util/routes';\r\n\r\nconst NamedRedirect = props => {\r\n  const routeConfiguration = useRouteConfiguration();\r\n  const { name, search, state, params, push } = props;\r\n  const pathname = pathByRouteName(name, routeConfiguration, params);\r\n  return <Redirect to={{ pathname, search, state }} push={push} />;\r\n};\r\n\r\nconst { bool, object, string } = PropTypes;\r\n\r\nNamedRedirect.defaultProps = { search: '', state: {}, push: false, params: {} };\r\n\r\nNamedRedirect.propTypes = {\r\n  name: string.isRequired,\r\n  search: string,\r\n  state: object,\r\n  push: bool,\r\n  params: object,\r\n};\r\n\r\nexport default NamedRedirect;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"NotificationBadge_root__t1Bec h6\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './NotificationBadge.module.css';\r\n\r\nconst NotificationBadge = props => {\r\n  const { className, rootClassName, count } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  return <span className={classes}>{count}</span>;\r\n};\r\n\r\nconst { number, string } = PropTypes;\r\n\r\nNotificationBadge.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n};\r\n\r\nNotificationBadge.propTypes = {\r\n  count: number.isRequired,\r\n  className: string,\r\n  rootClassName: string,\r\n};\r\n\r\nexport default NotificationBadge;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OrderBreakdown_root__7DO+s\",\"nowrap\":\"OrderBreakdown_nowrap__Z4C4L\",\"lineItem\":\"OrderBreakdown_lineItem__neknw h4\",\"bookingPeriod\":\"OrderBreakdown_bookingPeriod__YLXUQ\",\"bookingPeriodSectionLeft\":\"OrderBreakdown_bookingPeriodSectionLeft__hMMEh\",\"bookingPeriodSectionRight\":\"OrderBreakdown_bookingPeriodSectionRight__nGkfp\",\"dayLabel\":\"OrderBreakdown_dayLabel__BY4+1 textSmall\",\"dayInfo\":\"OrderBreakdown_dayInfo__GFWTq p\",\"totalPrice\":\"OrderBreakdown_totalPrice__IoKLC p\",\"subTotalLineItem\":\"OrderBreakdown_subTotalLineItem__OLo-7 h4\",\"lineItemTotal\":\"OrderBreakdown_lineItemTotal__lQuJM h4\",\"itemLabel\":\"OrderBreakdown_itemLabel__yEGHu marketplaceSmallFontStyles\",\"itemValue\":\"OrderBreakdown_itemValue__U-M5f marketplaceSmallFontStyles\",\"totalDivider\":\"OrderBreakdown_totalDivider__PiWQd\",\"totalLabel\":\"OrderBreakdown_totalLabel__CO3yG marketplaceSmallFontStyles\",\"feeInfo\":\"OrderBreakdown_feeInfo__qoGUA marketplaceTinyFontStyles\"};","import React from 'react';\r\nimport { FormattedMessage, FormattedDate } from '../../util/reactIntl';\r\nimport { LINE_ITEM_NIGHT, DATE_TYPE_DATE, LINE_ITEM_HOUR, propTypes } from '../../util/types';\r\nimport { subtractTime } from '../../util/dates';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst BookingPeriod = props => {\r\n  const { startDate, endDate, dateType, timeZone } = props;\r\n  const timeZoneMaybe = timeZone ? { timeZone } : null;\r\n\r\n  const timeFormatOptions =\r\n    dateType === DATE_TYPE_DATE\r\n      ? {\r\n          weekday: 'long',\r\n        }\r\n      : {\r\n          weekday: 'short',\r\n          hour: 'numeric',\r\n          minute: 'numeric',\r\n        };\r\n\r\n  const dateFormatOptions = {\r\n    month: 'short',\r\n    day: 'numeric',\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={css.bookingPeriod}>\r\n        <div className={css.bookingPeriodSectionLeft}>\r\n          <div className={css.dayLabel}>\r\n            <FormattedMessage id=\"OrderBreakdown.bookingStart\" />\r\n          </div>\r\n          <div className={css.dayInfo}>\r\n            <FormattedDate value={startDate} {...timeFormatOptions} {...timeZoneMaybe} />\r\n          </div>\r\n          <div className={css.itemLabel}>\r\n            <FormattedDate value={startDate} {...dateFormatOptions} {...timeZoneMaybe} />\r\n          </div>\r\n        </div>\r\n\r\n        <div className={css.bookingPeriodSectionRight}>\r\n          <div className={css.dayLabel}>\r\n            <FormattedMessage id=\"OrderBreakdown.bookingEnd\" />\r\n          </div>\r\n          <div className={css.dayInfo}>\r\n            <FormattedDate value={endDate} {...timeFormatOptions} {...timeZoneMaybe} />\r\n          </div>\r\n          <div className={css.itemLabel}>\r\n            <FormattedDate value={endDate} {...dateFormatOptions} {...timeZoneMaybe} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst LineItemBookingPeriod = props => {\r\n  const { booking, code, dateType, timeZone } = props;\r\n\r\n  if (!booking) {\r\n    return null;\r\n  }\r\n  // Attributes: displayStart and displayEnd can be used to differentiate shown time range\r\n  // from actual start and end times used for availability reservation. It can help in situations\r\n  // where there are preparation time needed between bookings.\r\n  // Read more: https://www.sharetribe.com/api-reference/marketplace.html#bookings\r\n  const { start, end, displayStart, displayEnd } = booking.attributes;\r\n  const localStartDate = displayStart || start;\r\n  const localEndDateRaw = displayEnd || end;\r\n\r\n  const isNightly = code === LINE_ITEM_NIGHT;\r\n  const isHour = code === LINE_ITEM_HOUR;\r\n  const endDay = isNightly || isHour ? localEndDateRaw : subtractTime(localEndDateRaw, 1, 'days');\r\n\r\n  return (\r\n    <>\r\n      <div className={css.lineItem}>\r\n        <BookingPeriod\r\n          startDate={localStartDate}\r\n          endDate={endDay}\r\n          dateType={dateType}\r\n          timeZone={timeZone}\r\n        />\r\n      </div>\r\n      <hr className={css.totalDivider} />\r\n    </>\r\n  );\r\n};\r\nLineItemBookingPeriod.defaultProps = { booking: null, dateType: null };\r\n\r\nLineItemBookingPeriod.propTypes = {\r\n  booking: propTypes.booking,\r\n  dateType: propTypes.dateType,\r\n};\r\n\r\nexport default LineItemBookingPeriod;\r\n","import React from 'react';\r\nimport { FormattedMessage, intlShape } from '../../util/reactIntl';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { LINE_ITEM_NIGHT, LINE_ITEM_DAY, propTypes, LINE_ITEM_HOUR } from '../../util/types';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst LineItemBasePriceMaybe = props => {\r\n  const { lineItems, code, intl } = props;\r\n  const isNightly = code === LINE_ITEM_NIGHT;\r\n  const isDaily = code === LINE_ITEM_DAY;\r\n  const isHourly = code === LINE_ITEM_HOUR;\r\n  const translationKey = isNightly\r\n    ? 'OrderBreakdown.baseUnitNight'\r\n    : isDaily\r\n    ? 'OrderBreakdown.baseUnitDay'\r\n    : isHourly\r\n    ? 'OrderBreakdown.baseUnitHour'\r\n    : 'OrderBreakdown.baseUnitQuantity';\r\n\r\n  // Find correct line-item for given code prop.\r\n  // It should be one of the following: 'line-item/night, 'line-item/day', 'line-item/hour', or 'line-item/item'\r\n  // These are defined in '../../util/types';\r\n  const unitPurchase = lineItems.find(item => item.code === code && !item.reversal);\r\n\r\n  const quantity = unitPurchase ? unitPurchase.quantity.toString() : null;\r\n  const unitPrice = unitPurchase ? formatMoney(intl, unitPurchase.unitPrice) : null;\r\n  const total = unitPurchase ? formatMoney(intl, unitPurchase.lineTotal) : null;\r\n\r\n  return quantity && total ? (\r\n    <div className={css.lineItem}>\r\n      <span className={css.itemLabel}>\r\n        <FormattedMessage id={translationKey} values={{ unitPrice, quantity }} />\r\n      </span>\r\n      <span className={css.itemValue}>{total}</span>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nLineItemBasePriceMaybe.propTypes = {\r\n  lineItems: propTypes.lineItems.isRequired,\r\n  code: propTypes.lineItemUnitType.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default LineItemBasePriceMaybe;\r\n","import React from 'react';\r\nimport { string } from 'prop-types';\r\nimport Decimal from 'decimal.js';\r\n\r\nimport { FormattedMessage, intlShape } from '../../util/reactIntl';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { types as sdkTypes } from '../../util/sdkLoader';\r\nimport {\r\n  propTypes,\r\n  LINE_ITEM_CUSTOMER_COMMISSION,\r\n  LINE_ITEM_PROVIDER_COMMISSION,\r\n} from '../../util/types';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst { Money } = sdkTypes;\r\n\r\n/**\r\n * Calculates the total price in sub units for multiple line items.\r\n */\r\nconst lineItemsTotal = (lineItems, marketplaceCurrency) => {\r\n  const amount = lineItems.reduce((total, item) => {\r\n    return total.plus(item.lineTotal.amount);\r\n  }, new Decimal(0));\r\n  const currency = lineItems[0] ? lineItems[0].lineTotal.currency : marketplaceCurrency;\r\n  return new Money(amount, currency);\r\n};\r\n\r\n/**\r\n * Checks if line item represents commission\r\n */\r\nconst isCommission = lineItem => {\r\n  return (\r\n    lineItem.code === LINE_ITEM_PROVIDER_COMMISSION ||\r\n    lineItem.code === LINE_ITEM_CUSTOMER_COMMISSION\r\n  );\r\n};\r\n\r\n/**\r\n * Returns non-commission, non-reversal line items\r\n */\r\nconst nonCommissionNonReversalLineItems = lineItems => {\r\n  return lineItems.filter(item => !isCommission(item) && !item.reversal);\r\n};\r\n\r\n/**\r\n * Check if there is a commission line-item for the given user role.\r\n */\r\nconst hasCommission = (lineItems, userRole) => {\r\n  let commissionLineItem = null;\r\n\r\n  if (userRole === 'customer') {\r\n    commissionLineItem = lineItems.find(item => item.code === LINE_ITEM_CUSTOMER_COMMISSION);\r\n  } else if (userRole === 'provider') {\r\n    commissionLineItem = lineItems.find(item => item.code === LINE_ITEM_PROVIDER_COMMISSION);\r\n  }\r\n  return !!commissionLineItem;\r\n};\r\n\r\nconst LineItemSubTotalMaybe = props => {\r\n  const { lineItems, code, userRole, intl, marketplaceCurrency } = props;\r\n\r\n  const refund = lineItems.find(item => item.code === code && item.reversal);\r\n\r\n  // Show subtotal only if commission line-item is applicable to user or refund is issued.\r\n  const showSubTotal = hasCommission(lineItems, userRole) || refund;\r\n\r\n  // all non-reversal, non-commission line items\r\n  const subTotalLineItems = nonCommissionNonReversalLineItems(lineItems);\r\n  // line totals of those line items combined\r\n  const subTotal = lineItemsTotal(subTotalLineItems, marketplaceCurrency);\r\n\r\n  const formattedSubTotal = subTotalLineItems.length > 0 ? formatMoney(intl, subTotal) : null;\r\n\r\n  return formattedSubTotal && showSubTotal ? (\r\n    <>\r\n      <hr className={css.totalDivider} />\r\n      <div className={css.subTotalLineItem}>\r\n        <span className={css.itemLabel}>\r\n          <FormattedMessage id=\"OrderBreakdown.subTotal\" />\r\n        </span>\r\n        <span className={css.itemValue}>{formattedSubTotal}</span>\r\n      </div>\r\n    </>\r\n  ) : null;\r\n};\r\n\r\nLineItemSubTotalMaybe.propTypes = {\r\n  lineItems: propTypes.lineItems.isRequired,\r\n  userRole: string.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default LineItemSubTotalMaybe;\r\n","import React from 'react';\r\nimport { FormattedMessage, intlShape } from '../../util/reactIntl';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { LINE_ITEM_SHIPPING_FEE, propTypes } from '../../util/types';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst LineItemShippingFeeMaybe = props => {\r\n  const { lineItems, intl } = props;\r\n\r\n  const shippingFeeLineItem = lineItems.find(\r\n    item => item.code === LINE_ITEM_SHIPPING_FEE && !item.reversal\r\n  );\r\n\r\n  return shippingFeeLineItem ? (\r\n    <div className={css.lineItem}>\r\n      <span className={css.itemLabel}>\r\n        <FormattedMessage id=\"OrderBreakdown.shippingFee\" />\r\n      </span>\r\n      <span className={css.itemValue}>{formatMoney(intl, shippingFeeLineItem.lineTotal)}</span>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nLineItemShippingFeeMaybe.propTypes = {\r\n  lineItems: propTypes.lineItems.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default LineItemShippingFeeMaybe;\r\n","import React from 'react';\r\nimport { FormattedMessage, intlShape } from '../../util/reactIntl';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { LINE_ITEM_PICKUP_FEE, propTypes } from '../../util/types';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst LineItemPickupFeeMaybe = props => {\r\n  const { lineItems, intl } = props;\r\n\r\n  const pickupFeeLineItem = lineItems.find(\r\n    item => item.code === LINE_ITEM_PICKUP_FEE && !item.reversal\r\n  );\r\n\r\n  return pickupFeeLineItem ? (\r\n    <div className={css.lineItem}>\r\n      <span className={css.itemLabel}>\r\n        <FormattedMessage id=\"OrderBreakdown.pickupFee\" />\r\n      </span>\r\n      <span className={css.itemValue}>{formatMoney(intl, pickupFeeLineItem.lineTotal)}</span>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nLineItemPickupFeeMaybe.propTypes = {\r\n  lineItems: propTypes.lineItems.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default LineItemPickupFeeMaybe;\r\n","import React from 'react';\r\nimport { bool, string } from 'prop-types';\r\nimport { FormattedMessage, intlShape } from '../../util/reactIntl';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { types as sdkTypes } from '../../util/sdkLoader';\r\nimport { LINE_ITEM_CUSTOMER_COMMISSION, propTypes } from '../../util/types';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst { Money } = sdkTypes;\r\n\r\n// Validate the assumption that the commission exists and the amount\r\n// is zero or positive.\r\nconst isValidCommission = commissionLineItem => {\r\n  return (\r\n    commissionLineItem &&\r\n    commissionLineItem.lineTotal instanceof Money &&\r\n    commissionLineItem.lineTotal.amount >= 0\r\n  );\r\n};\r\n\r\nconst LineItemCustomerCommissionMaybe = props => {\r\n  const { lineItems, isCustomer, marketplaceName, intl } = props;\r\n\r\n  const customerCommissionLineItem = lineItems.find(\r\n    item => item.code === LINE_ITEM_CUSTOMER_COMMISSION && !item.reversal\r\n  );\r\n\r\n  // If commission is passed it will be shown as a fee already added to the total price\r\n  let commissionItem = null;\r\n\r\n  if (isCustomer && customerCommissionLineItem) {\r\n    if (!isValidCommission(customerCommissionLineItem)) {\r\n      // eslint-disable-next-line no-console\r\n      console.error('invalid commission line item:', customerCommissionLineItem);\r\n      throw new Error('Commission should be present and the value should be zero or positive');\r\n    }\r\n\r\n    const commission = customerCommissionLineItem.lineTotal;\r\n    const formattedCommission = commission ? formatMoney(intl, commission) : null;\r\n\r\n    commissionItem = (\r\n      <div className={css.lineItem}>\r\n        <span className={css.itemLabel}>\r\n          <FormattedMessage\r\n            id=\"OrderBreakdown.commission\"\r\n            values={{ marketplaceName, role: 'customer' }}\r\n          />\r\n        </span>\r\n        <span className={css.itemValue}>{formattedCommission}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return commissionItem;\r\n};\r\n\r\nLineItemCustomerCommissionMaybe.propTypes = {\r\n  lineItems: propTypes.lineItems.isRequired,\r\n  isCustomer: bool.isRequired,\r\n  marketplaceName: string.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default LineItemCustomerCommissionMaybe;\r\n","import React from 'react';\r\nimport { string } from 'prop-types';\r\n\r\nimport { FormattedMessage, intlShape } from '../../util/reactIntl';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { propTypes, LINE_ITEM_CUSTOMER_COMMISSION } from '../../util/types';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst LineItemCustomerCommissionRefundMaybe = props => {\r\n  const { lineItems, isCustomer, marketplaceName, intl } = props;\r\n\r\n  const refund = lineItems.find(\r\n    item => item.code === LINE_ITEM_CUSTOMER_COMMISSION && item.reversal\r\n  );\r\n\r\n  return isCustomer && refund ? (\r\n    <div className={css.lineItem}>\r\n      <span className={css.itemLabel}>\r\n        <FormattedMessage id=\"OrderBreakdown.refundCustomerFee\" values={{ marketplaceName }} />\r\n      </span>\r\n      <span className={css.itemValue}>{formatMoney(intl, refund.lineTotal)}</span>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nLineItemCustomerCommissionRefundMaybe.propTypes = {\r\n  lineItems: propTypes.lineItems.isRequired,\r\n  marketplaceName: string.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default LineItemCustomerCommissionRefundMaybe;\r\n","import React from 'react';\r\nimport { bool, string } from 'prop-types';\r\nimport { FormattedMessage, intlShape } from '../../util/reactIntl';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { types as sdkTypes } from '../../util/sdkLoader';\r\nimport { LINE_ITEM_PROVIDER_COMMISSION, propTypes } from '../../util/types';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst { Money } = sdkTypes;\r\n\r\n// Validate the assumption that the commission exists and the amount\r\n// is zero or negative.\r\nconst isValidCommission = commissionLineItem => {\r\n  return commissionLineItem.lineTotal instanceof Money && commissionLineItem.lineTotal.amount <= 0;\r\n};\r\n\r\nconst LineItemProviderCommissionMaybe = props => {\r\n  const { lineItems, isProvider, marketplaceName, intl } = props;\r\n\r\n  const providerCommissionLineItem = lineItems.find(\r\n    item => item.code === LINE_ITEM_PROVIDER_COMMISSION && !item.reversal\r\n  );\r\n\r\n  // If commission is passed it will be shown as a fee already reduces from the total price\r\n  let commissionItem = null;\r\n\r\n  // Sharetribe Web Template is using the default-booking and default-purchase transaction processes.\r\n  // They containt the provider commissions, so by default, the providerCommissionLineItem should exist.\r\n  // If you are not using provider commisison you might want to remove this whole component from OrderBreakdown.js file.\r\n  // https://www.sharetribe.com/docs/concepts/transaction-process/\r\n  if (isProvider && providerCommissionLineItem) {\r\n    if (!isValidCommission(providerCommissionLineItem)) {\r\n      // eslint-disable-next-line no-console\r\n      console.error('invalid commission line item:', providerCommissionLineItem);\r\n      throw new Error('Commission should be present and the value should be zero or negative');\r\n    }\r\n\r\n    const commission = providerCommissionLineItem.lineTotal;\r\n    const formattedCommission = commission ? formatMoney(intl, commission) : null;\r\n\r\n    commissionItem = (\r\n      <div className={css.lineItem}>\r\n        <span className={css.itemLabel}>\r\n          <FormattedMessage\r\n            id=\"OrderBreakdown.commission\"\r\n            values={{ marketplaceName, role: 'provider' }}\r\n          />\r\n        </span>\r\n        <span className={css.itemValue}>{formattedCommission}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return commissionItem;\r\n};\r\n\r\nLineItemProviderCommissionMaybe.propTypes = {\r\n  lineItems: propTypes.lineItems.isRequired,\r\n  isProvider: bool.isRequired,\r\n  marketplaceName: string.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default LineItemProviderCommissionMaybe;\r\n","import React from 'react';\r\nimport { string } from 'prop-types';\r\n\r\nimport { FormattedMessage, intlShape } from '../../util/reactIntl';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { propTypes, LINE_ITEM_PROVIDER_COMMISSION } from '../../util/types';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst LineItemProviderCommissionRefundMaybe = props => {\r\n  const { lineItems, isProvider, marketplaceName, intl } = props;\r\n\r\n  const refund = lineItems.find(\r\n    item => item.code === LINE_ITEM_PROVIDER_COMMISSION && item.reversal\r\n  );\r\n\r\n  return isProvider && refund ? (\r\n    <div className={css.lineItem}>\r\n      <span className={css.itemLabel}>\r\n        <FormattedMessage id=\"OrderBreakdown.refundProviderFee\" values={{ marketplaceName }} />\r\n      </span>\r\n      <span className={css.itemValue}>{formatMoney(intl, refund.lineTotal)}</span>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nLineItemProviderCommissionRefundMaybe.propTypes = {\r\n  lineItems: propTypes.lineItems.isRequired,\r\n  marketplaceName: string.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default LineItemProviderCommissionRefundMaybe;\r\n","import React from 'react';\r\nimport Decimal from 'decimal.js';\r\n\r\nimport { FormattedMessage, intlShape } from '../../util/reactIntl';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { types as sdkTypes } from '../../util/sdkLoader';\r\nimport {\r\n  propTypes,\r\n  LINE_ITEM_CUSTOMER_COMMISSION,\r\n  LINE_ITEM_PROVIDER_COMMISSION,\r\n} from '../../util/types';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst { Money } = sdkTypes;\r\n\r\n/**\r\n * Calculates the total price in sub units for multiple line items.\r\n */\r\nconst lineItemsTotal = (lineItems, marketplaceCurrency) => {\r\n  const amount = lineItems.reduce((total, item) => {\r\n    return total.plus(item.lineTotal.amount);\r\n  }, new Decimal(0));\r\n  const currency = lineItems[0] ? lineItems[0].lineTotal.currency : marketplaceCurrency;\r\n  return new Money(amount, currency);\r\n};\r\n\r\n/**\r\n * Checks if line item represents commission\r\n */\r\nconst isCommission = lineItem => {\r\n  return (\r\n    lineItem.code === LINE_ITEM_PROVIDER_COMMISSION ||\r\n    lineItem.code === LINE_ITEM_CUSTOMER_COMMISSION\r\n  );\r\n};\r\n\r\n/**\r\n * Returns non-commission, reversal line items\r\n */\r\nconst nonCommissionReversalLineItems = lineItems => {\r\n  return lineItems.filter(item => !isCommission(item) && item.reversal);\r\n};\r\n\r\nconst LineItemRefundMaybe = props => {\r\n  const { lineItems, intl, marketplaceCurrency } = props;\r\n\r\n  // all non-commission, reversal line items\r\n  const refundLineItems = nonCommissionReversalLineItems(lineItems);\r\n\r\n  const refund = lineItemsTotal(refundLineItems, marketplaceCurrency);\r\n\r\n  const formattedRefund = refundLineItems.length > 0 ? formatMoney(intl, refund) : null;\r\n\r\n  return formattedRefund ? (\r\n    <div className={css.lineItem}>\r\n      <span className={css.itemLabel}>\r\n        <FormattedMessage id=\"OrderBreakdown.refund\" />\r\n      </span>\r\n      <span className={css.itemValue}>{formattedRefund}</span>\r\n    </div>\r\n  ) : null;\r\n};\r\n\r\nLineItemRefundMaybe.propTypes = {\r\n  lineItems: propTypes.lineItems.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default LineItemRefundMaybe;\r\n","import React from 'react';\r\nimport { bool } from 'prop-types';\r\nimport { FormattedMessage, intlShape } from '../../util/reactIntl';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { propTypes } from '../../util/types';\r\nimport { resolveLatestProcessName, getProcess } from '../../transactions/transaction';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst LineItemTotalPrice = props => {\r\n  const { transaction, isProvider, intl } = props;\r\n  const processName = resolveLatestProcessName(transaction?.attributes?.processName);\r\n  if (!processName) {\r\n    return null;\r\n  }\r\n  const process = getProcess(processName);\r\n  const isCompleted = process.isCompleted(transaction?.attributes?.lastTransition);\r\n  const isRefunded = process.isRefunded(transaction?.attributes?.lastTransition);\r\n\r\n  let providerTotalMessageId = 'OrderBreakdown.providerTotalDefault';\r\n  if (isCompleted) {\r\n    providerTotalMessageId = 'OrderBreakdown.providerTotalReceived';\r\n  } else if (isRefunded) {\r\n    providerTotalMessageId = 'OrderBreakdown.providerTotalRefunded';\r\n  }\r\n\r\n  const totalLabel = isProvider ? (\r\n    <FormattedMessage id={providerTotalMessageId} />\r\n  ) : (\r\n    <FormattedMessage id=\"OrderBreakdown.total\" />\r\n  );\r\n\r\n  const totalPrice = isProvider\r\n    ? transaction.attributes.payoutTotal\r\n    : transaction.attributes.payinTotal;\r\n  const formattedTotalPrice = formatMoney(intl, totalPrice);\r\n\r\n  return (\r\n    <>\r\n      <hr className={css.totalDivider} />\r\n      <div className={css.lineItemTotal}>\r\n        <div className={css.totalLabel}>{totalLabel}</div>\r\n        <div className={css.totalPrice}>{formattedTotalPrice}</div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nLineItemTotalPrice.propTypes = {\r\n  transaction: propTypes.transaction.isRequired,\r\n  isProvider: bool.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default LineItemTotalPrice;\r\n","/**\r\n * Renders non-reversal line items that are not listed in the\r\n * `LINE_ITEMS` array in util/types.js\r\n *\r\n * The line items are rendered so that the line item code is formatted to human\r\n * readable form and the line total is printed as price.\r\n *\r\n * If you require another kind of presentation for your line items, add them to\r\n * the `LINE_ITEMS` array in util/types.js and create a specific line item\r\n * component for them that can be used in the `OrderBreakdown` component.\r\n */\r\nimport React from 'react';\r\nimport { intlShape } from '../../util/reactIntl';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { humanizeLineItemCode } from '../../util/data';\r\nimport { LINE_ITEMS, propTypes } from '../../util/types';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nconst LineItemUnknownItemsMaybe = props => {\r\n  const { lineItems, isProvider, intl } = props;\r\n\r\n  // resolve unknown non-reversal line items\r\n  const allItems = lineItems.filter(item => LINE_ITEMS.indexOf(item.code) === -1 && !item.reversal);\r\n\r\n  const items = isProvider\r\n    ? allItems.filter(item => item.includeFor.includes('provider'))\r\n    : allItems.filter(item => item.includeFor.includes('customer'));\r\n\r\n  return items.length > 0 ? (\r\n    <React.Fragment>\r\n      {items.map((item, i) => {\r\n        const quantity = item.quantity;\r\n\r\n        const label =\r\n          quantity && quantity > 1\r\n            ? `${humanizeLineItemCode(item.code)} x ${quantity}`\r\n            : humanizeLineItemCode(item.code);\r\n\r\n        const formattedTotal = formatMoney(intl, item.lineTotal);\r\n        return (\r\n          <div key={`${i}-item.code`} className={css.lineItem}>\r\n            <span className={css.itemLabel}>{label}</span>\r\n            <span className={css.itemValue}>{formattedTotal}</span>\r\n          </div>\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  ) : null;\r\n};\r\n\r\nLineItemUnknownItemsMaybe.propTypes = {\r\n  lineItems: propTypes.lineItems.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default LineItemUnknownItemsMaybe;\r\n","/**\r\n * This component will show the booking info and calculated total price.\r\n * I.e. dates and other details related to payment decision in receipt format.\r\n */\r\nimport React from 'react';\r\nimport { oneOf, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport { FormattedMessage, intlShape, injectIntl } from '../../util/reactIntl';\r\nimport {\r\n  propTypes,\r\n  LISTING_UNIT_TYPES,\r\n  LINE_ITEM_CUSTOMER_COMMISSION,\r\n  LINE_ITEM_PROVIDER_COMMISSION,\r\n} from '../../util/types';\r\n\r\nimport LineItemBookingPeriod from './LineItemBookingPeriod';\r\nimport LineItemBasePriceMaybe from './LineItemBasePriceMaybe';\r\nimport LineItemSubTotalMaybe from './LineItemSubTotalMaybe';\r\nimport LineItemShippingFeeMaybe from './LineItemShippingFeeMaybe';\r\nimport LineItemPickupFeeMaybe from './LineItemPickupFeeMaybe';\r\nimport LineItemCustomerCommissionMaybe from './LineItemCustomerCommissionMaybe';\r\nimport LineItemCustomerCommissionRefundMaybe from './LineItemCustomerCommissionRefundMaybe';\r\nimport LineItemProviderCommissionMaybe from './LineItemProviderCommissionMaybe';\r\nimport LineItemProviderCommissionRefundMaybe from './LineItemProviderCommissionRefundMaybe';\r\nimport LineItemRefundMaybe from './LineItemRefundMaybe';\r\nimport LineItemTotalPrice from './LineItemTotalPrice';\r\nimport LineItemUnknownItemsMaybe from './LineItemUnknownItemsMaybe';\r\n\r\nimport css from './OrderBreakdown.module.css';\r\n\r\nexport const OrderBreakdownComponent = props => {\r\n  const {\r\n    rootClassName,\r\n    className,\r\n    userRole,\r\n    transaction,\r\n    booking,\r\n    intl,\r\n    dateType,\r\n    timeZone,\r\n    currency,\r\n    marketplaceName,\r\n  } = props;\r\n\r\n  const isCustomer = userRole === 'customer';\r\n  const isProvider = userRole === 'provider';\r\n  const lineItems = transaction.attributes.lineItems;\r\n  const unitLineItem = lineItems?.find(\r\n    item => LISTING_UNIT_TYPES.includes(item.code) && !item.reversal\r\n  );\r\n  // Line-item code that matches with base unit: day, night, hour, item\r\n  const lineItemUnitType = unitLineItem?.code;\r\n\r\n  const hasCommissionLineItem = lineItems.find(item => {\r\n    const hasCustomerCommission = isCustomer && item.code === LINE_ITEM_CUSTOMER_COMMISSION;\r\n    const hasProviderCommission = isProvider && item.code === LINE_ITEM_PROVIDER_COMMISSION;\r\n    return (hasCustomerCommission || hasProviderCommission) && !item.reversal;\r\n  });\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  /**\r\n   * OrderBreakdown contains different line items:\r\n   *\r\n   * LineItemBookingPeriod: prints booking start and booking end types. Prop dateType\r\n   * determines if the date and time or only the date is shown\r\n   *\r\n   * LineItemShippingFeeMaybe: prints the shipping fee (combining additional fee of\r\n   * additional items into it).\r\n   *\r\n   * LineItemShippingFeeRefundMaybe: prints the amount of refunded shipping fee\r\n   *\r\n   * LineItemBasePriceMaybe: prints the base price calculation for the listing, e.g.\r\n   * \"$150.00 * 2 nights $300\"\r\n   *\r\n   * LineItemUnknownItemsMaybe: prints the line items that are unknown. In ideal case there\r\n   * should not be unknown line items. If you are using custom pricing, you should create\r\n   * new custom line items if you need them.\r\n   *\r\n   * LineItemSubTotalMaybe: prints subtotal of line items before possible\r\n   * commission or refunds\r\n   *\r\n   * LineItemRefundMaybe: prints the amount of refund\r\n   *\r\n   * LineItemCustomerCommissionMaybe: prints the amount of customer commission\r\n   * The default transaction process used by this template doesn't include the customer commission.\r\n   *\r\n   * LineItemCustomerCommissionRefundMaybe: prints the amount of refunded customer commission\r\n   *\r\n   * LineItemProviderCommissionMaybe: prints the amount of provider commission\r\n   *\r\n   * LineItemProviderCommissionRefundMaybe: prints the amount of refunded provider commission\r\n   *\r\n   * LineItemTotalPrice: prints total price of the transaction\r\n   *\r\n   */\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <LineItemBookingPeriod\r\n        booking={booking}\r\n        code={lineItemUnitType}\r\n        dateType={dateType}\r\n        timeZone={timeZone}\r\n      />\r\n\r\n      <LineItemBasePriceMaybe lineItems={lineItems} code={lineItemUnitType} intl={intl} />\r\n      <LineItemShippingFeeMaybe lineItems={lineItems} intl={intl} />\r\n      <LineItemPickupFeeMaybe lineItems={lineItems} intl={intl} />\r\n      <LineItemUnknownItemsMaybe lineItems={lineItems} isProvider={isProvider} intl={intl} />\r\n\r\n      <LineItemSubTotalMaybe\r\n        lineItems={lineItems}\r\n        code={lineItemUnitType}\r\n        userRole={userRole}\r\n        intl={intl}\r\n        marketplaceCurrency={currency}\r\n      />\r\n      <LineItemRefundMaybe lineItems={lineItems} intl={intl} marketplaceCurrency={currency} />\r\n\r\n      <LineItemCustomerCommissionMaybe\r\n        lineItems={lineItems}\r\n        isCustomer={isCustomer}\r\n        marketplaceName={marketplaceName}\r\n        intl={intl}\r\n      />\r\n      <LineItemCustomerCommissionRefundMaybe\r\n        lineItems={lineItems}\r\n        isCustomer={isCustomer}\r\n        marketplaceName={marketplaceName}\r\n        intl={intl}\r\n      />\r\n\r\n      <LineItemProviderCommissionMaybe\r\n        lineItems={lineItems}\r\n        isProvider={isProvider}\r\n        marketplaceName={marketplaceName}\r\n        intl={intl}\r\n      />\r\n      <LineItemProviderCommissionRefundMaybe\r\n        lineItems={lineItems}\r\n        isProvider={isProvider}\r\n        marketplaceName={marketplaceName}\r\n        intl={intl}\r\n      />\r\n\r\n      <LineItemTotalPrice transaction={transaction} isProvider={isProvider} intl={intl} />\r\n\r\n      {hasCommissionLineItem ? (\r\n        <span className={css.feeInfo}>\r\n          <FormattedMessage id=\"OrderBreakdown.commissionFeeNote\" />\r\n        </span>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nOrderBreakdownComponent.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  booking: null,\r\n  dateType: null,\r\n};\r\n\r\nOrderBreakdownComponent.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n\r\n  marketplaceName: string.isRequired,\r\n  userRole: oneOf(['customer', 'provider']).isRequired,\r\n  transaction: propTypes.transaction.isRequired,\r\n  booking: propTypes.booking,\r\n  dateType: propTypes.dateType,\r\n\r\n  // from injectIntl\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nconst OrderBreakdown = injectIntl(OrderBreakdownComponent);\r\n\r\nOrderBreakdown.displayName = 'OrderBreakdown';\r\n\r\nexport default OrderBreakdown;\r\n","import React from 'react';\r\nimport { compose } from 'redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport {\r\n  array,\r\n  arrayOf,\r\n  bool,\r\n  func,\r\n  node,\r\n  number,\r\n  object,\r\n  oneOfType,\r\n  shape,\r\n  string,\r\n} from 'prop-types';\r\nimport loadable from '@loadable/component';\r\nimport classNames from 'classnames';\r\nimport omit from 'lodash/omit';\r\n\r\nimport { intlShape, injectIntl, FormattedMessage } from '../../util/reactIntl';\r\nimport {\r\n  displayDeliveryPickup,\r\n  displayDeliveryShipping,\r\n  displayPrice,\r\n} from '../../util/configHelpers';\r\nimport {\r\n  propTypes,\r\n  LISTING_STATE_CLOSED,\r\n  LINE_ITEM_NIGHT,\r\n  LINE_ITEM_DAY,\r\n  LINE_ITEM_ITEM,\r\n  LINE_ITEM_HOUR,\r\n  STOCK_MULTIPLE_ITEMS,\r\n  STOCK_INFINITE_MULTIPLE_ITEMS,\r\n} from '../../util/types';\r\nimport { formatMoney } from '../../util/currency';\r\nimport { parse, stringify } from '../../util/urlHelpers';\r\nimport { userDisplayNameAsString } from '../../util/data';\r\nimport {\r\n  INQUIRY_PROCESS_NAME,\r\n  getSupportedProcessesInfo,\r\n  isBookingProcess,\r\n  isPurchaseProcess,\r\n  resolveLatestProcessName,\r\n} from '../../transactions/transaction';\r\n\r\nimport { ModalInMobile, PrimaryButton, AvatarSmall, H1, H2 } from '../../components';\r\n\r\nimport css from './OrderPanel.module.css';\r\n\r\nconst BookingTimeForm = loadable(() =>\r\n  import(/* webpackChunkName: \"BookingTimeForm\" */ './BookingTimeForm/BookingTimeForm')\r\n);\r\nconst BookingDatesForm = loadable(() =>\r\n  import(/* webpackChunkName: \"BookingDatesForm\" */ './BookingDatesForm/BookingDatesForm')\r\n);\r\nconst InquiryWithoutPaymentForm = loadable(() =>\r\n  import(\r\n    /* webpackChunkName: \"InquiryWithoutPaymentForm\" */ './InquiryWithoutPaymentForm/InquiryWithoutPaymentForm'\r\n  )\r\n);\r\nconst ProductOrderForm = loadable(() =>\r\n  import(/* webpackChunkName: \"ProductOrderForm\" */ './ProductOrderForm/ProductOrderForm')\r\n);\r\n\r\n// This defines when ModalInMobile shows content as Modal\r\nconst MODAL_BREAKPOINT = 1023;\r\nconst TODAY = new Date();\r\n\r\nconst priceData = (price, currency, intl) => {\r\n  if (price && price.currency === currency) {\r\n    const formattedPrice = formatMoney(intl, price);\r\n    return { formattedPrice, priceTitle: formattedPrice };\r\n  } else if (price) {\r\n    return {\r\n      formattedPrice: `(${price.currency})`,\r\n      priceTitle: `Unsupported currency (${price.currency})`,\r\n    };\r\n  }\r\n  return {};\r\n};\r\n\r\nconst openOrderModal = (isOwnListing, isClosed, history, location) => {\r\n  if (isOwnListing || isClosed) {\r\n    window.scrollTo(0, 0);\r\n  } else {\r\n    const { pathname, search, state } = location;\r\n    const searchString = `?${stringify({ ...parse(search), orderOpen: true })}`;\r\n    history.push(`${pathname}${searchString}`, state);\r\n  }\r\n};\r\n\r\nconst closeOrderModal = (history, location) => {\r\n  const { pathname, search, state } = location;\r\n  const searchParams = omit(parse(search), 'orderOpen');\r\n  const searchString = `?${stringify(searchParams)}`;\r\n  history.push(`${pathname}${searchString}`, state);\r\n};\r\n\r\nconst handleSubmit = (\r\n  isOwnListing,\r\n  isClosed,\r\n  isInquiryWithoutPayment,\r\n  onSubmit,\r\n  history,\r\n  location\r\n) => {\r\n  // TODO: currently, inquiry-process does not have any form to ask more order data.\r\n  // We can submit without opening any inquiry/order modal.\r\n  return isInquiryWithoutPayment\r\n    ? () => onSubmit({})\r\n    : () => openOrderModal(isOwnListing, isClosed, history, location);\r\n};\r\n\r\nconst dateFormattingOptions = { month: 'short', day: 'numeric', weekday: 'short' };\r\n\r\nconst PriceMaybe = props => {\r\n  const {\r\n    price,\r\n    publicData,\r\n    validListingTypes,\r\n    intl,\r\n    marketplaceCurrency,\r\n    showCurrencyMismatch = false,\r\n  } = props;\r\n  const { listingType, unitType } = publicData || {};\r\n\r\n  const foundListingTypeConfig = validListingTypes.find(conf => conf.listingType === listingType);\r\n  const showPrice = displayPrice(foundListingTypeConfig);\r\n  if (!showPrice || !price) {\r\n    return null;\r\n  }\r\n\r\n  // Get formatted price or currency code if the currency does not match with marketplace currency\r\n  const { formattedPrice, priceTitle } = priceData(price, marketplaceCurrency, intl);\r\n  // TODO: In CTA, we don't have space to show proper error message for a mismatch of marketplace currency\r\n  //       Instead, we show the currency code in place of the price\r\n  return showCurrencyMismatch ? (\r\n    <div className={css.priceContainerInCTA}>\r\n      <div className={css.priceValue} title={priceTitle}>\r\n        {formattedPrice}\r\n      </div>\r\n      <div className={css.perUnitInCTA}>\r\n        <FormattedMessage id=\"OrderPanel.perUnit\" values={{ unitType }} />\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <div className={css.priceContainer}>\r\n      <p className={css.price}>{formatMoney(intl, price)}</p>\r\n      <div className={css.perUnit}>\r\n        <FormattedMessage id=\"OrderPanel.perUnit\" values={{ unitType }} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst OrderPanel = props => {\r\n  const {\r\n    rootClassName,\r\n    className,\r\n    titleClassName,\r\n    listing,\r\n    validListingTypes,\r\n    lineItemUnitType: lineItemUnitTypeMaybe,\r\n    isOwnListing,\r\n    onSubmit,\r\n    title,\r\n    titleDesktop,\r\n    author,\r\n    authorLink,\r\n    onManageDisableScrolling,\r\n    onFetchTimeSlots,\r\n    monthlyTimeSlots,\r\n    history,\r\n    location,\r\n    intl,\r\n    onFetchTransactionLineItems,\r\n    onContactUser,\r\n    lineItems,\r\n    marketplaceCurrency,\r\n    dayCountAvailableForBooking,\r\n    marketplaceName,\r\n    fetchLineItemsInProgress,\r\n    fetchLineItemsError,\r\n    payoutDetailsWarning,\r\n  } = props;\r\n\r\n  const publicData = listing?.attributes?.publicData || {};\r\n  const { listingType, unitType, transactionProcessAlias = '' } = publicData || {};\r\n  const processName = resolveLatestProcessName(transactionProcessAlias.split('/')[0]);\r\n  const lineItemUnitType = lineItemUnitTypeMaybe || `line-item/${unitType}`;\r\n\r\n  const price = listing?.attributes?.price;\r\n  const isPaymentProcess = processName !== INQUIRY_PROCESS_NAME;\r\n\r\n  const showPriceMissing = isPaymentProcess && !price;\r\n  const PriceMissing = () => {\r\n    return (\r\n      <p className={css.error}>\r\n        <FormattedMessage id=\"OrderPanel.listingPriceMissing\" />\r\n      </p>\r\n    );\r\n  };\r\n  const showInvalidCurrency = isPaymentProcess && price?.currency !== marketplaceCurrency;\r\n  const InvalidCurrency = () => {\r\n    return (\r\n      <p className={css.error}>\r\n        <FormattedMessage id=\"OrderPanel.listingCurrencyInvalid\" />\r\n      </p>\r\n    );\r\n  };\r\n\r\n  const timeZone = listing?.attributes?.availabilityPlan?.timezone;\r\n  const isClosed = listing?.attributes?.state === LISTING_STATE_CLOSED;\r\n\r\n  const isBooking = isBookingProcess(processName);\r\n  const shouldHaveBookingTime = isBooking && [LINE_ITEM_HOUR].includes(lineItemUnitType);\r\n  const showBookingTimeForm = shouldHaveBookingTime && !isClosed && timeZone;\r\n\r\n  const shouldHaveBookingDates =\r\n    isBooking && [LINE_ITEM_DAY, LINE_ITEM_NIGHT].includes(lineItemUnitType);\r\n  const showBookingDatesForm = shouldHaveBookingDates && !isClosed && timeZone;\r\n\r\n  // The listing resource has a relationship: `currentStock`,\r\n  // which you should include when making API calls.\r\n  const isPurchase = isPurchaseProcess(processName);\r\n  const currentStock = listing.currentStock?.attributes?.quantity;\r\n  const isOutOfStock = isPurchase && lineItemUnitType === LINE_ITEM_ITEM && currentStock === 0;\r\n\r\n  // Show form only when stock is fully loaded. This avoids \"Out of stock\" UI by\r\n  // default before all data has been downloaded.\r\n  const showProductOrderForm = isPurchase && typeof currentStock === 'number';\r\n\r\n  const showInquiryForm = processName === INQUIRY_PROCESS_NAME;\r\n\r\n  const supportedProcessesInfo = getSupportedProcessesInfo();\r\n  const isKnownProcess = supportedProcessesInfo.map(info => info.name).includes(processName);\r\n\r\n  const { pickupEnabled, shippingEnabled } = listing?.attributes?.publicData || {};\r\n\r\n  const listingTypeConfig = validListingTypes.find(conf => conf.listingType === listingType);\r\n  const displayShipping = displayDeliveryShipping(listingTypeConfig);\r\n  const displayPickup = displayDeliveryPickup(listingTypeConfig);\r\n  const allowOrdersOfMultipleItems = [STOCK_MULTIPLE_ITEMS, STOCK_INFINITE_MULTIPLE_ITEMS].includes(\r\n    listingTypeConfig?.stockType\r\n  );\r\n\r\n  const showClosedListingHelpText = listing.id && isClosed;\r\n  const isOrderOpen = !!parse(location.search).orderOpen;\r\n\r\n  const subTitleText = showClosedListingHelpText\r\n    ? intl.formatMessage({ id: 'OrderPanel.subTitleClosedListing' })\r\n    : null;\r\n\r\n  const authorDisplayName = userDisplayNameAsString(author, '');\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  const titleClasses = classNames(titleClassName || css.orderTitle);\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <ModalInMobile\r\n        containerClassName={css.modalContainer}\r\n        id=\"OrderFormInModal\"\r\n        isModalOpenOnMobile={isOrderOpen}\r\n        onClose={() => closeOrderModal(history, location)}\r\n        showAsModalMaxWidth={MODAL_BREAKPOINT}\r\n        onManageDisableScrolling={onManageDisableScrolling}\r\n        usePortal\r\n      >\r\n        <div className={css.modalHeading}>\r\n          <H1 className={css.heading}>{title}</H1>\r\n        </div>\r\n\r\n        <div className={css.orderHeading}>\r\n          {titleDesktop ? titleDesktop : <H2 className={titleClasses}>{title}</H2>}\r\n          {subTitleText ? <div className={css.orderHelp}>{subTitleText}</div> : null}\r\n        </div>\r\n\r\n        <PriceMaybe\r\n          price={price}\r\n          publicData={publicData}\r\n          validListingTypes={validListingTypes}\r\n          intl={intl}\r\n          marketplaceCurrency={marketplaceCurrency}\r\n        />\r\n\r\n        <div className={css.author}>\r\n          <AvatarSmall user={author} className={css.providerAvatar} />\r\n          <span className={css.providerNameLinked}>\r\n            <FormattedMessage id=\"OrderPanel.author\" values={{ name: authorLink }} />\r\n          </span>\r\n          <span className={css.providerNamePlain}>\r\n            <FormattedMessage id=\"OrderPanel.author\" values={{ name: authorDisplayName }} />\r\n          </span>\r\n        </div>\r\n\r\n        {showPriceMissing ? (\r\n          <PriceMissing />\r\n        ) : showInvalidCurrency ? (\r\n          <InvalidCurrency />\r\n        ) : showBookingTimeForm ? (\r\n          <BookingTimeForm\r\n            className={css.bookingForm}\r\n            formId=\"OrderPanelBookingTimeForm\"\r\n            lineItemUnitType={lineItemUnitType}\r\n            onSubmit={onSubmit}\r\n            price={price}\r\n            marketplaceCurrency={marketplaceCurrency}\r\n            dayCountAvailableForBooking={dayCountAvailableForBooking}\r\n            listingId={listing.id}\r\n            isOwnListing={isOwnListing}\r\n            monthlyTimeSlots={monthlyTimeSlots}\r\n            onFetchTimeSlots={onFetchTimeSlots}\r\n            startDatePlaceholder={intl.formatDate(TODAY, dateFormattingOptions)}\r\n            endDatePlaceholder={intl.formatDate(TODAY, dateFormattingOptions)}\r\n            timeZone={timeZone}\r\n            marketplaceName={marketplaceName}\r\n            onFetchTransactionLineItems={onFetchTransactionLineItems}\r\n            lineItems={lineItems}\r\n            fetchLineItemsInProgress={fetchLineItemsInProgress}\r\n            fetchLineItemsError={fetchLineItemsError}\r\n            payoutDetailsWarning={payoutDetailsWarning}\r\n          />\r\n        ) : showBookingDatesForm ? (\r\n          <BookingDatesForm\r\n            className={css.bookingForm}\r\n            formId=\"OrderPanelBookingDatesForm\"\r\n            lineItemUnitType={lineItemUnitType}\r\n            onSubmit={onSubmit}\r\n            price={price}\r\n            marketplaceCurrency={marketplaceCurrency}\r\n            dayCountAvailableForBooking={dayCountAvailableForBooking}\r\n            listingId={listing.id}\r\n            isOwnListing={isOwnListing}\r\n            monthlyTimeSlots={monthlyTimeSlots}\r\n            onFetchTimeSlots={onFetchTimeSlots}\r\n            timeZone={timeZone}\r\n            marketplaceName={marketplaceName}\r\n            onFetchTransactionLineItems={onFetchTransactionLineItems}\r\n            lineItems={lineItems}\r\n            fetchLineItemsInProgress={fetchLineItemsInProgress}\r\n            fetchLineItemsError={fetchLineItemsError}\r\n            payoutDetailsWarning={payoutDetailsWarning}\r\n          />\r\n        ) : showProductOrderForm ? (\r\n          <ProductOrderForm\r\n            formId=\"OrderPanelProductOrderForm\"\r\n            onSubmit={onSubmit}\r\n            price={price}\r\n            marketplaceCurrency={marketplaceCurrency}\r\n            currentStock={currentStock}\r\n            allowOrdersOfMultipleItems={allowOrdersOfMultipleItems}\r\n            pickupEnabled={pickupEnabled && displayPickup}\r\n            shippingEnabled={shippingEnabled && displayShipping}\r\n            displayDeliveryMethod={displayPickup || displayShipping}\r\n            listingId={listing.id}\r\n            isOwnListing={isOwnListing}\r\n            marketplaceName={marketplaceName}\r\n            onFetchTransactionLineItems={onFetchTransactionLineItems}\r\n            onContactUser={onContactUser}\r\n            lineItems={lineItems}\r\n            fetchLineItemsInProgress={fetchLineItemsInProgress}\r\n            fetchLineItemsError={fetchLineItemsError}\r\n            payoutDetailsWarning={payoutDetailsWarning}\r\n          />\r\n        ) : showInquiryForm ? (\r\n          <InquiryWithoutPaymentForm formId=\"OrderPanelInquiryForm\" onSubmit={onSubmit} />\r\n        ) : !isKnownProcess ? (\r\n          <p className={css.errorSidebar}>\r\n            <FormattedMessage id=\"OrderPanel.unknownTransactionProcess\" />\r\n          </p>\r\n        ) : null}\r\n      </ModalInMobile>\r\n      <div className={css.openOrderForm}>\r\n        <PriceMaybe\r\n          price={price}\r\n          publicData={publicData}\r\n          validListingTypes={validListingTypes}\r\n          intl={intl}\r\n          marketplaceCurrency={marketplaceCurrency}\r\n          showCurrencyMismatch\r\n        />\r\n\r\n        {isClosed ? (\r\n          <div className={css.closedListingButton}>\r\n            <FormattedMessage id=\"OrderPanel.closedListingButtonText\" />\r\n          </div>\r\n        ) : (\r\n          <PrimaryButton\r\n            onClick={handleSubmit(\r\n              isOwnListing,\r\n              isClosed,\r\n              showInquiryForm,\r\n              onSubmit,\r\n              history,\r\n              location\r\n            )}\r\n            disabled={isOutOfStock}\r\n          >\r\n            {isBooking ? (\r\n              <FormattedMessage id=\"OrderPanel.ctaButtonMessageBooking\" />\r\n            ) : isOutOfStock ? (\r\n              <FormattedMessage id=\"OrderPanel.ctaButtonMessageNoStock\" />\r\n            ) : isPurchase ? (\r\n              <FormattedMessage id=\"OrderPanel.ctaButtonMessagePurchase\" />\r\n            ) : (\r\n              <FormattedMessage id=\"OrderPanel.ctaButtonMessageInquiry\" />\r\n            )}\r\n          </PrimaryButton>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nOrderPanel.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  titleClassName: null,\r\n  isOwnListing: false,\r\n  authorLink: null,\r\n  payoutDetailsWarning: null,\r\n  titleDesktop: null,\r\n  subTitle: null,\r\n  monthlyTimeSlots: null,\r\n  lineItems: null,\r\n  fetchLineItemsError: null,\r\n};\r\n\r\nOrderPanel.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  titleClassName: string,\r\n  listing: oneOfType([propTypes.listing, propTypes.ownListing]),\r\n  validListingTypes: arrayOf(\r\n    shape({\r\n      listingType: string.isRequired,\r\n      transactionType: shape({\r\n        process: string.isRequired,\r\n        alias: string.isRequired,\r\n        unitType: string.isRequired,\r\n      }).isRequired,\r\n    })\r\n  ).isRequired,\r\n  isOwnListing: bool,\r\n  author: oneOfType([propTypes.user, propTypes.currentUser]).isRequired,\r\n  authorLink: node,\r\n  payoutDetailsWarning: node,\r\n  onSubmit: func.isRequired,\r\n  title: oneOfType([node, string]).isRequired,\r\n  titleDesktop: node,\r\n  subTitle: oneOfType([node, string]),\r\n  onManageDisableScrolling: func.isRequired,\r\n\r\n  onFetchTimeSlots: func.isRequired,\r\n  monthlyTimeSlots: object,\r\n  onFetchTransactionLineItems: func.isRequired,\r\n  onContactUser: func,\r\n  lineItems: array,\r\n  fetchLineItemsInProgress: bool.isRequired,\r\n  fetchLineItemsError: propTypes.error,\r\n  marketplaceCurrency: string.isRequired,\r\n  dayCountAvailableForBooking: number.isRequired,\r\n  marketplaceName: string.isRequired,\r\n\r\n  // from withRouter\r\n  history: shape({\r\n    push: func.isRequired,\r\n  }).isRequired,\r\n  location: shape({\r\n    search: string,\r\n  }).isRequired,\r\n\r\n  // from injectIntl\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default compose(\r\n  withRouter,\r\n  injectIntl\r\n)(OrderPanel);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OutsideClickHandler_root__jtW0E\"};","import React, { Component } from 'react';\r\nimport { func, node, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './OutsideClickHandler.module.css';\r\n\r\nexport default class OutsideClickHandler extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('mousedown', this.handleClick, false);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('mousedown', this.handleClick, false);\r\n  }\r\n\r\n  handleClick(event) {\r\n    if (!this.node.contains(event.target)) {\r\n      this.props.onOutsideClick();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { rootClassName, className, children } = this.props;\r\n    const classes = classNames(rootClassName || css.root, className);\r\n\r\n    return (\r\n      <div className={classes} ref={node => (this.node = node)}>\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nOutsideClickHandler.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n};\r\n\r\nOutsideClickHandler.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  onOutsideClick: func.isRequired,\r\n  children: node.isRequired,\r\n};\r\n","const ensureOpenGraphLocale = locale => {\r\n  switch (locale) {\r\n    case 'en':\r\n      return 'en_US';\r\n    default:\r\n      return locale;\r\n  }\r\n};\r\n\r\n/**\r\n * These will be used with Helmet <meta {...openGraphMetaProps} />\r\n */\r\nexport const openGraphMetaProps = data => {\r\n  const {\r\n    openGraphType,\r\n    socialSharingTitle,\r\n    socialSharingDescription,\r\n    published,\r\n    updated,\r\n    url,\r\n    locale,\r\n    facebookImages,\r\n    facebookAppId,\r\n    marketplaceName,\r\n  } = data;\r\n\r\n  if (!(socialSharingTitle && socialSharingDescription && openGraphType && url && facebookImages)) {\r\n    /* eslint-disable no-console */\r\n    if (console && console.warn) {\r\n      console.warn(\r\n        `Can't create Open Graph meta tags:\r\n        socialSharingTitle, socialSharingDescription, openGraphType, url, and facebookImages are needed.`\r\n      );\r\n    }\r\n    /* eslint-enable no-console */\r\n    return [];\r\n  }\r\n\r\n  const openGraphMeta = [\r\n    { property: 'og:description', content: socialSharingDescription },\r\n    { property: 'og:title', content: socialSharingTitle },\r\n    { property: 'og:type', content: openGraphType },\r\n    { property: 'og:url', content: url },\r\n    { property: 'og:locale', content: ensureOpenGraphLocale(locale) },\r\n  ];\r\n\r\n  if (facebookImages && facebookImages.length > 0) {\r\n    facebookImages.forEach(i => {\r\n      openGraphMeta.push({\r\n        property: 'og:image',\r\n        content: i.url,\r\n      });\r\n\r\n      if (i.width && i.height) {\r\n        openGraphMeta.push({ property: 'og:image:width', content: i.width });\r\n        openGraphMeta.push({ property: 'og:image:height', content: i.height });\r\n      }\r\n    });\r\n  }\r\n\r\n  if (marketplaceName) {\r\n    openGraphMeta.push({ property: 'og:site_name', content: marketplaceName });\r\n  }\r\n\r\n  if (facebookAppId) {\r\n    openGraphMeta.push({ property: 'fb:app_id', content: facebookAppId });\r\n  }\r\n\r\n  if (published) {\r\n    openGraphMeta.push({ property: 'article:published_time', content: published });\r\n  }\r\n\r\n  if (updated) {\r\n    openGraphMeta.push({ property: 'article:modified_time', content: updated });\r\n  }\r\n\r\n  return openGraphMeta;\r\n};\r\n\r\n/**\r\n * These will be used with Helmet <meta {...twitterMetaProps} />\r\n */\r\nexport const twitterMetaProps = data => {\r\n  const {\r\n    socialSharingTitle,\r\n    socialSharingDescription,\r\n    twitterHandle,\r\n    twitterImages,\r\n    url,\r\n    marketplaceRootURL,\r\n    siteTwitterHandle,\r\n  } = data;\r\n\r\n  if (!(socialSharingTitle && socialSharingDescription && url)) {\r\n    /* eslint-disable no-console */\r\n    if (console && console.warn) {\r\n      console.warn(\r\n        `Can't create twitter card meta tags:\r\n        socialSharingTitle, socialSharingDescription, and url are needed.`\r\n      );\r\n    }\r\n    /* eslint-enable no-console */\r\n    return [];\r\n  }\r\n\r\n  const twitterMeta = [\r\n    { name: 'twitter:card', content: 'summary_large_image' },\r\n    { name: 'twitter:title', content: socialSharingTitle },\r\n    { name: 'twitter:description', content: socialSharingDescription },\r\n    { name: 'twitter:url', content: url },\r\n  ];\r\n\r\n  if (siteTwitterHandle) {\r\n    twitterMeta.push({ name: 'twitter:site', content: siteTwitterHandle });\r\n  }\r\n\r\n  if (twitterImages && twitterImages.length > 0) {\r\n    twitterImages.forEach(i => {\r\n      twitterMeta.push({\r\n        name: 'twitter:image',\r\n        content: i.url,\r\n      });\r\n    });\r\n  }\r\n\r\n  if (twitterHandle) {\r\n    // TODO: If we want to connect providers twitter account on ListingPage\r\n    // we needs to get this info among listing data (API support needed)\r\n    twitterMeta.push({ name: 'twitter:creator', content: twitterHandle });\r\n  }\r\n\r\n  if (marketplaceRootURL) {\r\n    twitterMeta.push({ name: 'twitter:domain', content: marketplaceRootURL });\r\n  }\r\n\r\n  return twitterMeta;\r\n};\r\n\r\n/**\r\n * These will be used with Helmet <meta {...metaTagProps} />\r\n * Creates data for Open Graph and Twitter meta tags.\r\n */\r\nexport const metaTagProps = (tagData, config) => {\r\n  const {\r\n    marketplaceRootURL,\r\n    facebookAppId,\r\n    marketplaceName,\r\n    siteTwitterHandle,\r\n    googleSearchConsole,\r\n  } = config;\r\n\r\n  const author = tagData.author || marketplaceName;\r\n  const googleSiteVerification = googleSearchConsole?.googleSiteVerification;\r\n  const googleSiteVerificationMaybe = googleSiteVerification\r\n    ? [{ name: 'google-site-verification', content: googleSiteVerification }]\r\n    : [];\r\n  const defaultMeta = [\r\n    { name: 'description', content: tagData.description },\r\n    { name: 'author', content: author },\r\n    ...googleSiteVerificationMaybe,\r\n  ];\r\n\r\n  const openGraphMeta = openGraphMetaProps({\r\n    ...tagData,\r\n    facebookAppId,\r\n    marketplaceName,\r\n  });\r\n\r\n  const twitterMeta = twitterMetaProps({\r\n    ...tagData,\r\n    marketplaceRootURL,\r\n    siteTwitterHandle,\r\n  });\r\n\r\n  return [...defaultMeta, ...openGraphMeta, ...twitterMeta];\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Page_root__dQ4FD\",\"content\":\"Page_content__E5ujD\",\"scrollingDisabled\":\"Page_scrollingDisabled__ehIf7\"};","import React, { Component } from 'react';\r\nimport { any, array, arrayOf, bool, number, object, oneOfType, shape, string } from 'prop-types';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { useLocation } from 'react-router-dom';\r\nimport classNames from 'classnames';\r\n\r\nimport { useConfiguration } from '../../context/configurationContext';\r\nimport { useRouteConfiguration } from '../../context/routeConfigurationContext';\r\nimport { useIntl, intlShape } from '../../util/reactIntl';\r\nimport { metaTagProps } from '../../util/seo';\r\nimport { canonicalRoutePath } from '../../util/routes';\r\nimport { propTypes } from '../../util/types';\r\nimport { apiBaseUrl } from '../../util/api';\r\n\r\nimport css from './Page.module.css';\r\n\r\nconst preventDefault = e => {\r\n  e.preventDefault();\r\n};\r\n\r\nconst twitterPageURL = siteTwitterHandle => {\r\n  if (siteTwitterHandle && siteTwitterHandle.charAt(0) === '@') {\r\n    return `https://twitter.com/${siteTwitterHandle.substring(1)}`;\r\n  } else if (siteTwitterHandle) {\r\n    return `https://twitter.com/${siteTwitterHandle}`;\r\n  }\r\n  return null;\r\n};\r\n\r\nconst webmanifestURL = marketplaceRootURL => {\r\n  // Note: on localhost (when running \"yarn run dev\"), the webmanifest is running on apiServer port\r\n  const baseUrl = apiBaseUrl(marketplaceRootURL);\r\n  return `${baseUrl}/site.webmanifest`;\r\n};\r\n\r\nconst getFaviconVariants = config => {\r\n  // We add favicon through hosted configs\r\n  // NOTE: There's no favicon.ico file. This is an imageAsset object which is used together with <meta> tags.\r\n  const favicon = config.branding.favicon;\r\n  return favicon?.type === 'imageAsset' ? Object.values(favicon.attributes.variants) : [];\r\n};\r\n\r\nconst getAppleTouchIconURL = config => {\r\n  // The appIcon is used to pick apple-touch-icon\r\n  // We use 180x180. I.e. we follow the example set by realfavicongenerator\r\n  const appIcon = config.branding.appIcon;\r\n  const appIconVariants =\r\n    appIcon?.type === 'imageAsset' ? Object.values(appIcon.attributes.variants) : [];\r\n  const appleTouchIconVariant = appIconVariants.find(variant => {\r\n    return variant.width === 180 && variant.height === 180;\r\n  });\r\n  return appleTouchIconVariant?.url;\r\n};\r\n\r\nclass PageComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // Keeping scrollPosition out of state reduces rendering cycles (and no bad states rendered)\r\n    this.scrollPosition = 0;\r\n    this.contentDiv = null;\r\n    this.scrollingDisabledChanged = this.scrollingDisabledChanged.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    // By default a dropped file is loaded in the browser window as a\r\n    // file URL. We want to prevent this since it might loose a lot of\r\n    // data the user has typed but not yet saved. Preventing requires\r\n    // handling both dragover and drop events.\r\n    document.addEventListener('dragover', preventDefault);\r\n    document.addEventListener('drop', preventDefault);\r\n\r\n    // Remove duplicated server-side rendered page schema.\r\n    // It's in <body> to improve initial rendering performance,\r\n    // but after web app is initialized, react-helmet-async operates with <head>\r\n    const pageSchema = document.getElementById('page-schema');\r\n    if (pageSchema) {\r\n      pageSchema.remove();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('dragover', preventDefault);\r\n    document.removeEventListener('drop', preventDefault);\r\n  }\r\n\r\n  scrollingDisabledChanged(currentScrollingDisabled) {\r\n    if (currentScrollingDisabled && currentScrollingDisabled !== this.scrollingDisabled) {\r\n      // Update current scroll position, if scrolling is disabled (e.g. modal is open)\r\n      this.scrollPosition = window.pageYOffset || document.documentElement.scrollTop;\r\n      this.scrollingDisabled = currentScrollingDisabled;\r\n    } else if (currentScrollingDisabled !== this.scrollingDisabled) {\r\n      this.scrollingDisabled = currentScrollingDisabled;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      className,\r\n      rootClassName,\r\n      children,\r\n      location,\r\n      intl,\r\n      scrollingDisabled,\r\n      referrer,\r\n      author,\r\n      openGraphType,\r\n      description,\r\n      facebookImages,\r\n      published,\r\n      schema,\r\n      socialSharing,\r\n      title,\r\n      twitterHandle,\r\n      twitterImages,\r\n      updated,\r\n      config,\r\n      routeConfiguration,\r\n    } = this.props;\r\n\r\n    const classes = classNames(rootClassName || css.root, className, {\r\n      [css.scrollingDisabled]: scrollingDisabled,\r\n    });\r\n\r\n    this.scrollingDisabledChanged(scrollingDisabled);\r\n\r\n    const marketplaceRootURL = config.marketplaceRootURL;\r\n    const shouldReturnPathOnly = referrer && referrer !== 'unsafe-url';\r\n    const canonicalPath = canonicalRoutePath(routeConfiguration, location, shouldReturnPathOnly);\r\n    const canonicalUrl = `${marketplaceRootURL}${canonicalPath}`;\r\n\r\n    const marketplaceName = config.marketplaceName;\r\n    const schemaTitle = intl.formatMessage({ id: 'Page.schemaTitle' }, { marketplaceName });\r\n    const schemaDescription = intl.formatMessage({ id: 'Page.schemaDescription' });\r\n    const pageTitle = title || schemaTitle;\r\n    const pageDescription = description || schemaDescription;\r\n    const {\r\n      title: socialSharingTitle,\r\n      description: socialSharingDescription,\r\n      images1200: socialSharingImages1200,\r\n      // Note: we use image with open graph's aspect ratio (1.91:1) also with Twitter\r\n      images600: socialSharingImages600,\r\n    } = socialSharing || {};\r\n\r\n    // Images for social media sharing\r\n    const defaultFacebookImageURL = config.branding.facebookImage;\r\n    const openGraphFallbackImages = [\r\n      {\r\n        name: 'facebook',\r\n        url: defaultFacebookImageURL,\r\n        width: 1200,\r\n        height: 630,\r\n      },\r\n    ];\r\n    const defaultTwitterImageURL = config.branding.twitterImage;\r\n    const twitterFallbackImages = [\r\n      {\r\n        name: 'twitter',\r\n        url: defaultTwitterImageURL,\r\n        width: 600,\r\n        height: 314,\r\n      },\r\n    ];\r\n    const facebookImgs = socialSharingImages1200 || facebookImages || openGraphFallbackImages;\r\n    const twitterImgs = socialSharingImages600 || twitterImages || twitterFallbackImages;\r\n\r\n    const metaToHead = metaTagProps(\r\n      {\r\n        author,\r\n        openGraphType,\r\n        socialSharingTitle: socialSharingTitle || pageTitle,\r\n        socialSharingDescription: socialSharingDescription || pageDescription,\r\n        description: pageDescription,\r\n        facebookImages: facebookImgs,\r\n        twitterImages: twitterImgs,\r\n        twitterHandle,\r\n        published,\r\n        updated,\r\n        url: canonicalUrl,\r\n        locale: intl.locale,\r\n      },\r\n      config\r\n    );\r\n\r\n    const facebookPage = config.siteFacebookPage;\r\n    const twitterPage = twitterPageURL(config.siteTwitterHandle);\r\n    const instagramPage = config.siteInstagramPage;\r\n    const sameOrganizationAs = [facebookPage, twitterPage, instagramPage].filter(v => v != null);\r\n\r\n    // Schema for search engines (helps them to understand what this page is about)\r\n    // http://schema.org\r\n    // We are using JSON-LD format\r\n\r\n    // Schema attribute can be either single schema object or an array of objects\r\n    // This makes it possible to include several different items from the same page.\r\n    // E.g. Product, Place, Video\r\n    const hasSchema = schema != null;\r\n    const schemaFromProps = hasSchema && Array.isArray(schema) ? schema : hasSchema ? [schema] : [];\r\n    const addressMaybe = config.address?.streetAddress ? { address: config.address } : {};\r\n    const schemaArrayJSONString = JSON.stringify([\r\n      ...schemaFromProps,\r\n      {\r\n        '@context': 'http://schema.org',\r\n        '@type': 'Organization',\r\n        '@id': `${marketplaceRootURL}#organization`,\r\n        url: marketplaceRootURL,\r\n        name: marketplaceName,\r\n        sameAs: sameOrganizationAs,\r\n        logo: config.branding.logoImageMobileURL,\r\n        ...addressMaybe,\r\n      },\r\n      {\r\n        '@context': 'http://schema.org',\r\n        '@type': 'WebSite',\r\n        url: marketplaceRootURL,\r\n        description: schemaDescription,\r\n        name: schemaTitle,\r\n      },\r\n    ]);\r\n\r\n    const scrollPositionStyles = scrollingDisabled\r\n      ? { marginTop: `${-1 * this.scrollPosition}px` }\r\n      : {};\r\n\r\n    // If scrolling is not disabled, but content element has still scrollPosition set\r\n    // in style attribute, we scrollTo scrollPosition.\r\n    const hasMarginTopStyle = this.contentDiv && this.contentDiv.style.marginTop;\r\n    if (!scrollingDisabled && hasMarginTopStyle) {\r\n      window.requestAnimationFrame(() => {\r\n        window.scrollTo(0, this.scrollPosition);\r\n      });\r\n    }\r\n\r\n    const faviconVariants = getFaviconVariants(config);\r\n    const appleTouchIcon = getAppleTouchIconURL(config);\r\n\r\n    // Marketplace color and branding image comes from configs\r\n    // If set, we need to create CSS Property and set it to DOM (documentElement is selected here)\r\n    // Note: this is also set to <html> element in app.js to provide marketplace colors for modals/portals.\r\n    const styles = {\r\n      ['--marketplaceColor']: config.branding.marketplaceColor,\r\n      ['--marketplaceColorDark']: config.branding.marketplaceColorDark,\r\n      ['--marketplaceColorLight']: config.branding.marketplaceColorLight,\r\n    };\r\n\r\n    return (\r\n      <div className={classes} style={styles} id=\"page\">\r\n        <Helmet\r\n          htmlAttributes={{\r\n            lang: intl.locale,\r\n          }}\r\n        >\r\n          <title>{pageTitle}</title>\r\n          {referrer ? <meta name=\"referrer\" content={referrer} /> : null}\r\n          <link rel=\"canonical\" href={canonicalUrl} />\r\n\r\n          {faviconVariants.map(variant => {\r\n            return (\r\n              <link\r\n                key={`icon_${variant.width}`}\r\n                rel=\"icon\"\r\n                type=\"image/png\"\r\n                sizes={`${variant.width}x${variant.height}`}\r\n                href={variant.url}\r\n              />\r\n            );\r\n          })}\r\n\r\n          {appleTouchIcon ? (\r\n            <link rel=\"apple-touch-icon\" sizes=\"180x180\" href={appleTouchIcon} />\r\n          ) : null}\r\n\r\n          <link rel=\"manifest\" href={webmanifestURL(marketplaceRootURL)} />\r\n\r\n          <meta httpEquiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\r\n          <meta httpEquiv=\"Content-Language\" content={intl.locale} />\r\n          {metaToHead.map((metaProps, i) => (\r\n            <meta key={i} {...metaProps} />\r\n          ))}\r\n          <script id=\"page-schema\" type=\"application/ld+json\">\r\n            {schemaArrayJSONString.replace(/</g, '\\\\u003c')}\r\n          </script>\r\n        </Helmet>\r\n        <div\r\n          className={css.content}\r\n          style={scrollPositionStyles}\r\n          ref={c => {\r\n            this.contentDiv = c;\r\n          }}\r\n        >\r\n          {children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPageComponent.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  children: null,\r\n  author: null,\r\n  openGraphType: 'website',\r\n  description: null,\r\n  facebookImages: null,\r\n  twitterImages: null,\r\n  published: null,\r\n  referrer: null,\r\n  schema: null,\r\n  socialSharing: null,\r\n  twitterHandle: null,\r\n  updated: null,\r\n};\r\n\r\nPageComponent.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  children: any,\r\n  scrollingDisabled: bool.isRequired,\r\n\r\n  // Handle referrer policy\r\n  referrer: string,\r\n\r\n  // SEO related props\r\n  author: string,\r\n  openGraphType: string, // og:type\r\n  description: string, // page description\r\n  facebookImages: arrayOf(\r\n    shape({\r\n      width: number.isRequired,\r\n      height: number.isRequired,\r\n      url: string.isRequired,\r\n    })\r\n  ),\r\n  twitterImages: arrayOf(\r\n    shape({\r\n      width: number.isRequired,\r\n      height: number.isRequired,\r\n      url: string.isRequired,\r\n    })\r\n  ),\r\n  published: string, // article:published_time\r\n  schema: oneOfType([object, array]), // http://schema.org\r\n  socialSharing: shape({\r\n    title: string,\r\n    description: string,\r\n    images1200: arrayOf(\r\n      // Page asset file can define this\r\n      shape({\r\n        width: number.isRequired,\r\n        height: number.isRequired,\r\n        url: string.isRequired,\r\n      })\r\n    ),\r\n    images600: arrayOf(\r\n      // Page asset file can define this\r\n      shape({\r\n        width: number.isRequired,\r\n        height: number.isRequired,\r\n        url: string.isRequired,\r\n      })\r\n    ),\r\n  }),\r\n  title: string, // page title\r\n  twitterHandle: string, // twitter handle\r\n  updated: string, // article:modified_time\r\n\r\n  // from useConfiguration\r\n  config: object.isRequired,\r\n\r\n  // from useRouteConfiguration\r\n  routeConfiguration: arrayOf(propTypes.route).isRequired,\r\n\r\n  // from useIntl\r\n  intl: intlShape.isRequired,\r\n\r\n  // from useLocation\r\n  location: shape({\r\n    pathname: string.isRequired,\r\n    search: string.isRequired,\r\n    hash: string.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nconst Page = props => {\r\n  const config = useConfiguration();\r\n  const routeConfiguration = useRouteConfiguration();\r\n  const location = useLocation();\r\n  const intl = useIntl();\r\n\r\n  return (\r\n    <PageComponent\r\n      config={config}\r\n      routeConfiguration={routeConfiguration}\r\n      location={location}\r\n      intl={intl}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Page;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/range\");","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"PaginationLinks_root__4ng-g\",\"prev\":\"PaginationLinks_prev__NQZCY\",\"next\":\"PaginationLinks_next__sUw52\",\"arrowIcon\":\"PaginationLinks_arrowIcon__ikPx-\",\"disabled\":\"PaginationLinks_disabled__h94YB\",\"pageNumberList\":\"PaginationLinks_pageNumberList__ERfy+\",\"pageNumberList1Items\":\"PaginationLinks_pageNumberList1Items__qeKnk\",\"pageNumberList2Items\":\"PaginationLinks_pageNumberList2Items__CKj8F\",\"pageNumberList3Items\":\"PaginationLinks_pageNumberList3Items__sMQaa\",\"pageNumberList4Items\":\"PaginationLinks_pageNumberList4Items__zNtTb\",\"pageNumberList5Items\":\"PaginationLinks_pageNumberList5Items__hhuXw\",\"pageNumberList6Items\":\"PaginationLinks_pageNumberList6Items__pHhj+\",\"pageNumberList7Items\":\"PaginationLinks_pageNumberList7Items__-ruAS\",\"toPageLink\":\"PaginationLinks_toPageLink__zqGs2\",\"currentPage\":\"PaginationLinks_currentPage__GqTDN\",\"paginationGap\":\"PaginationLinks_paginationGap__5xKl2\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from '../../util/reactIntl';\r\nimport classNames from 'classnames';\r\nimport range from 'lodash/range';\r\nimport { IconArrowHead, NamedLink } from '../../components';\r\nimport { stringify } from '../../util/urlHelpers';\r\nimport { propTypes } from '../../util/types';\r\n\r\nimport css from './PaginationLinks.module.css';\r\n\r\nconst { string, object } = PropTypes;\r\n\r\nlet pgKey = 0;\r\nconst paginationGapKey = () => {\r\n  pgKey += 1;\r\n  return pgKey;\r\n};\r\n\r\n/**\r\n * Returns an array containing page numbers and possible ellipsis '' characters.\r\n *\r\n * @param {Number} page - current page\r\n * @param {Number} totalPages - total page count\r\n * @return {Array}\r\n */\r\nconst getPageNumbersArray = (page, totalPages) => {\r\n  // Create array of numbers: [1, 2, 3, 4, ..., totalPages]\r\n  const numbersFrom1ToTotalPages = range(1, totalPages + 1);\r\n  return numbersFrom1ToTotalPages\r\n    .filter(v => {\r\n      // Filter numbers that are next to current page and pick also first and last page\r\n      // E.g. [1, 4, 5, 6, 9], where current page = 5 and totalPages = 9.\r\n      return v === 1 || Math.abs(v - page) <= 1 || v === totalPages;\r\n    })\r\n    .reduce((newArray, p) => {\r\n      // Create a new array where gaps between consecutive numbers is filled with ellipsis character\r\n      // E.g. [1, '', 4, 5, 6, '', 9], where current page = 5 and totalPages = 9.\r\n      const isFirstPageOrNextToCurrentPage = p === 1 || newArray[newArray.length - 1] + 1 === p;\r\n      return isFirstPageOrNextToCurrentPage ? newArray.concat([p]) : newArray.concat(['\\u2026', p]);\r\n    }, []);\r\n};\r\n\r\n/**\r\n * Component that renders \"Previous page\" and \"Next page\" pagination\r\n * links of the given page component with the given pagination\r\n * information.\r\n *\r\n * The links will be disabled when no previous/next page exists.\r\n */\r\nexport const PaginationLinksComponent = props => {\r\n  const {\r\n    className,\r\n    rootClassName,\r\n    intl,\r\n    pageName,\r\n    pagePathParams,\r\n    pageSearchParams,\r\n    pagination,\r\n  } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  const { page, totalPages, paginationLimit, paginationUnsupported } = pagination;\r\n  const hasPaginationLimit = !!paginationLimit;\r\n  const pageCountLimit = paginationUnsupported\r\n    ? 1\r\n    : hasPaginationLimit\r\n    ? paginationLimit\r\n    : totalPages;\r\n  const prevPage = page > 1 ? page - 1 : null;\r\n  const nextPage = page < pageCountLimit ? page + 1 : null;\r\n  const prevSearchParams = { ...pageSearchParams, page: prevPage };\r\n  const nextSearchParams = { ...pageSearchParams, page: nextPage };\r\n\r\n  /* Arrow links: to previous page */\r\n  const prevLinkEnabled = (\r\n    <NamedLink\r\n      className={css.prev}\r\n      name={pageName}\r\n      params={pagePathParams}\r\n      to={{ search: stringify(prevSearchParams) }}\r\n      title={intl.formatMessage({ id: 'PaginationLinks.previous' })}\r\n    >\r\n      <IconArrowHead direction=\"left\" size=\"big\" rootClassName={css.arrowIcon} />\r\n    </NamedLink>\r\n  );\r\n\r\n  const prevLinkDisabled = (\r\n    <div className={css.prev}>\r\n      <IconArrowHead\r\n        direction=\"left\"\r\n        size=\"big\"\r\n        rootClassName={classNames(css.arrowIcon, css.disabled)}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  /* Arrow links: to next page */\r\n  const nextLinkEnabled = (\r\n    <NamedLink\r\n      className={css.next}\r\n      name={pageName}\r\n      params={pagePathParams}\r\n      to={{ search: stringify(nextSearchParams) }}\r\n      title={intl.formatMessage({ id: 'PaginationLinks.next' })}\r\n    >\r\n      <IconArrowHead direction=\"right\" size=\"big\" rootClassName={css.arrowIcon} />\r\n    </NamedLink>\r\n  );\r\n\r\n  const nextLinkDisabled = (\r\n    <div className={css.next}>\r\n      <IconArrowHead\r\n        direction=\"right\"\r\n        size=\"big\"\r\n        rootClassName={classNames(css.arrowIcon, css.disabled)}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  /* Numbered pagination links */\r\n\r\n  const pageNumbersNavLinks = getPageNumbersArray(page, pageCountLimit).map(v => {\r\n    const isCurrentPage = v === page;\r\n    const pageClassNames = classNames(css.toPageLink, { [css.currentPage]: isCurrentPage });\r\n    return typeof v === 'number' ? (\r\n      <NamedLink\r\n        key={v}\r\n        className={pageClassNames}\r\n        name={pageName}\r\n        params={pagePathParams}\r\n        to={{ search: stringify({ ...pageSearchParams, page: v }) }}\r\n        title={intl.formatMessage({ id: 'PaginationLinks.toPage' }, { page: v })}\r\n      >\r\n        {v}\r\n      </NamedLink>\r\n    ) : (\r\n      <span key={`pagination_gap_${paginationGapKey()}`} className={css.paginationGap}>\r\n        {v}\r\n      </span>\r\n    );\r\n  });\r\n\r\n  // Using 'justify-content: space-between' we can deal with very narrow mobile screens.\r\n  // However, since the length of pageNumberList can vary up to 7,\r\n  // we need to keep track of how much space is allocated for the list\r\n  // Maximum length of pageNumbersNavLinks is 7 (e.g. [1, '', 4, 5, 6, '', 9])\r\n  const pageNumberListClassNames = classNames(\r\n    css.pageNumberList,\r\n    css[`pageNumberList${pageNumbersNavLinks.length}Items`]\r\n  );\r\n\r\n  return (\r\n    <nav className={classes}>\r\n      {prevPage ? prevLinkEnabled : prevLinkDisabled}\r\n      <div className={pageNumberListClassNames}>{pageNumbersNavLinks}</div>\r\n      {nextPage ? nextLinkEnabled : nextLinkDisabled}\r\n    </nav>\r\n  );\r\n};\r\n\r\nPaginationLinksComponent.defaultProps = {\r\n  className: '',\r\n  rootClassName: '',\r\n  pagePathParams: {},\r\n  pageSearchParams: {},\r\n};\r\n\r\nPaginationLinksComponent.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  intl: intlShape.isRequired,\r\n  pageName: string.isRequired,\r\n  pagePathParams: object,\r\n  pageSearchParams: object,\r\n  pagination: propTypes.pagination.isRequired,\r\n};\r\n\r\nexport default injectIntl(PaginationLinksComponent);\r\n","/**\r\n * Promised component makes it easier to render content that\r\n * depends on resolution of a Promise.\r\n *\r\n * How to use:\r\n * <Promised promise={givenPromise} renderFulfilled={v => <b>{v}</b>} renderRejected={v => <b>v</b>} />\r\n */\r\n\r\n/* eslint-disable no-underscore-dangle */\r\nimport { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Promised extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // success value is string to be more useful when rendering texts.\r\n    this.state = {\r\n      value: '',\r\n      error: null,\r\n    };\r\n    this._isMounted = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n    this.props.promise\r\n      .then(value => {\r\n        if (this._isMounted) {\r\n          this.setState({ value });\r\n        }\r\n      })\r\n      .catch(error => {\r\n        if (this._isMounted) {\r\n          this.setState({ error });\r\n        }\r\n      });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  render() {\r\n    const { renderFulfilled, renderRejected } = this.props;\r\n    return this.state.error ? renderRejected(this.state.error) : renderFulfilled(this.state.value);\r\n  }\r\n}\r\n\r\nPromised.defaultProps = { renderRejected: e => e };\r\n\r\nconst { func, shape } = PropTypes;\r\n\r\nPromised.propTypes = {\r\n  promise: shape({\r\n    then: func.isRequired, // usually promises are detected from this single function alone\r\n  }).isRequired,\r\n  renderFulfilled: func.isRequired,\r\n  renderRejected: func.isRequired,\r\n};\r\n\r\nexport default Promised;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/includes\");","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"PropertyGroup_root__Rpes5\",\"twoColumns\":\"PropertyGroup_twoColumns__QQENG\",\"item\":\"PropertyGroup_item__1nNx+\",\"checkIcon\":\"PropertyGroup_checkIcon__mlsFW\",\"hidden\":\"PropertyGroup_hidden__5ah4L\",\"marketplaceFill\":\"PropertyGroup_marketplaceFill__j960p\",\"iconWrapper\":\"PropertyGroup_iconWrapper__7BXoa\",\"labelWrapper\":\"PropertyGroup_labelWrapper__syxGR\",\"selectedLabel\":\"PropertyGroup_selectedLabel__91CSh marketplaceBodyFontStyles\",\"notSelectedLabel\":\"PropertyGroup_notSelectedLabel__kdhwE marketplaceBodyFontStyles\"};","/*\r\n * Renders a set of options with selected and non-selected values.\r\n *\r\n * The corresponding component when selecting the values is\r\n * FieldCheckboxGroup.\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport includes from 'lodash/includes';\r\n\r\nimport css from './PropertyGroup.module.css';\r\n\r\nconst checkSelected = (options, selectedOptions) => {\r\n  return options.map(option => ({\r\n    key: option.key,\r\n    label: option.label,\r\n    isSelected: includes(selectedOptions, option.key),\r\n  }));\r\n};\r\n\r\nconst IconCheck = props => {\r\n  const isVisible = props.isVisible;\r\n  const classes = isVisible ? css.checkIcon : classNames(css.checkIcon, css.hidden);\r\n\r\n  return (\r\n    <svg width=\"9\" height=\"9\" xmlns=\"http://www.w3.org/2000/svg\" className={classes}>\r\n      <path\r\n        className={css.marketplaceFill}\r\n        d=\"M2.636621 7.7824771L.3573694 5.6447948c-.4764924-.4739011-.4764924-1.2418639 0-1.7181952.4777142-.473901 1.251098-.473901 1.7288122 0l1.260291 1.1254783L6.1721653.505847C6.565577-.0373166 7.326743-.1636902 7.8777637.227582c.5473554.3912721.6731983 1.150729.2797866 1.6951076L4.4924979 7.631801c-.2199195.306213-.5803433.5067096-.9920816.5067096-.3225487 0-.6328797-.1263736-.8637952-.3560334z\"\r\n        fillRule=\"evenodd\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst Item = props => {\r\n  const { label, isSelected } = props;\r\n  const labelClass = isSelected ? css.selectedLabel : css.notSelectedLabel;\r\n  return (\r\n    <li className={css.item}>\r\n      <span className={css.iconWrapper}>\r\n        <IconCheck isVisible={isSelected} />\r\n      </span>\r\n      <div className={css.labelWrapper}>\r\n        <span className={labelClass}>{label}</span>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nconst PropertyGroup = props => {\r\n  const { rootClassName, className, id, options, selectedOptions, twoColumns } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  const listClasses = twoColumns ? classNames(classes, css.twoColumns) : classes;\r\n\r\n  const checked = checkSelected(options, selectedOptions);\r\n\r\n  return (\r\n    <ul className={listClasses}>\r\n      {checked.map(option => (\r\n        <Item key={`${id}.${option.key}`} label={option.label} isSelected={option.isSelected} />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nPropertyGroup.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  selectedOptions: [],\r\n  twoColumns: false,\r\n};\r\n\r\nconst { arrayOf, bool, node, shape, string } = PropTypes;\r\n\r\nPropertyGroup.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  id: string.isRequired,\r\n  options: arrayOf(\r\n    shape({\r\n      key: string.isRequired,\r\n      label: node.isRequired,\r\n    })\r\n  ),\r\n  selectedOptions: arrayOf(string),\r\n  twoColumns: bool,\r\n};\r\n\r\nexport default PropertyGroup;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"rootTouchBuffer\":\"Handle_rootTouchBuffer__eiipP\",\"visibleHandle\":\"Handle_visibleHandle__Imi8a\",\"dragged\":\"Handle_dragged__pIdZR\"};","import React, { Component } from 'react';\r\nimport { func, number, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './Handle.module.css';\r\n\r\nclass Handle extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { dragging: false, relativePos: null };\r\n\r\n    this.handleRef = React.createRef();\r\n    this._isMounted = false;\r\n\r\n    this.onMouseDown = this.onMouseDown.bind(this);\r\n    this.onMouseMove = this.onMouseMove.bind(this);\r\n    this.onMouseUp = this.onMouseUp.bind(this);\r\n    this.onTouchStart = this.onTouchStart.bind(this);\r\n    this.onTouchMove = this.onTouchMove.bind(this);\r\n    this.onTouchEnd = this.onTouchEnd.bind(this);\r\n\r\n    this.onStart = this.onStart.bind(this);\r\n    this.onMove = this.onMove.bind(this);\r\n    this.onEnd = this.onEnd.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this._isMounted = true;\r\n    this.onMouseMoveListener = window.addEventListener('mousemove', this.onMouseMove, false);\r\n    this.onMouseUpListener = window.addEventListener('mouseup', this.onMouseUp, false);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n    window.removeEventListener('mousemove', this.onMouseMoveListener, false);\r\n    window.removeEventListener('mouseup', this.onMouseUpListener, false);\r\n  }\r\n\r\n  onMouseDown(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    this.onStart(e.pageX);\r\n  }\r\n  onMouseMove(e) {\r\n    if (!this.state.dragging) return;\r\n\r\n    this.onMove(e.pageX);\r\n  }\r\n  onMouseUp(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    this.onEnd();\r\n  }\r\n\r\n  onTouchStart(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    const touchpageX = e.touches[0].pageX;\r\n    this.onStart(touchpageX);\r\n  }\r\n  onTouchMove(e) {\r\n    if (!this.state.dragging) return;\r\n\r\n    this.onMove(e.touches[0].pageX);\r\n  }\r\n  onTouchEnd(e) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    this.onEnd();\r\n  }\r\n\r\n  onStart(pagePosition) {\r\n    const { offsetLeft, offsetWidth } = this.handleRef.current;\r\n    this.setState({ dragging: true, relativePos: pagePosition - offsetLeft - offsetWidth / 2 });\r\n    this.props.changeActive();\r\n  }\r\n  onMove(pagePosition) {\r\n    const { min, max, positionToValue } = this.props;\r\n    const position = pagePosition - this.state.relativePos;\r\n    const currentValue = positionToValue(position);\r\n\r\n    const value = currentValue < min ? min : currentValue > max ? max : currentValue;\r\n\r\n    this.props.onChange(value);\r\n  }\r\n  onEnd() {\r\n    // Ensuring that setState doesn't get called.\r\n    // This a strange behaviour since window.removeEventListener is called in componentWillUnmount\r\n    if (this._isMounted) {\r\n      this.setState({ dragging: false });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { rootClassName, className, value, valueToPosition } = this.props;\r\n    const position = valueToPosition(value);\r\n    const classes = classNames(rootClassName || css.rootTouchBuffer, className);\r\n\r\n    return (\r\n      <div\r\n        className={classes}\r\n        ref={this.handleRef}\r\n        style={{ left: `${position}px` }}\r\n        onMouseDown={this.onMouseDown}\r\n        onMouseMove={this.onMouseMove}\r\n        onMouseUp={this.onMouseUp}\r\n        onTouchStart={this.onTouchStart}\r\n        onTouchMove={this.onTouchMove}\r\n        onTouchEnd={this.onTouchEnd}\r\n        role=\"button\"\r\n      >\r\n        <div\r\n          className={classNames(css.visibleHandle, {\r\n            [css.dragged]: this.state.dragging,\r\n          })}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHandle.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n};\r\n\r\nHandle.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  min: number.isRequired,\r\n  max: number.isRequired,\r\n  valueToPosition: func.isRequired,\r\n  positionToValue: func.isRequired,\r\n};\r\n\r\nexport default Handle;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Track_root__odIFy\",\"track\":\"Track_track__HA6JV\",\"range\":\"Track_range__f6lNd\"};","import React from 'react';\r\nimport { array, node, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './Track.module.css';\r\n\r\nconst Track = props => {\r\n  const { rootClassName, className, children, handles, valueToPosition } = props;\r\n  const positionFromIndex = index => valueToPosition(handles[index]);\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <div className={classes}>\r\n      <div className={css.track} />\r\n\r\n      {handles.reduce((ranges, h, index) => {\r\n        return index < handles.length - 1\r\n          ? [\r\n              ...ranges,\r\n              <div\r\n                key={`range_${index}-${index + 1}`}\r\n                className={css.range}\r\n                style={{\r\n                  left: `${valueToPosition(h)}px`,\r\n                  width: `${positionFromIndex(index + 1) - valueToPosition(h)}px`,\r\n                }}\r\n              />,\r\n            ]\r\n          : ranges;\r\n      }, [])}\r\n\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nTrack.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  children: null,\r\n  handles: [],\r\n};\r\n\r\nTrack.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  children: node,\r\n  handles: array,\r\n};\r\n\r\nexport default Track;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"RangeSlider_root__h7qLG\",\"activeHandle\":\"RangeSlider_activeHandle__1PLDs\"};","import React, { Component } from 'react';\r\nimport { arrayOf, number, shape, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { withDimensions } from '../../util/uiHelpers';\r\n\r\nimport Handle from './Handle';\r\nimport Track from './Track';\r\nimport css from './RangeSlider.module.css';\r\n\r\nclass RangeSliderComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const { min, max, handles } = props;\r\n    handles.forEach((h, index) => {\r\n      if (h < min || h > max || (index < handles.length - 1 && h > handles[index + 1])) {\r\n        throw new Error(\r\n          'RangeSlider error: handles need to be given in ascending order and they need to be within min and max values'\r\n        );\r\n      }\r\n    });\r\n\r\n    this.state = { activeHandle: 0 };\r\n\r\n    this.toPosition = this.toPosition.bind(this);\r\n    this.toValue = this.toValue.bind(this);\r\n    this.changeActive = this.changeActive.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  toPosition(value) {\r\n    const { dimensions, min, max } = this.props;\r\n    const width = dimensions.width;\r\n    const valueOffset = value - min;\r\n    const scale = max - min;\r\n    return Math.round((valueOffset / scale) * width);\r\n  }\r\n\r\n  toValue(position) {\r\n    const { dimensions, min, max, step } = this.props;\r\n    const width = dimensions.width;\r\n    const scale = max - min;\r\n    const value = Math.round((position / width) * scale) + min;\r\n    return Math.ceil(value / step) * step;\r\n  }\r\n\r\n  changeActive(index) {\r\n    this.setState({ activeHandle: index });\r\n  }\r\n\r\n  onChange(position, handleIndex) {\r\n    this.props.onChange(Object.assign([...this.props.handles], { [handleIndex]: position }));\r\n  }\r\n\r\n  render() {\r\n    const { handles, min, max } = this.props;\r\n\r\n    return (\r\n      <Track handles={handles} valueToPosition={this.toPosition}>\r\n        {handles.map((h, index) => {\r\n          const classes = classNames({ [css.activeHandle]: this.state.activeHandle === index });\r\n          return (\r\n            <Handle\r\n              key={index}\r\n              className={classes}\r\n              value={h}\r\n              min={index === 0 ? min : handles[index - 1]}\r\n              max={index === handles.length - 1 ? max : handles[index + 1]}\r\n              valueToPosition={this.toPosition}\r\n              positionToValue={this.toValue}\r\n              changeActive={() => this.changeActive(index)}\r\n              onChange={value => this.onChange(value, index)}\r\n            />\r\n          );\r\n        })}\r\n      </Track>\r\n    );\r\n  }\r\n}\r\n\r\nRangeSliderComponent.defaultProps = {\r\n  min: 0,\r\n  max: 10000000,\r\n  step: 1,\r\n};\r\n\r\nRangeSliderComponent.propTypes = {\r\n  handles: arrayOf(number),\r\n  min: number,\r\n  max: number,\r\n  step: number,\r\n  dimensions: shape({\r\n    height: number.isRequired,\r\n    width: number.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nconst RangeSliderComponentWithDimensions = withDimensions(RangeSliderComponent);\r\n\r\nconst RangeSlider = props => {\r\n  const { rootClassName, className, ...rest } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return (\r\n    <div className={classes}>\r\n      <RangeSliderComponentWithDimensions {...rest} />\r\n    </div>\r\n  );\r\n};\r\n\r\nRangeSlider.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n};\r\n\r\nRangeSlider.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n};\r\n\r\nexport default RangeSlider;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ResponsiveBackgroundImageContainer_root__eDqhH\",\"overlay\":\"ResponsiveBackgroundImageContainer_overlay__-NitS\",\"backgroundImageWrapper\":\"ResponsiveBackgroundImageContainer_backgroundImageWrapper__zsXEj\",\"backgroundImage\":\"ResponsiveBackgroundImageContainer_backgroundImage__56glp\"};","import React from 'react';\r\nimport { bool, node, oneOfType, string } from 'prop-types';\r\nimport { useIntl } from 'react-intl';\r\nimport classNames from 'classnames';\r\n\r\nimport { types as sdkTypes } from '../../util/sdkLoader';\r\nimport { propTypes } from '../../util/types';\r\n\r\nimport { ResponsiveImage } from '../../components';\r\n\r\nimport css from './ResponsiveBackgroundImageContainer.module.css';\r\n\r\nconst { UUID } = sdkTypes;\r\n\r\n/**\r\n * ResponsiveImage works with image entities, but we also want to support\r\n * simple configuration for this component. Therefore, we need to create image entity object if only URL is given.\r\n *\r\n * @param {string} url to the image.\r\n * @returns image entity (contains: id, type, attributes.variants)\r\n */\r\nconst createFakeImageEntity = url => {\r\n  return {\r\n    id: new UUID('empty'),\r\n    type: 'image',\r\n    attributes: {\r\n      variants: {\r\n        scaled: {\r\n          name: 'scaled',\r\n          // width and height don't matter since we use the image with object-fit\r\n          width: 1200,\r\n          height: 800,\r\n          url,\r\n        },\r\n      },\r\n    },\r\n  };\r\n};\r\n\r\n/**\r\n * Container component that places ResponsiveImage component into the background\r\n * of actual children given to it.\r\n *\r\n * @param {object} props\r\n */\r\nconst ResponsiveBackgroundImageContainer = props => {\r\n  const intl = useIntl();\r\n  const {\r\n    className,\r\n    rootClassName,\r\n    as,\r\n    children,\r\n    childrenWrapperClassName,\r\n    image,\r\n    alt,\r\n    sizes,\r\n    useOverlay,\r\n    ...otherProps\r\n  } = props;\r\n  const Tag = as || 'div';\r\n\r\n  const imageEntity = typeof image === 'string' ? createFakeImageEntity(image) : image;\r\n  const variants = imageEntity?.attributes?.variants || {};\r\n  const variantNames = Object.keys(variants);\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  const overlayMaybe = useOverlay ? <div className={css.overlay}></div> : null;\r\n  const childrenWrapperClassNameMaybe = childrenWrapperClassName\r\n    ? { className: childrenWrapperClassName }\r\n    : {};\r\n\r\n  return (\r\n    <Tag className={classes} {...otherProps}>\r\n      <div className={css.backgroundImageWrapper}>\r\n        {imageEntity ? (\r\n          <ResponsiveImage\r\n            className={css.backgroundImage}\r\n            image={imageEntity}\r\n            alt={\r\n              alt ||\r\n              intl.formatMessage({ id: 'ResponsiveBackgroundImageContainer.backgroundImageAlt' })\r\n            }\r\n            variants={variantNames}\r\n            sizes={sizes}\r\n          />\r\n        ) : null}\r\n        {overlayMaybe}\r\n      </div>\r\n      <div {...childrenWrapperClassNameMaybe}>{children}</div>\r\n    </Tag>\r\n  );\r\n};\r\n\r\nResponsiveBackgroundImageContainer.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  as: 'div',\r\n  children: null,\r\n  image: null,\r\n  alt: null,\r\n  sizes: null,\r\n  useOverlay: true,\r\n};\r\n\r\nResponsiveBackgroundImageContainer.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  as: string,\r\n  children: node,\r\n  childrenWrapperClassName: string,\r\n  image: oneOfType([string, propTypes.imageAsset]),\r\n  alt: string,\r\n  sizes: string.isRequired,\r\n  useOverlay: bool,\r\n};\r\n\r\nexport default ResponsiveBackgroundImageContainer;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst NoImageIcon = props => {\r\n  const { className } = props;\r\n\r\n  return (\r\n    <svg\r\n      className={className}\r\n      width=\"48\"\r\n      height=\"49\"\r\n      viewBox=\"0 -1 48 49\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <g fill=\"none\" fillRule=\"evenodd\">\r\n        <path strokeWidth=\"2\" strokeLinejoin=\"round\" d=\"M13.6 9.6L24 .8l10.4 8.8z\" />\r\n        <path strokeWidth=\"2\" d=\"M.8 46.4h46.4V9.6H.8z\" />\r\n        <path strokeWidth=\"2\" d=\"M5.6 41.6h36.8V14.4H5.6z\" />\r\n        <path\r\n          d=\"M19.998 31.636l.835-.835a4.035 4.035 0 0 1 2.853-1.183h.693c1.07 0 2.097.426 2.853 1.183l.835.835\"\r\n          strokeWidth=\"2\"\r\n          strokeLinecap=\"round\"\r\n          strokeLinejoin=\"round\"\r\n        />\r\n        <path d=\"M21.599 23.983a1.009 1.009 0 1 0 0 2.018 1.009 1.009 0 0 0 0-2.018M26.402 23.983a1.009 1.009 0 1 0 0 2.018 1.009 1.009 0 0 0 0-2.018\" />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nconst { string } = PropTypes;\r\n\r\nNoImageIcon.defaultProps = {\r\n  className: null,\r\n};\r\n\r\nNoImageIcon.propTypes = {\r\n  className: string,\r\n};\r\n\r\nexport default NoImageIcon;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ResponsiveImage_root__ToEeX\",\"noImageContainer\":\"ResponsiveImage_noImageContainer__HOLhC\",\"noImageWrapper\":\"ResponsiveImage_noImageWrapper__h5s9l\",\"noImageIcon\":\"ResponsiveImage_noImageIcon__wUKZr\",\"noImageText\":\"ResponsiveImage_noImageText__cVXzA h6\"};","/**\r\n * Usage without sizes:\r\n *   <ResponsiveImage\r\n *     alt=\"ListingX\"\r\n *     image={imageDataFromSDK}\r\n *     variants={['landscape-crop', 'landscape-crop2x']}\r\n *   />\r\n *   // produces:\r\n *   <img\r\n *     alt=\"ListingX\"\r\n *     src=\"url/to/landscape-crop.jpg\"\r\n *     srcSet=\"url/to/landscape-crop.jpg 400w, url/to/landscape-crop2x.jpg 800w\" />\r\n *\r\n * Usage with sizes:\r\n *   <ResponsiveImage\r\n *     alt=\"ListingX\"\r\n *     image={imageDataFromSDK}\r\n *     variants={['landscape-crop', 'landscape-crop2x']}\r\n *     sizes=\"(max-width: 600px) 100vw, 50vw\"\r\n *   />\r\n *   // produces:\r\n *   <img\r\n *     alt=\"ListingX\"\r\n *     src=\"url/to/landscape-crop.jpg\"\r\n *     srcSet=\"url/to/landscape-crop.jpg 400w, url/to/landscape-crop2x.jpg 800w\"\r\n *     sizes=\"(max-width: 600px) 100vw, 50vw\" />\r\n *\r\n *   // This means that below 600px image will take as many pixels there are available on current\r\n *   // viewport width (100vw) - and above that image will only take 50% of the page width.\r\n *   // Browser decides which image it will fetch based on current screen size.\r\n *\r\n * NOTE: for all the possible image variant names and their respective\r\n * sizes, see the API documentation.\r\n */\r\n\r\nimport React from 'react';\r\nimport { arrayOf, oneOfType, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { FormattedMessage } from '../../util/reactIntl';\r\nimport { propTypes } from '../../util/types';\r\n\r\nimport NoImageIcon from './NoImageIcon';\r\nimport css from './ResponsiveImage.module.css';\r\n\r\nconst ResponsiveImage = props => {\r\n  const {\r\n    className,\r\n    rootClassName,\r\n    alt,\r\n    noImageMessage,\r\n    image,\r\n    variants,\r\n    dimensions,\r\n    ...rest\r\n  } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  if (image == null || variants.length === 0) {\r\n    const noImageClasses = classNames(rootClassName || css.root, css.noImageContainer, className);\r\n\r\n    const noImageMessageText = noImageMessage || <FormattedMessage id=\"ResponsiveImage.noImage\" />;\r\n    return (\r\n      <div className={noImageClasses}>\r\n        <div className={css.noImageWrapper}>\r\n          <NoImageIcon className={css.noImageIcon} />\r\n          <div className={css.noImageText}>{noImageMessageText}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const imageVariants = image.attributes.variants;\r\n\r\n  const srcSet = variants\r\n    .map(variantName => {\r\n      const variant = imageVariants[variantName];\r\n\r\n      if (!variant) {\r\n        // Variant not available (most like just not loaded yet)\r\n        return null;\r\n      }\r\n      return `${variant.url} ${variant.width}w`;\r\n    })\r\n    .filter(v => v != null)\r\n    .join(', ');\r\n\r\n  const imgProps = {\r\n    className: classes,\r\n    srcSet,\r\n    ...rest,\r\n  };\r\n\r\n  return <img alt={alt} {...imgProps} />;\r\n};\r\n\r\nResponsiveImage.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  image: null,\r\n  sizes: null,\r\n  noImageMessage: null,\r\n};\r\n\r\nResponsiveImage.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  alt: string.isRequired,\r\n  image: oneOfType([propTypes.image, propTypes.imageAsset]),\r\n  variants: arrayOf(string).isRequired,\r\n  sizes: string,\r\n  noImageMessage: string,\r\n};\r\n\r\nexport default ResponsiveImage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { IconReviewStar } from '../../components';\r\nimport { REVIEW_RATINGS } from '../../util/types';\r\n\r\nconst ReviewRating = props => {\r\n  const { className, rootClassName, reviewStarClassName, rating } = props;\r\n  const classes = classNames(rootClassName, className);\r\n\r\n  const stars = REVIEW_RATINGS;\r\n  return (\r\n    <span className={classes} title={`${rating}/5`}>\r\n      {stars.map(star => (\r\n        <IconReviewStar\r\n          key={`star-${star}`}\r\n          className={reviewStarClassName}\r\n          isFilled={star <= rating}\r\n        />\r\n      ))}\r\n    </span>\r\n  );\r\n};\r\n\r\nReviewRating.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  reviewStarClassName: null,\r\n};\r\n\r\nconst { string, oneOf } = PropTypes;\r\n\r\nReviewRating.propTypes = {\r\n  rating: oneOf(REVIEW_RATINGS).isRequired,\r\n  reviewStartClassName: string,\r\n  rootClassName: string,\r\n  className: string,\r\n};\r\n\r\nexport default ReviewRating;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Reviews_root__zvx+C\",\"reviewItem\":\"Reviews_reviewItem__LXsz8\",\"review\":\"Reviews_review__bHs0V\",\"avatar\":\"Reviews_avatar__Nkxwt\",\"reviewContent\":\"Reviews_reviewContent__jxJIy textSmall\",\"reviewInfo\":\"Reviews_reviewInfo__4nQU1 h5\",\"separator\":\"Reviews_separator__M0CnG\",\"desktopSeparator\":\"Reviews_desktopSeparator__YVmxd\",\"mobileReviewRating\":\"Reviews_mobileReviewRating__GHAOj\",\"desktopReviewRatingWrapper\":\"Reviews_desktopReviewRatingWrapper__79v2y\",\"desktopReviewRating\":\"Reviews_desktopReviewRating__swoCf\",\"reviewRatingStar\":\"Reviews_reviewRatingStar__HXPTo\"};","import React from 'react';\r\nimport { injectIntl, intlShape } from '../../util/reactIntl';\r\nimport { arrayOf, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { Avatar, ReviewRating, UserDisplayName } from '../../components';\r\nimport { propTypes } from '../../util/types';\r\n\r\nimport css from './Reviews.module.css';\r\n\r\nconst Review = props => {\r\n  const { review, intl } = props;\r\n\r\n  const date = review.attributes.createdAt;\r\n  const dateString = intl.formatDate(date, { month: 'long', year: 'numeric' });\r\n\r\n  return (\r\n    <div className={css.review}>\r\n      <Avatar className={css.avatar} user={review.author} />\r\n      <div>\r\n        <ReviewRating\r\n          rating={review.attributes.rating}\r\n          className={css.mobileReviewRating}\r\n          reviewStarClassName={css.reviewRatingStar}\r\n        />\r\n        <p className={css.reviewContent}>{review.attributes.content}</p>\r\n        <p className={css.reviewInfo}>\r\n          <UserDisplayName user={review.author} intl={intl} />\r\n          <span className={css.separator}></span>\r\n          {dateString}\r\n          <span className={css.desktopSeparator}></span>\r\n          <span className={css.desktopReviewRatingWrapper}>\r\n            <ReviewRating\r\n              rating={review.attributes.rating}\r\n              className={css.desktopReviewRating}\r\n              reviewStarClassName={css.reviewRatingStar}\r\n            />\r\n          </span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nReview.propTypes = {\r\n  review: propTypes.review.isRequired,\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nconst ReviewsComponent = props => {\r\n  const { className, rootClassName, reviews, intl } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  return (\r\n    <ul className={classes}>\r\n      {reviews.map(r => {\r\n        return (\r\n          <li key={`Review_${r.id.uuid}`} className={css.reviewItem}>\r\n            <Review review={r} intl={intl} />\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nReviewsComponent.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  reviews: [],\r\n};\r\n\r\nReviewsComponent.propTypes = {\r\n  className: string,\r\n  rootCalssName: string,\r\n  reviews: arrayOf(propTypes.review),\r\n\r\n  // from injectIntl\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nconst Reviews = injectIntl(ReviewsComponent);\r\n\r\nexport default Reviews;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"IconCard_root__GmeVS\"};","import React from 'react';\r\nimport { string } from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './IconCard.module.css';\r\n\r\nconst BRAND_AMEX = 'amex';\r\nconst BRAND_DINERS = 'diners';\r\nconst BRAND_DISCOVERY = 'discovery';\r\nconst BRAND_JCB = 'jcb';\r\nconst BRAND_MASTERCARD = 'mastercard';\r\nconst BRAND_UNIONPAY = 'unionpay';\r\nconst BRAND_VISA = 'visa';\r\n\r\nconst IconCard = props => {\r\n  const { className, rootClassName, brand } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  switch (brand) {\r\n    case BRAND_AMEX:\r\n      return (\r\n        <svg\r\n          className={classes}\r\n          height=\"16\"\r\n          viewBox=\"0 0 24 16\"\r\n          width=\"24\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <g fill=\"none\" fillRule=\"evenodd\">\r\n            <rect fill=\"#016fd0\" height=\"16\" rx=\"2\" width=\"24\" />\r\n            <path\r\n              d=\"M13.764 13.3939V7.6925l10.1476.009v1.575l-1.1729 1.2534 1.1729 1.2648v1.6083H22.039l-.9952-1.0981-.9881 1.1023z\"\r\n              fill=\"#fffffe\"\r\n            />\r\n            <path\r\n              d=\"M14.4418 12.7688V8.3199h3.7723v1.0249h-2.5509v.6957h2.49v1.0078h-2.49v.6833h2.5509v1.0372z\"\r\n              fill=\"#016fd0\"\r\n            />\r\n            <path\r\n              d=\"M18.1953 12.7688l2.0873-2.227L18.1952 8.32h1.6156l1.2755 1.41 1.2791-1.41h1.5462v.035l-2.0429 2.1868 2.0429 2.1639v.0631h-1.5617l-1.2981-1.4242-1.2848 1.4242z\"\r\n              fill=\"#016fd0\"\r\n            />\r\n            <path\r\n              d=\"M14.2373 2.632h2.4461l.8591 1.9508V2.632h3.0199l.5207 1.4615.5226-1.4615h2.3059v5.7013H11.7251z\"\r\n              fill=\"#fffffe\"\r\n            />\r\n            <g fill=\"#016fd0\">\r\n              <path d=\"M14.7005 3.2514l-1.974 4.4451h1.3539l.3724-.8901h2.018l.372.8901h1.3877l-1.9658-4.4451zm.1696 2.5574l.592-1.415.5916 1.415z\" />\r\n              <path d=\"M18.212 7.6957v-4.445l1.903.0065.9794 2.7327.9856-2.7392h1.8316v4.445l-1.1786.0105V4.6528l-1.1126 3.043h-1.0758L19.409 4.6423v3.0533z\" />\r\n            </g>\r\n          </g>\r\n        </svg>\r\n      );\r\n    case BRAND_DINERS:\r\n      return (\r\n        <svg\r\n          className={classes}\r\n          width=\"24\"\r\n          height=\"16\"\r\n          viewBox=\"0 0 24 16\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <g fillRule=\"nonzero\" fill=\"none\">\r\n            <path\r\n              d=\"M21.9972 15.75h.0022c.955.0081 1.7387-.7727 1.7506-1.7458V2.0063c-.0038-.4706-.1911-.9201-.5203-1.2495a1.7197 1.7197 0 0 0-1.2325-.5067H2.0006C1.5411.246 1.0986.4283.7703.7568.441 1.0862.2538 1.5357.25 2.0043v11.9894c.0038.4706.1911.9201.5203 1.2495a1.7197 1.7197 0 0 0 1.2325.5067h19.9944zm-.001.5h-.0011.0021-.001z\"\r\n              strokeOpacity=\".2\"\r\n              stroke=\"#000\"\r\n              strokeWidth=\".5\"\r\n              fill=\"#FFF\"\r\n            />\r\n            <path\r\n              d=\"M10.0021 2.0518v-.016h4v.016c3.1354.2294 5.5621 2.8402 5.5621 5.984s-2.4267 5.7546-5.562 5.984v.016h-4v-.016C6.8666 13.7904 4.44 11.1796 4.44 8.0358s2.4267-5.7546 5.5621-5.984z\"\r\n              fill=\"#0165AC\"\r\n            />\r\n            <path\r\n              d=\"M11.6021 11.4278a3.6 3.6 0 0 0 0-6.784v6.784zm-2.4-6.784a3.6 3.6 0 0 0 0 6.784v-6.784zm1.2 8.592c-2.8719 0-5.2-2.3281-5.2-5.2s2.3281-5.2 5.2-5.2 5.2 2.3281 5.2 5.2-2.3281 5.2-5.2 5.2z\"\r\n              fill=\"#FFF\"\r\n            />\r\n          </g>\r\n        </svg>\r\n      );\r\n    case BRAND_DISCOVERY:\r\n      return (\r\n        <svg\r\n          className={classes}\r\n          width=\"24\"\r\n          height=\"16\"\r\n          viewBox=\"0 0 24 16\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <g fillRule=\"nonzero\" fill=\"none\">\r\n            <path\r\n              d=\"M21.9972 15.75h.0022c.955.0081 1.7387-.7727 1.7506-1.7458V2.0063c-.0038-.4706-.1911-.9201-.5203-1.2495a1.7197 1.7197 0 0 0-1.2325-.5067H2.0006C1.5411.246 1.0986.4283.7703.7568.441 1.0862.2538 1.5357.25 2.0043v11.9894c.0038.4706.1911.9201.5203 1.2495a1.7197 1.7197 0 0 0 1.2325.5067h19.9944zm-.001.5h-.0011.0021-.001z\"\r\n              strokeOpacity=\".2\"\r\n              stroke=\"#000\"\r\n              strokeWidth=\".5\"\r\n              fill=\"#FFF\"\r\n            />\r\n            <path\r\n              d=\"M12.6124 16h9.3848A1.9862 1.9862 0 0 0 24 14.0302v-2.3586a38.7393 38.7393 0 0 1-11.3876 4.3282z\"\r\n              fill=\"#F27712\"\r\n            />\r\n            <path\r\n              d=\"M23.1724 9.2965H22.32l-.96-1.2662h-.091v1.2662h-.6952V6.1517H21.6c.8028 0 1.2662.331 1.2662.9268 0 .4883-.2896.8028-.811.9021l1.1172 1.3159zm-1.0262-2.1931c0-.3062-.2317-.4635-.662-.4635h-.2152v.9518h.1986c.4469 0 .6786-.1656.6786-.4883zm-4.0055-.9517h1.9696v.5296H18.836v.7035h1.2248v.5379h-1.2248v.8524h1.2744v.5297h-1.9696V6.1517zm-2.2345 3.2275L14.4 6.1434h.7614l.9517 2.1186.96-2.1186h.7448l-1.5227 3.2358h-.389zm-6.298-.0082c-1.0592 0-1.8868-.72-1.8868-1.6552 0-.9104.8441-1.647 1.9034-1.647.298 0 .5462.058.8524.1904v.7283a1.2414 1.2414 0 0 0-.869-.3558c-.662 0-1.1668.48-1.1668 1.084 0 .6373.4965 1.0925 1.2 1.0925.3145 0 .5545-.0993.8358-.3476v.7283c-.3144.1324-.5793.182-.869.182zm-2.102-1.0345c0 .6124-.5048 1.0345-1.2331 1.0345-.5297 0-.9103-.1821-1.2331-.5959l.4552-.389c.1572.2814.422.4221.753.4221.3146 0 .538-.1903.538-.4386 0-.1407-.0662-.2483-.2069-.331a2.88 2.88 0 0 0-.48-.1821c-.6538-.207-.8772-.4304-.8772-.869 0-.513.48-.902 1.109-.902.3972 0 .753.124 1.051.3558l-.3642.4138a.7614.7614 0 0 0-.5627-.2483c-.298 0-.5131.149-.5131.3476 0 .1655.1241.2566.5379.3973.7945.2482 1.0262.48 1.0262.993v-.0082zm-3.418-2.1848h.6952v3.153h-.6951v-3.153zm-2.2344 3.153H.8276v-3.153h1.0262c1.1255 0 1.9034.6455 1.9034 1.5724 0 .4717-.2317.9186-.6372 1.2165-.3476.2483-.7366.3642-1.2745.3642h.0083zm.811-2.3668c-.2317-.1821-.4965-.2483-.9517-.2483h-.1903V8.775h.1903c.4469 0 .7283-.0828.9517-.2483.24-.1986.3807-.4965.3807-.8027 0-.3062-.1407-.5959-.3807-.7862z\"\r\n              fill=\"#000\"\r\n            />\r\n            <path\r\n              d=\"M12.4138 6.0689c-.9104 0-1.6552.7283-1.6552 1.6303 0 .96.7117 1.68 1.6552 1.68.9269 0 1.6552-.7282 1.6552-1.6551 0-.927-.72-1.6552-1.6552-1.6552z\"\r\n              fill=\"#F27712\"\r\n            />\r\n          </g>\r\n        </svg>\r\n      );\r\n    case BRAND_JCB:\r\n      return (\r\n        <svg\r\n          className={classes}\r\n          height=\"16\"\r\n          viewBox=\"0 0 23 16\"\r\n          width=\"23\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <g fill=\"none\">\r\n            <path\r\n              d=\"M.2054 16h4.5178c1.0278 0 2.259-1.1947 2.259-2.1333V0h-4.518C1.4366 0 .2055 1.1947.2055 3.2z\"\r\n              fill=\"#047ab1\"\r\n            />\r\n            <path\r\n              d=\"M2.7692 10.816a9.7709 9.7709 0 0 1-2.5638-.3413V9.3013c.6467.3777 1.386.5909 2.146.6187.8696 0 1.3553-.576 1.3553-1.3653V5.3333h2.146v3.2214c0 1.2586-.7003 2.2613-3.0835 2.2613z\"\r\n              fill=\"#fff\"\r\n            />\r\n            <path\r\n              d=\"M8.1116 16h4.5179c1.0278 0 2.2589-1.1947 2.2589-2.1333V0h-4.5179C9.3427 0 8.1116 1.1947 8.1116 3.2z\"\r\n              fill=\"#d42d06\"\r\n            />\r\n            <path\r\n              d=\"M8.1116 6.08c.6551-.5973 1.7846-.9707 3.6143-.8853.994.0426 2.033.32 2.033.32v1.184c-.5943-.3395-1.2623-.5474-1.954-.608C10.4158 5.9733 9.5687 6.7093 9.5687 8s.8471 2.0267 2.2364 1.92c.692-.066 1.3596-.2774 1.954-.6187v1.1734s-1.0392.288-2.0331.3306c-1.8297.0854-2.9592-.288-3.6143-.8853z\"\r\n              fill=\"#fff\"\r\n            />\r\n            <path\r\n              d=\"M16.0179 16h4.5178c1.0278 0 2.259-1.1947 2.259-2.1333V0h-4.518C17.249 0 16.018 1.1947 16.018 3.2z\"\r\n              fill=\"#67b637\"\r\n            />\r\n            <path\r\n              d=\"M21.6652 9.28c0 .8533-.7003 1.3867-1.6377 1.3867h-4.0096V5.3333h3.6481l.2598.0107c.8245.0427 1.4344.5013 1.4344 1.2907 0 .6186-.4179 1.152-1.1746 1.28v.032c.8358.0533 1.4796.5546 1.4796 1.3333zM18.785 6.176a1.0871 1.0871 0 0 0-.1468-.0107H17.283v1.344h1.5021c.2824-.064.5196-.3093.5196-.672 0-.3626-.2372-.608-.5196-.6613zm.1695 2.176a1.0276 1.0276 0 0 0-.1808-.0107H17.283v1.4614h1.4908l.1808-.0214c.2823-.064.5195-.3413.5195-.7146 0-.3734-.2259-.64-.5195-.7147z\"\r\n              fill=\"#fff\"\r\n            />\r\n          </g>\r\n        </svg>\r\n      );\r\n    case BRAND_MASTERCARD:\r\n      return (\r\n        <svg\r\n          className={classes}\r\n          height=\"16\"\r\n          viewBox=\"0 0 24 16\"\r\n          width=\"24\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <g fill=\"none\" fillRule=\"evenodd\">\r\n            <rect fill=\"#252525\" height=\"16\" rx=\"2\" width=\"24\" />\r\n            <circle cx=\"9\" cy=\"8\" fill=\"#eb001b\" r=\"5\" />\r\n            <circle cx=\"15\" cy=\"8\" fill=\"#f79e1b\" r=\"5\" />\r\n            <path\r\n              d=\"M12 3.9996c1.2144.9122 2 2.3646 2 4.0004s-.7856 3.0882-2 4.0004C10.7856 11.0882 10 9.6358 10 8s.7856-3.0882 2-4.0004z\"\r\n              fill=\"#ff5f00\"\r\n            />\r\n          </g>\r\n        </svg>\r\n      );\r\n    case BRAND_UNIONPAY:\r\n      return (\r\n        <svg\r\n          className={classes}\r\n          height=\"16\"\r\n          viewBox=\"0 0 24 16\"\r\n          width=\"24\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <g fill=\"none\">\r\n            <path\r\n              d=\"M4.5459 0h5.7938c.8087 0 1.3117.7257 1.123 1.619L8.7655 14.3675c-.1904.8902-1.0002 1.6165-1.8095 1.6165H1.1627c-.8076 0-1.3118-.7263-1.1231-1.6165L2.7381 1.619C2.9268.7257 3.7361 0 4.546 0\"\r\n              fill=\"#dd2423\"\r\n            />\r\n            <path\r\n              d=\"M9.8576 0h6.6627c.8086 0 .444.7257.2537 1.619l-2.697 12.7485c-.1892.8902-.1302 1.6165-.9405 1.6165H6.4738c-.8103 0-1.3118-.7263-1.1214-1.6165L8.0493 1.619C8.2408.7257 9.0483 0 9.8576 0\"\r\n              fill=\"#16315e\"\r\n            />\r\n            <path\r\n              d=\"M16.256 0h5.7938c.8098 0 1.3129.7257 1.1226 1.619l-2.697 12.7485c-.1903.8902-1.0006 1.6165-1.8104 1.6165h-5.791c-.8104 0-1.313-.7263-1.1232-1.6165L14.4482 1.619C14.637.7257 15.4457 0 16.256 0\"\r\n              fill=\"#036862\"\r\n            />\r\n            <path\r\n              d=\"M6.059 4.0856c-.5958.0067-.7717 0-.828-.0146-.0216.113-.4236 2.1546-.4247 2.1563-.0866.413-.1496.7075-.3635.8976-.1215.1105-.2633.1639-.4276.1639-.2643 0-.4182-.1445-.444-.4184l-.005-.094s.0805-.5533.0805-.5564c0 0 .422-1.8605.4975-2.1064a.1945.1945 0 0 0 .0061-.028c-.8213.008-.967 0-.977-.0146-.0055.02-.0258.1354-.0258.1354l-.4308 2.097-.037.1778-.0716.5817c0 .1725.0307.3134.092.4325.1963.3776.7563.4342 1.073.4342.4081 0 .791-.0955 1.0497-.2698.449-.292.5666-.7486.6713-1.1544l.0486-.2081s.4347-1.9323.5085-2.1837c.0029-.014.004-.0213.0078-.028zm1.479 1.5588c-.1048 0-.2963.028-.4683.1208-.0624.0353-.1215.076-.1838.1166l.0562-.2234-.0307-.0376c-.3648.0813-.4464.0922-.7834.1444l-.0282.0207c-.0391.357-.0739.6255-.219 1.3274a90.3116 90.3116 0 0 1-.17.778l.0156.0327c.3453-.02.45-.02.7502-.0146l.0242-.029c.0382-.215.0431-.2654.1276-.7009.0396-.2064.1224-.66.1632-.8215.075-.0383.149-.0759.2196-.0759.1682 0 .1477.1615.1412.2259-.0072.108-.0685.4609-.1313.7639l-.042.1955c-.0292.1445-.0612.2848-.0905.428l.0127.0286c.3404-.02.4442-.02.7348-.0146l.0342-.029c.0525-.3358.0679-.4257.1611-.9146l.0469-.2246c.091-.4397.1368-.6626.068-.8442-.073-.2035-.2478-.2526-.4083-.2526zm1.6521.4603c-.181.0383-.2963.0637-.411.0802-.1136.02-.2245.0383-.3993.065l-.0139.0138-.0127.011c-.0182.1434-.0309.2673-.055.413-.0205.1506-.052.3218-.1033.5677-.0397.1882-.0601.2538-.0827.32-.022.0663-.0463.1307-.091.3158l.0105.0171.0087.0157c.1634-.0085.2703-.0146.3802-.0157.1097-.0043.2234 0 .3994.001l.0154-.0137.0165-.0153c.0254-.167.0292-.2119.0447-.2933.0154-.0874.042-.2083.107-.5314.0309-.1517.0652-.303.0971-.4578.0332-.1542.068-.306.101-.4578l-.005-.0183zm.0039-.6206c-.1644-.1068-.453-.0729-.6471.0746-.1936.1446-.2157.3498-.0518.458.1615.1038.4512.0729.6436-.0759.1932-.1477.2174-.351.0553-.4567zm.994 2.4734c.3326 0 .6735-.101.9301-.4003.1974-.2428.288-.6041.3193-.7529.1021-.4931.0226-.7233-.0772-.8635-.1517-.2138-.4197-.2824-.6978-.2824-.1672 0-.5654.0182-.8765.334-.2234.2277-.3267.5368-.389.833-.0628.302-.135.8454.319 1.0477.14.0662.342.0844.4722.0844zm-.026-1.1095c.0768-.3734.1673-.6868.3983-.6868.181 0 .1942.2332.1137.6078-.0144.0832-.0805.3924-.1699.524-.0624.0972-.1363.1561-.2179.1561-.0243 0-.1688 0-.171-.2361-.0011-.1166.0205-.2357.0469-.365zm2.1068 1.0615l.026-.0291c.0368-.215.0429-.2655.1245-.7008.0408-.2065.1253-.66.165-.8216.075-.0384.1478-.076.2207-.076.167 0 .1467.1615.14.2259-.006.1082-.0673.4609-.1313.7639l-.0396.1955c-.0304.1446-.0635.2848-.0927.4282l.0127.0286c.3415-.02.4413-.02.7337-.0146l.0353-.0291c.0512-.336.065-.4258.161-.9146l.0458-.2247c.0916-.4397.1379-.6624.07-.844-.0749-.2035-.2509-.2526-.4092-.2526-.1049 0-.2974.0278-.4684.1208a3.0577 3.0577 0 0 0-.1826.1166l.0524-.2234-.028-.0378c-.3647.0814-.448.0923-.7846.1446l-.0258.0206c-.0408.3571-.074.6254-.219 1.3275a95.9633 95.9633 0 0 1-.17.7779l.0155.0328c.3458-.02.449-.02.7486-.0146zm2.5088.0145c.0215-.1154.149-.799.1501-.799 0 0 .1086-.5017.1152-.5199 0 0 .0342-.0522.0684-.0729h.0503c.4743 0 1.01 0 1.4298-.34.2857-.2332.481-.5775.5681-.996a1.6492 1.6492 0 0 0 .0393-.3466c0-.1603-.0292-.3189-.1137-.4428-.214-.3297-.6404-.3358-1.1326-.3383l-.2426.0025c-.63.0086-.8826.0061-.9864-.0079-.0088.0505-.0253.1404-.0253.1404s-.2256 1.1513-.2256 1.1531l-.5655 2.5632c.55-.0073.7756-.0073.8705.0042zm.4181-2.0452s.24-1.149.2388-1.1446l.0078-.059.0034-.0448.0959.0108s.4948.0468.5064.048c.1953.0832.2758.2976.2196.5774-.0513.2558-.202.4708-.3956.5746-.1594.088-.3547.0953-.556.0953h-.1301zm1.494.9905c-.0635.2975-.1364.841.3154 1.0347.144.0674.2731.0875.4043.0802.1385-.0082.2669-.0847.3858-.1948l-.0322.1359.0205.029c.325-.015.4258-.015.7778-.012l.032-.0268c.0513-.3327.0998-.6557.2334-1.2922.065-.3048.13-.6067.1968-.9103l-.0104-.0334c-.3635.0741-.4607.09-.8103.1445l-.0266.0238c-.0035.031-.0072.0607-.0106.0904-.0543-.0967-.1331-.1793-.2547-.2307-.1555-.0674-.5207.0194-.8346.334-.2206.2247-.3265.5325-.3867.8277zm.7633.0182c.0778-.3668.1672-.677.3988-.677.1465 0 .2236.1487.208.4024-.0125.0633-.026.13-.0419.2054-.0232.109-.0483.217-.0727.3252-.0249.074-.0538.1438-.0856.1903-.0596.093-.2014.1506-.283.1506-.0232 0-.166 0-.171-.232-.0011-.1154.0205-.2344.0474-.365zm3.9867-1.2109l-.0281-.0353c-.3597.0802-.4248.093-.7552.1421l-.0243.0267c-.0012.0044-.0021.011-.0038.0171l-.0012-.006c-.246.6248-.2388.49-.439.9818-.0011-.0224-.0011-.0363-.0023-.0601l-.0501-1.0663-.0315-.0353c-.3768.0802-.3857.093-.7336.1421l-.0271.0267c-.0039.0128-.0039.0268-.0061.042l.0022.0055c.0435.2446.033.19.0767.5762.0204.1895.0475.3801.0678.5673.0343.3132.0535.4674.0955.9455-.235.4268-.2907.5884-.5169.963l.0016.0037-.1593.2774c-.0182.0292-.0348.0492-.058.0578-.0253.0138-.0584.0163-.1043.0163h-.0882l-.1312.4804.45.0085c.2642-.0012.4303-.1372.5197-.32l.283-.5339h-.0045l.0298-.0376c.1904-.4511 1.6384-3.1856 1.6384-3.1856zm-4.7501 6.3088h-.191l.7067-2.573h.2344l.0745-.265.0072.2947c-.0088.1822.1214.3437.4634.317h.3956l.1361-.4954h-.1488c-.0856 0-.1253-.0238-.1203-.0748l-.0072-.2999h-.7325v.0016c-.2369.0054-.944.025-1.0873.067-.1732.049-.3558.1937-.3558.1937l.0717-.2654h-.6852l-.1428.5265-.716 2.6123h-.139l-.1363.4919h1.3647l-.0457.164h.6724l.0447-.164h.1886zm-.56-2.0502c-.1097.0334-.3139.1348-.3139.1348l.1816-.6576h.5444l-.1313.4791s-.1682.011-.2807.0437zm.0105.9394s-.171.0237-.2836.0516c-.1108.037-.3187.1536-.3187.1536l.1876-.6843h.5472zm-.305 1.1168h-.5461l.1583-.5775h.5444zm1.315-1.5959h.7872l-.113.4033h-.7977l-.1197.4408h.6979l-.5285.8191c-.037.0602-.0702.0815-.107.0984-.037.0207-.0856.045-.1418.045h-.1936l-.133.4828h.5064c.2632 0 .4187-.1318.5335-.3048l.3624-.546.0778.5544c.0165.1038.0843.1646.1302.1882.0507.028.103.076.177.0832.0794.0037.1368.0067.1749.0067h.2488l.1494-.5404h-.0981c-.0564 0-.1534-.0104-.1699-.0298-.0165-.0237-.0165-.06-.0254-.1154l-.079-.5556h-.3232l.1418-.1858h.796l.1225-.4408h-.737l.1148-.4033h.7347l.1363-.4973h-2.1906zm-6.6482 1.7082l.1837-.6728h.7551l.138-.5004h-.7558l.1153-.4141h.7386l.1369-.4846h-1.848l-.134.4846h.4198l-.112.414h-.421l-.1395.509h.4197l-.2449.8902c-.033.1178.0156.1627.0464.2175.0315.0533.0634.0886.1351.1086.074.0182.1247.0291.1936.0291h.8513l.1517-.5544-.3774.0571c-.0729 0-.2747-.0096-.2526-.0838zm.0866-3.2208l-.1914.3807c-.041.0831-.0778.1348-.111.1585-.0292.02-.0871.0285-.171.0285h-.0998l-.1335.487h.3316c.1594 0 .2819-.0643.3403-.0965.0629-.037.0794-.0159.128-.0675l.112-.1068h1.0354l.1374-.507h-.758l.1324-.277zm1.5286 3.2306c-.0177-.028-.005-.0773.022-.1799l.283-1.0311h1.0068c.1467-.0023.2526-.0042.3215-.0096.074-.0086.1545-.0377.2422-.0899.0905-.0547.1369-.1124.176-.1786.0436-.066.1137-.2107.1738-.4336l.3557-1.3049-1.0447.0067s-.3217.0522-.4633.11c-.143.0643-.3471.244-.3471.244l.0943-.3577h-.6454l-.9035 3.2986c-.032.128-.0535.221-.0585.2769-.0017.0601.069.1197.1147.1646.054.0449.134.0376.2107.0449.0806.0067.1953.0109.3536.0109h.496l.1522-.5659-.444.0462a.1138.1138 0 0 1-.096-.0516zm.4876-1.9074h1.0575l-.0673.2319c-.0094.0054-.032-.0115-.1396.0025h-.9157zm.2118-.778h1.0664l-.0767.2794s-.5026-.0054-.583.0109c-.3543.0675-.5611.2758-.5611.2758zm.8021 1.7866c-.0087.0347-.0226.0558-.042.0717-.0214.0152-.0561.0206-.108.0206h-.1506l.0089-.2824H12.7l-.0254 1.3809c-.001.0996.0078.1573.074.2035.0662.0576.2703.065.545.065h.3927l.1418-.517-.342.0207-.1136.0073c-.0155-.0073-.0304-.014-.0469-.0321-.0144-.0157-.0387-.0061-.0347-.1057l.0027-.354.3585-.0163c.1936 0 .2764-.0694.347-.1354.0674-.0633.0894-.136.1148-.2345l.0602-.3134h-.4927z\"\r\n              fill=\"#fefefe\"\r\n            />\r\n          </g>\r\n        </svg>\r\n      );\r\n    case BRAND_VISA:\r\n      return (\r\n        <svg\r\n          className={classes}\r\n          width=\"24\"\r\n          height=\"16\"\r\n          viewBox=\"0 0 24 16\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <g fillRule=\"nonzero\" fill=\"none\">\r\n            <rect\r\n              strokeOpacity=\".2\"\r\n              stroke=\"#000\"\r\n              strokeWidth=\".5\"\r\n              fill=\"#FFF\"\r\n              x=\".25\"\r\n              y=\".25\"\r\n              width=\"23.5\"\r\n              height=\"15.5\"\r\n              rx=\"2\"\r\n            />\r\n            <path\r\n              d=\"M2.78773262 5.91443732C2.26459089 5.62750595 1.6675389 5.39673777 1 5.23659312l.0280005-.12471102h2.73697872c.37098332.01300346.67201191.12462375.76996714.51882925l.59482061 2.83587917.18221641.85413565L6.97796639 5.1118821h1.79882257l-2.67390785 6.1656463H4.30396552l-1.5162329-5.36309108zm7.31224258 5.36963648H8.39882877l1.06401886-6.1721917H11.163901l-1.0639258 6.1721917zm6.1668069-6.02129922l-.2313529 1.3328108-.1538632-.06554092c-.3078194-.12479829-.7141522-.2495093-1.2671852-.2363313-.6716398 0-.9728545.26905813-.9798314.53174543 0 .28895604.3643786.47938251.9593659.76179318.9801104.43993579 1.4347231.97831385 1.4279323 1.68093694-.0137677 1.28044789-1.1758348 2.10786929-2.9607967 2.10786929-.7631763-.0066327-1.4982591-.1579615-1.8972429-.3284901l.2380507-1.38552277.224004.09861682c.5530331.23004776.9169465.32831555 1.5961213.32831555.4897761 0 1.0149017-.19060107 1.0215995-.60409358 0-.26923267-.2237249-.46637906-.8818761-.76842582-.6439184-.29558867-1.5048639-.78797464-1.4909101-1.67447884C11.8780532 5.84042483 13.0610509 5 14.7409877 5c.6580581 0 1.1902536.13788902 1.5257944.26277458zm2.2609703 3.83471102h1.4139786c-.0699548-.30859213-.3921-1.78601186-.3921-1.78601186l-.1188858-.5318327c-.0840015.22978594-.2308878.60409353-.2238179.59091553 0 0-.5390794 1.3723448-.6791749 1.72692903zm2.0998512-3.9856035L22 11.2839865h-1.5750977s-.1541422-.7091684-.2029803-.9258637h-2.1841317c-.0631639.1640705-.3570296.9258637-.3570296.9258637h-1.7849619l2.5268355-5.65999506c.1750729-.40057632.4833574-.51210934.889132-.51210934h1.3158373z\"\r\n              fill=\"#171E6C\"\r\n            />\r\n          </g>\r\n        </svg>\r\n      );\r\n    default:\r\n      return (\r\n        <svg\r\n          className={classes}\r\n          width=\"29\"\r\n          height=\"19\"\r\n          viewBox=\"0 0 29 19\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <g fill=\"none\" fillRule=\"evenodd\">\r\n            <path\r\n              d=\"M26.58 19H2.42A2.4004 2.4004 0 0 1 0 16.62V2.38A2.4 2.4 0 0 1 2.42 0h24.16A2.4004 2.4004 0 0 1 29 2.38v14.25c-.0165 1.3216-1.0984 2.3811-2.42 2.37zM10 5.83c0-.46-.35-.83-.78-.83H3.78c-.43 0-.78.37-.78.83v3.34c0 .46.35.83.78.83h5.44c.43 0 .78-.37.78-.83V5.83z\"\r\n              fill=\"#DADDE2\"\r\n            />\r\n            <path\r\n              d=\"M25 15h-3c-.65 0-1-.3-1-1s.35-1 1-1h3c.65 0 1 .3 1 1s-.35 1-1 1zm-6 0h-3c-.65 0-1-.3-1-1s.35-1 1-1h3c.65 0 1 .3 1 1s-.35 1-1 1zm-6 0h-3c-.65 0-1-.3-1-1s.35-1 1-1h3c.65 0 1 .3 1 1s-.35 1-1 1zm-6 0H4c-.65 0-1-.3-1-1s.35-1 1-1h3c.65 0 1 .3 1 1s-.35 1-1 1z\"\r\n              fill=\"#B2B6C1\"\r\n            />\r\n          </g>\r\n        </svg>\r\n      );\r\n  }\r\n};\r\n\r\nIconCard.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  brand: 'default',\r\n};\r\n\r\nIconCard.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  brand: string,\r\n};\r\n\r\nexport default IconCard;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"SavedCardDetails_root__AHL9U\",\"savedPaymentMethodTitle\":\"SavedCardDetails_savedPaymentMethodTitle__46UWr h4\",\"savedPaymentMethod\":\"SavedCardDetails_savedPaymentMethod__u1PPd\",\"paymentMethodPlaceholderDesktop\":\"SavedCardDetails_paymentMethodPlaceholderDesktop__VWyOV\",\"paymentMethodPlaceholderMobile\":\"SavedCardDetails_paymentMethodPlaceholderMobile__oTAyN\",\"cardIcon\":\"SavedCardDetails_cardIcon__np9EF\",\"closeIcon\":\"SavedCardDetails_closeIcon__NYTzO marketplaceModalCloseIcon\",\"iconCheckmark\":\"SavedCardDetails_iconCheckmark__6iNZ1\",\"iconCheckmarkHidden\":\"SavedCardDetails_iconCheckmarkHidden__tZk3-\",\"expirationDate\":\"SavedCardDetails_expirationDate__ybg3L\",\"expirationDateExpired\":\"SavedCardDetails_expirationDateExpired__YVysN\",\"cardExpiredText\":\"SavedCardDetails_cardExpiredText__FVIsk h4\",\"menu\":\"SavedCardDetails_menu__fPCfi\",\"menuLabel\":\"SavedCardDetails_menuLabel__0aL8u\",\"menuLabelWrapper\":\"SavedCardDetails_menuLabelWrapper__Hbetx\",\"menuLabelWrapperExpired\":\"SavedCardDetails_menuLabelWrapperExpired__JgCFa\",\"menuContent\":\"SavedCardDetails_menuContent__pEwM2\",\"menuItem\":\"SavedCardDetails_menuItem__rV6z8\",\"menuText\":\"SavedCardDetails_menuText__RvhIz marketplaceMessageFontStyles\",\"menuTextReplaceCard\":\"SavedCardDetails_menuTextReplaceCard__R4qEj marketplaceMessageFontStyles\",\"menuDivider\":\"SavedCardDetails_menuDivider__iKxST h5\",\"savedPaymentMethodDelete\":\"SavedCardDetails_savedPaymentMethodDelete__9drwm h4\",\"modalButtonsWrapper\":\"SavedCardDetails_modalButtonsWrapper__9S0ZF\",\"modalTitle\":\"SavedCardDetails_modalTitle__Nd0HX marketplaceModalTitleStyles\",\"modalMessage\":\"SavedCardDetails_modalMessage__rVCoS marketplaceModalParagraphStyles\",\"cancelCardDelete\":\"SavedCardDetails_cancelCardDelete__hvBiB\"};","import React, { useState } from 'react';\r\nimport { bool, func, number, shape, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { injectIntl, intlShape } from '../../util/reactIntl';\r\nimport {\r\n  IconClose,\r\n  IconCheckmark,\r\n  Button,\r\n  InlineTextButton,\r\n  Menu,\r\n  MenuLabel,\r\n  MenuItem,\r\n  MenuContent,\r\n  Modal,\r\n} from '../../components';\r\n\r\nimport IconCard from './IconCard/IconCard';\r\nimport css from './SavedCardDetails.module.css';\r\n\r\nconst DEFAULT_CARD = 'defaultCard';\r\nconst REPLACE_CARD = 'replaceCard';\r\n\r\nconst SavedCardDetails = props => {\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const [active, setActive] = useState(DEFAULT_CARD);\r\n\r\n  const {\r\n    rootClassName,\r\n    className,\r\n    intl,\r\n    card,\r\n    onChange,\r\n    onDeleteCard,\r\n    onManageDisableScrolling,\r\n    deletePaymentMethodInProgress,\r\n  } = props;\r\n\r\n  const { last4Digits, expirationMonth, expirationYear, brand } = card || {};\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  const paymentMethodPlaceholderDesktop = intl.formatMessage(\r\n    { id: 'SavedCardDetails.savedPaymentMethodPlaceholderDesktop' },\r\n    { last4Digits }\r\n  );\r\n\r\n  const paymentMethodPlaceholderMobile = intl.formatMessage(\r\n    { id: 'SavedCardDetails.savedPaymentMethodPlaceholderMobile' },\r\n    { last4Digits }\r\n  );\r\n\r\n  const paymentMethodPlaceholder = (\r\n    <>\r\n      <span className={css.paymentMethodPlaceholderDesktop}>{paymentMethodPlaceholderDesktop}</span>\r\n      <span className={css.paymentMethodPlaceholderMobile}>{paymentMethodPlaceholderMobile}</span>\r\n    </>\r\n  );\r\n\r\n  const replaceCardText = intl.formatMessage({\r\n    id: 'SavedCardDetails.replaceCardText',\r\n  });\r\n  const replaceCard = (\r\n    <span>\r\n      <IconCard brand=\"none\" className={css.cardIcon} /> {replaceCardText}\r\n    </span>\r\n  );\r\n\r\n  const expiredCardText = intl.formatMessage(\r\n    { id: 'SavedCardDetails.expiredCardText' },\r\n    { last4Digits }\r\n  );\r\n  const expiredText = <div className={css.cardExpiredText}>{expiredCardText}</div>;\r\n\r\n  const isExpired = (expirationMonth, expirationYear) => {\r\n    const currentTime = new Date();\r\n    const currentYear = currentTime.getFullYear();\r\n    const currentMonth = currentTime.getMonth() + 1; //getMonth() method returns the month (from 0 to 11)\r\n\r\n    if (expirationYear < currentYear) {\r\n      return true;\r\n    } else if (expirationYear === currentYear && expirationMonth < currentMonth) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  const isCardExpired =\r\n    expirationMonth && expirationYear && isExpired(expirationMonth, expirationYear);\r\n\r\n  const defaultCard = (\r\n    <div className={css.savedPaymentMethod}>\r\n      <IconCard brand={brand} className={css.cardIcon} />\r\n      {paymentMethodPlaceholder}\r\n      <span className={isCardExpired ? css.expirationDateExpired : css.expirationDate}>\r\n        {expirationMonth}/{expirationYear.toString().substring(2)}\r\n      </span>\r\n    </div>\r\n  );\r\n\r\n  const handleClick = item => e => {\r\n    // Clicking buttons inside a form will call submit\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    setActive(item);\r\n    setMenuOpen(false);\r\n    if (onChange) {\r\n      onChange(item);\r\n    }\r\n  };\r\n\r\n  const onToggleActive = isOpen => {\r\n    setMenuOpen(isOpen);\r\n  };\r\n\r\n  const handleDeleteCard = () => {\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const replaceCardTitle = intl.formatMessage({\r\n    id: 'SavedCardDetails.replaceCardTitle',\r\n  });\r\n  const removeCardModalTitle = intl.formatMessage({ id: 'SavedCardDetails.removeCardModalTitle' });\r\n  const removeCardModalContent = intl.formatMessage(\r\n    { id: 'SavedCardDetails.removeCardModalContent' },\r\n    { last4Digits }\r\n  );\r\n  const cancel = intl.formatMessage({ id: 'SavedCardDetails.cancel' });\r\n  const removeCard = intl.formatMessage({ id: 'SavedCardDetails.removeCard' });\r\n  const deletePaymentMethod = intl.formatMessage({ id: 'SavedCardDetails.deletePaymentMethod' });\r\n\r\n  const showExpired = isCardExpired && active === DEFAULT_CARD;\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <Menu className={css.menu} isOpen={menuOpen} onToggleActive={onToggleActive} useArrow={false}>\r\n        <MenuLabel className={css.menuLabel}>\r\n          <div className={showExpired ? css.menuLabelWrapperExpired : css.menuLabelWrapper}>\r\n            {active === DEFAULT_CARD ? defaultCard : replaceCard}\r\n          </div>\r\n        </MenuLabel>\r\n\r\n        <MenuContent rootClassName={css.menuContent}>\r\n          <MenuItem key=\"first item\" className={css.menuItem}>\r\n            <IconCheckmark\r\n              className={active === DEFAULT_CARD ? css.iconCheckmark : css.iconCheckmarkHidden}\r\n              size=\"small\"\r\n            />\r\n            <InlineTextButton className={css.menuText} onClick={handleClick(DEFAULT_CARD)}>\r\n              {defaultCard}\r\n            </InlineTextButton>\r\n          </MenuItem>\r\n          <MenuItem key=\"divider\" className={css.menuDivider}>\r\n            {replaceCardTitle}\r\n          </MenuItem>\r\n          <MenuItem key=\"second item\" className={css.menuItem}>\r\n            <IconCheckmark\r\n              className={active === REPLACE_CARD ? css.iconCheckmark : css.iconCheckmarkHidden}\r\n              size=\"small\"\r\n            />\r\n            <InlineTextButton\r\n              className={css.menuTextReplaceCard}\r\n              onClick={handleClick(REPLACE_CARD)}\r\n            >\r\n              {replaceCard}\r\n            </InlineTextButton>\r\n          </MenuItem>\r\n        </MenuContent>\r\n      </Menu>\r\n      {showExpired && !menuOpen ? expiredText : null}\r\n\r\n      {onDeleteCard && active !== REPLACE_CARD ? (\r\n        <InlineTextButton onClick={handleDeleteCard} className={css.savedPaymentMethodDelete}>\r\n          <IconClose rootClassName={css.closeIcon} size=\"small\" />\r\n          {deletePaymentMethod}\r\n        </InlineTextButton>\r\n      ) : null}\r\n\r\n      {onManageDisableScrolling ? (\r\n        <Modal\r\n          id=\"VerifyDeletingPaymentMethod\"\r\n          isOpen={isModalOpen}\r\n          onClose={() => {\r\n            setIsModalOpen(false);\r\n          }}\r\n          usePortal\r\n          contentClassName={css.modalContent}\r\n          onManageDisableScrolling={onManageDisableScrolling}\r\n        >\r\n          <div>\r\n            <div className={css.modalTitle}>{removeCardModalTitle}</div>\r\n            <p className={css.modalMessage}>{removeCardModalContent}</p>\r\n            <div className={css.modalButtonsWrapper}>\r\n              <div\r\n                onClick={() => setIsModalOpen(false)}\r\n                className={css.cancelCardDelete}\r\n                tabIndex=\"0\"\r\n              >\r\n                {cancel}\r\n              </div>\r\n              <Button onClick={onDeleteCard} inProgress={deletePaymentMethodInProgress}>\r\n                {removeCard}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nSavedCardDetails.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  card: null,\r\n  onChange: null,\r\n  onDeleteCard: null,\r\n  deletePaymentMethodInProgress: false,\r\n  onManageDisableScrolling: null,\r\n};\r\n\r\nSavedCardDetails.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  intl: intlShape.isRequired,\r\n  card: shape({\r\n    brand: string.isRequired,\r\n    expirationMonth: number.isRequired,\r\n    expirationYear: number.isRequired,\r\n    last4Digits: string.isRequired,\r\n  }),\r\n  onChange: func,\r\n  onDeleteCard: func,\r\n  onManageDisableScrolling: func,\r\n  deletePaymentMethodInProgress: bool,\r\n};\r\n\r\nexport default injectIntl(SavedCardDetails);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"unsupportedCountryError\":\"StripeBankAccountTokenInputField_unsupportedCountryError__oFg53\",\"root\":\"StripeBankAccountTokenInputField_root__xTRmw\",\"input\":\"StripeBankAccountTokenInputField_input__4BFHk\",\"error\":\"StripeBankAccountTokenInputField_error__el0gh\",\"inputError\":\"StripeBankAccountTokenInputField_inputError__MgxgI\",\"longForm\":\"StripeBankAccountTokenInputField_longForm__Z3gsR\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from '../../util/reactIntl';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './StripeBankAccountTokenInputField.module.css';\r\n\r\nconst StripeBankAccountRequiredInput = props => {\r\n  const {\r\n    className,\r\n    rootClassName,\r\n    inputType,\r\n    formName,\r\n    value,\r\n    placeholder,\r\n    onChange,\r\n    onFocus,\r\n    onBlur,\r\n    isTouched,\r\n    showStripeError,\r\n    inputError,\r\n    disabled,\r\n    showInColumns,\r\n  } = props;\r\n\r\n  const showInputError = isTouched && !!inputError;\r\n\r\n  const classes = classNames(rootClassName || css.input, className, {\r\n    [css.inputSuccess]: !!value,\r\n    [css.inputError]: showInputError || showStripeError,\r\n  });\r\n\r\n  const columnsClass = showInColumns ? css.longForm : null;\r\n\r\n  const inputProps = {\r\n    className: classes,\r\n    id: `${formName}.bankAccountToken.${inputType}`,\r\n    value,\r\n    placeholder,\r\n    onChange,\r\n    onFocus,\r\n    onBlur,\r\n    disabled,\r\n  };\r\n\r\n  const errorMessage = <p className={css.error}>{inputError}</p>;\r\n\r\n  return (\r\n    <div className={classNames(classes, columnsClass)}>\r\n      <label htmlFor={inputProps.id}>\r\n        <FormattedMessage id={`StripeBankAccountTokenInputField.${inputType}.label`} />\r\n      </label>\r\n      <input {...inputProps} />\r\n      {showInputError ? errorMessage : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst { bool, func, string } = PropTypes;\r\n\r\nStripeBankAccountRequiredInput.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  inputError: null,\r\n  disabled: false,\r\n};\r\n\r\nStripeBankAccountRequiredInput.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  inputType: string.isRequired,\r\n  formName: string.isRequired,\r\n  value: string.isRequired,\r\n  placeholder: string.isRequired,\r\n  onChange: func.isRequired,\r\n  onFocus: func.isRequired,\r\n  onBlur: func.isRequired,\r\n  isTouched: bool.isRequired,\r\n  showStripeError: bool.isRequired,\r\n  inputError: string,\r\n  disabled: bool,\r\n};\r\n\r\nexport default StripeBankAccountRequiredInput;\r\n","/* eslint-disable no-underscore-dangle */\r\nimport React, { Component } from 'react';\r\nimport { bool, func, shape, string } from 'prop-types';\r\nimport { Field } from 'react-final-form';\r\nimport classNames from 'classnames';\r\nimport debounce from 'lodash/debounce';\r\n\r\nimport { useConfiguration } from '../../context/configurationContext';\r\nimport { useIntl, FormattedMessage } from '../../util/reactIntl';\r\n\r\nimport {\r\n  BANK_ACCOUNT_INPUTS,\r\n  formatFieldMessage,\r\n  requiredInputs,\r\n  mapInputsToStripeAccountKeys,\r\n  getSupportedCountryCodes,\r\n  translateStripeError,\r\n} from './StripeBankAccountTokenInputField.util';\r\nimport StripeBankAccountRequiredInput from './StripeBankAccountRequiredInput';\r\nimport css from './StripeBankAccountTokenInputField.module.css';\r\n\r\n// Since final-form tracks the onBlur event for marking the field as\r\n// touched (which triggers possible error validation rendering), only\r\n// trigger the event asynchronously when no other input within this\r\n// component has received focus.\r\n//\r\n// This prevents showing the validation error when the user selects a\r\n// value and moves on to another input within this component.\r\nconst BLUR_TIMEOUT = 100;\r\nconst DEBOUNCE_WAIT_TIME = 1000;\r\nconst MIN_INPUT_COUNT_FOR_TWO_COLUMNS = 6;\r\n\r\nclass TokenInputFieldComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const intl = props.intl;\r\n\r\n    // Initial state is needed when country (and currency) changes and values need to be cleared.\r\n    this.initialState = {\r\n      stripeError: null,\r\n    };\r\n\r\n    // Fill initialState with input type specific data\r\n    BANK_ACCOUNT_INPUTS.forEach(inputType => {\r\n      this.initialState[inputType] = {\r\n        value: '',\r\n        touched: false,\r\n        error: formatFieldMessage(intl, inputType, 'required'),\r\n      };\r\n    });\r\n\r\n    this.state = this.initialState;\r\n    this.blurTimeoutId = null;\r\n\r\n    // We keep track of the mounted state of the component to avoid\r\n    // setting state or calling callback props if a createToken call\r\n    // finishes after the component is already removed.\r\n    //\r\n    // The correct solution would be to cancel all ongoing operations\r\n    // in componentWillUnmount, but since Promises don't have a\r\n    // cancellation mechanism yet, we must use a different solution\r\n    // for now.\r\n    //\r\n    // See: https://facebook.github.io/react/blog/2015/12/16/ismounted-antipattern.html\r\n    this._isMounted = false;\r\n\r\n    this.requestToken = debounce(this.requestToken.bind(this), DEBOUNCE_WAIT_TIME);\r\n\r\n    this.handleInputChange = this.handleInputChange.bind(this);\r\n    this.handleInputFocus = this.handleInputFocus.bind(this);\r\n    this.handleInputBlur = this.handleInputBlur.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!window.Stripe) {\r\n      throw new Error('Stripe must be loaded for StripeBankAccountTokenInputField');\r\n    }\r\n    this.stripe = window.Stripe(this.props.config.stripe.publishableKey);\r\n    this._isMounted = true;\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const countryChanged = this.props.country !== prevProps.country;\r\n    const currencyChanged = this.props.currency !== prevProps.currency;\r\n    if (countryChanged || currencyChanged) {\r\n      // Clear the possible input values from the state\r\n      // if the given country or currency changes.\r\n      this.setState(this.initialState);\r\n      this.props.input.onChange('');\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n    window.clearTimeout(this.blurTimeoutId);\r\n  }\r\n\r\n  /**\r\n   * Request a token from the Stripe API with the given bank account data\r\n   *\r\n   * This function validates the given data and triggers onChange\r\n   * events for the parent form to handle.\r\n   *\r\n   *\r\n   * @param {Object} values - values from different input types\r\n   */\r\n  requestToken(values) {\r\n    const {\r\n      country,\r\n      currency,\r\n      input: { onChange },\r\n      intl,\r\n      config,\r\n    } = this.props;\r\n\r\n    // First we have to clear the current token value so the parent\r\n    // form doesn't submit with an old value.\r\n    onChange('');\r\n\r\n    const supportedCountries = config.stripe.supportedCountries;\r\n    const inputsNeeded = requiredInputs(country, supportedCountries);\r\n    const missingValues = inputsNeeded.filter(inputType => !values[inputType]);\r\n    const invalidValues = inputsNeeded.filter(inputType => !!this.state[inputType].error);\r\n\r\n    const numbersMissing = missingValues.length > 0;\r\n    const numbersInvalid = invalidValues.length > 0;\r\n\r\n    if (numbersMissing || numbersInvalid) {\r\n      // Incomplete/invalid info, not requesting token\r\n      return;\r\n    }\r\n\r\n    // Gather data to be sent to Stripe (to create bank account)\r\n    let accountData = {\r\n      country,\r\n      currency,\r\n    };\r\n\r\n    // Include input values with correct stripe keys\r\n    const inputValueObj = mapInputsToStripeAccountKeys(country, values);\r\n    accountData = { ...accountData, ...inputValueObj };\r\n\r\n    // https://stripe.com/docs/stripe-js/reference#collecting-bank-account-details\r\n    this.stripe\r\n      .createToken('bank_account', accountData)\r\n      .then(result => {\r\n        if (result.error) {\r\n          const e = new Error(result.error.message);\r\n          e.stripeError = result.error;\r\n          throw e;\r\n        }\r\n        return result.token.id;\r\n      })\r\n      .then(token => {\r\n        // Check if value has changed during async call.\r\n        const changedValues = inputsNeeded.filter(\r\n          inputType => values[inputType] !== this.state[inputType].value\r\n        );\r\n        const valuesAreUnchanged = changedValues.length === 0;\r\n\r\n        // Handle response only if the input values haven't changed\r\n        if (this._isMounted && valuesAreUnchanged) {\r\n          this.setState(prevState => {\r\n            return { stripeError: null };\r\n          });\r\n\r\n          onChange(token);\r\n        }\r\n      })\r\n      .catch(e => {\r\n        if (!e.stripeError) {\r\n          throw e;\r\n        }\r\n        if (this._isMounted) {\r\n          this.setState({\r\n            stripeError: translateStripeError(country, supportedCountries, intl, e.stripeError),\r\n          });\r\n        }\r\n      });\r\n  }\r\n\r\n  handleInputChange(e, inputType, country, supportedCountries, intl) {\r\n    const value = e.target.value;\r\n\r\n    let inputError = null;\r\n\r\n    // Validate the changed routing number\r\n    if (!value) {\r\n      inputError = intl.formatMessage({\r\n        id: `StripeBankAccountTokenInputField.${inputType}.required`,\r\n      });\r\n    }\r\n\r\n    // Save changes to the state\r\n    this.setState(prevState => {\r\n      const input = { ...prevState[inputType], value, error: inputError };\r\n      return {\r\n        [inputType]: input,\r\n        stripeError: null,\r\n      };\r\n    });\r\n\r\n    // Request new bank account token\r\n    const unChangedValues = requiredInputs(country, supportedCountries).reduce(\r\n      (acc, iType) => ({ ...acc, [iType]: this.state[iType].value }),\r\n      {}\r\n    );\r\n    this.requestToken({ ...unChangedValues, [inputType]: value });\r\n  }\r\n\r\n  handleInputFocus() {\r\n    window.clearTimeout(this.blurTimeoutId);\r\n  }\r\n\r\n  handleInputBlur(inputType) {\r\n    this.setState(prevState => {\r\n      const inputData = { ...prevState[inputType], touched: true };\r\n      return { [inputType]: inputData };\r\n    });\r\n    window.clearTimeout(this.blurTimeoutId);\r\n    this.blurTimeoutId = window.setTimeout(this.props.input.onBlur, BLUR_TIMEOUT);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      rootClassName,\r\n      className,\r\n      country,\r\n      formName,\r\n      meta: formMeta,\r\n      intl,\r\n      disabled,\r\n      config,\r\n    } = this.props;\r\n\r\n    if (!getSupportedCountryCodes(config.stripe.supportedCountries).includes(country)) {\r\n      return (\r\n        <div className={css.unsupportedCountryError}>\r\n          <FormattedMessage\r\n            id=\"StripeBankAccountTokenInputField.unsupportedCountry\"\r\n            values={{ country }}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const supportedCountries = config.stripe.supportedCountries;\r\n    const inputConfiguration = requiredInputs(country, supportedCountries);\r\n    const hasInputErrors = inputConfiguration.some(inputType => {\r\n      return (this.state[inputType].touched || formMeta.touched) && !!this.state[inputType].error;\r\n    });\r\n\r\n    // Only show Stripe and form errors when the fields don't have\r\n    // more specific errors.\r\n    const showingFieldErrors = hasInputErrors;\r\n    const showStripeError = !!(this.state.stripeError && !showingFieldErrors && formMeta.touched);\r\n    const showFormError = !!(\r\n      formMeta.touched &&\r\n      formMeta.error &&\r\n      !showingFieldErrors &&\r\n      !showStripeError\r\n    );\r\n\r\n    // E.g. Japan has 6 fields in the bank account details so we want to\r\n    // show the inputs in two columns on bigger screens\r\n    const showInColumns = inputConfiguration.length >= MIN_INPUT_COUNT_FOR_TWO_COLUMNS;\r\n\r\n    return (\r\n      <div className={classNames(rootClassName || css.root, className)}>\r\n        {inputConfiguration.map(inputType => {\r\n          return (\r\n            <StripeBankAccountRequiredInput\r\n              disabled={disabled}\r\n              key={inputType}\r\n              inputType={inputType}\r\n              formName={formName}\r\n              value={this.state[inputType].value}\r\n              placeholder={formatFieldMessage(intl, inputType, 'placeholder')}\r\n              onChange={e =>\r\n                this.handleInputChange(e, inputType, country, supportedCountries, intl)\r\n              }\r\n              onFocus={this.handleInputFocus}\r\n              onBlur={() => this.handleInputBlur(inputType)}\r\n              isTouched={this.state[inputType].touched || formMeta.touched}\r\n              showStripeError={showStripeError}\r\n              inputError={this.state[inputType].error}\r\n              showInColumns={showInColumns}\r\n            />\r\n          );\r\n        })}\r\n\r\n        {showStripeError ? <span className={css.error}>{this.state.stripeError}</span> : null}\r\n        {showFormError ? <span className={css.error}>{formMeta.error}</span> : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst EnhancedTokenInputFieldComponent = props => {\r\n  const config = useConfiguration();\r\n  const intl = useIntl();\r\n  return <TokenInputFieldComponent config={config} intl={intl} {...props} />;\r\n};\r\n\r\nEnhancedTokenInputFieldComponent.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  disabled: false,\r\n};\r\n\r\nEnhancedTokenInputFieldComponent.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  country: string.isRequired,\r\n  currency: string.isRequired,\r\n  formName: string.isRequired,\r\n  disabled: bool,\r\n\r\n  input: shape({\r\n    onChange: func.isRequired,\r\n    onBlur: func.isRequired,\r\n  }).isRequired,\r\n  meta: shape({\r\n    touched: bool.isRequired,\r\n    error: string,\r\n  }).isRequired,\r\n};\r\n\r\nconst StripeBankAccountTokenInputField = props => {\r\n  return <Field component={EnhancedTokenInputFieldComponent} {...props} />;\r\n};\r\n\r\nexport default StripeBankAccountTokenInputField;\r\n","// Possible inputs Stripe might require for a country\r\n\r\n// Bank account number (used in countries where IBAN is not in use)\r\nexport const ACCOUNT_NUMBER = 'accountNumber';\r\n// Required for Japan\r\nexport const ACCOUNT_OWNER_NAME = 'accountOwnerName';\r\n// Australian equivalent for routing number\r\nexport const BSB = 'bsb';\r\n// Needed for creating full routing number in Canada\r\nexport const INSTITUTION_NUMBER = 'institutionNumber';\r\n// Needed for creating full routing number in Canada\r\nexport const TRANSIT_NUMBER = 'transitNumber';\r\n// Needed for creating full routing number in Hong Kong\r\nexport const CLEARING_CODE = 'clearingCode';\r\n// Needed for creating full routing number in Hong Kong and Singapore\r\nexport const BRANCH_CODE = 'branchCode';\r\n// Required for Japan\r\nexport const BRANCH_NAME = 'branchName';\r\n// Required for Japan\r\nexport const BANK_NAME = 'bankName';\r\n// Needed for creating full routing number in e.g. Singapore\r\nexport const BANK_CODE = 'bankCode';\r\n// Clave Bancaria Estandarizada (standardized banking cipher) used in Mexico\r\nexport const CLABE = 'clabe';\r\n// International bank account number (e.g. EU countries use this)\r\nexport const IBAN = 'iban';\r\n// Routing number to separate bank account in different areas\r\nexport const ROUTING_NUMBER = 'routingNumber';\r\n// British equivalent for routing number\r\nexport const SORT_CODE = 'sortCode';\r\n\r\n// Currently supported bank account inputs\r\n// the order here matters: account number input is asked after routing number and its equivalents\r\nexport const BANK_ACCOUNT_INPUTS = [\r\n  BSB,\r\n  TRANSIT_NUMBER,\r\n  INSTITUTION_NUMBER,\r\n  CLEARING_CODE,\r\n  BANK_NAME,\r\n  BANK_CODE,\r\n  BRANCH_NAME,\r\n  BRANCH_CODE,\r\n  SORT_CODE,\r\n  ROUTING_NUMBER,\r\n  ACCOUNT_OWNER_NAME,\r\n  ACCOUNT_NUMBER,\r\n  IBAN,\r\n  CLABE,\r\n];\r\n\r\nexport const getSupportedCountryCodes = supportedCountries => supportedCountries.map(c => c.code);\r\n\r\n/**\r\n * Country specific Stripe configurations\r\n *\r\n * @param {String} countryCode - string representing country code (e.g. 'US', 'FI')\r\n *\r\n * @return {Object} configurations\r\n */\r\nexport const stripeCountryConfigs = (countryCode, supportedCountries) => {\r\n  const country = supportedCountries.find(c => c.code === countryCode);\r\n\r\n  if (!country) {\r\n    throw new Error(`Country code not found in Stripe config ${countryCode}`);\r\n  }\r\n  return country;\r\n};\r\n\r\n/**\r\n * Return all the inputs that are required in given country\r\n *\r\n * @param {String} countryCode - string representing country code (e.g. 'US', 'FI')\r\n *\r\n * @return {Array<String>} array containing different input 'types'\r\n * (e.g. ['routingNumber', 'accountNumber'])\r\n */\r\nexport const requiredInputs = (countryCode, supportedCountries) => {\r\n  const bankAccountInputs = stripeCountryConfigs(countryCode, supportedCountries).accountConfig;\r\n  return BANK_ACCOUNT_INPUTS.filter(inputType => bankAccountInputs[inputType]);\r\n};\r\n\r\n/**\r\n * Translate input type to human readable string\r\n *\r\n * @param {String} inputType - string representing one of the required bank account input\r\n * @param {Object} intl - translation library to format messages\r\n *\r\n * @return {String} formatted message\r\n */\r\nexport const inputTypeToString = (inputType, intl) => {\r\n  if (BANK_ACCOUNT_INPUTS.includes(inputType)) {\r\n    return intl.formatMessage({ id: `StripeBankAccountTokenInputField.${inputType}.inline` });\r\n  } else {\r\n    throw new Error(`Unknown inputType (${inputType}) given to validator`);\r\n  }\r\n};\r\n\r\n/**\r\n * Translate Stripe error\r\n *\r\n * @param {String} country - string representing country code (e.g. 'US', 'FI')\r\n * @param {Object} intl - translation library to format errors\r\n * @param {Object} stripeError - actual Stripe error, which functions as default message,\r\n * if no translation can be found\r\n *\r\n * @return {String} formatted Stripe error\r\n */\r\nexport const translateStripeError = (country, supportedCountries, intl, stripeError) => {\r\n  console.error('Stripe error:', stripeError); // eslint-disable-line no-console\r\n  const inputs = requiredInputs(country, supportedCountries);\r\n  const ibanRequired = inputs[IBAN];\r\n  if (ibanRequired) {\r\n    return intl.formatMessage(\r\n      {\r\n        id: 'StripeBankAccountTokenInputField.genericStripeErrorIban',\r\n        defaultMessage: stripeError.message,\r\n      },\r\n      { country }\r\n    );\r\n  } else {\r\n    const inputsAsStrings = inputs.map(inputType => inputTypeToString(inputType, intl));\r\n\r\n    const andTranslated = intl.formatMessage({\r\n      id: 'StripeBankAccountTokenInputField.andBeforeLastItemInAList',\r\n    });\r\n    // Print required inputs (to be included to error message)\r\n    // e.g. \"bank code, branch code and account number\"\r\n    const inputsInString =\r\n      inputsAsStrings.length > 1\r\n        ? inputsAsStrings.join(', ').replace(/,([^,]*)$/, `${andTranslated} $1`)\r\n        : inputsAsStrings[0];\r\n\r\n    return intl.formatMessage(\r\n      {\r\n        id: 'StripeBankAccountTokenInputField.genericStripeError',\r\n        defaultMessage: stripeError.message,\r\n      },\r\n      { country, inputs: inputsInString }\r\n    );\r\n  }\r\n};\r\n\r\n/**\r\n * Map inputs to correct Stripe keys\r\n *\r\n * @param {String} inputType - input type (e.g. 'routingNumber', 'IBAN')\r\n * @param {String} value - input value\r\n *\r\n * @return {Object} key - value in Object literal.\r\n */\r\nexport const mapInputsToStripeAccountKeys = (country, values) => {\r\n  // Stripe documentation speaks about actual bank account terms of different countries\r\n  // (like BSB, sort code, routing number), but all of those get mapped to one of\r\n  // the two different request keys: routing_number or account_number\r\n  // See: https://stripe.com/docs/payouts vs https://stripe.com/docs/connect/testing\r\n\r\n  // We use those country specific terms since we want to show correct labels and errors for users,\r\n  // so this mapping is needed before sending data to Stripe.\r\n\r\n  // Stripe fails if there are spaces within the number, this is\r\n  // why we have to clean value up first.\r\n\r\n  switch (country) {\r\n    case 'AT':\r\n    case 'BE':\r\n    case 'BG':\r\n    case 'CY':\r\n    case 'CZ':\r\n    case 'DK':\r\n    case 'EE':\r\n    case 'FI':\r\n    case 'FR':\r\n    case 'DE':\r\n    case 'GR':\r\n    case 'IE':\r\n    case 'IT':\r\n    case 'LV':\r\n    case 'LT':\r\n    case 'LU':\r\n    case 'MT':\r\n    case 'NL':\r\n    case 'PL':\r\n    case 'PT':\r\n    case 'RO':\r\n    case 'SK':\r\n    case 'SI':\r\n    case 'ES':\r\n    case 'SE':\r\n    case 'CH':\r\n    case 'NO':\r\n      return { account_number: cleanedString(values[IBAN]) };\r\n    case 'NZ':\r\n      // NZ account number is typically presented in the format xx-xxxx-xxxxxxx-xxx\r\n      // '-' separators must be removed before sending value to Stripe API\r\n      return { account_number: cleanedString(values[ACCOUNT_NUMBER]).replace(/-/g, '') };\r\n    case 'AU':\r\n      return {\r\n        routing_number: cleanedString(values[BSB]),\r\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\r\n      };\r\n    case 'CA':\r\n      return {\r\n        routing_number: cleanedString(values[TRANSIT_NUMBER]).concat(\r\n          cleanedString(values[INSTITUTION_NUMBER])\r\n        ),\r\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\r\n      };\r\n    case 'GB':\r\n      return {\r\n        routing_number: cleanedString(values[SORT_CODE]),\r\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\r\n      };\r\n    case 'US':\r\n      return {\r\n        routing_number: cleanedString(values[ROUTING_NUMBER]),\r\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\r\n      };\r\n    case 'SG':\r\n      return {\r\n        routing_number: cleanedString(values[BANK_CODE]).concat(\r\n          '-',\r\n          cleanedString(values[BRANCH_CODE])\r\n        ),\r\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\r\n      };\r\n    case 'HK':\r\n      return {\r\n        routing_number: cleanedString(values[CLEARING_CODE]).concat(\r\n          '-',\r\n          cleanedString(values[BRANCH_CODE])\r\n        ),\r\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\r\n      };\r\n\r\n    case 'JP':\r\n      return {\r\n        bank_name: values[BANK_NAME],\r\n        branch_name: values[BRANCH_NAME],\r\n        routing_number: cleanedString(values[BANK_CODE]).concat(values[BRANCH_CODE]),\r\n        account_number: cleanedString(values[ACCOUNT_NUMBER]),\r\n        account_holder_name: values[ACCOUNT_OWNER_NAME],\r\n      };\r\n\r\n    case 'MX':\r\n      return {\r\n        account_number: cleanedString(values[CLABE]),\r\n      };\r\n    default:\r\n      throw new Error(`Not supported country (${country}) given to validator`);\r\n  }\r\n};\r\n\r\n/**\r\n * Translate messages related to different input types.\r\n *\r\n * Check translations for StripeBankAccountTokenInputField\r\n * from [rootFolder]/src/translations/en.json\r\n *\r\n * @param {Object} intl - translation library to format errors\r\n * @param {String} inputType - input type (e.g. 'routingNumber', 'IBAN')\r\n * @param {String} messageType - one of the different messages related to inputType\r\n * (e.g. 'inline', 'invalid', 'label', 'placeholder', 'required')\r\n *\r\n * @return {Object} key - value in Object literal.\r\n */\r\nexport const formatFieldMessage = (intl, inputType, messageType) => {\r\n  if (!BANK_ACCOUNT_INPUTS.includes(inputType)) {\r\n    throw new Error(`inputType (${inputType}) must be one of ${BANK_ACCOUNT_INPUTS}`);\r\n  }\r\n\r\n  return intl.formatMessage({\r\n    id: `StripeBankAccountTokenInputField.${inputType}.${messageType}`,\r\n  });\r\n};\r\n\r\n/**\r\n * Remove all whitespace from the given string.\r\n *\r\n * @param {String} str - target string\r\n *\r\n * @return {String} cleaned string\r\n */\r\nexport const cleanedString = str => {\r\n  return str ? str.replace(/\\s/g, '') : '';\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StripeConnectAccountForm_root__K-kt1\",\"disabled\":\"StripeConnectAccountForm_disabled__tZlZK\",\"sectionContainer\":\"StripeConnectAccountForm_sectionContainer__BHKVm\",\"formRow\":\"StripeConnectAccountForm_formRow__555r0\",\"radioButtonRow\":\"StripeConnectAccountForm_radioButtonRow__JwMOO\",\"selectCountry\":\"StripeConnectAccountForm_selectCountry__7Q5HP\",\"error\":\"StripeConnectAccountForm_error__dPkW6 marketplaceModalPasswordMargins\",\"termsText\":\"StripeConnectAccountForm_termsText__bdXYL marketplaceModalHelperText\",\"termsLink\":\"StripeConnectAccountForm_termsLink__nnt7o marketplaceModalHelperLink\",\"bankDetailsStripeField\":\"StripeConnectAccountForm_bankDetailsStripeField__gM9Ch\",\"missingStripeKey\":\"StripeConnectAccountForm_missingStripeKey__9D6dP\",\"accountInformationTitle\":\"StripeConnectAccountForm_accountInformationTitle__wxX7B\",\"savedCountry\":\"StripeConnectAccountForm_savedCountry__+mUI8\",\"savedInformation\":\"StripeConnectAccountForm_savedInformation__CviR+\",\"savedBankAccount\":\"StripeConnectAccountForm_savedBankAccount__BwGoJ marketplaceInputStyles\"};","import React, { useState, useEffect } from 'react';\r\nimport { bool, func, object, shape, string } from 'prop-types';\r\nimport { compose } from 'redux';\r\nimport { Field, Form as FinalForm } from 'react-final-form';\r\nimport arrayMutators from 'final-form-arrays';\r\nimport classNames from 'classnames';\r\n\r\nimport { useConfiguration } from '../../context/configurationContext';\r\nimport { FormattedMessage, injectIntl, intlShape } from '../../util/reactIntl';\r\nimport { useRouteConfiguration } from '../../context/routeConfigurationContext';\r\nimport { createResourceLocatorString } from '../../util/routes';\r\nimport { isStripeError } from '../../util/errors';\r\nimport * as validators from '../../util/validators';\r\nimport { propTypes } from '../../util/types';\r\n\r\nimport {\r\n  H4,\r\n  Button,\r\n  ExternalLink,\r\n  InlineTextButton,\r\n  FieldSelect,\r\n  FieldRadioButton,\r\n  Form,\r\n  StripeBankAccountTokenInputField,\r\n} from '../../components';\r\n\r\nimport css from './StripeConnectAccountForm.module.css';\r\n\r\nconst getSupportedCountryCodes = supportedCountries => supportedCountries.map(c => c.code);\r\nconst stripeCountryConfigs = (countryCode, supportedCountries) => {\r\n  const country = supportedCountries.find(c => c.code === countryCode);\r\n\r\n  if (!country) {\r\n    throw new Error(`Country code not found in Stripe config ${countryCode}`);\r\n  }\r\n  return country;\r\n};\r\n\r\nconst countryCurrency = (countryCode, supportedCountries) => {\r\n  const country = stripeCountryConfigs(countryCode, supportedCountries);\r\n  return country.currency;\r\n};\r\n\r\n// Hidden input field\r\nconst FieldHidden = props => {\r\n  const { name } = props;\r\n  return (\r\n    <Field id={name} name={name} type=\"hidden\" className={css.unitTypeHidden}>\r\n      {fieldRenderProps => <input {...fieldRenderProps?.input} />}\r\n    </Field>\r\n  );\r\n};\r\n\r\nconst CreateStripeAccountFields = props => {\r\n  const routeConfiguration = useRouteConfiguration();\r\n  const {\r\n    disabled,\r\n    countryLabel,\r\n    showAsRequired,\r\n    form,\r\n    values,\r\n    intl,\r\n    currentUserId,\r\n    marketplaceRootURL,\r\n    supportedCountries,\r\n    defaultMCC,\r\n  } = props;\r\n\r\n  /*\r\n  We pass some default values to Stripe when creating a new Stripe account in order to reduce couple of steps from Connect Onboarding form.\r\n  - businessProfileURL: user's profile URL\r\n  - businessProfileMCC: default MCC code from stripe-config.js\r\n  - accountToken (https://stripe.com/docs/connect/account-tokens) with following information:\r\n    * accountType: individual or business\r\n    * tos_shown_and_accepted: true\r\n  Only country and bank account token are mandatory values. If you decide to remove the additional default values listed here, remember to update the `createStripeAccount` function in `ducks/stripeConnectAccount.duck.js`.\r\n  */\r\n\r\n  useEffect(() => {\r\n    // Use user profile page as business_url on this marketplace\r\n    // or just fake it if it's dev environment using Stripe test endpoints\r\n    // because Stripe will not allow passing a localhost URL\r\n    const hasBusinessURL = values && values.businessProfileURL;\r\n    if (!hasBusinessURL && currentUserId) {\r\n      const pathToProfilePage = uuid =>\r\n        createResourceLocatorString('ProfilePage', routeConfiguration, { id: uuid }, {});\r\n      const hasMarketplaceRootURL = !!marketplaceRootURL;\r\n      const rootUrl = hasMarketplaceRootURL ? marketplaceRootURL.replace(/\\/$/, '') : null;\r\n      const defaultBusinessURL =\r\n        hasMarketplaceRootURL && !rootUrl.includes('localhost')\r\n          ? `${rootUrl}${pathToProfilePage(currentUserId.uuid)}`\r\n          : `https://test-marketplace.com${pathToProfilePage(currentUserId.uuid)}`;\r\n      form.change('businessProfileURL', defaultBusinessURL);\r\n    }\r\n\r\n    const hasMCC = values && values.businessProfileMCC;\r\n    // Use default merchant category code (MCC) from stripe-config.js\r\n    if (!hasMCC && defaultMCC) {\r\n      form.change('businessProfileMCC', defaultMCC);\r\n    }\r\n  }, []);\r\n\r\n  const country = values.country;\r\n\r\n  return (\r\n    <div className={css.sectionContainer}>\r\n      <H4 as=\"h3\">\r\n        <FormattedMessage id=\"StripeConnectAccountForm.accountTypeTitle\" />\r\n      </H4>\r\n      <div className={css.radioButtonRow}>\r\n        <FieldRadioButton\r\n          id=\"individual\"\r\n          name=\"accountType\"\r\n          label={intl.formatMessage({\r\n            id: 'StripeConnectAccountForm.individualAccount',\r\n          })}\r\n          value=\"individual\"\r\n          showAsRequired={showAsRequired}\r\n        />\r\n        <FieldRadioButton\r\n          id=\"company\"\r\n          name=\"accountType\"\r\n          label={intl.formatMessage({ id: 'StripeConnectAccountForm.companyAccount' })}\r\n          value=\"company\"\r\n          showAsRequired={showAsRequired}\r\n        />\r\n      </div>\r\n\r\n      <FieldHidden name=\"businessProfileURL\" />\r\n      <FieldHidden name=\"businessProfileMCC\" />\r\n\r\n      <FieldSelect\r\n        id=\"country\"\r\n        name=\"country\"\r\n        disabled={disabled}\r\n        className={css.selectCountry}\r\n        autoComplete=\"country\"\r\n        label={countryLabel}\r\n        validate={validators.required(\r\n          intl.formatMessage({\r\n            id: 'StripeConnectAccountForm.countryRequired',\r\n          })\r\n        )}\r\n      >\r\n        <option disabled value=\"\">\r\n          {intl.formatMessage({ id: 'StripeConnectAccountForm.countryPlaceholder' })}\r\n        </option>\r\n        {getSupportedCountryCodes(supportedCountries).map(c => (\r\n          <option key={c} value={c}>\r\n            {intl.formatMessage({ id: `StripeConnectAccountForm.countryNames.${c}` })}\r\n          </option>\r\n        ))}\r\n      </FieldSelect>\r\n\r\n      {country ? (\r\n        <StripeBankAccountTokenInputField\r\n          className={css.bankDetailsStripeField}\r\n          disabled={disabled}\r\n          name=\"bankAccountToken\"\r\n          formName=\"StripeConnectAccountForm\"\r\n          country={country}\r\n          currency={countryCurrency(country, supportedCountries)}\r\n          validate={validators.required(' ')}\r\n        />\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst UpdateStripeAccountFields = props => {\r\n  const {\r\n    disabled,\r\n    countryLabel,\r\n    savedCountry,\r\n    showCardUpdateInput,\r\n    submitInProgress,\r\n    setShowCardUpdateInput,\r\n    stripeBankAccountLastDigits,\r\n    supportedCountries,\r\n  } = props;\r\n\r\n  return (\r\n    <div className={css.savedInformation}>\r\n      <label className={css.accountInformationTitle}>{countryLabel}</label>\r\n      <div className={css.savedCountry}>\r\n        <FormattedMessage id={`StripeConnectAccountForm.countryNames.${savedCountry}`} />\r\n      </div>\r\n      <label className={css.accountInformationTitle}>\r\n        <FormattedMessage id=\"StripeConnectAccountForm.bankAccountLabel\" />\r\n      </label>\r\n\r\n      {showCardUpdateInput && savedCountry ? (\r\n        <StripeBankAccountTokenInputField\r\n          className={css.bankDetailsStripeField}\r\n          disabled={disabled}\r\n          name=\"bankAccountToken\"\r\n          formName=\"StripeConnectAccountForm\"\r\n          country={savedCountry}\r\n          currency={countryCurrency(savedCountry, supportedCountries)}\r\n          validate={validators.required(' ')}\r\n        />\r\n      ) : !submitInProgress ? (\r\n        <InlineTextButton\r\n          className={css.savedBankAccount}\r\n          onClick={() => setShowCardUpdateInput(true)}\r\n        >\r\n           {stripeBankAccountLastDigits}\r\n        </InlineTextButton>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ErrorsMaybe = props => {\r\n  const { stripeAccountError, stripeAccountLinkError } = props;\r\n\r\n  const errorMessage = isStripeError(stripeAccountError) ? (\r\n    <FormattedMessage\r\n      id=\"StripeConnectAccountForm.createStripeAccountFailedWithStripeError\"\r\n      values={{ stripeMessage: stripeAccountError.apiErrors[0].meta.stripeMessage }}\r\n    />\r\n  ) : stripeAccountError ? (\r\n    <FormattedMessage id=\"StripeConnectAccountForm.createStripeAccountFailed\" />\r\n  ) : isStripeError(stripeAccountLinkError) ? (\r\n    <FormattedMessage\r\n      id=\"StripeConnectAccountForm.createStripeAccountLinkFailedWithStripeError\"\r\n      values={{ stripeMessage: stripeAccountLinkError.apiErrors[0].meta.stripeMessage }}\r\n    />\r\n  ) : stripeAccountLinkError ? (\r\n    <FormattedMessage id=\"StripeConnectAccountForm.createStripeAccountLinkFailed\" />\r\n  ) : null;\r\n\r\n  return errorMessage ? <div className={css.error}>{errorMessage}</div> : null;\r\n};\r\n\r\nconst StripeConnectAccountFormComponent = props => {\r\n  const [showCardUpdateInput, setShowCardUpdateInput] = useState(false);\r\n  const config = useConfiguration();\r\n  const { onSubmit, ...restOfProps } = props;\r\n  const isUpdate = props.stripeConnected;\r\n  const stripePublishableKey = config.stripe.publishableKey;\r\n  const supportedCountries = config.stripe.supportedCountries;\r\n\r\n  return (\r\n    <FinalForm\r\n      {...restOfProps}\r\n      onSubmit={values => onSubmit({ ...values, stripePublishableKey }, isUpdate)}\r\n      mutators={{\r\n        ...arrayMutators,\r\n      }}\r\n      render={fieldRenderProps => {\r\n        const {\r\n          rootClassName,\r\n          className,\r\n          children,\r\n          stripeAccountError,\r\n          stripeAccountLinkError,\r\n          disabled,\r\n          handleSubmit,\r\n          inProgress,\r\n          intl,\r\n          invalid,\r\n          pristine,\r\n          ready,\r\n          savedCountry,\r\n          stripeAccountFetched,\r\n          stripeBankAccountLastDigits,\r\n          submitButtonText,\r\n          form,\r\n          values,\r\n          stripeConnected,\r\n          currentUser,\r\n        } = fieldRenderProps;\r\n\r\n        const accountDataLoaded = stripeConnected && stripeAccountFetched && savedCountry;\r\n        const submitInProgress = inProgress;\r\n        const submitDisabled = pristine || invalid || disabled || submitInProgress;\r\n\r\n        const handleFormSubmit = event => {\r\n          // Close the bank account form when clicking \"save details\"\r\n          setShowCardUpdateInput(false);\r\n          handleSubmit(event);\r\n        };\r\n\r\n        const countryLabel = intl.formatMessage({ id: 'StripeConnectAccountForm.countryLabel' });\r\n        const classes = classNames(rootClassName || css.root, className, {\r\n          [css.disabled]: disabled,\r\n        });\r\n\r\n        const showAsRequired = pristine;\r\n\r\n        const currentUserId = currentUser ? currentUser.id : null;\r\n\r\n        // If the user doesn't have Stripe connected account,\r\n        // show fields for country and bank account.\r\n        // Otherwise, show only possibility the edit bank account\r\n        // because Stripe doesn't allow user to change the country\r\n        const stripeAccountFields = !stripeConnected ? (\r\n          <CreateStripeAccountFields\r\n            stripeConnected={stripeConnected}\r\n            disabled={disabled}\r\n            showAsRequired={showAsRequired}\r\n            countryLabel={countryLabel}\r\n            supportedCountries={supportedCountries}\r\n            marketplaceRootURL={config.marketplaceRootURL}\r\n            defaultMCC={config.stripe.defaultMCC}\r\n            currentUserId={currentUserId}\r\n            form={form}\r\n            values={values}\r\n            intl={intl}\r\n          />\r\n        ) : (\r\n          <UpdateStripeAccountFields\r\n            disabled={disabled}\r\n            countryLabel={countryLabel}\r\n            supportedCountries={supportedCountries}\r\n            savedCountry={savedCountry}\r\n            stripeBankAccountLastDigits={stripeBankAccountLastDigits}\r\n            showCardUpdateInput={showCardUpdateInput}\r\n            values={values}\r\n            submitInProgress={submitInProgress}\r\n            setShowCardUpdateInput={setShowCardUpdateInput}\r\n            intl={intl}\r\n          />\r\n        );\r\n\r\n        const stripeConnectedAccountTermsLink = (\r\n          <ExternalLink href=\"https://stripe.com/connect-account/legal\" className={css.termsLink}>\r\n            <FormattedMessage id=\"StripeConnectAccountForm.stripeConnectedAccountTermsLink\" />\r\n          </ExternalLink>\r\n        );\r\n\r\n        // Don't show the submit button while fetching the Stripe account data\r\n        const submitButtonMaybe =\r\n          !stripeConnected || accountDataLoaded ? (\r\n            <>\r\n              <p className={css.termsText}>\r\n                <FormattedMessage\r\n                  id=\"StripeConnectAccountForm.stripeToSText\"\r\n                  values={{ stripeConnectedAccountTermsLink }}\r\n                />\r\n              </p>\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                inProgress={submitInProgress}\r\n                disabled={submitDisabled}\r\n                ready={ready}\r\n              >\r\n                {submitButtonText || (\r\n                  <FormattedMessage id=\"StripeConnectAccountForm.submitButtonText\" />\r\n                )}\r\n              </Button>\r\n            </>\r\n          ) : null;\r\n\r\n        // If the Stripe publishable key is not set up, don't show the form\r\n        return config.stripe.publishableKey ? (\r\n          <Form className={classes} onSubmit={handleFormSubmit}>\r\n            {!stripeConnected || accountDataLoaded ? (\r\n              stripeAccountFields\r\n            ) : (\r\n              <div className={css.savedInformation}>\r\n                <FormattedMessage id=\"StripeConnectAccountForm.loadingStripeAccountData\" />\r\n              </div>\r\n            )}\r\n\r\n            <ErrorsMaybe\r\n              stripeAccountError={stripeAccountError}\r\n              stripeAccountLinkError={stripeAccountLinkError}\r\n            />\r\n\r\n            {children}\r\n\r\n            {submitButtonMaybe}\r\n          </Form>\r\n        ) : (\r\n          <div className={css.missingStripeKey}>\r\n            <FormattedMessage id=\"StripeConnectAccountForm.missingStripeKey\" />\r\n          </div>\r\n        );\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nStripeConnectAccountFormComponent.defaultProps = {\r\n  className: null,\r\n  currentUser: null,\r\n  stripeAccountError: null,\r\n  disabled: false,\r\n  inProgress: false,\r\n  ready: false,\r\n  savedCountry: null,\r\n  stripeBankAccountLastDigits: null,\r\n  submitButtonText: null,\r\n  fieldRenderProps: null,\r\n};\r\n\r\nStripeConnectAccountFormComponent.propTypes = {\r\n  currentUser: propTypes.currentUser,\r\n  className: string,\r\n  stripeAccountError: object,\r\n  disabled: bool,\r\n  inProgress: bool,\r\n  ready: bool,\r\n  savedCountry: string,\r\n  stripeBankAccountLastDigits: string,\r\n  stripeAccountFetched: bool.isRequired,\r\n  submitButtonText: string,\r\n  fieldRenderProps: shape({\r\n    handleSubmit: func,\r\n    invalid: bool,\r\n    pristine: bool,\r\n    values: object,\r\n  }),\r\n\r\n  // from injectIntl\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nconst StripeConnectAccountForm = compose(injectIntl)(StripeConnectAccountFormComponent);\r\n\r\nexport default StripeConnectAccountForm;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StripeConnectAccountStatusBox_root__GbnSO\",\"verificiationBox\":\"StripeConnectAccountStatusBox_verificiationBox__bJPYA\",\"verificiationBoxTextWrapper\":\"StripeConnectAccountStatusBox_verificiationBoxTextWrapper__EUtka\",\"verificationBoxTitle\":\"StripeConnectAccountStatusBox_verificationBoxTitle__NeXMF h5\",\"verificationBoxText\":\"StripeConnectAccountStatusBox_verificationBoxText__mdsHv h5\",\"getVerifiedButton\":\"StripeConnectAccountStatusBox_getVerifiedButton__N2hys h5\",\"verficiationNeededBox\":\"StripeConnectAccountStatusBox_verficiationNeededBox__nFZ15\",\"verficiationErrorBox\":\"StripeConnectAccountStatusBox_verficiationErrorBox__-O30m\",\"verficiationSuccessBox\":\"StripeConnectAccountStatusBox_verficiationSuccessBox__bymJD\",\"verificationBoxSuccessTextWrapper\":\"StripeConnectAccountStatusBox_verificationBoxSuccessTextWrapper__3HJTI\",\"editVerificationButton\":\"StripeConnectAccountStatusBox_editVerificationButton__nZHrF h4\",\"icon\":\"StripeConnectAccountStatusBox_icon__Cb7y-\",\"iconEditPencil\":\"StripeConnectAccountStatusBox_iconEditPencil__uiFMU\",\"spinner\":\"StripeConnectAccountStatusBox_spinner__9nLQu\"};","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { FormattedMessage } from '../../util/reactIntl';\r\nimport { IconEdit, IconSuccess, PrimaryButton, InlineTextButton } from '../../components';\r\nimport css from './StripeConnectAccountStatusBox.module.css';\r\n\r\nconst STATUS_VERIFICATION_NEEDED = 'verificationNeeded';\r\nconst STATUS_VERIFICATION_SUCCESS = 'verificationSuccess';\r\nconst STATUS_VERIFICATION_ERROR = 'verificationError';\r\n\r\nconst StripeConnectAccountStatusBox = props => {\r\n  const { type, onGetStripeConnectAccountLink, inProgress, disabled } = props;\r\n\r\n  if (type === STATUS_VERIFICATION_NEEDED) {\r\n    return (\r\n      <div className={classNames(css.verificiationBox, css.verficiationNeededBox)}>\r\n        <div className={css.verificiationBoxTextWrapper}>\r\n          <div className={css.verificationBoxTitle}>\r\n            <FormattedMessage id=\"StripeConnectAccountStatusBox.verificationNeededTitle\" />\r\n          </div>\r\n          <div className={css.verificationBoxText}>\r\n            <FormattedMessage id=\"StripeConnectAccountStatusBox.verificationNeededText\" />\r\n          </div>\r\n        </div>\r\n\r\n        <PrimaryButton\r\n          className={css.getVerifiedButton}\r\n          spinnerClassName={css.spinner}\r\n          type=\"button\"\r\n          inProgress={inProgress}\r\n          disabled={disabled}\r\n          onClick={onGetStripeConnectAccountLink}\r\n        >\r\n          <FormattedMessage id=\"StripeConnectAccountStatusBox.getVerifiedButton\" />\r\n        </PrimaryButton>\r\n      </div>\r\n    );\r\n  } else if (type === STATUS_VERIFICATION_SUCCESS) {\r\n    return (\r\n      <div className={classNames(css.verificiationBox, css.verficiationSuccessBox)}>\r\n        <div\r\n          className={classNames(\r\n            css.verificiationBoxTextWrapper,\r\n            css.verificationBoxSuccessTextWrapper\r\n          )}\r\n        >\r\n          <div className={css.verificationBoxTitle}>\r\n            <IconSuccess className={css.icon} />\r\n            <FormattedMessage id=\"StripeConnectAccountStatusBox.verificationSuccessTitle\" />\r\n          </div>\r\n        </div>\r\n\r\n        <InlineTextButton\r\n          className={css.editVerificationButton}\r\n          spinnerClassName={css.spinner}\r\n          type=\"button\"\r\n          inProgress={inProgress}\r\n          disabled={disabled}\r\n          onClick={onGetStripeConnectAccountLink}\r\n        >\r\n          <IconEdit className={css.icon} pencilClassName={css.iconEditPencil} />\r\n          <FormattedMessage id=\"StripeConnectAccountStatusBox.editAccountButton\" />\r\n        </InlineTextButton>\r\n      </div>\r\n    );\r\n  } else if (type === STATUS_VERIFICATION_ERROR) {\r\n    return (\r\n      <div className={classNames(css.verificiationBox, css.verficiationErrorBox)}>\r\n        <div className={css.verificiationBoxTextWrapper}>\r\n          <div className={css.verificationBoxTitle}>\r\n            <FormattedMessage id=\"StripeConnectAccountStatusBox.verificationFailedTitle\" />\r\n          </div>\r\n          <div className={css.verificationBoxText}>\r\n            <FormattedMessage id=\"StripeConnectAccountStatusBox.verificationFailedText\" />\r\n          </div>\r\n        </div>\r\n\r\n        <PrimaryButton\r\n          className={css.getVerifiedButton}\r\n          spinnerClassName={css.spinner}\r\n          type=\"button\"\r\n          inProgress={inProgress}\r\n          disabled={disabled}\r\n          onClick={onGetStripeConnectAccountLink}\r\n        >\r\n          <FormattedMessage id=\"StripeConnectAccountStatusBox.getVerifiedButton\" />\r\n        </PrimaryButton>\r\n      </div>\r\n    );\r\n  } else {\r\n    throw new Error(`Unknown type ${type} for StripeConnectAccountStatusBox`);\r\n  }\r\n};\r\n\r\nexport default StripeConnectAccountStatusBox;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StripePaymentAddress_root__vOtMU\",\"formRow\":\"StripePaymentAddress_formRow__LzO8-\",\"field\":\"StripePaymentAddress_field__LCaeX\"};","import React from 'react';\r\nimport { bool, object, string } from 'prop-types';\r\n\r\nimport { intlShape } from '../../util/reactIntl';\r\nimport * as validators from '../../util/validators';\r\nimport getCountryCodes from '../../translations/countryCodes';\r\nimport { FieldTextInput, FieldSelect } from '../../components';\r\n\r\nimport css from './StripePaymentAddress.module.css';\r\n\r\nconst StripePaymentAddress = props => {\r\n  const { className, intl, disabled, form, fieldId, card, locale } = props;\r\n\r\n  const optionalText = intl.formatMessage({\r\n    id: 'StripePaymentAddress.optionalText',\r\n  });\r\n\r\n  const addressLine1Label = intl.formatMessage({\r\n    id: 'StripePaymentAddress.addressLine1Label',\r\n  });\r\n  const addressLine1Placeholder = intl.formatMessage({\r\n    id: 'StripePaymentAddress.addressLine1Placeholder',\r\n  });\r\n  const addressLine1Required = validators.required(\r\n    intl.formatMessage({\r\n      id: 'StripePaymentAddress.addressLine1Required',\r\n    })\r\n  );\r\n\r\n  const addressLine2Label = intl.formatMessage(\r\n    { id: 'StripePaymentAddress.addressLine2Label' },\r\n    { optionalText: optionalText }\r\n  );\r\n\r\n  const addressLine2Placeholder = intl.formatMessage({\r\n    id: 'StripePaymentAddress.addressLine2Placeholder',\r\n  });\r\n\r\n  const postalCodeLabel = intl.formatMessage({ id: 'StripePaymentAddress.postalCodeLabel' });\r\n  const postalCodePlaceholder = intl.formatMessage({\r\n    id: 'StripePaymentAddress.postalCodePlaceholder',\r\n  });\r\n  const postalCodeRequired = validators.required(\r\n    intl.formatMessage({\r\n      id: 'StripePaymentAddress.postalCodeRequired',\r\n    })\r\n  );\r\n\r\n  const cityLabel = intl.formatMessage({ id: 'StripePaymentAddress.cityLabel' });\r\n  const cityPlaceholder = intl.formatMessage({ id: 'StripePaymentAddress.cityPlaceholder' });\r\n  const cityRequired = validators.required(\r\n    intl.formatMessage({\r\n      id: 'StripePaymentAddress.cityRequired',\r\n    })\r\n  );\r\n\r\n  const stateLabel = intl.formatMessage(\r\n    { id: 'StripePaymentAddress.stateLabel' },\r\n    { optionalText: optionalText }\r\n  );\r\n  const statePlaceholder = intl.formatMessage({ id: 'StripePaymentAddress.statePlaceholder' });\r\n\r\n  const countryLabel = intl.formatMessage({ id: 'StripePaymentAddress.countryLabel' });\r\n  const countryPlaceholder = intl.formatMessage({ id: 'StripePaymentAddress.countryPlaceholder' });\r\n  const countryRequired = validators.required(\r\n    intl.formatMessage({\r\n      id: 'StripePaymentAddress.countryRequired',\r\n    })\r\n  );\r\n\r\n  const handleOnChange = event => {\r\n    const value = event.target.value;\r\n    form.change('postal', value);\r\n    card.update({ value: { postalCode: value } });\r\n  };\r\n\r\n  // Use the language set in config.localization.locale to get the correct translations of the country names\r\n  const countryCodes = getCountryCodes(locale);\r\n\r\n  return (\r\n    <div className={className ? className : css.root}>\r\n      <div className={css.formRow}>\r\n        <FieldTextInput\r\n          id={`${fieldId}.addressLine1`}\r\n          name=\"addressLine1\"\r\n          disabled={disabled}\r\n          className={css.field}\r\n          type=\"text\"\r\n          autoComplete=\"billing address-line1\"\r\n          label={addressLine1Label}\r\n          placeholder={addressLine1Placeholder}\r\n          validate={addressLine1Required}\r\n          onUnmount={() => form.change('addressLine1', undefined)}\r\n        />\r\n\r\n        <FieldTextInput\r\n          id={`${fieldId}.addressLine2`}\r\n          name=\"addressLine2\"\r\n          disabled={disabled}\r\n          className={css.field}\r\n          type=\"text\"\r\n          autoComplete=\"billing address-line2\"\r\n          label={addressLine2Label}\r\n          placeholder={addressLine2Placeholder}\r\n          onUnmount={() => form.change('addressLine2', undefined)}\r\n        />\r\n      </div>\r\n      <div className={css.formRow}>\r\n        <FieldTextInput\r\n          id={`${fieldId}.postalCode`}\r\n          name=\"postal\"\r\n          disabled={disabled}\r\n          className={css.field}\r\n          type=\"text\"\r\n          autoComplete=\"billing postal-code\"\r\n          label={postalCodeLabel}\r\n          placeholder={postalCodePlaceholder}\r\n          validate={postalCodeRequired}\r\n          onUnmount={() => form.change('postal', undefined)}\r\n          onChange={event => handleOnChange(event)}\r\n        />\r\n\r\n        <FieldTextInput\r\n          id={`${fieldId}.city`}\r\n          name=\"city\"\r\n          disabled={disabled}\r\n          className={css.field}\r\n          type=\"text\"\r\n          autoComplete=\"billing address-level2\"\r\n          label={cityLabel}\r\n          placeholder={cityPlaceholder}\r\n          validate={cityRequired}\r\n          onUnmount={() => form.change('city', undefined)}\r\n        />\r\n      </div>\r\n      <div className={css.formRow}>\r\n        <FieldTextInput\r\n          id={`${fieldId}.state`}\r\n          name=\"state\"\r\n          disabled={disabled}\r\n          className={css.field}\r\n          type=\"text\"\r\n          autoComplete=\"billing address-level1\"\r\n          label={stateLabel}\r\n          placeholder={statePlaceholder}\r\n          onUnmount={() => form.change('state', undefined)}\r\n        />\r\n\r\n        <FieldSelect\r\n          id={`${fieldId}.country`}\r\n          name=\"country\"\r\n          disabled={disabled}\r\n          className={css.field}\r\n          label={countryLabel}\r\n          validate={countryRequired}\r\n        >\r\n          <option disabled value=\"\">\r\n            {countryPlaceholder}\r\n          </option>\r\n          {countryCodes.map(country => {\r\n            return (\r\n              <option key={country.code} value={country.code}>\r\n                {country.name}\r\n              </option>\r\n            );\r\n          })}\r\n        </FieldSelect>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nStripePaymentAddress.defaultProps = {\r\n  country: null,\r\n  disabled: false,\r\n  fieldId: null,\r\n};\r\n\r\nStripePaymentAddress.propTypes = {\r\n  country: string,\r\n  disabled: bool,\r\n  form: object.isRequired,\r\n  fieldId: string,\r\n  locale: string.isRequired,\r\n\r\n  // from injectIntl\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default StripePaymentAddress;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TabNavHorizontal_root__4BxMv\",\"darkSkin\":\"TabNavHorizontal_darkSkin__fcslj\",\"tab\":\"TabNavHorizontal_tab__Rwh9M\",\"tabContent\":\"TabNavHorizontal_tabContent__x4nNE a\",\"button\":\"TabNavHorizontal_button__oS-qs\",\"selectedTabContent\":\"TabNavHorizontal_selectedTabContent__T4QTm\",\"disabled\":\"TabNavHorizontal_disabled__McLYb\",\"tabContentDarkSkin\":\"TabNavHorizontal_tabContentDarkSkin__XG3ym\",\"selectedTabContentDarkSkin\":\"TabNavHorizontal_selectedTabContentDarkSkin__VCp94\",\"disabledDarkSkin\":\"TabNavHorizontal_disabledDarkSkin__o5wdd\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { InlineTextButton, NamedLink } from '../../components';\r\n\r\nimport css from './TabNavHorizontal.module.css';\r\n\r\nexport const LIGHT_SKIN = 'light';\r\nexport const DARK_SKIN = 'dark';\r\n\r\nconst { arrayOf, bool, func, node, object, oneOf, string, shape } = PropTypes;\r\n\r\nconst Tab = props => {\r\n  const { className, disabled, text, selected, onClick, linkProps, isDark } = props;\r\n  const darkSkinClasses = isDark\r\n    ? classNames(css.tabContentDarkSkin, {\r\n        [css.selectedTabContentDarkSkin]: selected,\r\n        [css.disabledDarkSkin]: disabled,\r\n      })\r\n    : null;\r\n\r\n  const linkClasses = classNames(\r\n    css.tabContent,\r\n    {\r\n      [css.selectedTabContent]: selected,\r\n      [css.disabled]: disabled,\r\n    },\r\n    darkSkinClasses\r\n  );\r\n\r\n  const buttonClasses = classNames(\r\n    css.tabContent,\r\n    css.button,\r\n    {\r\n      [css.selectedTabContent]: selected,\r\n      [css.disabled]: disabled,\r\n    },\r\n    darkSkinClasses\r\n  );\r\n\r\n  const isButton = !!onClick;\r\n\r\n  return (\r\n    <div className={className}>\r\n      {isButton ? (\r\n        <InlineTextButton rootClassName={buttonClasses} onClick={onClick}>\r\n          {text}\r\n        </InlineTextButton>\r\n      ) : (\r\n        <NamedLink className={linkClasses} {...linkProps}>\r\n          {text}\r\n        </NamedLink>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nTab.defaultProps = { className: null, disabled: false, selected: false };\r\n\r\nTab.propTypes = {\r\n  className: string,\r\n  text: node.isRequired,\r\n  disabled: bool,\r\n  selected: bool,\r\n  onClick: func,\r\n  linkProps: object,\r\n  isDark: bool.isRequired,\r\n};\r\n\r\nconst TabNavHorizontal = props => {\r\n  const { className, rootClassName, tabRootClassName, tabs, skin } = props;\r\n  const isDark = skin === DARK_SKIN;\r\n  const classes = classNames(rootClassName || css.root, { [css.darkSkin]: isDark }, className);\r\n  const tabClasses = tabRootClassName || css.tab;\r\n  return (\r\n    <nav className={classes}>\r\n      {tabs.map((tab, index) => {\r\n        const key = typeof tab.text === 'string' ? tab.text : index;\r\n        return <Tab key={key} className={tabClasses} {...tab} isDark={isDark} />;\r\n      })}\r\n    </nav>\r\n  );\r\n};\r\n\r\n/**\r\n * A tab navigation element with buttons. Requires onClick\r\n * function param for tab objects passed as parameter.\r\n */\r\nexport const ButtonTabNavHorizontal = props => <TabNavHorizontal {...props} />;\r\n\r\nButtonTabNavHorizontal.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  tabRootClassName: null,\r\n  tabClassName: null,\r\n  skin: LIGHT_SKIN,\r\n};\r\n\r\nButtonTabNavHorizontal.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  tabRootClassName: string,\r\n  tabs: arrayOf(\r\n    shape({\r\n      text: node.isRequired,\r\n      disabled: bool,\r\n      selected: bool,\r\n      onClick: func.isRequired,\r\n    })\r\n  ).isRequired,\r\n  skin: oneOf([LIGHT_SKIN, DARK_SKIN]),\r\n};\r\n\r\n/**\r\n * A tab navigation element with links. Requires linkProps\r\n * object param for tab objects passed as parameter.\r\n */\r\nexport const LinkTabNavHorizontal = props => <TabNavHorizontal {...props} />;\r\n\r\nLinkTabNavHorizontal.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  tabRootClassName: null,\r\n  tabClassName: null,\r\n  skin: LIGHT_SKIN,\r\n};\r\n\r\nLinkTabNavHorizontal.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  tabRootClassName: string,\r\n  tabs: arrayOf(\r\n    shape({\r\n      text: node.isRequired,\r\n      disabled: bool,\r\n      selected: bool,\r\n      linkProps: object.isRequired,\r\n    })\r\n  ).isRequired,\r\n  skin: oneOf([LIGHT_SKIN, DARK_SKIN]),\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TabNav_root__ZLrYy\",\"tab\":\"TabNav_tab__QdBRA\",\"link\":\"TabNav_link__1ZMRa textSmall\",\"selectedLink\":\"TabNav_selectedLink__FXC-H\",\"disabled\":\"TabNav_disabled__nF5xR\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { NamedLink } from '../../components';\r\n\r\nimport css from './TabNav.module.css';\r\n\r\nconst Tab = props => {\r\n  const { className, id, disabled, text, selected, linkProps } = props;\r\n  const linkClasses = classNames(css.link, {\r\n    [css.selectedLink]: selected,\r\n    [css.disabled]: disabled,\r\n  });\r\n\r\n  return (\r\n    <div id={id} className={className}>\r\n      <NamedLink className={linkClasses} {...linkProps}>\r\n        {text}\r\n      </NamedLink>\r\n    </div>\r\n  );\r\n};\r\n\r\nTab.defaultProps = { className: null, disabled: false, selected: false };\r\n\r\nconst { arrayOf, bool, node, object, string } = PropTypes;\r\n\r\nTab.propTypes = {\r\n  id: string.isRequired,\r\n  className: string,\r\n  text: node.isRequired,\r\n  disabled: bool,\r\n  selected: bool,\r\n  linkProps: object.isRequired,\r\n};\r\n\r\nconst TabNav = props => {\r\n  const { className, rootClassName, tabRootClassName, tabs } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  const tabClasses = tabRootClassName || css.tab;\r\n  return (\r\n    <nav className={classes}>\r\n      {tabs.map((tab, index) => {\r\n        const id = typeof tab.id === 'string' ? tab.id : `${index}`;\r\n        return <Tab key={id} id={id} className={tabClasses} {...tab} />;\r\n      })}\r\n    </nav>\r\n  );\r\n};\r\n\r\nTabNav.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  tabRootClassName: null,\r\n  tabClassName: null,\r\n};\r\n\r\nTabNav.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  tabRootClassName: string,\r\n  tabs: arrayOf(object).isRequired,\r\n};\r\n\r\nexport default TabNav;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Tabs_root__dNUz1\"};","/**\r\n * Tabs creates view area that has tabs made out of its children.\r\n * It only expects all its children to have 'tabLabel', 'tabLinkProps' props.\r\n * In addition, 'selected' prop specifies which tab is open and 'disabled' renders tab inaccessible.\r\n *\r\n * e.g.\r\n *  <Tabs>\r\n *    <Child tabLabel=\"Tab1\" tabLinkProps={{ name: 'SomeTab1Page' }}>\r\n *      Tab1 stuff\r\n *    </Child>\r\n *    <Child tabLabel=\"Tab2\" tabLinkProps={{ name: 'SomeTab2Page' }} selected >\r\n *      Tab2 stuff\r\n *    </Child>\r\n *  </Tabs>\r\n *\r\n */\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { TabNav } from '../../components';\r\n\r\nimport css from './Tabs.module.css';\r\n\r\nconst Tabs = props => {\r\n  const { children, className, rootClassName, navRootClassName, tabRootClassName } = props;\r\n  const rootClasses = rootClassName || css.root;\r\n  const classes = classNames(rootClasses, className);\r\n\r\n  const tabNavTabs = React.Children.map(children, child => {\r\n    const { tabId, tabLabel, tabLinkProps } = child.props;\r\n\r\n    // Child components need to have TabNav props included\r\n    if (!tabId || !tabLabel || !tabLinkProps) {\r\n      throw new Error(\r\n        `Tabs component: a child component is missing required props.\r\n        tabId: (${tabId})\r\n        tabLabel: (${tabLabel})\r\n        tabLinkProps: (${tabLinkProps})`\r\n      );\r\n    }\r\n\r\n    return {\r\n      id: tabId,\r\n      text: child.props.tabLabel,\r\n      linkProps: child.props.tabLinkProps,\r\n      disabled: child.props.disabled,\r\n      selected: child.props.selected,\r\n    };\r\n  });\r\n\r\n  const childArray = React.Children.toArray(children);\r\n  const selectedTabPanel = childArray.find(c => c.props.selected);\r\n\r\n  // One of the children needs to be selected\r\n  if (!selectedTabPanel) {\r\n    throw new Error(`Tabs component: one Child should have 'selected' prop.`);\r\n  }\r\n\r\n  return (\r\n    <div className={classes}>\r\n      <TabNav\r\n        rootClassName={navRootClassName}\r\n        tabs={tabNavTabs}\r\n        tabRootClassName={tabRootClassName}\r\n      />\r\n      {selectedTabPanel}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst { node, string } = PropTypes;\r\n\r\nTabs.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n  navRootClassName: null,\r\n  tabRootClassName: null,\r\n};\r\n\r\nTabs.propTypes = {\r\n  children: node.isRequired,\r\n  className: string,\r\n  rootClassName: string,\r\n  navRootClassName: string,\r\n  tabRootClassName: string,\r\n};\r\n\r\nexport default Tabs;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TimeRange_root__+4tKq\",\"bookingInfo\":\"TimeRange_bookingInfo__juptq\",\"dateSection\":\"TimeRange_dateSection__+0iKO\"};","import React from 'react';\r\nimport { instanceOf, string } from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { isSameDay, formatDateIntoPartials } from '../../util/dates';\r\nimport { injectIntl, intlShape } from '../../util/reactIntl';\r\nimport { DATE_TYPE_DATE, DATE_TYPE_TIME, DATE_TYPE_DATETIME, propTypes } from '../../util/types';\r\n\r\nimport css from './TimeRange.module.css';\r\n\r\n// Sometimes we want to break string created by intl.formatDateTimeRange into\r\n// shorter substrings. Intl uses special dash to separate date-time range.\r\nconst DASH = '';\r\nconst BREAK_WORD_MIN_LENGTH = 27;\r\n\r\nexport const TimeRangeComponent = props => {\r\n  const { rootClassName, className, startDate, endDate, dateType, timeZone, intl } = props;\r\n  const start = formatDateIntoPartials(startDate, intl, { timeZone });\r\n  const end = formatDateIntoPartials(endDate, intl, { timeZone });\r\n  const isSingleDay = isSameDay(startDate, endDate, timeZone);\r\n\r\n  const dateFormatting = { month: 'short', day: 'numeric', timeZone };\r\n\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  if (isSingleDay && dateType === DATE_TYPE_DATE) {\r\n    return (\r\n      <div className={classes}>\r\n        <span className={css.dateSection}>{`${start.date}`}</span>\r\n      </div>\r\n    );\r\n  } else if (dateType === DATE_TYPE_DATE) {\r\n    const formatted = intl.formatDateTimeRange(startDate, endDate, dateFormatting);\r\n    // For small words, we use the default from Intl,\r\n    // but for longer words, we add correct word wraps by adding spans.\r\n    const range =\r\n      formatted.length > BREAK_WORD_MIN_LENGTH ? (\r\n        formatted.split(DASH).map((rangePartial, i) => (\r\n          <span key={`datespan${i}`} className={css.dateSection}>\r\n            {rangePartial}\r\n            {i == 0 ? DASH : null}\r\n          </span>\r\n        ))\r\n      ) : (\r\n        <span className={css.dateSection}>{formatted}</span>\r\n      );\r\n    return <div className={classes}>{range}</div>;\r\n  } else if (isSingleDay && dateType === DATE_TYPE_TIME) {\r\n    return (\r\n      <div className={classes}>\r\n        <span className={css.dateSection}>{`${start.time} - ${end.time}`}</span>\r\n      </div>\r\n    );\r\n  } else if (dateType === DATE_TYPE_TIME) {\r\n    const timeFormatting = { hour: 'numeric', minute: 'numeric' };\r\n    const formatted = intl.formatDateTimeRange(startDate, endDate, {\r\n      ...dateFormatting,\r\n      ...timeFormatting,\r\n    });\r\n    // For small words, we use the default from Intl,\r\n    // but for longer words, we add correct word wraps by adding spans.\r\n    const range =\r\n      formatted.length > BREAK_WORD_MIN_LENGTH ? (\r\n        formatted.split(DASH).map((rangePartial, i) => (\r\n          <span key={`datespan${i}`} className={css.dateSection}>\r\n            {rangePartial}\r\n            {i == 0 ? ` ${DASH} ` : null}\r\n          </span>\r\n        ))\r\n      ) : (\r\n        <span className={css.dateSection}>{formatted}</span>\r\n      );\r\n    return <div className={classes}>{range}</div>;\r\n  } else if (isSingleDay && dateType === DATE_TYPE_DATETIME) {\r\n    return (\r\n      <div className={classes}>\r\n        <span className={css.dateSection}>{`${start.date}, ${start.time} - ${end.time}`}</span>\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div className={classes}>\r\n        <span className={css.dateSection}>{`${start.dateAndTime} - `}</span>\r\n        <span className={css.dateSection}>{`${end.dateAndTime}`}</span>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nTimeRangeComponent.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n  dateType: null,\r\n  timeZone: null,\r\n};\r\n\r\nTimeRangeComponent.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  startDate: instanceOf(Date).isRequired,\r\n  endDate: instanceOf(Date).isRequired,\r\n  dateType: propTypes.dateType,\r\n  timeZone: string,\r\n\r\n  // from injectIntl\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nexport default injectIntl(TimeRangeComponent);\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { oneOfType, string } from 'prop-types';\r\nimport { propTypes } from '../../util/types';\r\n\r\nconst UserDisplayName = props => {\r\n  const {\r\n    rootClassName,\r\n    className,\r\n    user,\r\n    intl,\r\n    deletedUserDisplayName,\r\n    bannedUserDisplayName,\r\n  } = props;\r\n  const hasAttributes = user && user.attributes;\r\n  const userIsDeleted = hasAttributes && user.attributes.deleted;\r\n  const userIsBanned = hasAttributes && user.attributes.banned;\r\n  const userHasProfile = hasAttributes && user.attributes.profile;\r\n  const userDisplayName = userHasProfile && user.attributes.profile.displayName;\r\n\r\n  const deletedUserDisplayNameInUse = deletedUserDisplayName\r\n    ? deletedUserDisplayName\r\n    : intl.formatMessage({\r\n        id: 'UserDisplayName.deleted',\r\n      });\r\n\r\n  const bannedUserDisplayNameInUse = bannedUserDisplayName\r\n    ? bannedUserDisplayName\r\n    : intl.formatMessage({\r\n        id: 'UserDisplayName.banned',\r\n      });\r\n\r\n  const displayName = userDisplayName\r\n    ? userDisplayName\r\n    : userIsDeleted\r\n    ? deletedUserDisplayNameInUse\r\n    : userIsBanned\r\n    ? bannedUserDisplayNameInUse\r\n    : null;\r\n\r\n  const classes = classNames(rootClassName, className);\r\n  return <span className={classes}>{displayName}</span>;\r\n};\r\n\r\nUserDisplayName.defaultProps = {\r\n  rootClassName: null,\r\n  className: null,\r\n\r\n  user: null,\r\n  deletedUserDisplayName: null,\r\n  bannedUserDisplayName: null,\r\n};\r\n\r\nUserDisplayName.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n\r\n  user: oneOfType([propTypes.user, propTypes.currentUser]),\r\n  deletedUserDisplayName: string,\r\n  bannedUserDisplayName: string,\r\n};\r\n\r\nexport default UserDisplayName;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UserNav_root__tZwTu\",\"tab\":\"UserNav_tab__fcre4\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from '../../util/reactIntl';\r\nimport classNames from 'classnames';\r\nimport { ACCOUNT_SETTINGS_PAGES } from '../../routing/routeConfiguration';\r\nimport { LinkTabNavHorizontal } from '../../components';\r\n\r\nimport css from './UserNav.module.css';\r\n\r\nconst UserNav = props => {\r\n  const { className, rootClassName, currentPage } = props;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n\r\n  const tabs = [\r\n    {\r\n      text: <FormattedMessage id=\"UserNav.yourListings\" />,\r\n      selected: currentPage === 'ManageListingsPage',\r\n      linkProps: {\r\n        name: 'ManageListingsPage',\r\n      },\r\n    },\r\n    {\r\n      text: <FormattedMessage id=\"UserNav.profileSettings\" />,\r\n      selected: currentPage === 'ProfileSettingsPage',\r\n      disabled: false,\r\n      linkProps: {\r\n        name: 'ProfileSettingsPage',\r\n      },\r\n    },\r\n    {\r\n      text: <FormattedMessage id=\"UserNav.accountSettings\" />,\r\n      selected: ACCOUNT_SETTINGS_PAGES.includes(currentPage),\r\n      disabled: false,\r\n      linkProps: {\r\n        name: 'ContactDetailsPage',\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <LinkTabNavHorizontal className={classes} tabRootClassName={css.tab} tabs={tabs} skin=\"dark\" />\r\n  );\r\n};\r\n\r\nUserNav.defaultProps = {\r\n  className: null,\r\n  rootClassName: null,\r\n};\r\n\r\nconst { string } = PropTypes;\r\n\r\nUserNav.propTypes = {\r\n  className: string,\r\n  rootClassName: string,\r\n  currentPage: string.isRequired,\r\n};\r\n\r\nexport default UserNav;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ValidationError_root__LSkNI h4\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport css from './ValidationError.module.css';\r\n\r\n/**\r\n * This component can be used to show validation errors next to form\r\n * input fields. The component takes the final-form Field component\r\n * `meta` object as a prop and infers if an error message should be\r\n * shown.\r\n */\r\nconst ValidationError = props => {\r\n  const { rootClassName, className, fieldMeta } = props;\r\n  const { touched, error } = fieldMeta;\r\n  const classes = classNames(rootClassName || css.root, className);\r\n  return touched && error ? <div className={classes}>{error}</div> : null;\r\n};\r\n\r\nValidationError.defaultProps = { rootClassName: null, className: null };\r\n\r\nconst { shape, bool, string } = PropTypes;\r\n\r\nValidationError.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  fieldMeta: shape({\r\n    touched: bool.isRequired,\r\n    error: string,\r\n  }).isRequired,\r\n};\r\n\r\nexport default ValidationError;\r\n","/**\r\n * Independent components\r\n * These components do not include any other components\r\n *\r\n * This order mitigates problems that might arise when trying to import components\r\n * that have circular dependencies to other components.\r\n * Note: import-order also affects to the generated CSS bundle file.\r\n *\r\n * Read more:\r\n * https://medium.com/visual-development/how-to-fix-nasty-circular-dependency-issues-once-and-for-all-in-javascript-typescript-a04c987cf0de\r\n */\r\nimport loadable from '@loadable/component';\r\n\r\n// Icons\r\nexport { default as IconAdd } from './IconAdd/IconAdd';\r\nexport { default as IconArrowHead } from './IconArrowHead/IconArrowHead';\r\nexport { default as IconBannedUser } from './IconBannedUser/IconBannedUser';\r\nexport { default as IconCheckmark } from './IconCheckmark/IconCheckmark';\r\nexport { default as IconClose } from './IconClose/IconClose';\r\nexport { default as IconDelete } from './IconDelete/IconDelete';\r\nexport { default as IconDisputeOrder } from './IconDisputeOrder/IconDisputeOrder';\r\nexport { default as IconEdit } from './IconEdit/IconEdit';\r\nexport { default as IconEmailAttention } from './IconEmailAttention/IconEmailAttention';\r\nexport { default as IconEmailSent } from './IconEmailSent/IconEmailSent';\r\nexport { default as IconEmailSuccess } from './IconEmailSuccess/IconEmailSuccess';\r\nexport { default as IconInquiry } from './IconInquiry/IconInquiry';\r\nexport { default as IconKeys } from './IconKeys/IconKeys';\r\nexport { default as IconKeysSuccess } from './IconKeysSuccess/IconKeysSuccess';\r\nexport { default as IconReviewStar } from './IconReviewStar/IconReviewStar';\r\nexport { default as IconReviewUser } from './IconReviewUser/IconReviewUser';\r\nexport { default as IconSearch } from './IconSearch/IconSearch';\r\nexport { default as IconSocialMediaFacebook } from './IconSocialMediaFacebook/IconSocialMediaFacebook';\r\nexport { default as IconSocialMediaInstagram } from './IconSocialMediaInstagram/IconSocialMediaInstagram';\r\nexport { default as IconSocialMediaTwitter } from './IconSocialMediaTwitter/IconSocialMediaTwitter';\r\nexport { default as IconSpinner } from './IconSpinner/IconSpinner';\r\nexport { default as IconSuccess } from './IconSuccess/IconSuccess';\r\n\r\n// Typography\r\nexport { Heading, H1, H2, H3, H4, H5, H6  } from './Heading/Heading';\r\n\r\n// Other independent components\r\nexport { default as AspectRatioWrapper } from './AspectRatioWrapper/AspectRatioWrapper';\r\nexport { default as ExternalLink } from './ExternalLink/ExternalLink';\r\nexport { default as ExpandingTextarea } from './ExpandingTextarea/ExpandingTextarea';\r\nexport { default as Form } from './Form/Form';\r\nexport { default as LimitedAccessBanner } from './LimitedAccessBanner/LimitedAccessBanner';\r\nexport { default as Logo } from './Logo/Logo';\r\nexport { default as NamedLink } from './NamedLink/NamedLink';\r\nexport { default as NamedRedirect } from './NamedRedirect/NamedRedirect';\r\nexport { default as NotificationBadge } from './NotificationBadge/NotificationBadge';\r\nexport { default as OutsideClickHandler } from './OutsideClickHandler/OutsideClickHandler';\r\nexport { default as Promised } from './Promised/Promised';\r\nexport { default as PropertyGroup } from './PropertyGroup/PropertyGroup';\r\nexport { default as RangeSlider } from './RangeSlider/RangeSlider';\r\nexport { default as ResponsiveImage } from './ResponsiveImage/ResponsiveImage';\r\nexport { default as ResponsiveBackgroundImageContainer } from './ResponsiveBackgroundImageContainer/ResponsiveBackgroundImageContainer';\r\nexport { default as TimeRange } from './TimeRange/TimeRange';\r\nexport { default as UserDisplayName } from './UserDisplayName/UserDisplayName';\r\nexport { default as ValidationError } from './ValidationError/ValidationError';\r\n\r\n/**\r\n * Composite components\r\n * These components include other components\r\n */\r\n\r\n//////////////////////////////////////////////////////////\r\n// First components that include only atomic components //\r\n//////////////////////////////////////////////////////////\r\n\r\nexport { default as Button, PrimaryButton, PrimaryButtonInline, SecondaryButton, SecondaryButtonInline, InlineTextButton, SocialLoginButton } from './Button/Button';\r\nexport { default as ImageFromFile } from './ImageFromFile/ImageFromFile';\r\nexport { default as LinkedLogo } from './Logo/LinkedLogo';\r\nexport { default as ListingLink } from './ListingLink/ListingLink';\r\nexport { default as PaginationLinks } from './PaginationLinks/PaginationLinks';\r\nexport { default as ReviewRating } from './ReviewRating/ReviewRating';\r\n\r\n// Menu\r\nexport { default as MenuItem } from './MenuItem/MenuItem';\r\nexport { default as MenuContent } from './MenuContent/MenuContent';\r\nexport { default as MenuLabel } from './MenuLabel/MenuLabel';\r\nexport { default as Menu } from './Menu/Menu';\r\n\r\n// Modal\r\nexport { default as Modal } from './Modal/Modal';\r\nexport { default as ModalInMobile } from './ModalInMobile/ModalInMobile';\r\n\r\n// Fields (for Final Form)\r\nexport { default as FieldCheckbox } from './FieldCheckbox/FieldCheckbox';\r\nexport { default as FieldCurrencyInput } from './FieldCurrencyInput/FieldCurrencyInput';\r\nexport { default as FieldRadioButton } from './FieldRadioButton/FieldRadioButton';\r\nexport { default as FieldReviewRating } from './FieldReviewRating/FieldReviewRating';\r\nexport { default as FieldSelect } from './FieldSelect/FieldSelect';\r\nexport { default as FieldTextInput } from './FieldTextInput/FieldTextInput';\r\n// Fields that use other Fields\r\nexport { default as FieldBoolean } from './FieldBoolean/FieldBoolean';\r\nexport { default as FieldCheckboxGroup } from './FieldCheckboxGroup/FieldCheckboxGroup';\r\nexport { default as FieldPhoneNumberInput } from './FieldPhoneNumberInput/FieldPhoneNumberInput';\r\nexport { default as LocationAutocompleteInput, FieldLocationAutocompleteInput } from './LocationAutocompleteInput/LocationAutocompleteInput';\r\n// Fields and inputs using old naming pattern\r\nexport { default as StripeBankAccountTokenInputField } from './StripeBankAccountTokenInputField/StripeBankAccountTokenInputField';\r\n// Fields wrapping react-dates\r\n// NOTE: these are code-splitted since the library is heavy and needed only on couple of pages\r\nexport const FieldDateInput = loadable(() => import(/* webpackChunkName: \"FieldDateInput\" */ './FieldDateInput/FieldDateInput'));\r\nexport const FieldDateRangeController = loadable(() => import(/* webpackChunkName: \"FieldDateRangeController\" */ './FieldDateRangeController/FieldDateRangeController'));\r\nexport const FieldDateRangeInput = loadable(() => import(/* webpackChunkName: \"FieldDateRangeInput\" */ './FieldDateRangeInput/FieldDateRangeInput'));\r\n\r\n// Tab navigation\r\nexport { default as TabNav } from './TabNav/TabNav';\r\nexport { LinkTabNavHorizontal, ButtonTabNavHorizontal } from './TabNavHorizontal/TabNavHorizontal';\r\nexport { default as Tabs } from './Tabs/Tabs';\r\nexport { default as UserNav } from './UserNav/UserNav';\r\n\r\n///////////////////////////////////////////////\r\n// These components include other components //\r\n///////////////////////////////////////////////\r\n\r\nexport { default as Avatar, AvatarSmall, AvatarMedium, AvatarLarge } from './Avatar/Avatar';\r\nexport { default as OrderBreakdown } from './OrderBreakdown/OrderBreakdown';\r\nexport { default as OrderPanel } from './OrderPanel/OrderPanel';\r\nexport { default as ListingCard } from './ListingCard/ListingCard';\r\nexport { default as Map } from './Map/Map';\r\nexport { default as Page } from './Page/Page';\r\nexport { default as Reviews } from './Reviews/Reviews';\r\nexport { default as SavedCardDetails } from './SavedCardDetails/SavedCardDetails';\r\nexport { default as StripeConnectAccountStatusBox } from './StripeConnectAccountStatusBox/StripeConnectAccountStatusBox';\r\nexport { default as StripePaymentAddress } from './StripePaymentAddress/StripePaymentAddress';\r\n\r\n// Forms\r\nexport { default as StripeConnectAccountForm } from './StripeConnectAccountForm/StripeConnectAccountForm';\r\n\r\n//////////////////////////////////////////////\r\n// Page sections and modal content wrappers //\r\n//////////////////////////////////////////////\r\n\r\nexport { default as LayoutComposer, LayoutSingleColumn, LayoutSideNavigation } from './LayoutComposer';\r\nexport { default as MaintenanceMode } from './MaintenanceMode/MaintenanceMode';\r\nexport { default as ModalMissingInformation } from './ModalMissingInformation/ModalMissingInformation';\r\n","/* Stripe related configuration.\r\n\r\nNOTE: REACT_APP_STRIPE_PUBLISHABLE_KEY is mandatory environment variable.\r\nThis variable is set in a hidden file: .env\r\nTo make Stripe connection work, you also need to set Stripe's private key in the Sharetribe Console.\r\n*/\r\n\r\nexport const publishableKey = process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY;\r\n\r\n// A maximum number of days forwards during which a booking can be made.\r\n// This is limited due to Stripe holding funds up to 90 days from the\r\n// moment they are charged. Also note that available time slots can only\r\n// be fetched for 180 days in the future.\r\nexport const dayCountAvailableForBooking = 90;\r\n\r\n/**\r\n * Default merchant category code (MCC)\r\n * MCCs are used to classify businesses by the type of goods or services they provide.\r\n *\r\n * In this template, we use code 5734 Computer Software Stores as a default for all the connected accounts.\r\n *\r\n * See the whole list of MCC codes from https://stripe.com/docs/connect/setting-mcc#list\r\n */\r\nexport const defaultMCC = '5734';\r\n\r\n/*\r\nStripe only supports payments in certain countries, see full list\r\nat https://stripe.com/global\r\n\r\nYou can find the bank account formats from https://stripe.com/docs/connect/payouts-bank-accounts\r\n*/\r\n\r\nexport const supportedCountries = [\r\n  {\r\n    //Australia\r\n    code: 'AU',\r\n    currency: 'AUD',\r\n    accountConfig: {\r\n      bsb: true,\r\n      accountNumber: true,\r\n    },\r\n  },\r\n  {\r\n    // Austria\r\n    code: 'AT',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Belgium\r\n    code: 'BE',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    //Bulgraia\r\n    code: 'BG',\r\n    currency: 'BGN',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Canada\r\n    code: 'CA',\r\n    currency: 'CAD',\r\n    accountConfig: {\r\n      transitNumber: true,\r\n      institutionNumber: true,\r\n      accountNumber: true,\r\n    },\r\n  },\r\n  {\r\n    //Cyprus\r\n    code: 'CY',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    //\tCzech Republic\r\n    code: 'CZ',\r\n    currency: 'CZK',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Denmark\r\n    code: 'DK',\r\n    currency: 'DKK',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Estionia\r\n    code: 'EE',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Finland\r\n    code: 'FI',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // France\r\n    code: 'FR',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Germany\r\n    code: 'DE',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Greece\r\n    code: 'GR',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Hong Kong\r\n    code: 'HK',\r\n    currency: 'HKD',\r\n    accountConfig: {\r\n      clearingCode: true,\r\n      branchCode: true,\r\n      accountNumber: true,\r\n    },\r\n  },\r\n  {\r\n    // Ireland\r\n    code: 'IE',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Italy\r\n    code: 'IT',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Japan\r\n    code: 'JP',\r\n    currency: 'JPY',\r\n    accountConfig: {\r\n      bankName: true,\r\n      branchName: true,\r\n      bankCode: true,\r\n      branchCode: true,\r\n      accountNumber: true,\r\n      accountOwnerName: true,\r\n    },\r\n  },\r\n  {\r\n    // Latvia\r\n    code: 'LV',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Lithuania\r\n    code: 'LT',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Luxembourg\r\n    code: 'LU',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Malta\r\n    code: 'MT',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Mexico\r\n    code: 'MX',\r\n    currency: 'MXN',\r\n    accountConfig: {\r\n      clabe: true,\r\n    },\r\n  },\r\n  {\r\n    // Netherlands\r\n    code: 'NL',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // New Zealand\r\n    code: 'NZ',\r\n    currency: 'NZD',\r\n    accountConfig: {\r\n      accountNumber: true,\r\n    },\r\n  },\r\n  {\r\n    // Norway\r\n    code: 'NO',\r\n    currency: 'NOK',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Poland\r\n    code: 'PL',\r\n    currency: 'PLN',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Portugal\r\n    code: 'PT',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Romania\r\n    code: 'RO',\r\n    currency: 'RON',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Singapore\r\n    code: 'SG',\r\n    currency: 'SGD',\r\n    accountConfig: {\r\n      bankCode: true,\r\n      branchCode: true,\r\n      accountNumber: true,\r\n    },\r\n  },\r\n  {\r\n    // Slovakia\r\n    code: 'SK',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Slovenia\r\n    code: 'SI',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Spain\r\n    code: 'ES',\r\n    currency: 'EUR',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Sweden\r\n    code: 'SE',\r\n    currency: 'SEK',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // Switzerland\r\n    code: 'CH',\r\n    currency: 'CHF',\r\n    accountConfig: {\r\n      iban: true,\r\n    },\r\n  },\r\n  {\r\n    // United Kingdom\r\n    code: 'GB',\r\n    currency: 'GBP',\r\n    accountConfig: {\r\n      sortCode: true,\r\n      accountNumber: true,\r\n    },\r\n  },\r\n  {\r\n    // United States\r\n    code: 'US',\r\n    currency: 'USD',\r\n    accountConfig: {\r\n      routingNumber: true,\r\n      accountNumber: true,\r\n    },\r\n  },\r\n];\r\n","/////////////////////////////////////////////////////////\r\n// Configurations related to listing.                  //\r\n// Main configuration here is the extended data config //\r\n/////////////////////////////////////////////////////////\r\n\r\n// Note: The listingFields come from listingFields asset nowadays by default.\r\n//       To use this built-in configuration, you need to change the overwrite from configHelper.js\r\n//       (E.g. use mergeDefaultTypesAndFieldsForDebugging func)\r\n\r\n/**\r\n * Configuration options for listing fields (custom extended data fields):\r\n * - key:                           Unique key for the extended data field.\r\n * - scope (optional):              Scope of the extended data can be either 'public' or 'private'.\r\n *                                  Default value: 'public'.\r\n *                                  Note: listing doesn't support 'protected' scope atm.\r\n * - includeForListingTypes:        An array of listing types, for which the extended\r\n *   (optional)                     data is relevant and should be added.\r\n * - schemaType (optional):         Schema for this extended data field.\r\n *                                  This is relevant when rendering components and querying listings.\r\n *                                  Possible values: 'enum', 'multi-enum', 'text', 'long', 'boolean'.\r\n * - enumOptions (optional):        Options shown for 'enum' and 'multi-enum' extended data.\r\n *                                  These are used to render options for inputs and filters on\r\n *                                  EditListingPage, ListingPage, and SearchPage.\r\n * - filterConfig:                  Filter configuration for listings query.\r\n *    - indexForSearch (optional):    If set as true, it is assumed that the extended data key has\r\n *                                    search index in place. I.e. the key can be used to filter\r\n *                                    listing queries (then scope needs to be 'public').\r\n *                                    Note: Flex CLI can be used to set search index for the key:\r\n *                                    https://www.sharetribe.com/docs/references/extended-data/#search-schema\r\n *                                    Read more about filtering listings with public data keys from API Reference:\r\n *                                    https://www.sharetribe.com/api-reference/marketplace.html#extended-data-filtering\r\n *                                    Default value: false,\r\n *   - filterType:                    Sometimes a single schemaType can be rendered with different filter components.\r\n *                                    For 'enum' schema, filterType can be 'SelectSingleFilter' or 'SelectMultipleFilter'\r\n *   - label:                         Label for the filter, if the field can be used as query filter\r\n *   - searchMode (optional):         Search mode for indexed data with multi-enum schema.\r\n *                                    Possible values: 'has_all' or 'has_any'.\r\n *   - group:                         SearchPageWithMap has grouped filters. Possible values: 'primary' or 'secondary'.\r\n * - showConfig:                    Configuration for rendering listing. (How the field should be shown.)\r\n *   - label:                         Label for the saved data.\r\n *   - isDetail                       Can be used to hide detail row (of type enum, boolean, or long) from listing page.\r\n *                                    Default value: true,\r\n * - saveConfig:                    Configuration for adding and modifying extended data fields.\r\n *   - label:                         Label for the input field.\r\n *   - placeholderMessage (optional): Default message for user input.\r\n *   - isRequired (optional):         Is the field required for providers to fill\r\n *   - requiredMessage (optional):    Message for those fields, which are mandatory.\r\n */\r\nexport const listingFields = [\r\n  {\r\n    key: 'category',\r\n    scope: 'public',\r\n    schemaType: 'enum',\r\n    enumOptions: [\r\n      { option: 'city-bikes', label: 'City bikes' },\r\n      { option: 'electric-bikes', label: 'Electric bikes' },\r\n      { option: 'mountain-bikes', label: 'Mountain bikes' },\r\n      { option: 'childrens-bikes', label: \"Children's bikes\" },\r\n    ],\r\n    filterConfig: {\r\n      indexForSearch: true,\r\n      filterType: 'SelectMultipleFilter',\r\n      label: 'Category',\r\n      group: 'primary',\r\n    },\r\n    showConfig: {\r\n      label: 'Category',\r\n      isDetail: true,\r\n    },\r\n    saveConfig: {\r\n      label: 'Category',\r\n      placeholderMessage: 'Select an option',\r\n      isRequired: true,\r\n      requiredMessage: 'You need to select a category.',\r\n    },\r\n  },\r\n  {\r\n    key: 'tire',\r\n    scope: 'public',\r\n    schemaType: 'enum',\r\n    enumOptions: [\r\n      { option: '29', label: '29' },\r\n      { option: '28', label: '28' },\r\n      { option: '27', label: '27' },\r\n      { option: '26', label: '26' },\r\n      { option: '24', label: '24' },\r\n      { option: '20', label: '20' },\r\n      { option: '18', label: '18' },\r\n    ],\r\n    filterConfig: {\r\n      indexForSearch: true,\r\n      label: 'Tire size',\r\n      group: 'secondary',\r\n    },\r\n    showConfig: {\r\n      label: 'Tire size',\r\n      isDetail: true,\r\n    },\r\n    saveConfig: {\r\n      label: 'Tire size',\r\n      placeholderMessage: 'Select an option',\r\n      isRequired: true,\r\n      requiredMessage: 'You need to select a tire size.',\r\n    },\r\n  },\r\n  {\r\n    key: 'brand',\r\n    scope: 'public',\r\n    schemaType: 'enum',\r\n    enumOptions: [\r\n      { option: 'cube', label: 'Cube' },\r\n      { option: 'diamant', label: 'Diamant' },\r\n      { option: 'ghost', label: 'GHOST' },\r\n      { option: 'giant', label: 'Giant' },\r\n      { option: 'kalkhoff', label: 'Kalkhoff' },\r\n      { option: 'kona', label: 'Kona' },\r\n      { option: 'otler', label: 'Otler' },\r\n      { option: 'vermont', label: 'Vermont' },\r\n    ],\r\n    filterConfig: {\r\n      indexForSearch: true,\r\n      label: 'Brand',\r\n      group: 'secondary',\r\n    },\r\n    showConfig: {\r\n      label: 'Brand',\r\n      isDetail: true,\r\n    },\r\n    saveConfig: {\r\n      label: 'Brand',\r\n      placeholderMessage: 'Select an option',\r\n      isRequired: true,\r\n      requiredMessage: 'You need to select a brand.',\r\n    },\r\n  },\r\n  {\r\n    key: 'accessories',\r\n    scope: 'public',\r\n    schemaType: 'multi-enum',\r\n    enumOptions: [\r\n      { option: 'bell', label: 'Bell' },\r\n      { option: 'lights', label: 'Lights' },\r\n      { option: 'lock', label: 'Lock' },\r\n      { option: 'mudguard', label: 'Mudguard' },\r\n    ],\r\n    filterConfig: {\r\n      indexForSearch: true,\r\n      label: 'Accessories',\r\n      searchMode: 'has_all',\r\n      group: 'secondary',\r\n    },\r\n    showConfig: {\r\n      label: 'Accessories',\r\n    },\r\n    saveConfig: {\r\n      label: 'Accessories',\r\n      placeholderMessage: 'Select an option',\r\n      isRequired: false,\r\n    },\r\n  },\r\n\r\n  // // An example of how to use transaction type specific custom fields and private data.\r\n  // {\r\n  //   key: 'note',\r\n  //   scope: 'public',\r\n  //   includeForListingTypes: ['product-selling'],\r\n  //   schemaType: 'text',\r\n  //   showConfig: {\r\n  //     label: 'Extra notes',\r\n  //   },\r\n  //   saveConfig: {\r\n  //     label: 'Extra notes',\r\n  //     placeholderMessage: 'Some public extra note about this bike...',\r\n  //   },\r\n  // },\r\n  // {\r\n  //   key: 'privatenote',\r\n  //   scope: 'private',\r\n  //   includeForListingTypes: ['daily-booking'],\r\n  //   schemaType: 'text',\r\n  //   saveConfig: {\r\n  //     label: 'Private notes',\r\n  //     placeholderMessage: 'Some private note about this bike...',\r\n  //   },\r\n  // },\r\n];\r\n\r\n///////////////////////////////////////////////////////////////////////\r\n// Configurations related to listing types and transaction processes //\r\n///////////////////////////////////////////////////////////////////////\r\n\r\n// A presets of supported listing configurations\r\n//\r\n// Note 1: The listingTypes come from listingTypes asset nowadays by default.\r\n//         To use this built-in configuration, you need to change the overwrite from configHelper.js\r\n//         (E.g. use mergeDefaultTypesAndFieldsForDebugging func)\r\n// Note 2: transaction type is part of listing type. It defines what transaction process and units\r\n//         are used when transaction is created against a specific listing.\r\n\r\n/**\r\n * Configuration options for listing experience:\r\n * - listingType:         Unique string. This will be saved to listing's public data on\r\n *                        EditListingWizard.\r\n * - label                Label for the listing type. Used as microcopy for options to select\r\n *                        listing type in EditListingWizard.\r\n * - transactionType      Set of configurations how this listing type will behave when transaction is\r\n *                        created.\r\n *   - process              Transaction process.\r\n *                          The process must match one of the processes that this client app can handle\r\n *                          (check src/util/transactions/transaction.js) and the process must also exists in correct\r\n *                          marketplace environment.\r\n *   - alias                Valid alias for the aforementioned process. This will be saved to listing's\r\n *                          public data as transctionProcessAlias and transaction is initiated with this.\r\n *   - unitType             Unit type is mainly used as pricing unit. This will be saved to\r\n *                          transaction's protected data.\r\n *                          Recommendation: don't use same unit types in completely different processes\r\n *                          ('item' sold should not be priced the same as 'item' booked).\r\n * - stockType            This is relevant only to listings using default-purchase process.\r\n *                        If set to 'oneItem', stock management is not showed and the listing is\r\n *                        considered unique (stock = 1).\r\n *                        Possible values: 'oneItem' and 'multipleItems'.\r\n *                        Default: 'multipleItems'.\r\n * - defaultListingFields These are tied to transaction processes. Different processes have different flags.\r\n *                        E.g. default-inquiry can toggle price and location to true/false value to indicate,\r\n *                        whether price (or location) tab should be shown. If defaultListingFields.price is not\r\n *                        explicitly set to _false_, price will be shown.\r\n *                        If the location or pickup is not used, listing won't be returned with location search.\r\n *                        Use keyword search as main search type if location is not enforced.\r\n *                        The payoutDetails flag allows provider to bypass setting of payout details.\r\n *                        Note: customers can't order listings, if provider has not set payout details! Monitor\r\n *                        providers who have not set payout details and contact them to ensure that they add the details.\r\n */\r\n\r\nexport const listingTypes = [\r\n  {\r\n    listingType: 'daily-booking',\r\n    label: 'Daily booking',\r\n    transactionType: {\r\n      process: 'default-booking',\r\n      alias: 'default-booking/release-1',\r\n      unitType: 'day',\r\n    },\r\n    defaultListingFields: {\r\n      location: true,\r\n      payoutDetails: true,\r\n    },\r\n  },\r\n  // // Here are some examples for other listingTypes\r\n  // // TODO: SearchPage does not work well if both booking and product selling are used at the same time\r\n  // {\r\n  //   listingType: 'nightly-booking',\r\n  //   label: 'Nightly booking',\r\n  //   transactionType: {\r\n  //     process: 'default-booking',\r\n  //     alias: 'default-booking/release-1',\r\n  //     unitType: 'night',\r\n  //   },\r\n  // },\r\n  // {\r\n  //   listingType: 'hourly-booking',\r\n  //   label: 'Hourly booking',\r\n  //   transactionType: {\r\n  //     process: 'default-booking',\r\n  //     alias: 'default-booking/release-1',\r\n  //     unitType: 'hour',\r\n  //   },\r\n  // },\r\n  // {\r\n  //   listingType: 'product-selling',\r\n  //   label: 'Sell bicycles',\r\n  //   transactionType: {\r\n  //     process: 'default-purchase',\r\n  //     alias: 'default-purchase/release-1',\r\n  //     unitType: 'item',\r\n  //   },\r\n  //   stockType: 'multipleItems',\r\n  //   defaultListingFields: {\r\n  //     shipping: true,\r\n  //     pickup: true,\r\n  //     payoutDetails: true,\r\n  //   },\r\n  // },\r\n  // {\r\n  //   listingType: 'inquiry',\r\n  //   label: 'Inquiry',\r\n  //   transactionType: {\r\n  //     process: 'default-inquiry',\r\n  //     alias: 'default-inquiry/release-1',\r\n  //     unitType: 'inquiry',\r\n  //   },\r\n  //   defaultListingFields: {\r\n  //     price: false,\r\n  //     location: true,\r\n  //   },\r\n  // },\r\n];\r\n\r\n// SearchPage can enforce listing query to only those listings with valid listingType\r\n// However, it only works if you have set 'enum' type search schema for the public data fields\r\n//   - listingType\r\n//\r\n//  Similar setup could be expanded to 2 other extended data fields:\r\n//   - transactionProcessAlias\r\n//   - unitType\r\n//\r\n// Read More:\r\n// https://www.sharetribe.com/docs/how-to/manage-search-schemas-with-flex-cli/#adding-listing-search-schemas\r\nexport const enforceValidListingType = false;\r\n","//////////////////////////////////////////////////////////////////////\r\n// Configurations related to search                                 //\r\n// Note: some search experience is also on defaultMapsConfig        //\r\n// and defaultListingConfig.js is responsible public data filtering //\r\n//////////////////////////////////////////////////////////////////////\r\n\r\n// NOTE: if you want to change the structure of the data,\r\n// you should also check src/util/configHelpers.js\r\n// some validation is added there.\r\n\r\n// Main search used in Topbar.\r\n// This can be either 'keywords' or 'location'.\r\n// Note: The mainSearch comes from the listing-search asset nowadays by default.\r\n//       To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeSearchConfig func)\r\nexport const mainSearch = {\r\n  searchType: 'location',\r\n};\r\n\r\n/**\r\n * Configuration for default filters.\r\n * These are custom configs for each filter.\r\n * Common properties: key, schemaType, and label.\r\n * Note: the order of default filters is defined in util/configHelpers.js\r\n * To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeSearchConfig func)\r\n */\r\n\r\nexport const dateRangeFilter = {\r\n  schemaType: 'dates',\r\n  // Should the entire date range be available, or just part of it\r\n  // Note: Since we don't enforce location search for dates filtering,\r\n  //       we don't use API's 'time-full' in actual queries. It would require time zone info.\r\n  availability: 'time-full', // time-partial\r\n  // Options: day/night. This affects counting and whether single day picking is possible.\r\n  dateRangeMode: 'day',\r\n};\r\n\r\n/**\r\n * Note: the order of default filters is defined in util/configHelpers.js\r\n * To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeSearchConfig func)\r\n */\r\nexport const priceFilter = {\r\n  schemaType: 'price',\r\n  // Note: unlike most prices this is not handled in subunits\r\n  min: 0,\r\n  max: 1000,\r\n  step: 5,\r\n};\r\n// // This is not in use by default.\r\n// export const keywordsFilter = {\r\n//   key: 'keywords',\r\n//   schemaType: 'keywords',\r\n// }\r\n\r\nexport const sortConfig = {\r\n  // Enable/disable the sorting control in the SearchPage\r\n  active: true,\r\n\r\n  // Note: queryParamName 'sort' is fixed,\r\n  // you can't change it since Marketplace API expects it to be named as 'sort'\r\n  queryParamName: 'sort',\r\n\r\n  // Internal key for the relevance option, see notes below.\r\n  relevanceKey: 'relevance',\r\n\r\n  // Relevance key is used with keywords filter.\r\n  // Keywords filter also sorts results according to relevance.\r\n  relevanceFilter: 'keywords',\r\n\r\n  // Keyword filter is sorting the results by relevance.\r\n  // If keyword filter is active, one might want to disable other sorting options\r\n  // by adding 'keywords' to this list.\r\n  conflictingFilters: [],\r\n\r\n  options: [\r\n    // These are default sort options\r\n    { key: 'createdAt', labelTranslationKey: 'SortBy.newest' },\r\n    { key: '-createdAt', labelTranslationKey: 'SortBy.oldest' },\r\n    { key: '-price', labelTranslationKey: 'SortBy.lowestPrice' },\r\n    { key: 'price', labelTranslationKey: 'SortBy.highestPrice' },\r\n    // If you add own sort options, you can also use label key: { key: 'meta_rating', label: 'Highest rated' },\r\n\r\n    // The relevance is only used for keyword search, but the\r\n    // parameter isn't sent to the Marketplace API. The key is purely\r\n    // for handling the internal state of the sorting dropdown.\r\n    {\r\n      key: 'relevance',\r\n      labelTranslationKey: 'SortBy.relevance',\r\n      labelTranslationKeyLong: 'SortBy.relevanceLong',\r\n    },\r\n  ],\r\n};\r\n","import { types as sdkTypes } from '../util/sdkLoader';\r\n\r\nconst { LatLng, LatLngBounds } = sdkTypes;\r\n\r\n// An array of locations to show in the LocationAutocompleteInput when\r\n// the input is in focus but the user hasn't typed in any search yet.\r\n//\r\n// Each item in the array should be an object with a unique `id` (String) and a\r\n// `predictionPlace` (util.types.place) properties.\r\n//\r\n// NOTE: these are highly recommended, since they\r\n//       1) help customers to find relevant locations, and\r\n//       2) reduce the cost of using map providers geocoding API\r\nconst defaultLocations = [\r\n  // {\r\n  //   id: 'default-helsinki',\r\n  //   predictionPlace: {\r\n  //     address: 'Helsinki, Finland',\r\n  //     bounds: new LatLngBounds(new LatLng(60.29783, 25.25448), new LatLng(59.92248, 24.78287)),\r\n  //   },\r\n  // },\r\n  // {\r\n  //   id: 'default-turku',\r\n  //   predictionPlace: {\r\n  //     address: 'Turku, Finland',\r\n  //     bounds: new LatLngBounds(new LatLng(60.53045, 22.38197), new LatLng(60.33361, 22.06644)),\r\n  //   },\r\n  // },\r\n  // {\r\n  //   id: 'default-tampere',\r\n  //   predictionPlace: {\r\n  //     address: 'Tampere, Finland',\r\n  //     bounds: new LatLngBounds(new LatLng(61.83657, 24.11838), new LatLng(61.42728, 23.5422)),\r\n  //   },\r\n  // },\r\n  // {\r\n  //   id: 'default-oulu',\r\n  //   predictionPlace: {\r\n  //     address: 'Oulu, Finland',\r\n  //     bounds: new LatLngBounds(new LatLng(65.56434, 26.77069), new LatLng(64.8443, 24.11494)),\r\n  //   },\r\n  // },\r\n  // {\r\n  //   id: 'default-ruka',\r\n  //   predictionPlace: {\r\n  //     address: 'Ruka, Finland',\r\n  //     bounds: new LatLngBounds(new LatLng(66.16997, 29.16773), new LatLng(66.16095, 29.13572)),\r\n  //   },\r\n  // },\r\n];\r\nexport default defaultLocations;\r\n","import defaultLocationSearches from './configDefaultLocationSearches';\r\n\r\n//////////////////////////////////////////////////////\r\n// Configurations related to maps and map providers //\r\n//////////////////////////////////////////////////////\r\n\r\n// Note: The mapboxAccessToken & googleMapsAPIKey come from map asset nowadays by default.\r\n//       To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeMapConfig func)\r\nexport const mapboxAccessToken = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\r\nexport const googleMapsAPIKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\r\n\r\n// Choose map provider: 'mapbox', 'googleMaps'\r\n// Note: The mapProvider comes from map asset nowadays by default.\r\n//       To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeMapConfig func)\r\nexport const mapProvider = 'mapbox';\r\n\r\n// The location search input can be configured to show default\r\n// searches when the user focuses on the input and hasn't yet typed\r\n// anything. This reduces typing and avoids too many Geolocation API\r\n// calls for common searches.\r\nexport const search = {\r\n  // When enabled, the first suggestion is \"Current location\" that\r\n  // uses the browser Geolocation API to query the user's current\r\n  // location.\r\n  suggestCurrentLocation: true,\r\n\r\n  // Distance in meters for calculating the bounding box around the\r\n  // current location.\r\n  currentLocationBoundsDistance: 1000,\r\n\r\n  // This affects location search.\r\n  // These \"default locations\" can be edited in the\r\n  // `configDefaultLocationSearches.js` file.\r\n  // NOTE: these are highly recommended, since they\r\n  //       1) help customers to find relevant locations, and\r\n  //       2) reduce the cost of using map providers geocoding API\r\n  defaults: defaultLocationSearches || [],\r\n\r\n  // Should search results be ordered by distance to origin.\r\n  // NOTE 1: This doesn't affect if the main search type is 'keywords'\r\n  // NOTE 2: If this is set to true add parameter 'origin' to every location in configDefaultLocationSearches.js\r\n  //         Without the 'origin' parameter, search will not work correctly\r\n  // NOTE 3: Keyword search and ordering search results by distance can't be used at the same time.\r\n  //         You should check that keyword filter is not used in configSearch.js\r\n  sortSearchByDistance: false,\r\n\r\n  // Limit location autocomplete to a one or more countries\r\n  // using ISO 3166 alpha 2 country codes separated by commas.\r\n  // If you want to limit the autocomplete, uncomment this value:\r\n  // countryLimit: ['AU'],\r\n};\r\n\r\n// When fuzzy locations are enabled, coordinates on maps are\r\n// obfuscated randomly around the actual location.\r\n//\r\n// NOTE: This only hides the locations in the UI level, the actual\r\n// coordinates are still accessible in the HTTP requests and the\r\n// Redux store.\r\nexport const fuzzy = {\r\n  enabled: false,\r\n\r\n  // Amount of maximum offset in meters that is applied to obfuscate\r\n  // the original coordinates. The actual value is random, but the\r\n  // obfuscated coordinates are withing a circle that has the same\r\n  // radius as the offset.\r\n  offset: 500,\r\n\r\n  // Default zoom level when showing a single circle on a Map. Should\r\n  // be small enough so the whole circle fits in.\r\n  defaultZoomLevel: 13,\r\n\r\n  // Color of the circle on the Map component.\r\n  circleColor: '#c0392b',\r\n};\r\n","import logoImageDesktop from '../assets/biketribe-logo-desktop.png';\r\nimport logoImageMobile from '../assets/biketribe-logo-mobile.png';\r\nimport brandImage from '../assets/biketribe-brandImage-1500.jpg';\r\nimport facebookImage from '../assets/biketribe-facebook-sharing-1200x630.jpg';\r\nimport twitterImage from '../assets/biketribe-twitter-sharing-600x314.jpg';\r\n\r\n/////////////////////////////////////////////////////////\r\n// This file contains configs that affect branding     //\r\n// NOTE: these are just some of the relevant configs   //\r\n// Most of the work happens in marketplaceDefaults.css //\r\n// and in components.                                  //\r\n/////////////////////////////////////////////////////////\r\n\r\n// Note: These come from the branding asset nowadays by default.\r\n//       To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeBranding func)\r\n\r\n// Marketplace color.\r\n// This is saved as CSS Property: --marketplaceColor in src/app.js\r\n// Also --marketplaceColorDark and --marketplaceColorLight are generated from this one\r\n// by adding +/- 10% to lightness.\r\nexport const marketplaceColor = '#7c3aed';\r\n\r\n// Logo is used in Topbar on mobile and desktop, where height is the limiting factor.\r\n// Therefore, we strongly suggest that your image file for desktop logo is in landscape!\r\n//\r\n// If you need to fine-tune the logo, the component is defined in src/components/Logo/Logo.js\r\n// By default logo gets 24 pixels vertical space, but it could be wider (e.g. 180px)\r\n// The default images are meant for retina displays and are therefore twice as big in actual dimensions\r\nexport const logoImageDesktopURL = logoImageDesktop;\r\nexport const logoImageMobileURL = logoImageMobile;\r\n\r\n// The _logoSettings_ settings for the logo. Due to constraints in current Topbar, we only support 3 height variants\r\n// at this point. There could be more height variants in the future and potentially other logo formats than 'image'.\r\n// Note: logo image is always scaled and the limiting factor is height. However, there's also maximum width,\r\n//       which is 370px in the Topbar. If the logo is wider than that, browser will scale it down.\r\nexport const logoSettings = {\r\n  height: 24, // Hosted asset supports: 24, 36, 48\r\n  format: 'image',\r\n};\r\n\r\n// brandImageURL is used as a background image on the \"hero\" section of several pages.\r\n// Used on AuthenticationPage, EmailVerificationPage, PasswordRecoveryPage, PasswordResetPage etc.\r\n// NOTE: Those pages use ResponsiveBackgroundImageContainer component,\r\n//       it's possible to include more image variants to make image fetching more performant.\r\nexport const brandImageURL = brandImage;\r\n\r\n// Default images for social media sharing\r\n// These can be overwritten per page\r\n\r\n// For Facebook, the aspect ratio should be 1200x630 (otherwise, the image is cropped)\r\nexport const facebookImageURL = facebookImage;\r\n// For Twitter, the aspect ratio should be 600x314 (otherwise, the image is cropped)\r\nexport const twitterImageURL = twitterImage;\r\n","///////////////////////////////////////////////////////\r\n// This file contains configs that affect layout     //\r\n// NOTE: these are just some of the relevant configs //\r\n// Most of the work happens in components.           //\r\n///////////////////////////////////////////////////////\r\n\r\n// Note: These come from the layout asset nowadays by default.\r\n//       To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeLayouts func)\r\n\r\n// There are 2 SearchPage variants that can be used:\r\n// 'map' & 'grid'\r\nexport const searchPage = {\r\n  variantType: 'map',\r\n};\r\n\r\n// ListingPage has 2 layout options: 'coverPhoto' and 'carousel'.\r\n// - 'coverPhoto' means a layout where there's a hero section with cropped image in the beginning of the page\r\n// - 'carousel' shows image carousel, where listing images are shown with the original aspect ratio\r\nexport const listingPage = {\r\n  variantType: 'carousel',\r\n};\r\n\r\n// ListingImage currently supports only one variant type, but it has aspectRatio as an extra configuration.\r\nexport const listingImage = {\r\n  variantType: 'cropImage',\r\n  // Aspect ratio for listing image variants (width/height)\r\n  // Note: This will be converted to separate aspectWidth and aspectHeight values\r\n  // to make calculations easier.\r\n  aspectRatio: '4/3',\r\n  // Listings have custom image variants, which are named here.\r\n  variantPrefix: 'listing-card',\r\n};\r\n","////////////////////////////////////////////////////////////////////\r\n// This file contains configs that add analytics integrations     //\r\n////////////////////////////////////////////////////////////////////\r\n\r\n// Note: These come from the analytics asset nowadays by default.\r\n//       To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeAnalyticsConfig func)\r\n\r\n// Optional\r\n// Note that Google Analytics might need advanced opt-out option / cookie consent\r\n// depending on jurisdiction (e.g. EU countries), since it relies on cookies.\r\nexport const googleAnalyticsId = process.env.REACT_APP_GOOGLE_ANALYTICS_ID;\r\n\r\n// Optional\r\n// If you add this Plausible integration, you should first create an account in plausible.io\r\n// This adds data-domains for Plausible script through environment variable: REACT_APP_PLAUSIBLE_DOMAINS\r\n// https://plausible.io/docs/plausible-script#can-i-send-stats-to-multiple-dashboards-at-the-same-time\r\n// You can add multiple domains separated by comma\r\n// E.g. REACT_APP_PLAUSIBLE_DOMAINS=example1.com,example2.com\r\nexport const plausibleDomains = process.env.REACT_APP_PLAUSIBLE_DOMAINS;\r\n","import * as stripe from './configStripe';\r\nimport * as listing from './configListing';\r\nimport * as search from './configSearch';\r\nimport * as maps from './configMaps';\r\nimport * as branding from './configBranding';\r\nimport * as layout from './configLayout';\r\nimport * as analytics from './configAnalytics';\r\n\r\n// NOTE: only expose configuration that should be visible in the\r\n// client side, don't add any server secrets to this file.\r\nconst defaultConfig = {\r\n  // Marketplace root url is the root or domain, where this app is currently running\r\n  // It is needed in social media sharing and SEO optimization purposes and SSO etc.\r\n  // It should be in environment variables (on localhost 'yarn run config' or edit .env file)\r\n  marketplaceRootURL: process.env.REACT_APP_MARKETPLACE_ROOT_URL,\r\n\r\n  // Marketplace currency.\r\n  // The currency used in the Marketplace must be in ISO 4217 currency code. For example USD, EUR, CAD, AUD, etc. The default value is USD.\r\n  // It should match one of the currencies listed in currencySettings.js\r\n  // Note: The currency comes from localization asset nowadays by default.\r\n  //       To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeCurrency func)\r\n  currency: 'USD',\r\n\r\n  // Listing minimum price in currency sub units, e.g. cents.\r\n  // 0 means no restriction to the price\r\n  // Note 1: The listingMinimumPriceSubUnits comes from transactionSize asset nowadays by default.\r\n  //         To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeConfig func)\r\n  // Note 2: Stripe does have minimum fee that depends on country, currency, etc.\r\n  listingMinimumPriceSubUnits: 500,\r\n\r\n  // Marketplace name is needed for microcopy (aka marketplace texts) and in meta tags (bots and social media sharing reads those)\r\n  marketplaceName: process.env.REACT_APP_MARKETPLACE_NAME || 'Biketribe',\r\n\r\n  // Modify Stripe configuration in configStripe.js\r\n  // - picks REACT_APP_STRIPE_PUBLISHABLE_KEY from environment variables\r\n  // - dayCountAvailableForBooking: Stripe can hold payments only limited time on Connect Account\r\n  //                                This adds some restriction for bookings (payouts vs long bookings)\r\n  // - defaultMCC: sets Default Merchant Category Code\r\n  // - supportedCountries\r\n  stripe,\r\n\r\n  // Modify listing extended data and listing type in configListing.js\r\n  listing,\r\n  // Modify search settings data in configSearch.js\r\n  search,\r\n  // Modify settings for map providers in configMaps.js\r\n  // This includes also default locations for location search\r\n  maps,\r\n  // Modify branding configs in configBranding.js\r\n  branding,\r\n  // Modify layout configs in configLayout.js\r\n  layout,\r\n  // Modify analytics configs in configAnalytics.js\r\n  // By default, it doesn't add anything.\r\n  analytics,\r\n\r\n  // Note: Facebook app id is used for Facebook login, but it is also used for tracking:\r\n  // Facebook counts shares with app or page associated by this id\r\n  // Currently it is unset, but you can read more about fb:app_id from\r\n  // https://developers.facebook.com/docs/sharing/webmasters#basic\r\n  // You should create one to track social sharing in Facebook\r\n  facebookAppId: process.env.REACT_APP_FACEBOOK_APP_ID,\r\n\r\n  // If you want to change the language, remember to also change the\r\n  // locale data and the messages in the app.js file.\r\n  // Note: The localization comes from localization asset nowadays by default.\r\n  //       To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeLocalizations func)\r\n  localization: {\r\n    locale: 'en-US',\r\n    // First day of week\r\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/getWeekInfo#return_value\r\n    // 1: Monday\r\n    // ...\r\n    // 6: Saturday\r\n    // 7: Sunday\r\n    firstDayOfWeek: 1,\r\n  },\r\n\r\n  // CDN assets for the app. Configurable through Sharetribe Console.\r\n  // Note 1: The path must match the path defined in Asset Delivery API\r\n  // Note 2: If you customize the app and rely on custom code instead of a config assets,\r\n  //         you should remove the unnecessary config asset from this list.\r\n  appCdnAssets: {\r\n    translations: '/content/translations.json',\r\n    footer: '/content/footer.json',\r\n    branding: '/design/branding.json',\r\n    layout: '/design/layout.json',\r\n    listingTypes: '/listings/listing-types.json',\r\n    listingFields: '/listings/listing-fields.json',\r\n    search: '/listings/listing-search.json',\r\n    transactionSize: '/transactions/minimum-transaction-size.json',\r\n    analytics: '/integrations/analytics.json',\r\n    googleSearchConsole: '/integrations/google-search-console.json',\r\n    maps: '/integrations/map.json',\r\n    // These assets are not yet editable through Console.\r\n    // However, Sharetribe onboarding might generate them.\r\n    // You could still rely on built-in variables and comment these out.\r\n    localization: '/general/localization.json',\r\n    // NOTE: we don't fetch commission configuration here but on the server-side\r\n  },\r\n\r\n  // Optional\r\n  // Online presence of the same organization:\r\n  // Facebook page is used in SEO schema (http://schema.org/Organization)\r\n  siteFacebookPage: null, // e.g. '@sharetribe',\r\n  // Instagram page is used in SEO schema (http://schema.org/Organization)\r\n  siteInstagramPage: null, // e.g. 'https://www.instagram.com/sharetribe/',\r\n  // Twitter handle is needed in meta tags (twitter:site). Start it with '@' character\r\n  siteTwitterHandle: null, // e.g. 'https://www.facebook.com/Sharetribe/',\r\n\r\n  // Optional\r\n  // This creates meta tag for Google Search Console verification\r\n  // I.e. <meta name=google-site-verification content=GOOGLE_SITE_VERIFICATION_TOKEN/>\r\n  // Note: The googleSearchConsole comes from googleSearchConsole asset nowadays by default.\r\n  //       To use this built-in configuration, you need to remove the overwrite from configHelper.js (mergeConfig func)\r\n  googleSearchConsole: {\r\n    googleSiteVerification: null, // Add google-site-verification token as a string\r\n  },\r\n\r\n  // Optional\r\n  // Address information is used in SEO schema for Organization (http://schema.org/PostalAddress)\r\n  // Note: Google doesn't recognize this:\r\n  // https://developers.google.com/search/docs/advanced/structured-data/logo#structured-data-type-definitions\r\n  address: {\r\n    addressCountry: null, // 'FI',\r\n    addressRegion: null, // 'Helsinki',\r\n    postalCode: null, // '00130',\r\n    streetAddress: null, // 'Erottajankatu 19 B',\r\n  },\r\n};\r\n\r\nexport default defaultConfig;\r\n","import { subUnitDivisors, currencyFormatting } from './settingsCurrency';\r\n\r\n// NOTE: only expose configuration that should be visible in the\r\n// client side, don't add any server secrets in this file.\r\n//\r\n// To pass environment variables to the client app in the build\r\n// script, react-scripts (and the sharetribe-scripts fork of\r\n// react-scripts) require using the REACT_APP_ prefix to avoid\r\n// exposing server secrets to the client side.\r\n\r\nconst appSettings = {\r\n  env: process.env.REACT_APP_ENV,\r\n  dev: process.env.REACT_APP_ENV === 'development',\r\n  verbose: false,\r\n\r\n  sdk: {\r\n    clientId: process.env.REACT_APP_SHARETRIBE_SDK_CLIENT_ID,\r\n    baseUrl: process.env.REACT_APP_SHARETRIBE_SDK_BASE_URL,\r\n    assetCdnBaseUrl: process.env.REACT_APP_SHARETRIBE_SDK_ASSET_CDN_BASE_URL,\r\n    transitVerbose: process.env.REACT_APP_SHARETRIBE_SDK_TRANSIT_VERBOSE === 'true',\r\n  },\r\n\r\n  // Get currency formatting options for given currency.\r\n  // See: https://github.com/yahoo/react-intl/wiki/API#formatnumber\r\n  getCurrencyFormatting: currencyFormatting,\r\n  // It's not guaranteed that currencies can be split to 100 subunits!\r\n  subUnitDivisors,\r\n\r\n  // Sentry DSN (Data Source Name), a client key for authenticating calls to Sentry\r\n  sentryDsn: process.env.REACT_APP_SENTRY_DSN,\r\n\r\n  // If webapp is using SSL (i.e. it's behind 'https' protocol)\r\n  usingSSL: process.env.REACT_APP_SHARETRIBE_USING_SSL === 'true',\r\n};\r\n\r\nexport default appSettings;\r\n","// See: https://en.wikipedia.org/wiki/ISO_4217\r\n// See: https://stripe.com/docs/currencies\r\nexport const subUnitDivisors = {\r\n  AUD: 100,\r\n  BGN: 100,\r\n  CAD: 100,\r\n  CHF: 100,\r\n  CNY: 100,\r\n  CZK: 100,\r\n  DKK: 100,\r\n  EUR: 100,\r\n  GBP: 100,\r\n  HKD: 100,\r\n  INR: 100,\r\n  JPY: 1,\r\n  MXN: 100,\r\n  NOK: 100,\r\n  NZD: 100,\r\n  PLN: 100,\r\n  RON: 100,\r\n  SEK: 100,\r\n  SGD: 100,\r\n  USD: 100,\r\n};\r\n\r\n/**\r\n * Currency formatting options.\r\n * See: https://github.com/yahoo/react-intl/wiki/API#formatnumber\r\n *\r\n * @param {string} currency\r\n */\r\nexport const currencyFormatting = currency => {\r\n  if (!subUnitDivisors[currency]) {\r\n    const currencies = Object.keys(subUnitDivisors);\r\n    throw new Error(\r\n      `Configuration missing for currency: ${currency}. Supported currencies: ${currencies.join(\r\n        ', '\r\n      )}.`\r\n    );\r\n  }\r\n\r\n  return subUnitDivisors[currency] === 1\r\n    ? {\r\n        style: 'currency',\r\n        currency,\r\n        currencyDisplay: 'symbol',\r\n        useGrouping: true,\r\n        // If the currency is not using subunits (like JPY), remove fractions.\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 0,\r\n      }\r\n    : {\r\n        style: 'currency',\r\n        currency,\r\n        currencyDisplay: 'symbol',\r\n        useGrouping: true,\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2,\r\n      };\r\n};\r\n","import { fetchPageAssets } from '../../ducks/hostedAssets.duck';\r\nexport const TOS_ASSET_NAME = 'terms-of-service';\r\nexport const PRIVACY_POLICY_ASSET_NAME = 'privacy-policy';\r\n\r\nexport const loadData = (params, search) => dispatch => {\r\n  const pageAsset = {\r\n    termsOfService: `content/pages/${TOS_ASSET_NAME}.json`,\r\n    privacyPolicy: `content/pages/${PRIVACY_POLICY_ASSET_NAME}.json`,\r\n  };\r\n  return dispatch(fetchPageAssets(pageAsset, true));\r\n};\r\n","import pick from 'lodash/pick';\r\nimport { initiatePrivileged, transitionPrivileged } from '../../util/api';\r\nimport { denormalisedResponseEntities } from '../../util/data';\r\nimport { storableError } from '../../util/errors';\r\nimport * as log from '../../util/log';\r\nimport { fetchCurrentUserHasOrdersSuccess, fetchCurrentUser } from '../../ducks/user.duck';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const SET_INITIAL_VALUES = 'app/CheckoutPage/SET_INITIAL_VALUES';\r\n\r\nexport const INITIATE_ORDER_REQUEST = 'app/CheckoutPage/INITIATE_ORDER_REQUEST';\r\nexport const INITIATE_ORDER_SUCCESS = 'app/CheckoutPage/INITIATE_ORDER_SUCCESS';\r\nexport const INITIATE_ORDER_ERROR = 'app/CheckoutPage/INITIATE_ORDER_ERROR';\r\n\r\nexport const CONFIRM_PAYMENT_REQUEST = 'app/CheckoutPage/CONFIRM_PAYMENT_REQUEST';\r\nexport const CONFIRM_PAYMENT_SUCCESS = 'app/CheckoutPage/CONFIRM_PAYMENT_SUCCESS';\r\nexport const CONFIRM_PAYMENT_ERROR = 'app/CheckoutPage/CONFIRM_PAYMENT_ERROR';\r\n\r\nexport const SPECULATE_TRANSACTION_REQUEST = 'app/CheckoutPage/SPECULATE_TRANSACTION_REQUEST';\r\nexport const SPECULATE_TRANSACTION_SUCCESS = 'app/CheckoutPage/SPECULATE_TRANSACTION_SUCCESS';\r\nexport const SPECULATE_TRANSACTION_ERROR = 'app/CheckoutPage/SPECULATE_TRANSACTION_ERROR';\r\n\r\nexport const STRIPE_CUSTOMER_REQUEST = 'app/CheckoutPage/STRIPE_CUSTOMER_REQUEST';\r\nexport const STRIPE_CUSTOMER_SUCCESS = 'app/CheckoutPage/STRIPE_CUSTOMER_SUCCESS';\r\nexport const STRIPE_CUSTOMER_ERROR = 'app/CheckoutPage/STRIPE_CUSTOMER_ERROR';\r\n\r\nexport const INITIATE_INQUIRY_REQUEST = 'app/CheckoutPage/INITIATE_INQUIRY_REQUEST';\r\nexport const INITIATE_INQUIRY_SUCCESS = 'app/CheckoutPage/INITIATE_INQUIRY_SUCCESS';\r\nexport const INITIATE_INQUIRY_ERROR = 'app/CheckoutPage/INITIATE_INQUIRY_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  listing: null,\r\n  orderData: null,\r\n  speculateTransactionInProgress: false,\r\n  speculateTransactionError: null,\r\n  speculatedTransaction: null,\r\n  transaction: null,\r\n  initiateOrderError: null,\r\n  confirmPaymentError: null,\r\n  stripeCustomerFetched: false,\r\n  initiateInquiryInProgress: false,\r\n  initiateInquiryError: null,\r\n};\r\n\r\nexport default function checkoutPageReducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SET_INITIAL_VALUES:\r\n      return { ...initialState, ...payload };\r\n\r\n    case SPECULATE_TRANSACTION_REQUEST:\r\n      return {\r\n        ...state,\r\n        speculateTransactionInProgress: true,\r\n        speculateTransactionError: null,\r\n        speculatedTransaction: null,\r\n      };\r\n    case SPECULATE_TRANSACTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        speculateTransactionInProgress: false,\r\n        speculatedTransaction: payload.transaction,\r\n      };\r\n    case SPECULATE_TRANSACTION_ERROR:\r\n      console.error(payload); // eslint-disable-line no-console\r\n      return {\r\n        ...state,\r\n        speculateTransactionInProgress: false,\r\n        speculateTransactionError: payload,\r\n      };\r\n\r\n    case INITIATE_ORDER_REQUEST:\r\n      return { ...state, initiateOrderError: null };\r\n    case INITIATE_ORDER_SUCCESS:\r\n      return { ...state, transaction: payload };\r\n    case INITIATE_ORDER_ERROR:\r\n      console.error(payload); // eslint-disable-line no-console\r\n      return { ...state, initiateOrderError: payload };\r\n\r\n    case CONFIRM_PAYMENT_REQUEST:\r\n      return { ...state, confirmPaymentError: null };\r\n    case CONFIRM_PAYMENT_SUCCESS:\r\n      return state;\r\n    case CONFIRM_PAYMENT_ERROR:\r\n      console.error(payload); // eslint-disable-line no-console\r\n      return { ...state, confirmPaymentError: payload };\r\n\r\n    case STRIPE_CUSTOMER_REQUEST:\r\n      return { ...state, stripeCustomerFetched: false };\r\n    case STRIPE_CUSTOMER_SUCCESS:\r\n      return { ...state, stripeCustomerFetched: true };\r\n    case STRIPE_CUSTOMER_ERROR:\r\n      console.error(payload); // eslint-disable-line no-console\r\n      return { ...state, stripeCustomerFetchError: payload };\r\n\r\n    case INITIATE_INQUIRY_REQUEST:\r\n      return { ...state, initiateInquiryInProgress: true, initiateInquiryError: null };\r\n    case INITIATE_INQUIRY_SUCCESS:\r\n      return { ...state, initiateInquiryInProgress: false };\r\n    case INITIATE_INQUIRY_ERROR:\r\n      return { ...state, initiateInquiryInProgress: false, initiateInquiryError: payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Selectors ================ //\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const setInitialValues = initialValues => ({\r\n  type: SET_INITIAL_VALUES,\r\n  payload: pick(initialValues, Object.keys(initialState)),\r\n});\r\n\r\nconst initiateOrderRequest = () => ({ type: INITIATE_ORDER_REQUEST });\r\n\r\nconst initiateOrderSuccess = order => ({\r\n  type: INITIATE_ORDER_SUCCESS,\r\n  payload: order,\r\n});\r\n\r\nconst initiateOrderError = e => ({\r\n  type: INITIATE_ORDER_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nconst confirmPaymentRequest = () => ({ type: CONFIRM_PAYMENT_REQUEST });\r\n\r\nconst confirmPaymentSuccess = orderId => ({\r\n  type: CONFIRM_PAYMENT_SUCCESS,\r\n  payload: orderId,\r\n});\r\n\r\nconst confirmPaymentError = e => ({\r\n  type: CONFIRM_PAYMENT_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nexport const speculateTransactionRequest = () => ({ type: SPECULATE_TRANSACTION_REQUEST });\r\n\r\nexport const speculateTransactionSuccess = transaction => ({\r\n  type: SPECULATE_TRANSACTION_SUCCESS,\r\n  payload: { transaction },\r\n});\r\n\r\nexport const speculateTransactionError = e => ({\r\n  type: SPECULATE_TRANSACTION_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nexport const stripeCustomerRequest = () => ({ type: STRIPE_CUSTOMER_REQUEST });\r\nexport const stripeCustomerSuccess = () => ({ type: STRIPE_CUSTOMER_SUCCESS });\r\nexport const stripeCustomerError = e => ({\r\n  type: STRIPE_CUSTOMER_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nexport const initiateInquiryRequest = () => ({ type: INITIATE_INQUIRY_REQUEST });\r\nexport const initiateInquirySuccess = () => ({ type: INITIATE_INQUIRY_SUCCESS });\r\nexport const initiateInquiryError = e => ({\r\n  type: INITIATE_INQUIRY_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\n/* ================ Thunks ================ */\r\n\r\nexport const initiateOrder = (\r\n  orderParams,\r\n  processAlias,\r\n  transactionId,\r\n  transitionName,\r\n  isPrivilegedTransition\r\n) => (dispatch, getState, sdk) => {\r\n  dispatch(initiateOrderRequest());\r\n\r\n  // If we already have a transaction ID, we should transition, not\r\n  // initiate.\r\n  const isTransition = !!transactionId;\r\n\r\n  const { deliveryMethod, quantity, bookingDates, ...otherOrderParams } = orderParams;\r\n  const quantityMaybe = quantity ? { stockReservationQuantity: quantity } : {};\r\n  const bookingParamsMaybe = bookingDates || {};\r\n\r\n  // Parameters only for client app's server\r\n  const orderData = deliveryMethod ? { deliveryMethod } : {};\r\n\r\n  // Parameters for Marketplace API\r\n  const transitionParams = {\r\n    ...quantityMaybe,\r\n    ...bookingParamsMaybe,\r\n    ...otherOrderParams,\r\n  };\r\n\r\n  const bodyParams = isTransition\r\n    ? {\r\n        id: transactionId,\r\n        transition: transitionName,\r\n        params: transitionParams,\r\n      }\r\n    : {\r\n        processAlias,\r\n        transition: transitionName,\r\n        params: transitionParams,\r\n      };\r\n  const queryParams = {\r\n    include: ['booking', 'provider'],\r\n    expand: true,\r\n  };\r\n\r\n  const handleSucces = response => {\r\n    const entities = denormalisedResponseEntities(response);\r\n    const order = entities[0];\r\n    dispatch(initiateOrderSuccess(order));\r\n    dispatch(fetchCurrentUserHasOrdersSuccess(true));\r\n    return order;\r\n  };\r\n\r\n  const handleError = e => {\r\n    dispatch(initiateOrderError(storableError(e)));\r\n    const transactionIdMaybe = transactionId ? { transactionId: transactionId.uuid } : {};\r\n    log.error(e, 'initiate-order-failed', {\r\n      ...transactionIdMaybe,\r\n      listingId: orderParams.listingId.uuid,\r\n      ...quantityMaybe,\r\n      ...bookingParamsMaybe,\r\n      ...orderData,\r\n    });\r\n    throw e;\r\n  };\r\n\r\n  if (isTransition && isPrivilegedTransition) {\r\n    // transition privileged\r\n    return transitionPrivileged({ isSpeculative: false, orderData, bodyParams, queryParams })\r\n      .then(handleSucces)\r\n      .catch(handleError);\r\n  } else if (isTransition) {\r\n    // transition non-privileged\r\n    return sdk.transactions\r\n      .transition(bodyParams, queryParams)\r\n      .then(handleSucces)\r\n      .catch(handleError);\r\n  } else if (isPrivilegedTransition) {\r\n    // initiate privileged\r\n    return initiatePrivileged({ isSpeculative: false, orderData, bodyParams, queryParams })\r\n      .then(handleSucces)\r\n      .catch(handleError);\r\n  } else {\r\n    // initiate non-privileged\r\n    return sdk.transactions\r\n      .initiate(bodyParams, queryParams)\r\n      .then(handleSucces)\r\n      .catch(handleError);\r\n  }\r\n};\r\n\r\nexport const confirmPayment = (transactionId, transitionName, transitionParams = {}) => (\r\n  dispatch,\r\n  getState,\r\n  sdk\r\n) => {\r\n  dispatch(confirmPaymentRequest());\r\n\r\n  const bodyParams = {\r\n    id: transactionId,\r\n    transition: transitionName,\r\n    params: transitionParams,\r\n  };\r\n  const queryParams = {\r\n    include: ['booking', 'provider'],\r\n    expand: true,\r\n  };\r\n\r\n  return sdk.transactions\r\n    .transition(bodyParams, queryParams)\r\n    .then(response => {\r\n      const order = response.data.data;\r\n      dispatch(confirmPaymentSuccess(order.id));\r\n      return order;\r\n    })\r\n    .catch(e => {\r\n      dispatch(confirmPaymentError(storableError(e)));\r\n      const transactionIdMaybe = transactionId ? { transactionId: transactionId.uuid } : {};\r\n      log.error(e, 'initiate-order-failed', {\r\n        ...transactionIdMaybe,\r\n      });\r\n      throw e;\r\n    });\r\n};\r\n\r\nexport const sendMessage = params => (dispatch, getState, sdk) => {\r\n  const message = params.message;\r\n  const orderId = params.id;\r\n\r\n  if (message) {\r\n    return sdk.messages\r\n      .send({ transactionId: orderId, content: message })\r\n      .then(() => {\r\n        return { orderId, messageSuccess: true };\r\n      })\r\n      .catch(e => {\r\n        log.error(e, 'initial-message-send-failed', { txId: orderId });\r\n        return { orderId, messageSuccess: false };\r\n      });\r\n  } else {\r\n    return Promise.resolve({ orderId, messageSuccess: true });\r\n  }\r\n};\r\n\r\n/**\r\n * Initiate transaction against default-inquiry process\r\n * Note: At this point inquiry transition is made directly against Marketplace API.\r\n *       So, client app's server is not involved here unlike with transitions including payments.\r\n *\r\n * @param {*} inquiryParams contains listingId and protectedData\r\n * @param {*} processAlias 'default-inquiry/release-1'\r\n * @param {*} transitionName 'transition/inquire-without-payment'\r\n * @returns\r\n */\r\nexport const initiateInquiryWithoutPayment = (inquiryParams, processAlias, transitionName) => (\r\n  dispatch,\r\n  getState,\r\n  sdk\r\n) => {\r\n  dispatch(initiateInquiryRequest());\r\n\r\n  if (!processAlias) {\r\n    const error = new Error('No transaction process attached to listing');\r\n    log.error(error, 'listing-process-missing', {\r\n      listingId: listing?.id?.uuid,\r\n    });\r\n    dispatch(initiateInquiryError(storableError(error)));\r\n    return Promise.reject(error);\r\n  }\r\n\r\n  const bodyParams = {\r\n    transition: transitionName,\r\n    processAlias,\r\n    params: inquiryParams,\r\n  };\r\n  const queryParams = {\r\n    include: ['provider'],\r\n    expand: true,\r\n  };\r\n\r\n  return sdk.transactions\r\n    .initiate(bodyParams, queryParams)\r\n    .then(response => {\r\n      const transactionId = response.data.data.id;\r\n      dispatch(initiateInquirySuccess());\r\n      return transactionId;\r\n    })\r\n    .catch(e => {\r\n      dispatch(initiateInquiryError(storableError(e)));\r\n      throw e;\r\n    });\r\n};\r\n\r\n/**\r\n * Initiate or transition the speculative transaction with the given\r\n * booking details\r\n *\r\n * The API allows us to do speculative transaction initiation and\r\n * transitions. This way we can create a test transaction and get the\r\n * actual pricing information as if the transaction had been started,\r\n * without affecting the actual data.\r\n *\r\n * We store this speculative transaction in the page store and use the\r\n * pricing info for the booking breakdown to get a proper estimate for\r\n * the price with the chosen information.\r\n */\r\nexport const speculateTransaction = (\r\n  orderParams,\r\n  processAlias,\r\n  transactionId,\r\n  transitionName,\r\n  isPrivilegedTransition\r\n) => (dispatch, getState, sdk) => {\r\n  dispatch(speculateTransactionRequest());\r\n\r\n  // If we already have a transaction ID, we should transition, not\r\n  // initiate.\r\n  const isTransition = !!transactionId;\r\n\r\n  const { deliveryMethod, quantity, bookingDates, ...otherOrderParams } = orderParams;\r\n  const quantityMaybe = quantity ? { stockReservationQuantity: quantity } : {};\r\n  const bookingParamsMaybe = bookingDates || {};\r\n\r\n  // Parameters only for client app's server\r\n  const orderData = deliveryMethod ? { deliveryMethod } : {};\r\n\r\n  // Parameters for Marketplace API\r\n  const transitionParams = {\r\n    ...quantityMaybe,\r\n    ...bookingParamsMaybe,\r\n    ...otherOrderParams,\r\n    cardToken: 'CheckoutPage_speculative_card_token',\r\n  };\r\n\r\n  const bodyParams = isTransition\r\n    ? {\r\n        id: transactionId,\r\n        transition: transitionName,\r\n        params: transitionParams,\r\n      }\r\n    : {\r\n        processAlias,\r\n        transition: transitionName,\r\n        params: transitionParams,\r\n      };\r\n\r\n  const queryParams = {\r\n    include: ['booking', 'provider'],\r\n    expand: true,\r\n  };\r\n\r\n  const handleSuccess = response => {\r\n    const entities = denormalisedResponseEntities(response);\r\n    if (entities.length !== 1) {\r\n      throw new Error('Expected a resource in the speculate response');\r\n    }\r\n    const tx = entities[0];\r\n    dispatch(speculateTransactionSuccess(tx));\r\n  };\r\n\r\n  const handleError = e => {\r\n    log.error(e, 'speculate-transaction-failed', {\r\n      listingId: transitionParams.listingId.uuid,\r\n      ...quantityMaybe,\r\n      ...bookingParamsMaybe,\r\n      ...orderData,\r\n    });\r\n    return dispatch(speculateTransactionError(storableError(e)));\r\n  };\r\n\r\n  if (isTransition && isPrivilegedTransition) {\r\n    // transition privileged\r\n    return transitionPrivileged({ isSpeculative: true, orderData, bodyParams, queryParams })\r\n      .then(handleSuccess)\r\n      .catch(handleError);\r\n  } else if (isTransition) {\r\n    // transition non-privileged\r\n    return sdk.transactions\r\n      .transitionSpeculative(bodyParams, queryParams)\r\n      .then(handleSuccess)\r\n      .catch(handleError);\r\n  } else if (isPrivilegedTransition) {\r\n    // initiate privileged\r\n    return initiatePrivileged({ isSpeculative: true, orderData, bodyParams, queryParams })\r\n      .then(handleSuccess)\r\n      .catch(handleError);\r\n  } else {\r\n    // initiate non-privileged\r\n    return sdk.transactions\r\n      .initiateSpeculative(bodyParams, queryParams)\r\n      .then(handleSuccess)\r\n      .catch(handleError);\r\n  }\r\n};\r\n\r\n// StripeCustomer is a relantionship to currentUser\r\n// We need to fetch currentUser with correct params to include relationship\r\nexport const stripeCustomer = () => (dispatch, getState, sdk) => {\r\n  dispatch(stripeCustomerRequest());\r\n\r\n  return dispatch(fetchCurrentUser({ include: ['stripeCustomer.defaultPaymentMethod'] }))\r\n    .then(response => {\r\n      dispatch(stripeCustomerSuccess());\r\n    })\r\n    .catch(e => {\r\n      dispatch(stripeCustomerError(storableError(e)));\r\n    });\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/merge\");","import merge from 'lodash/merge';\r\nimport { denormalisedResponseEntities } from '../../util/data';\r\nimport { storableError } from '../../util/errors';\r\nimport { fetchCurrentUser, currentUserShowSuccess } from '../../ducks/user.duck';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const SAVE_CONTACT_DETAILS_REQUEST = 'app/ContactDetailsPage/SAVE_CONTACT_DETAILS_REQUEST';\r\nexport const SAVE_CONTACT_DETAILS_SUCCESS = 'app/ContactDetailsPage/SAVE_CONTACT_DETAILS_SUCCESS';\r\nexport const SAVE_EMAIL_ERROR = 'app/ContactDetailsPage/SAVE_EMAIL_ERROR';\r\nexport const SAVE_PHONE_NUMBER_ERROR = 'app/ContactDetailsPage/SAVE_PHONE_NUMBER_ERROR';\r\n\r\nexport const SAVE_CONTACT_DETAILS_CLEAR = 'app/ContactDetailsPage/SAVE_CONTACT_DETAILS_CLEAR';\r\n\r\nexport const RESET_PASSWORD_REQUEST = 'app/ContactDetailsPage/RESET_PASSWORD_REQUEST';\r\nexport const RESET_PASSWORD_SUCCESS = 'app/ContactDetailsPage/RESET_PASSWORD_SUCCESS';\r\nexport const RESET_PASSWORD_ERROR = 'app/ContactDetailsPage/RESET_PASSWORD_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  saveEmailError: null,\r\n  savePhoneNumberError: null,\r\n  saveContactDetailsInProgress: false,\r\n  contactDetailsChanged: false,\r\n  resetPasswordInProgress: false,\r\n  resetPasswordError: null,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SAVE_CONTACT_DETAILS_REQUEST:\r\n      return {\r\n        ...state,\r\n        saveContactDetailsInProgress: true,\r\n        saveEmailError: null,\r\n        savePhoneNumberError: null,\r\n        contactDetailsChanged: false,\r\n      };\r\n    case SAVE_CONTACT_DETAILS_SUCCESS:\r\n      return { ...state, saveContactDetailsInProgress: false, contactDetailsChanged: true };\r\n    case SAVE_EMAIL_ERROR:\r\n      return { ...state, saveContactDetailsInProgress: false, saveEmailError: payload };\r\n    case SAVE_PHONE_NUMBER_ERROR:\r\n      return { ...state, saveContactDetailsInProgress: false, savePhoneNumberError: payload };\r\n\r\n    case SAVE_CONTACT_DETAILS_CLEAR:\r\n      return {\r\n        ...state,\r\n        saveContactDetailsInProgress: false,\r\n        saveEmailError: null,\r\n        savePhoneNumberError: null,\r\n        contactDetailsChanged: false,\r\n      };\r\n\r\n    case RESET_PASSWORD_REQUEST:\r\n      return { ...state, resetPasswordInProgress: true, resetPasswordError: null };\r\n    case RESET_PASSWORD_SUCCESS:\r\n      return { ...state, resetPasswordInProgress: false };\r\n    case RESET_PASSWORD_ERROR:\r\n      console.error(payload); // eslint-disable-line no-console\r\n      return { ...state, resetPasswordInProgress: false, resetPasswordError: payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const saveContactDetailsRequest = () => ({ type: SAVE_CONTACT_DETAILS_REQUEST });\r\nexport const saveContactDetailsSuccess = () => ({ type: SAVE_CONTACT_DETAILS_SUCCESS });\r\nexport const saveEmailError = error => ({\r\n  type: SAVE_EMAIL_ERROR,\r\n  payload: error,\r\n  error: true,\r\n});\r\nexport const savePhoneNumberError = error => ({\r\n  type: SAVE_PHONE_NUMBER_ERROR,\r\n  payload: error,\r\n  error: true,\r\n});\r\n\r\nexport const saveContactDetailsClear = () => ({ type: SAVE_CONTACT_DETAILS_CLEAR });\r\n\r\nexport const resetPasswordRequest = () => ({ type: RESET_PASSWORD_REQUEST });\r\n\r\nexport const resetPasswordSuccess = () => ({ type: RESET_PASSWORD_SUCCESS });\r\n\r\nexport const resetPasswordError = e => ({\r\n  type: RESET_PASSWORD_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\n/**\r\n * Make a phone number update request to the API and return the current user.\r\n */\r\nconst requestSavePhoneNumber = params => (dispatch, getState, sdk) => {\r\n  const phoneNumber = params.phoneNumber;\r\n\r\n  return sdk.currentUser\r\n    .updateProfile(\r\n      { protectedData: { phoneNumber } },\r\n      {\r\n        expand: true,\r\n        include: ['profileImage'],\r\n        'fields.image': ['variants.square-small', 'variants.square-small2x'],\r\n      }\r\n    )\r\n    .then(response => {\r\n      const entities = denormalisedResponseEntities(response);\r\n      if (entities.length !== 1) {\r\n        throw new Error('Expected a resource in the sdk.currentUser.updateProfile response');\r\n      }\r\n\r\n      const currentUser = entities[0];\r\n      return currentUser;\r\n    })\r\n    .catch(e => {\r\n      dispatch(savePhoneNumberError(storableError(e)));\r\n      // pass the same error so that the SAVE_CONTACT_DETAILS_SUCCESS\r\n      // action will not be fired\r\n      throw e;\r\n    });\r\n};\r\n\r\n/**\r\n * Make a email update request to the API and return the current user.\r\n */\r\nconst requestSaveEmail = params => (dispatch, getState, sdk) => {\r\n  const { email, currentPassword } = params;\r\n\r\n  return sdk.currentUser\r\n    .changeEmail(\r\n      { email, currentPassword },\r\n      {\r\n        expand: true,\r\n        include: ['profileImage'],\r\n        'fields.image': ['variants.square-small', 'variants.square-small2x'],\r\n      }\r\n    )\r\n    .then(response => {\r\n      const entities = denormalisedResponseEntities(response);\r\n      if (entities.length !== 1) {\r\n        throw new Error('Expected a resource in the sdk.currentUser.changeEmail response');\r\n      }\r\n\r\n      const currentUser = entities[0];\r\n      return currentUser;\r\n    })\r\n    .catch(e => {\r\n      dispatch(saveEmailError(storableError(e)));\r\n      // pass the same error so that the SAVE_CONTACT_DETAILS_SUCCESS\r\n      // action will not be fired\r\n      throw e;\r\n    });\r\n};\r\n\r\n/**\r\n * Save email and update the current user.\r\n */\r\nconst saveEmail = params => (dispatch, getState, sdk) => {\r\n  return (\r\n    dispatch(requestSaveEmail(params))\r\n      .then(user => {\r\n        dispatch(currentUserShowSuccess(user));\r\n        dispatch(saveContactDetailsSuccess());\r\n      })\r\n      // error action dispatched in requestSaveEmail\r\n      .catch(e => null)\r\n  );\r\n};\r\n\r\n/**\r\n * Save phone number and update the current user.\r\n */\r\nconst savePhoneNumber = params => (dispatch, getState, sdk) => {\r\n  return (\r\n    dispatch(requestSavePhoneNumber(params))\r\n      .then(user => {\r\n        dispatch(currentUserShowSuccess(user));\r\n        dispatch(saveContactDetailsSuccess());\r\n      })\r\n      // error action dispatched in requestSavePhoneNumber\r\n      .catch(e => null)\r\n  );\r\n};\r\n\r\n/**\r\n * Save email and phone number and update the current user.\r\n */\r\nconst saveEmailAndPhoneNumber = params => (dispatch, getState, sdk) => {\r\n  const { email, phoneNumber, currentPassword } = params;\r\n\r\n  // order of promises: 1. email, 2. phone number\r\n  const promises = [\r\n    dispatch(requestSaveEmail({ email, currentPassword })),\r\n    dispatch(requestSavePhoneNumber({ phoneNumber })),\r\n  ];\r\n\r\n  return Promise.all(promises)\r\n    .then(values => {\r\n      // Array of two user objects is resolved\r\n      // the first one is from the email update\r\n      // the second one is from the phone number update\r\n\r\n      const saveEmailUser = values[0];\r\n      const savePhoneNumberUser = values[1];\r\n\r\n      // merge the protected data from the user object returned\r\n      // by the phone update operation\r\n      const protectedData = savePhoneNumberUser.attributes.profile.protectedData;\r\n      const phoneNumberMergeSource = { attributes: { profile: { protectedData } } };\r\n\r\n      const currentUser = merge(saveEmailUser, phoneNumberMergeSource);\r\n      dispatch(currentUserShowSuccess(currentUser));\r\n      dispatch(saveContactDetailsSuccess());\r\n    })\r\n    .catch(e => null);\r\n};\r\n\r\n/**\r\n * Update contact details, actions depend on which data has changed\r\n */\r\nexport const saveContactDetails = params => (dispatch, getState, sdk) => {\r\n  dispatch(saveContactDetailsRequest());\r\n\r\n  const { email, currentEmail, phoneNumber, currentPhoneNumber, currentPassword } = params;\r\n  const emailChanged = email !== currentEmail;\r\n  const phoneNumberChanged = phoneNumber !== currentPhoneNumber;\r\n\r\n  if (emailChanged && phoneNumberChanged) {\r\n    return dispatch(saveEmailAndPhoneNumber({ email, currentPassword, phoneNumber }));\r\n  } else if (emailChanged) {\r\n    return dispatch(saveEmail({ email, currentPassword }));\r\n  } else if (phoneNumberChanged) {\r\n    return dispatch(savePhoneNumber({ phoneNumber }));\r\n  }\r\n};\r\n\r\nexport const resetPassword = email => (dispatch, getState, sdk) => {\r\n  dispatch(resetPasswordRequest());\r\n  return sdk.passwordReset\r\n    .request({ email })\r\n    .then(() => dispatch(resetPasswordSuccess()))\r\n    .catch(e => dispatch(resetPasswordError(storableError(e))));\r\n};\r\n\r\nexport const loadData = () => {\r\n  // Since verify email happens in separate tab, current user's data might be updated\r\n  return fetchCurrentUser();\r\n};\r\n","import omit from 'lodash/omit';\r\n\r\nimport { types as sdkTypes, createImageVariantConfig } from '../../util/sdkLoader';\r\nimport { denormalisedResponseEntities } from '../../util/data';\r\nimport {\r\n  getDefaultTimeZoneOnBrowser,\r\n  getStartOf,\r\n  getStartOfWeek,\r\n  monthIdString,\r\n  parseDateFromISO8601,\r\n  stringifyDateToISO8601,\r\n} from '../../util/dates';\r\nimport { uniqueBy } from '../../util/generators';\r\nimport { storableError } from '../../util/errors';\r\nimport * as log from '../../util/log';\r\nimport { parse } from '../../util/urlHelpers';\r\nimport { isBookingProcessAlias } from '../../transactions/transaction';\r\n\r\nimport { addMarketplaceEntities } from '../../ducks/marketplaceData.duck';\r\nimport {\r\n  createStripeAccount,\r\n  updateStripeAccount,\r\n  fetchStripeAccount,\r\n} from '../../ducks/stripeConnectAccount.duck';\r\nimport { fetchCurrentUser } from '../../ducks/user.duck';\r\n\r\nconst { UUID } = sdkTypes;\r\n\r\n// Create array of N items where indexing starts from 1\r\nconst getArrayOfNItems = n =>\r\n  Array(n)\r\n    .fill()\r\n    .map((v, i) => i + 1)\r\n    .slice(1);\r\n\r\n// Return an array of image ids\r\nconst imageIds = images => {\r\n  // For newly uploaded image the UUID can be found from \"img.imageId\"\r\n  // and for existing listing images the id is \"img.id\"\r\n  return images ? images.map(img => img.imageId || img.id) : null;\r\n};\r\n\r\n// After listing creation & update, we want to make sure that uploadedImages state is cleaned\r\nconst updateUploadedImagesState = (state, payload) => {\r\n  const { uploadedImages, uploadedImagesOrder } = state;\r\n\r\n  // Images attached to listing entity\r\n  const attachedImages = payload?.data?.relationships?.images?.data || [];\r\n  const attachedImageUUIDStrings = attachedImages.map(img => img.id.uuid);\r\n\r\n  // Uploaded images (which are propably not yet attached to listing)\r\n  const unattachedImages = Object.values(state.uploadedImages);\r\n  const duplicateImageEntities = unattachedImages.filter(unattachedImg =>\r\n    attachedImageUUIDStrings.includes(unattachedImg.imageId?.uuid)\r\n  );\r\n  return duplicateImageEntities.length > 0\r\n    ? {\r\n        uploadedImages: {},\r\n        uploadedImagesOrder: [],\r\n      }\r\n    : {\r\n        uploadedImages,\r\n        uploadedImagesOrder,\r\n      };\r\n};\r\n\r\nconst getImageVariantInfo = listingImageConfig => {\r\n  const { aspectWidth = 1, aspectHeight = 1, variantPrefix = 'listing-card' } = listingImageConfig;\r\n  const aspectRatio = aspectHeight / aspectWidth;\r\n  const fieldsImage = [`variants.${variantPrefix}`, `variants.${variantPrefix}-2x`];\r\n\r\n  return {\r\n    fieldsImage,\r\n    imageVariants: {\r\n      ...createImageVariantConfig(`${variantPrefix}`, 400, aspectRatio),\r\n      ...createImageVariantConfig(`${variantPrefix}-2x`, 800, aspectRatio),\r\n    },\r\n  };\r\n};\r\n\r\nconst sortExceptionsByStartTime = (a, b) => {\r\n  return a.attributes.start.getTime() - b.attributes.start.getTime();\r\n};\r\n\r\n// When navigating through weekly calendar,\r\n// we want to merge new week-related data (inProgres, error) to weeklyExceptionQueries hashmap.\r\nconst mergeToWeeklyExceptionQueries = (weeklyExceptionQueries, weekStartId, newDataProps) => {\r\n  return weekStartId\r\n    ? {\r\n        weeklyExceptionQueries: {\r\n          ...weeklyExceptionQueries,\r\n          [weekStartId]: {\r\n            ...weeklyExceptionQueries[weekStartId],\r\n            ...newDataProps,\r\n          },\r\n        },\r\n      }\r\n    : {};\r\n};\r\n// When navigating through monthly calendar (e.g. when adding a new AvailabilityException),\r\n// we want to merge new month-related data (inProgres, error) to monthlyExceptionQueries hashmap.\r\nconst mergeToMonthlyExceptionQueries = (monthlyExceptionQueries, monthId, newDataProps) => {\r\n  return monthId\r\n    ? {\r\n        monthlyExceptionQueries: {\r\n          ...monthlyExceptionQueries,\r\n          [monthId]: {\r\n            ...monthlyExceptionQueries[monthId],\r\n            ...newDataProps,\r\n          },\r\n        },\r\n      }\r\n    : {};\r\n};\r\n\r\nconst requestAction = actionType => params => ({ type: actionType, payload: { params } });\r\n\r\nconst successAction = actionType => result => ({ type: actionType, payload: result.data });\r\n\r\nconst errorAction = actionType => payload => ({ type: actionType, payload, error: true });\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const MARK_TAB_UPDATED = 'app/EditListingPage/MARK_TAB_UPDATED';\r\nexport const CLEAR_UPDATED_TAB = 'app/EditListingPage/CLEAR_UPDATED_TAB';\r\n\r\nexport const CREATE_LISTING_DRAFT_REQUEST = 'app/EditListingPage/CREATE_LISTING_DRAFT_REQUEST';\r\nexport const CREATE_LISTING_DRAFT_SUCCESS = 'app/EditListingPage/CREATE_LISTING_DRAFT_SUCCESS';\r\nexport const CREATE_LISTING_DRAFT_ERROR = 'app/EditListingPage/CREATE_LISTING_DRAFT_ERROR';\r\n\r\nexport const PUBLISH_LISTING_REQUEST = 'app/EditListingPage/PUBLISH_LISTING_REQUEST';\r\nexport const PUBLISH_LISTING_SUCCESS = 'app/EditListingPage/PUBLISH_LISTING_SUCCESS';\r\nexport const PUBLISH_LISTING_ERROR = 'app/EditListingPage/PUBLISH_LISTING_ERROR';\r\n\r\nexport const UPDATE_LISTING_REQUEST = 'app/EditListingPage/UPDATE_LISTING_REQUEST';\r\nexport const UPDATE_LISTING_SUCCESS = 'app/EditListingPage/UPDATE_LISTING_SUCCESS';\r\nexport const UPDATE_LISTING_ERROR = 'app/EditListingPage/UPDATE_LISTING_ERROR';\r\n\r\nexport const SHOW_LISTINGS_REQUEST = 'app/EditListingPage/SHOW_LISTINGS_REQUEST';\r\nexport const SHOW_LISTINGS_SUCCESS = 'app/EditListingPage/SHOW_LISTINGS_SUCCESS';\r\nexport const SHOW_LISTINGS_ERROR = 'app/EditListingPage/SHOW_LISTINGS_ERROR';\r\n\r\nexport const FETCH_EXCEPTIONS_REQUEST = 'app/EditListingPage/FETCH_AVAILABILITY_EXCEPTIONS_REQUEST';\r\nexport const FETCH_EXCEPTIONS_SUCCESS = 'app/EditListingPage/FETCH_AVAILABILITY_EXCEPTIONS_SUCCESS';\r\nexport const FETCH_EXCEPTIONS_ERROR = 'app/EditListingPage/FETCH_AVAILABILITY_EXCEPTIONS_ERROR';\r\nexport const FETCH_EXTRA_EXCEPTIONS_SUCCESS =\r\n  'app/EditListingPage/FETCH_EXTRA_AVAILABILITY_EXCEPTIONS_SUCCESS';\r\n\r\nexport const ADD_EXCEPTION_REQUEST = 'app/EditListingPage/ADD_AVAILABILITY_EXCEPTION_REQUEST';\r\nexport const ADD_EXCEPTION_SUCCESS = 'app/EditListingPage/ADD_AVAILABILITY_EXCEPTION_SUCCESS';\r\nexport const ADD_EXCEPTION_ERROR = 'app/EditListingPage/ADD_AVAILABILITY_EXCEPTION_ERROR';\r\n\r\nexport const DELETE_EXCEPTION_REQUEST = 'app/EditListingPage/DELETE_AVAILABILITY_EXCEPTION_REQUEST';\r\nexport const DELETE_EXCEPTION_SUCCESS = 'app/EditListingPage/DELETE_AVAILABILITY_EXCEPTION_SUCCESS';\r\nexport const DELETE_EXCEPTION_ERROR = 'app/EditListingPage/DELETE_AVAILABILITY_EXCEPTION_ERROR';\r\n\r\nexport const SET_STOCK_REQUEST = 'app/EditListingPage/SET_STOCK_REQUEST';\r\nexport const SET_STOCK_SUCCESS = 'app/EditListingPage/SET_STOCK_SUCCESS';\r\nexport const SET_STOCK_ERROR = 'app/EditListingPage/SET_STOCK_ERROR';\r\n\r\nexport const UPLOAD_IMAGE_REQUEST = 'app/EditListingPage/UPLOAD_IMAGE_REQUEST';\r\nexport const UPLOAD_IMAGE_SUCCESS = 'app/EditListingPage/UPLOAD_IMAGE_SUCCESS';\r\nexport const UPLOAD_IMAGE_ERROR = 'app/EditListingPage/UPLOAD_IMAGE_ERROR';\r\n\r\nexport const REMOVE_LISTING_IMAGE = 'app/EditListingPage/REMOVE_LISTING_IMAGE';\r\n\r\nexport const SAVE_PAYOUT_DETAILS_REQUEST = 'app/EditListingPage/SAVE_PAYOUT_DETAILS_REQUEST';\r\nexport const SAVE_PAYOUT_DETAILS_SUCCESS = 'app/EditListingPage/SAVE_PAYOUT_DETAILS_SUCCESS';\r\nexport const SAVE_PAYOUT_DETAILS_ERROR = 'app/EditListingPage/SAVE_PAYOUT_DETAILS_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  // Error instance placeholders for each endpoint\r\n  createListingDraftError: null,\r\n  listingId: null,\r\n  publishListingError: null,\r\n  updateListingError: null,\r\n  showListingsError: null,\r\n  uploadImageError: null,\r\n  setStockError: null,\r\n  setStockInProgress: false,\r\n  createListingDraftInProgress: false,\r\n  submittedListingId: null,\r\n  redirectToListing: false,\r\n  uploadedImages: {},\r\n  uploadedImagesOrder: [],\r\n  removedImageIds: [],\r\n  addExceptionError: null,\r\n  addExceptionInProgress: false,\r\n  weeklyExceptionQueries: {\r\n    // '2022-12-12': { // Note: id/key is the start of the week in given time zone\r\n    //   fetchExceptionsError: null,\r\n    //   fetchExceptionsInProgress: null,\r\n    // },\r\n  },\r\n  monthlyExceptionQueries: {\r\n    // '2022-12': {\r\n    //   fetchExceptionsError: null,\r\n    //   fetchExceptionsInProgress: null,\r\n    // },\r\n  },\r\n  allExceptions: [],\r\n  deleteExceptionError: null,\r\n  deleteExceptionInProgress: false,\r\n  listingDraft: null,\r\n  updatedTab: null,\r\n  updateInProgress: false,\r\n  payoutDetailsSaveInProgress: false,\r\n  payoutDetailsSaved: false,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case MARK_TAB_UPDATED:\r\n      return { ...state, updatedTab: payload };\r\n    case CLEAR_UPDATED_TAB:\r\n      return { ...state, updatedTab: null, updateListingError: null };\r\n\r\n    case CREATE_LISTING_DRAFT_REQUEST:\r\n      return {\r\n        ...state,\r\n        createListingDraftInProgress: true,\r\n        createListingDraftError: null,\r\n        submittedListingId: null,\r\n        listingDraft: null,\r\n      };\r\n\r\n    case CREATE_LISTING_DRAFT_SUCCESS:\r\n      return {\r\n        ...state,\r\n        ...updateUploadedImagesState(state, payload),\r\n        createListingDraftInProgress: false,\r\n        submittedListingId: payload.data.id,\r\n        listingDraft: payload.data,\r\n      };\r\n    case CREATE_LISTING_DRAFT_ERROR:\r\n      return {\r\n        ...state,\r\n        createListingDraftInProgress: false,\r\n        createListingDraftError: payload,\r\n      };\r\n\r\n    case PUBLISH_LISTING_REQUEST:\r\n      return {\r\n        ...state,\r\n        listingId: payload.listingId,\r\n        publishListingError: null,\r\n      };\r\n    case PUBLISH_LISTING_SUCCESS:\r\n      return {\r\n        ...state,\r\n        redirectToListing: true,\r\n        createListingDraftError: null,\r\n        updateListingError: null,\r\n        showListingsError: null,\r\n        uploadImageError: null,\r\n        createListingDraftInProgress: false,\r\n        updateInProgress: false,\r\n      };\r\n    case PUBLISH_LISTING_ERROR: {\r\n      // eslint-disable-next-line no-console\r\n      console.error(payload);\r\n      return {\r\n        ...state,\r\n        publishListingError: {\r\n          listingId: state.listingId,\r\n          error: payload,\r\n        },\r\n      };\r\n    }\r\n\r\n    case UPDATE_LISTING_REQUEST:\r\n      return { ...state, updateInProgress: true, updateListingError: null };\r\n    case UPDATE_LISTING_SUCCESS:\r\n      return {\r\n        ...state,\r\n        ...updateUploadedImagesState(state, payload),\r\n        updateInProgress: false,\r\n        // availabilityCalendar: { ...state.availabilityCalendar },\r\n      };\r\n    case UPDATE_LISTING_ERROR:\r\n      return { ...state, updateInProgress: false, updateListingError: payload };\r\n\r\n    case SHOW_LISTINGS_REQUEST:\r\n      return { ...state, showListingsError: null };\r\n    case SHOW_LISTINGS_SUCCESS: {\r\n      const listingIdFromPayload = payload.data.id;\r\n      const { listingId, allExceptions, weeklyExceptionQueries, monthlyExceptionQueries } = state;\r\n      // If listing stays the same, we trust previously fetched exception data.\r\n      return listingIdFromPayload?.uuid === state.listingId?.uuid\r\n        ? {\r\n            ...initialState,\r\n            listingId,\r\n            allExceptions,\r\n            weeklyExceptionQueries,\r\n            monthlyExceptionQueries,\r\n          }\r\n        : { ...initialState, listingId: listingIdFromPayload };\r\n    }\r\n    case SHOW_LISTINGS_ERROR:\r\n      // eslint-disable-next-line no-console\r\n      console.error(payload);\r\n      return { ...state, showListingsError: payload, redirectToListing: false };\r\n\r\n    case FETCH_EXCEPTIONS_REQUEST: {\r\n      const { monthId, weekStartId } = payload.params;\r\n      const newData = { fetchExceptionsError: null, fetchExceptionsInProgress: true };\r\n\r\n      const exceptionQueriesMaybe = monthId\r\n        ? mergeToMonthlyExceptionQueries(state.monthlyExceptionQueries, monthId, newData)\r\n        : weekStartId\r\n        ? mergeToWeeklyExceptionQueries(state.weeklyExceptionQueries, weekStartId, newData)\r\n        : {};\r\n      return { ...state, ...exceptionQueriesMaybe };\r\n    }\r\n    case FETCH_EXCEPTIONS_SUCCESS: {\r\n      const { exceptions, monthId, weekStartId } = payload;\r\n      const combinedExceptions = state.allExceptions.concat(exceptions);\r\n      const selectId = x => x.id.uuid;\r\n      const allExceptions = uniqueBy(combinedExceptions, selectId).sort(sortExceptionsByStartTime);\r\n      const newData = { fetchExceptionsInProgress: false };\r\n\r\n      const exceptionQueriesMaybe = monthId\r\n        ? mergeToMonthlyExceptionQueries(state.monthlyExceptionQueries, monthId, newData)\r\n        : weekStartId\r\n        ? mergeToWeeklyExceptionQueries(state.weeklyExceptionQueries, weekStartId, newData)\r\n        : {};\r\n      return { ...state, allExceptions, ...exceptionQueriesMaybe };\r\n    }\r\n    case FETCH_EXCEPTIONS_ERROR: {\r\n      const { monthId, weekStartId, error } = payload;\r\n      const newData = { fetchExceptionsInProgress: false, fetchExceptionsError: error };\r\n\r\n      const exceptionQueriesMaybe = monthId\r\n        ? mergeToMonthlyExceptionQueries(state.monthlyExceptionQueries, monthId, newData)\r\n        : weekStartId\r\n        ? mergeToWeeklyExceptionQueries(state.weeklyExceptionQueries, weekStartId, newData)\r\n        : {};\r\n\r\n      return { ...state, ...exceptionQueriesMaybe };\r\n    }\r\n    case FETCH_EXTRA_EXCEPTIONS_SUCCESS: {\r\n      const combinedExceptions = state.allExceptions.concat(payload.exceptions);\r\n      const selectId = x => x.id.uuid;\r\n      const allExceptions = uniqueBy(combinedExceptions, selectId).sort(sortExceptionsByStartTime);\r\n      // TODO: currently we don't handle thrown errors from these paginated calls\r\n      return { ...state, allExceptions };\r\n    }\r\n    case ADD_EXCEPTION_REQUEST:\r\n      return {\r\n        ...state,\r\n        addExceptionError: null,\r\n        addExceptionInProgress: true,\r\n      };\r\n    case ADD_EXCEPTION_SUCCESS: {\r\n      const exception = payload;\r\n      const combinedExceptions = state.allExceptions.concat(exception);\r\n      const allExceptions = combinedExceptions.sort(sortExceptionsByStartTime);\r\n      return {\r\n        ...state,\r\n        allExceptions,\r\n        addExceptionInProgress: false,\r\n      };\r\n    }\r\n    case ADD_EXCEPTION_ERROR:\r\n      return {\r\n        ...state,\r\n        addExceptionError: payload.error,\r\n        addExceptionInProgress: false,\r\n      };\r\n\r\n    case DELETE_EXCEPTION_REQUEST:\r\n      return {\r\n        ...state,\r\n        deleteExceptionError: null,\r\n        deleteExceptionInProgress: true,\r\n      };\r\n    case DELETE_EXCEPTION_SUCCESS: {\r\n      const exception = payload;\r\n      const id = exception.id.uuid;\r\n      const allExceptions = state.allExceptions.filter(e => e.id.uuid !== id);\r\n      return {\r\n        ...state,\r\n        allExceptions,\r\n        deleteExceptionInProgress: false,\r\n      };\r\n    }\r\n    case DELETE_EXCEPTION_ERROR:\r\n      return {\r\n        ...state,\r\n        deleteExceptionError: payload.error,\r\n        deleteExceptionInProgress: false,\r\n      };\r\n\r\n    case UPLOAD_IMAGE_REQUEST: {\r\n      // payload.params: { id: 'tempId', file }\r\n      const uploadedImages = {\r\n        ...state.uploadedImages,\r\n        [payload.params.id]: { ...payload.params },\r\n      };\r\n      return {\r\n        ...state,\r\n        uploadedImages,\r\n        uploadedImagesOrder: state.uploadedImagesOrder.concat([payload.params.id]),\r\n        uploadImageError: null,\r\n      };\r\n    }\r\n    case UPLOAD_IMAGE_SUCCESS: {\r\n      // payload.params: { id: 'tempId', imageId: 'some-real-id', attributes, type }\r\n      const { id, ...rest } = payload;\r\n      const uploadedImages = { ...state.uploadedImages, [id]: { id, ...rest } };\r\n      return { ...state, uploadedImages };\r\n    }\r\n    case UPLOAD_IMAGE_ERROR: {\r\n      // eslint-disable-next-line no-console\r\n      const { id, error } = payload;\r\n      const uploadedImagesOrder = state.uploadedImagesOrder.filter(i => i !== id);\r\n      const uploadedImages = omit(state.uploadedImages, id);\r\n      return { ...state, uploadedImagesOrder, uploadedImages, uploadImageError: error };\r\n    }\r\n\r\n    case REMOVE_LISTING_IMAGE: {\r\n      const id = payload.imageId;\r\n\r\n      // Only mark the image removed if it hasn't been added to the\r\n      // listing already\r\n      const removedImageIds = state.uploadedImages[id]\r\n        ? state.removedImageIds\r\n        : state.removedImageIds.concat(id);\r\n\r\n      // Always remove from the draft since it might be a new image to\r\n      // an existing listing.\r\n      const uploadedImages = omit(state.uploadedImages, id);\r\n      const uploadedImagesOrder = state.uploadedImagesOrder.filter(i => i !== id);\r\n\r\n      return { ...state, uploadedImages, uploadedImagesOrder, removedImageIds };\r\n    }\r\n\r\n    case SET_STOCK_REQUEST:\r\n      return { ...state, setStockInProgress: true, setStockError: null };\r\n    case SET_STOCK_SUCCESS:\r\n      return { ...state, setStockInProgress: false };\r\n    case SET_STOCK_ERROR:\r\n      return { ...state, setStockInProgress: false, setStockError: payload };\r\n\r\n    case SAVE_PAYOUT_DETAILS_REQUEST:\r\n      return { ...state, payoutDetailsSaveInProgress: true };\r\n    case SAVE_PAYOUT_DETAILS_ERROR:\r\n      return { ...state, payoutDetailsSaveInProgress: false };\r\n    case SAVE_PAYOUT_DETAILS_SUCCESS:\r\n      return { ...state, payoutDetailsSaveInProgress: false, payoutDetailsSaved: true };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Selectors ================ //\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const markTabUpdated = tab => ({\r\n  type: MARK_TAB_UPDATED,\r\n  payload: tab,\r\n});\r\n\r\nexport const clearUpdatedTab = () => ({\r\n  type: CLEAR_UPDATED_TAB,\r\n});\r\n\r\nexport const removeListingImage = imageId => ({\r\n  type: REMOVE_LISTING_IMAGE,\r\n  payload: { imageId },\r\n});\r\n\r\n// All the action creators that don't have the {Success, Error} suffix\r\n// take the params object that the corresponding SDK endpoint method\r\n// expects.\r\n\r\n// SDK method: ownListings.create\r\nexport const createListingDraftRequest = requestAction(CREATE_LISTING_DRAFT_REQUEST);\r\nexport const createListingDraftSuccess = successAction(CREATE_LISTING_DRAFT_SUCCESS);\r\nexport const createListingDraftError = errorAction(CREATE_LISTING_DRAFT_ERROR);\r\n\r\n// SDK method: ownListings.publish\r\nexport const publishListingRequest = requestAction(PUBLISH_LISTING_REQUEST);\r\nexport const publishListingSuccess = successAction(PUBLISH_LISTING_SUCCESS);\r\nexport const publishListingError = errorAction(PUBLISH_LISTING_ERROR);\r\n\r\n// SDK method: ownListings.update\r\nexport const updateListingRequest = requestAction(UPDATE_LISTING_REQUEST);\r\nexport const updateListingSuccess = successAction(UPDATE_LISTING_SUCCESS);\r\nexport const updateListingError = errorAction(UPDATE_LISTING_ERROR);\r\n\r\n// SDK method: ownListings.show\r\nexport const showListingsRequest = requestAction(SHOW_LISTINGS_REQUEST);\r\nexport const showListingsSuccess = successAction(SHOW_LISTINGS_SUCCESS);\r\nexport const showListingsError = errorAction(SHOW_LISTINGS_ERROR);\r\n\r\n// SDK method: images.upload\r\nexport const uploadImageRequest = requestAction(UPLOAD_IMAGE_REQUEST);\r\nexport const uploadImageSuccess = successAction(UPLOAD_IMAGE_SUCCESS);\r\nexport const uploadImageError = errorAction(UPLOAD_IMAGE_ERROR);\r\n\r\n// SDK method: stock.compareAndSet\r\nexport const setStockRequest = requestAction(SET_STOCK_REQUEST);\r\nexport const setStockSuccess = successAction(SET_STOCK_SUCCESS);\r\nexport const setStockError = errorAction(SET_STOCK_ERROR);\r\n\r\n// SDK method: availabilityExceptions.query\r\nexport const fetchAvailabilityExceptionsRequest = requestAction(FETCH_EXCEPTIONS_REQUEST);\r\nexport const fetchAvailabilityExceptionsSuccess = successAction(FETCH_EXCEPTIONS_SUCCESS);\r\nexport const fetchAvailabilityExceptionsError = errorAction(FETCH_EXCEPTIONS_ERROR);\r\n// Add extra data from additional pages\r\nexport const fetchExtraAvailabilityExceptionsSuccess = successAction(\r\n  FETCH_EXTRA_EXCEPTIONS_SUCCESS\r\n);\r\n\r\n// SDK method: availabilityExceptions.create\r\nexport const addAvailabilityExceptionRequest = requestAction(ADD_EXCEPTION_REQUEST);\r\nexport const addAvailabilityExceptionSuccess = successAction(ADD_EXCEPTION_SUCCESS);\r\nexport const addAvailabilityExceptionError = errorAction(ADD_EXCEPTION_ERROR);\r\n\r\n// SDK method: availabilityExceptions.delete\r\nexport const deleteAvailabilityExceptionRequest = requestAction(DELETE_EXCEPTION_REQUEST);\r\nexport const deleteAvailabilityExceptionSuccess = successAction(DELETE_EXCEPTION_SUCCESS);\r\nexport const deleteAvailabilityExceptionError = errorAction(DELETE_EXCEPTION_ERROR);\r\n\r\nexport const savePayoutDetailsRequest = requestAction(SAVE_PAYOUT_DETAILS_REQUEST);\r\nexport const savePayoutDetailsSuccess = successAction(SAVE_PAYOUT_DETAILS_SUCCESS);\r\nexport const savePayoutDetailsError = errorAction(SAVE_PAYOUT_DETAILS_ERROR);\r\n\r\n// ================ Thunk ================ //\r\n\r\nexport function requestShowListing(actionPayload, config) {\r\n  return (dispatch, getState, sdk) => {\r\n    const imageVariantInfo = getImageVariantInfo(config.layout.listingImage);\r\n    const queryParams = {\r\n      include: ['author', 'images', 'currentStock'],\r\n      'fields.image': imageVariantInfo.fieldsImage,\r\n      ...imageVariantInfo.imageVariants,\r\n    };\r\n\r\n    dispatch(showListingsRequest(actionPayload));\r\n    return sdk.ownListings\r\n      .show({ ...actionPayload, ...queryParams })\r\n      .then(response => {\r\n        // EditListingPage fetches new listing data, which also needs to be added to global data\r\n        dispatch(addMarketplaceEntities(response));\r\n        // In case of success, we'll clear state.EditListingPage (user will be redirected away)\r\n        dispatch(showListingsSuccess(response));\r\n        return response;\r\n      })\r\n      .catch(e => dispatch(showListingsError(storableError(e))));\r\n  };\r\n}\r\n\r\n// Set stock if requested among listing update info\r\nexport function compareAndSetStock(listingId, oldTotal, newTotal) {\r\n  return (dispatch, getState, sdk) => {\r\n    dispatch(setStockRequest());\r\n\r\n    return sdk.stock\r\n      .compareAndSet({ listingId, oldTotal, newTotal }, { expand: true })\r\n      .then(response => {\r\n        // NOTE: compareAndSet returns the stock resource of the listing.\r\n        // We update client app's internal state with these updated API entities.\r\n        dispatch(addMarketplaceEntities(response));\r\n        dispatch(setStockSuccess(response));\r\n      })\r\n      .catch(e => {\r\n        log.error(e, 'update-stock-failed', { listingId, oldTotal, newTotal });\r\n        return dispatch(setStockError(storableError(e)));\r\n      });\r\n  };\r\n}\r\n\r\n// Helper function to make compareAndSetStock call if stock update is needed.\r\nconst updateStockOfListingMaybe = (listingId, stockTotals, dispatch) => {\r\n  const { oldTotal, newTotal } = stockTotals || {};\r\n  // Note: newTotal and oldTotal must be given, but oldTotal can be null\r\n  const hasStockTotals = newTotal >= 0 && typeof oldTotal !== 'undefined';\r\n\r\n  if (listingId && hasStockTotals) {\r\n    return dispatch(compareAndSetStock(listingId, oldTotal, newTotal));\r\n  }\r\n  return Promise.resolve();\r\n};\r\n\r\n// Create listing in draft state\r\n// NOTE: we want to keep it possible to include stock management field to the first wizard form.\r\n// this means that there needs to be a sequence of calls:\r\n// create, set stock, show listing (to get updated currentStock entity)\r\nexport function requestCreateListingDraft(data, config) {\r\n  return (dispatch, getState, sdk) => {\r\n    dispatch(createListingDraftRequest(data));\r\n    const { stockUpdate, images, ...rest } = data;\r\n\r\n    // If images should be saved, create array out of the image UUIDs for the API call\r\n    // Note: in this template, image upload is not happening at the same time as listing creation.\r\n    const imageProperty = typeof images !== 'undefined' ? { images: imageIds(images) } : {};\r\n    const ownListingValues = { ...imageProperty, ...rest };\r\n\r\n    const imageVariantInfo = getImageVariantInfo(config.layout.listingImage);\r\n    const queryParams = {\r\n      expand: true,\r\n      include: ['author', 'images', 'currentStock'],\r\n      'fields.image': imageVariantInfo.fieldsImage,\r\n      ...imageVariantInfo.imageVariants,\r\n    };\r\n\r\n    let createDraftResponse = null;\r\n    return sdk.ownListings\r\n      .createDraft(ownListingValues, queryParams)\r\n      .then(response => {\r\n        createDraftResponse = response;\r\n        const listingId = response.data.data.id;\r\n        // If stockUpdate info is passed through, update stock\r\n        return updateStockOfListingMaybe(listingId, stockUpdate, dispatch);\r\n      })\r\n      .then(() => {\r\n        // Modify store to understand that we have created listing and can redirect away\r\n        dispatch(createListingDraftSuccess(createDraftResponse));\r\n        return createDraftResponse;\r\n      })\r\n      .catch(e => {\r\n        log.error(e, 'create-listing-draft-failed', { listingData: data });\r\n        return dispatch(createListingDraftError(storableError(e)));\r\n      });\r\n  };\r\n}\r\n\r\n// Update the given tab of the wizard with the given data. This saves\r\n// the data to the listing, and marks the tab updated so the UI can\r\n// display the state.\r\n// NOTE: what comes to stock management, this follows the same pattern used in create listing call\r\nexport function requestUpdateListing(tab, data, config) {\r\n  return (dispatch, getState, sdk) => {\r\n    dispatch(updateListingRequest(data));\r\n    const { id, stockUpdate, images, ...rest } = data;\r\n\r\n    // If images should be saved, create array out of the image UUIDs for the API call\r\n    const imageProperty = typeof images !== 'undefined' ? { images: imageIds(images) } : {};\r\n    const ownListingUpdateValues = { id, ...imageProperty, ...rest };\r\n    const imageVariantInfo = getImageVariantInfo(config.layout.listingImage);\r\n    const queryParams = {\r\n      expand: true,\r\n      include: ['author', 'images', 'currentStock'],\r\n      'fields.image': imageVariantInfo.fieldsImage,\r\n      ...imageVariantInfo.imageVariants,\r\n    };\r\n\r\n    const state = getState();\r\n    const existingTimeZone =\r\n      state.marketplaceData.entities.ownListing[id.uuid]?.attributes?.availabilityPlan?.timezone;\r\n    const includedTimeZone = rest?.availabilityPlan?.timezone;\r\n\r\n    // Note: if update values include stockUpdate, we'll do that first\r\n    // That way we get updated currentStock info among ownListings.update\r\n    return updateStockOfListingMaybe(id, stockUpdate, dispatch)\r\n      .then(() => sdk.ownListings.update(ownListingUpdateValues, queryParams))\r\n      .then(response => {\r\n        dispatch(updateListingSuccess(response));\r\n        dispatch(addMarketplaceEntities(response));\r\n        dispatch(markTabUpdated(tab));\r\n\r\n        // If time zone has changed, we need to fetch exceptions again\r\n        // since week and month boundaries might have changed.\r\n        if (!!includedTimeZone && includedTimeZone !== existingTimeZone) {\r\n          const searchString = '';\r\n          const firstDayOfWeek = config.localization.firstDayOfWeek;\r\n          const listing = response.data.data;\r\n          fetchLoadDataExceptions(dispatch, listing, searchString, firstDayOfWeek);\r\n        }\r\n\r\n        return response;\r\n      })\r\n      .catch(e => {\r\n        log.error(e, 'update-listing-failed', { listingData: data });\r\n        return dispatch(updateListingError(storableError(e)));\r\n      });\r\n  };\r\n}\r\n\r\nexport const requestPublishListingDraft = listingId => (dispatch, getState, sdk) => {\r\n  dispatch(publishListingRequest(listingId));\r\n\r\n  return sdk.ownListings\r\n    .publishDraft({ id: listingId }, { expand: true })\r\n    .then(response => {\r\n      // Add the created listing to the marketplace data\r\n      dispatch(addMarketplaceEntities(response));\r\n      dispatch(publishListingSuccess(response));\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      dispatch(publishListingError(storableError(e)));\r\n    });\r\n};\r\n\r\n// Images return imageId which we need to map with previously generated temporary id\r\nexport function requestImageUpload(actionPayload, listingImageConfig) {\r\n  return (dispatch, getState, sdk) => {\r\n    const id = actionPayload.id;\r\n    const imageVariantInfo = getImageVariantInfo(listingImageConfig);\r\n    const queryParams = {\r\n      expand: true,\r\n      'fields.image': imageVariantInfo.fieldsImage,\r\n      ...imageVariantInfo.imageVariants,\r\n    };\r\n\r\n    dispatch(uploadImageRequest(actionPayload));\r\n    return sdk.images\r\n      .upload({ image: actionPayload.file }, queryParams)\r\n      .then(resp => {\r\n        const img = resp.data.data;\r\n        // Uploaded image has an existing id that refers to file\r\n        // The UUID was created as a consequence of this upload call - it's saved to imageId property\r\n        return dispatch(\r\n          uploadImageSuccess({ data: { ...img, id, imageId: img.id, file: actionPayload.file } })\r\n        );\r\n      })\r\n      .catch(e => dispatch(uploadImageError({ id, error: storableError(e) })));\r\n  };\r\n}\r\n\r\nexport const requestAddAvailabilityException = params => (dispatch, getState, sdk) => {\r\n  dispatch(addAvailabilityExceptionRequest(params));\r\n\r\n  return sdk.availabilityExceptions\r\n    .create(params, { expand: true })\r\n    .then(response => {\r\n      const availabilityException = response.data.data;\r\n      return dispatch(addAvailabilityExceptionSuccess({ data: availabilityException }));\r\n    })\r\n    .catch(e => {\r\n      dispatch(addAvailabilityExceptionError({ error: storableError(e) }));\r\n      throw e;\r\n    });\r\n};\r\n\r\nexport const requestDeleteAvailabilityException = params => (dispatch, getState, sdk) => {\r\n  dispatch(deleteAvailabilityExceptionRequest(params));\r\n\r\n  return sdk.availabilityExceptions\r\n    .delete(params, { expand: true })\r\n    .then(response => {\r\n      const availabilityException = response.data.data;\r\n      return dispatch(deleteAvailabilityExceptionSuccess({ data: availabilityException }));\r\n    })\r\n    .catch(e => {\r\n      dispatch(deleteAvailabilityExceptionError({ error: storableError(e) }));\r\n      throw e;\r\n    });\r\n};\r\n\r\nexport const requestFetchAvailabilityExceptions = params => (dispatch, getState, sdk) => {\r\n  const { listingId, start, end, timeZone, page, isWeekly } = params;\r\n  const fetchParams = { listingId, start, end };\r\n  const timeUnitIdProp = isWeekly\r\n    ? { weekStartId: stringifyDateToISO8601(start) }\r\n    : { monthId: monthIdString(start, timeZone) };\r\n  dispatch(fetchAvailabilityExceptionsRequest(timeUnitIdProp));\r\n\r\n  return sdk.availabilityExceptions\r\n    .query(fetchParams)\r\n    .then(response => {\r\n      const availabilityExceptions = denormalisedResponseEntities(response);\r\n\r\n      // Fetch potential extra exceptions pagination pages per month.\r\n      // In theory, there could be several pagination pages worth of exceptions,\r\n      // if range is month and unit is 'hour': 31 days * 24 hour = 744 slots for exceptions.\r\n      const totalPages = response.data.meta.totalPages;\r\n      if (totalPages > 1 && !page) {\r\n        const extraPages = getArrayOfNItems(totalPages);\r\n\r\n        // It's unlikely that this code is reached with default units.\r\n        // Note:\r\n        //  - Firing multiple API calls might hit API rate limit\r\n        //    (This is very unlikely with this query and 'hour' unit.)\r\n        //  - TODO: this doesn't take care of failures of those extra calls\r\n        Promise.all(\r\n          extraPages.map(page => {\r\n            return sdk.availabilityExceptions.query({ ...fetchParams, page });\r\n          })\r\n        ).then(responses => {\r\n          const denormalizedFlatResults = (all, r) => all.concat(denormalisedResponseEntities(r));\r\n          const exceptions = responses.reduce(denormalizedFlatResults, []);\r\n          dispatch(\r\n            fetchExtraAvailabilityExceptionsSuccess({\r\n              data: { ...timeUnitIdProp, exceptions },\r\n            })\r\n          );\r\n        });\r\n      }\r\n\r\n      return dispatch(\r\n        fetchAvailabilityExceptionsSuccess({\r\n          data: { ...timeUnitIdProp, exceptions: availabilityExceptions },\r\n        })\r\n      );\r\n    })\r\n    .catch(e => {\r\n      return dispatch(\r\n        fetchAvailabilityExceptionsError({ ...timeUnitIdProp, error: storableError(e) })\r\n      );\r\n    });\r\n};\r\n\r\n// Helper function for loadData call.\r\nconst fetchLoadDataExceptions = (dispatch, listing, search, firstDayOfWeek) => {\r\n  const hasWindow = typeof window !== 'undefined';\r\n  // Listing could be ownListing entity too, so we just check if attributes key exists\r\n  const hasTimeZone = listing?.attributes?.availabilityPlan?.timezone;\r\n\r\n  // Fetch time-zones on client side only.\r\n  // Note: listing needs to have time zone set!\r\n  if (hasWindow && listing.id && hasTimeZone) {\r\n    const listingId = listing.id;\r\n    // If the listing doesn't have availabilityPlan yet\r\n    // use the defaul timezone\r\n    const timezone = listing.attributes.availabilityPlan?.timezone || getDefaultTimeZoneOnBrowser();\r\n    const todayInListingsTZ = getStartOf(new Date(), 'day', timezone);\r\n\r\n    const locationSearch = parse(search);\r\n    const selectedDate = locationSearch?.d\r\n      ? parseDateFromISO8601(locationSearch.d, timezone)\r\n      : todayInListingsTZ;\r\n    const startOfWeek = getStartOfWeek(selectedDate, timezone, firstDayOfWeek);\r\n    const prevWeek = getStartOf(startOfWeek, 'day', timezone, -7, 'days');\r\n    const nextWeek = getStartOf(startOfWeek, 'day', timezone, 7, 'days');\r\n    const nextAfterNextWeek = getStartOf(nextWeek, 'day', timezone, 7, 'days');\r\n\r\n    const nextMonth = getStartOf(todayInListingsTZ, 'month', timezone, 1, 'months');\r\n    const nextAfterNextMonth = getStartOf(nextMonth, 'month', timezone, 1, 'months');\r\n\r\n    const sharedData = { listingId, timeZone: timezone };\r\n\r\n    // Fetch data for selected week and nearest weeks for WeeklyCalendar\r\n    // Plus current month and month after that for EditListingAvailabilityForm\r\n    //\r\n    // NOTE: This is making 5 different Thunk calls, which update store 2 times each\r\n    //       It would make sense to make on thunk function that fires 5 sdk calls/promises,\r\n    //       but for the time being, it's clearer to push all the calls through\r\n    //       requestFetchAvailabilityExceptions\r\n    return Promise.all([\r\n      dispatch(\r\n        requestFetchAvailabilityExceptions({\r\n          ...sharedData,\r\n          isWeekly: true,\r\n          start: prevWeek,\r\n          end: startOfWeek,\r\n        })\r\n      ),\r\n      dispatch(\r\n        requestFetchAvailabilityExceptions({\r\n          ...sharedData,\r\n          isWeekly: true,\r\n          start: startOfWeek,\r\n          end: nextWeek,\r\n        })\r\n      ),\r\n      dispatch(\r\n        requestFetchAvailabilityExceptions({\r\n          ...sharedData,\r\n          isWeekly: true,\r\n          start: nextWeek,\r\n          end: nextAfterNextWeek,\r\n        })\r\n      ),\r\n      dispatch(\r\n        requestFetchAvailabilityExceptions({\r\n          ...sharedData,\r\n          start: todayInListingsTZ,\r\n          end: nextMonth,\r\n        })\r\n      ),\r\n      dispatch(\r\n        requestFetchAvailabilityExceptions({\r\n          ...sharedData,\r\n          start: nextMonth,\r\n          end: nextAfterNextMonth,\r\n        })\r\n      ),\r\n    ]);\r\n  }\r\n\r\n  // By default return an empty array\r\n  return Promise.all([]);\r\n};\r\n\r\nexport const savePayoutDetails = (values, isUpdateCall) => (dispatch, getState, sdk) => {\r\n  const upsertThunk = isUpdateCall ? updateStripeAccount : createStripeAccount;\r\n  dispatch(savePayoutDetailsRequest());\r\n\r\n  return dispatch(upsertThunk(values, { expand: true }))\r\n    .then(response => {\r\n      dispatch(savePayoutDetailsSuccess());\r\n      return response;\r\n    })\r\n    .catch(() => dispatch(savePayoutDetailsError()));\r\n};\r\n\r\n// loadData is run for each tab of the wizard. When editing an\r\n// existing listing, the listing must be fetched first.\r\nexport const loadData = (params, search, config) => (dispatch, getState, sdk) => {\r\n  dispatch(clearUpdatedTab());\r\n  const { id, type } = params;\r\n\r\n  if (type === 'new') {\r\n    // No need to listing data when creating a new listing\r\n    return Promise.all([dispatch(fetchCurrentUser())])\r\n      .then(response => {\r\n        const currentUser = getState().user.currentUser;\r\n        if (currentUser && currentUser.stripeAccount) {\r\n          dispatch(fetchStripeAccount());\r\n        }\r\n        return response;\r\n      })\r\n      .catch(e => {\r\n        throw e;\r\n      });\r\n  }\r\n\r\n  const payload = { id: new UUID(id) };\r\n  return Promise.all([dispatch(requestShowListing(payload, config)), dispatch(fetchCurrentUser())])\r\n    .then(response => {\r\n      const currentUser = getState().user.currentUser;\r\n      if (currentUser && currentUser.stripeAccount) {\r\n        dispatch(fetchStripeAccount());\r\n      }\r\n\r\n      // Because of two dispatch functions, response is an array.\r\n      // We are only interested in the response from requestShowListing here,\r\n      // so we need to pick the first one\r\n      const listing = response[0]?.data?.data;\r\n      const transactionProcessAlias = listing?.attributes?.publicData?.transactionProcessAlias;\r\n      if (listing && isBookingProcessAlias(transactionProcessAlias)) {\r\n        fetchLoadDataExceptions(dispatch, listing, search, config.localization.firstDayOfWeek);\r\n      }\r\n\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      throw e;\r\n    });\r\n};\r\n","import React from 'react';\r\nimport { useConfiguration } from '../../context/configurationContext';\r\nimport loadable from '@loadable/component';\r\n\r\nconst SectionBuilder = loadable(\r\n  () => import(/* webpackChunkName: \"SectionBuilder\" */ '../PageBuilder/PageBuilder'),\r\n  {\r\n    resolveComponent: components => components.SectionBuilder,\r\n  }\r\n);\r\n\r\nconst FooterComponent = () => {\r\n  const { footer = {} } = useConfiguration();\r\n\r\n  // If footer asset is not set, let's not render Footer at all.\r\n  if (Object.keys(footer).length === 0) {\r\n    return null;\r\n  }\r\n\r\n  // The footer asset does not specify sectionId or sectionType. However, the SectionBuilder\r\n  // expects sectionId and sectionType in order to identify the section. We add those\r\n  // attributes here before passing the asset to SectionBuilder.\r\n  const footerSection = {\r\n    ...footer,\r\n    sectionId: 'footer',\r\n    sectionType: 'footer',\r\n  };\r\n\r\n  return <SectionBuilder sections={[footerSection]} />;\r\n};\r\n\r\n// NOTE: if you want to add dynamic data to FooterComponent,\r\n//       you could just connect this FooterContainer to Redux Store\r\n//\r\n// const mapStateToProps = state => {\r\n//   const { currentUser } = state.user;\r\n//   return { currentUser };\r\n// };\r\n// const FooterContainer = compose(connect(mapStateToProps))(FooterComponent);\r\n// export default FooterContainer;\r\n\r\nexport default FooterComponent;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/reverse\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/sortBy\");","import reverse from 'lodash/reverse';\r\nimport sortBy from 'lodash/sortBy';\r\nimport { storableError } from '../../util/errors';\r\nimport { parse } from '../../util/urlHelpers';\r\nimport { getAllTransitionsForEveryProcess } from '../../transactions/transaction';\r\nimport { addMarketplaceEntities } from '../../ducks/marketplaceData.duck';\r\n\r\nconst sortedTransactions = txs =>\r\n  reverse(\r\n    sortBy(txs, tx => {\r\n      return tx.attributes ? tx.attributes.lastTransitionedAt : null;\r\n    })\r\n  );\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const FETCH_ORDERS_OR_SALES_REQUEST = 'app/InboxPage/FETCH_ORDERS_OR_SALES_REQUEST';\r\nexport const FETCH_ORDERS_OR_SALES_SUCCESS = 'app/InboxPage/FETCH_ORDERS_OR_SALES_SUCCESS';\r\nexport const FETCH_ORDERS_OR_SALES_ERROR = 'app/InboxPage/FETCH_ORDERS_OR_SALES_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst entityRefs = entities =>\r\n  entities.map(entity => ({\r\n    id: entity.id,\r\n    type: entity.type,\r\n  }));\r\n\r\nconst initialState = {\r\n  fetchInProgress: false,\r\n  fetchOrdersOrSalesError: null,\r\n  pagination: null,\r\n  transactionRefs: [],\r\n};\r\n\r\nexport default function inboxPageReducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case FETCH_ORDERS_OR_SALES_REQUEST:\r\n      return { ...state, fetchInProgress: true, fetchOrdersOrSalesError: null };\r\n    case FETCH_ORDERS_OR_SALES_SUCCESS: {\r\n      const transactions = sortedTransactions(payload.data.data);\r\n      return {\r\n        ...state,\r\n        fetchInProgress: false,\r\n        transactionRefs: entityRefs(transactions),\r\n        pagination: payload.data.meta,\r\n      };\r\n    }\r\n    case FETCH_ORDERS_OR_SALES_ERROR:\r\n      console.error(payload); // eslint-disable-line\r\n      return { ...state, fetchInProgress: false, fetchOrdersOrSalesError: payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nconst fetchOrdersOrSalesRequest = () => ({ type: FETCH_ORDERS_OR_SALES_REQUEST });\r\nconst fetchOrdersOrSalesSuccess = response => ({\r\n  type: FETCH_ORDERS_OR_SALES_SUCCESS,\r\n  payload: response,\r\n});\r\nconst fetchOrdersOrSalesError = e => ({\r\n  type: FETCH_ORDERS_OR_SALES_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nconst INBOX_PAGE_SIZE = 10;\r\n\r\nexport const loadData = (params, search) => (dispatch, getState, sdk) => {\r\n  const { tab } = params;\r\n\r\n  const onlyFilterValues = {\r\n    orders: 'order',\r\n    sales: 'sale',\r\n  };\r\n\r\n  const onlyFilter = onlyFilterValues[tab];\r\n  if (!onlyFilter) {\r\n    return Promise.reject(new Error(`Invalid tab for InboxPage: ${tab}`));\r\n  }\r\n\r\n  dispatch(fetchOrdersOrSalesRequest());\r\n\r\n  const { page = 1 } = parse(search);\r\n\r\n  const apiQueryParams = {\r\n    only: onlyFilter,\r\n    lastTransitions: getAllTransitionsForEveryProcess(),\r\n    include: [\r\n      'listing',\r\n      'provider',\r\n      'provider.profileImage',\r\n      'customer',\r\n      'customer.profileImage',\r\n      'booking',\r\n    ],\r\n    'fields.transaction': [\r\n      'processName',\r\n      'lastTransition',\r\n      'lastTransitionedAt',\r\n      'transitions',\r\n      'payinTotal',\r\n      'payoutTotal',\r\n      'lineItems',\r\n    ],\r\n    'fields.listing': ['title', 'availabilityPlan', 'publicData.listingType'],\r\n    'fields.user': ['profile.displayName', 'profile.abbreviatedName'],\r\n    'fields.image': ['variants.square-small', 'variants.square-small2x'],\r\n    page,\r\n    perPage: INBOX_PAGE_SIZE,\r\n  };\r\n\r\n  return sdk.transactions\r\n    .query(apiQueryParams)\r\n    .then(response => {\r\n      dispatch(addMarketplaceEntities(response));\r\n      dispatch(fetchOrdersOrSalesSuccess(response));\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      dispatch(fetchOrdersOrSalesError(storableError(e)));\r\n      throw e;\r\n    });\r\n};\r\n","import { fetchPageAssets } from '../../ducks/hostedAssets.duck';\r\nexport const ASSET_NAME = 'landing-page';\r\n\r\nexport const loadData = (params, search) => dispatch => {\r\n  const pageAsset = { landingPage: `content/pages/${ASSET_NAME}.json` };\r\n  return dispatch(fetchPageAssets(pageAsset, true));\r\n};\r\n","import pick from 'lodash/pick';\r\n\r\nimport { types as sdkTypes, createImageVariantConfig } from '../../util/sdkLoader';\r\nimport { storableError } from '../../util/errors';\r\nimport { addMarketplaceEntities } from '../../ducks/marketplaceData.duck';\r\nimport { transactionLineItems } from '../../util/api';\r\nimport * as log from '../../util/log';\r\nimport { denormalisedResponseEntities } from '../../util/data';\r\nimport { findNextBoundary, getStartOf, monthIdString } from '../../util/dates';\r\nimport {\r\n  LISTING_PAGE_DRAFT_VARIANT,\r\n  LISTING_PAGE_PENDING_APPROVAL_VARIANT,\r\n} from '../../util/urlHelpers';\r\nimport { getProcess, isBookingProcessAlias } from '../../transactions/transaction';\r\nimport { fetchCurrentUser, fetchCurrentUserHasOrdersSuccess } from '../../ducks/user.duck';\r\n\r\nconst { UUID } = sdkTypes;\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const SET_INITIAL_VALUES = 'app/ListingPage/SET_INITIAL_VALUES';\r\n\r\nexport const SHOW_LISTING_REQUEST = 'app/ListingPage/SHOW_LISTING_REQUEST';\r\nexport const SHOW_LISTING_ERROR = 'app/ListingPage/SHOW_LISTING_ERROR';\r\n\r\nexport const FETCH_REVIEWS_REQUEST = 'app/ListingPage/FETCH_REVIEWS_REQUEST';\r\nexport const FETCH_REVIEWS_SUCCESS = 'app/ListingPage/FETCH_REVIEWS_SUCCESS';\r\nexport const FETCH_REVIEWS_ERROR = 'app/ListingPage/FETCH_REVIEWS_ERROR';\r\n\r\nexport const FETCH_TIME_SLOTS_REQUEST = 'app/ListingPage/FETCH_TIME_SLOTS_REQUEST';\r\nexport const FETCH_TIME_SLOTS_SUCCESS = 'app/ListingPage/FETCH_TIME_SLOTS_SUCCESS';\r\nexport const FETCH_TIME_SLOTS_ERROR = 'app/ListingPage/FETCH_TIME_SLOTS_ERROR';\r\n\r\nexport const FETCH_LINE_ITEMS_REQUEST = 'app/ListingPage/FETCH_LINE_ITEMS_REQUEST';\r\nexport const FETCH_LINE_ITEMS_SUCCESS = 'app/ListingPage/FETCH_LINE_ITEMS_SUCCESS';\r\nexport const FETCH_LINE_ITEMS_ERROR = 'app/ListingPage/FETCH_LINE_ITEMS_ERROR';\r\n\r\nexport const SEND_INQUIRY_REQUEST = 'app/ListingPage/SEND_INQUIRY_REQUEST';\r\nexport const SEND_INQUIRY_SUCCESS = 'app/ListingPage/SEND_INQUIRY_SUCCESS';\r\nexport const SEND_INQUIRY_ERROR = 'app/ListingPage/SEND_INQUIRY_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  id: null,\r\n  showListingError: null,\r\n  reviews: [],\r\n  fetchReviewsError: null,\r\n  monthlyTimeSlots: {\r\n    // '2022-03': {\r\n    //   timeSlots: [],\r\n    //   fetchTimeSlotsError: null,\r\n    //   fetchTimeSlotsInProgress: null,\r\n    // },\r\n  },\r\n  lineItems: null,\r\n  fetchLineItemsInProgress: false,\r\n  fetchLineItemsError: null,\r\n  sendInquiryInProgress: false,\r\n  sendInquiryError: null,\r\n  inquiryModalOpenForListingId: null,\r\n};\r\n\r\nconst listingPageReducer = (state = initialState, action = {}) => {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SET_INITIAL_VALUES:\r\n      return { ...initialState, ...payload };\r\n\r\n    case SHOW_LISTING_REQUEST:\r\n      return { ...state, id: payload.id, showListingError: null };\r\n    case SHOW_LISTING_ERROR:\r\n      return { ...state, showListingError: payload };\r\n\r\n    case FETCH_REVIEWS_REQUEST:\r\n      return { ...state, fetchReviewsError: null };\r\n    case FETCH_REVIEWS_SUCCESS:\r\n      return { ...state, reviews: payload };\r\n    case FETCH_REVIEWS_ERROR:\r\n      return { ...state, fetchReviewsError: payload };\r\n\r\n    case FETCH_TIME_SLOTS_REQUEST: {\r\n      const monthlyTimeSlots = {\r\n        ...state.monthlyTimeSlots,\r\n        [payload]: {\r\n          ...state.monthlyTimeSlots[payload],\r\n          fetchTimeSlotsError: null,\r\n          fetchTimeSlotsInProgress: true,\r\n        },\r\n      };\r\n      return { ...state, monthlyTimeSlots };\r\n    }\r\n    case FETCH_TIME_SLOTS_SUCCESS: {\r\n      const monthId = payload.monthId;\r\n      const monthlyTimeSlots = {\r\n        ...state.monthlyTimeSlots,\r\n        [monthId]: {\r\n          ...state.monthlyTimeSlots[monthId],\r\n          fetchTimeSlotsInProgress: false,\r\n          timeSlots: payload.timeSlots,\r\n        },\r\n      };\r\n      return { ...state, monthlyTimeSlots };\r\n    }\r\n    case FETCH_TIME_SLOTS_ERROR: {\r\n      const monthId = payload.monthId;\r\n      const monthlyTimeSlots = {\r\n        ...state.monthlyTimeSlots,\r\n        [monthId]: {\r\n          ...state.monthlyTimeSlots[monthId],\r\n          fetchTimeSlotsInProgress: false,\r\n          fetchTimeSlotsError: payload.error,\r\n        },\r\n      };\r\n      return { ...state, monthlyTimeSlots };\r\n    }\r\n\r\n    case FETCH_LINE_ITEMS_REQUEST:\r\n      return { ...state, fetchLineItemsInProgress: true, fetchLineItemsError: null };\r\n    case FETCH_LINE_ITEMS_SUCCESS:\r\n      return { ...state, fetchLineItemsInProgress: false, lineItems: payload };\r\n    case FETCH_LINE_ITEMS_ERROR:\r\n      return { ...state, fetchLineItemsInProgress: false, fetchLineItemsError: payload };\r\n\r\n    case SEND_INQUIRY_REQUEST:\r\n      return { ...state, sendInquiryInProgress: true, sendInquiryError: null };\r\n    case SEND_INQUIRY_SUCCESS:\r\n      return { ...state, sendInquiryInProgress: false };\r\n    case SEND_INQUIRY_ERROR:\r\n      return { ...state, sendInquiryInProgress: false, sendInquiryError: payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default listingPageReducer;\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const setInitialValues = initialValues => ({\r\n  type: SET_INITIAL_VALUES,\r\n  payload: pick(initialValues, Object.keys(initialState)),\r\n});\r\n\r\nexport const showListingRequest = id => ({\r\n  type: SHOW_LISTING_REQUEST,\r\n  payload: { id },\r\n});\r\n\r\nexport const showListingError = e => ({\r\n  type: SHOW_LISTING_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nexport const fetchReviewsRequest = () => ({ type: FETCH_REVIEWS_REQUEST });\r\nexport const fetchReviewsSuccess = reviews => ({ type: FETCH_REVIEWS_SUCCESS, payload: reviews });\r\nexport const fetchReviewsError = error => ({\r\n  type: FETCH_REVIEWS_ERROR,\r\n  error: true,\r\n  payload: error,\r\n});\r\n\r\nexport const fetchTimeSlotsRequest = monthId => ({\r\n  type: FETCH_TIME_SLOTS_REQUEST,\r\n  payload: monthId,\r\n});\r\nexport const fetchTimeSlotsSuccess = (monthId, timeSlots) => ({\r\n  type: FETCH_TIME_SLOTS_SUCCESS,\r\n  payload: { timeSlots, monthId },\r\n});\r\nexport const fetchTimeSlotsError = (monthId, error) => ({\r\n  type: FETCH_TIME_SLOTS_ERROR,\r\n  error: true,\r\n  payload: { monthId, error },\r\n});\r\n\r\nexport const fetchLineItemsRequest = () => ({ type: FETCH_LINE_ITEMS_REQUEST });\r\nexport const fetchLineItemsSuccess = lineItems => ({\r\n  type: FETCH_LINE_ITEMS_SUCCESS,\r\n  payload: lineItems,\r\n});\r\nexport const fetchLineItemsError = error => ({\r\n  type: FETCH_LINE_ITEMS_ERROR,\r\n  error: true,\r\n  payload: error,\r\n});\r\n\r\nexport const sendInquiryRequest = () => ({ type: SEND_INQUIRY_REQUEST });\r\nexport const sendInquirySuccess = () => ({ type: SEND_INQUIRY_SUCCESS });\r\nexport const sendInquiryError = e => ({ type: SEND_INQUIRY_ERROR, error: true, payload: e });\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const showListing = (listingId, config, isOwn = false) => (dispatch, getState, sdk) => {\r\n  const {\r\n    aspectWidth = 1,\r\n    aspectHeight = 1,\r\n    variantPrefix = 'listing-card',\r\n  } = config.layout.listingImage;\r\n  const aspectRatio = aspectHeight / aspectWidth;\r\n\r\n  dispatch(showListingRequest(listingId));\r\n  dispatch(fetchCurrentUser());\r\n  const params = {\r\n    id: listingId,\r\n    include: ['author', 'author.profileImage', 'images', 'currentStock'],\r\n    'fields.image': [\r\n      // Scaled variants for large images\r\n      'variants.scaled-small',\r\n      'variants.scaled-medium',\r\n      'variants.scaled-large',\r\n      'variants.scaled-xlarge',\r\n\r\n      // Cropped variants for listing thumbnail images\r\n      `variants.${variantPrefix}`,\r\n      `variants.${variantPrefix}-2x`,\r\n      `variants.${variantPrefix}-4x`,\r\n      `variants.${variantPrefix}-6x`,\r\n\r\n      // Social media\r\n      'variants.facebook',\r\n      'variants.twitter',\r\n\r\n      // Avatars\r\n      'variants.square-small',\r\n      'variants.square-small2x',\r\n    ],\r\n    ...createImageVariantConfig(`${variantPrefix}`, 400, aspectRatio),\r\n    ...createImageVariantConfig(`${variantPrefix}-2x`, 800, aspectRatio),\r\n    ...createImageVariantConfig(`${variantPrefix}-4x`, 1600, aspectRatio),\r\n    ...createImageVariantConfig(`${variantPrefix}-6x`, 2400, aspectRatio),\r\n  };\r\n\r\n  const show = isOwn ? sdk.ownListings.show(params) : sdk.listings.show(params);\r\n\r\n  return show\r\n    .then(data => {\r\n      const listingFields = config?.listing?.listingFields;\r\n      const sanitizeConfig = { listingFields };\r\n      dispatch(addMarketplaceEntities(data, sanitizeConfig));\r\n      return data;\r\n    })\r\n    .catch(e => {\r\n      dispatch(showListingError(storableError(e)));\r\n    });\r\n};\r\n\r\nexport const fetchReviews = listingId => (dispatch, getState, sdk) => {\r\n  dispatch(fetchReviewsRequest());\r\n  return sdk.reviews\r\n    .query({\r\n      listing_id: listingId,\r\n      state: 'public',\r\n      include: ['author', 'author.profileImage'],\r\n      'fields.image': ['variants.square-small', 'variants.square-small2x'],\r\n    })\r\n    .then(response => {\r\n      const reviews = denormalisedResponseEntities(response);\r\n      dispatch(fetchReviewsSuccess(reviews));\r\n    })\r\n    .catch(e => {\r\n      dispatch(fetchReviewsError(storableError(e)));\r\n    });\r\n};\r\n\r\nconst timeSlotsRequest = params => (dispatch, getState, sdk) => {\r\n  return sdk.timeslots.query(params).then(response => {\r\n    return denormalisedResponseEntities(response);\r\n  });\r\n};\r\n\r\nexport const fetchTimeSlots = (listingId, start, end, timeZone) => (dispatch, getState, sdk) => {\r\n  const monthId = monthIdString(start, timeZone);\r\n\r\n  dispatch(fetchTimeSlotsRequest(monthId));\r\n\r\n  // The maximum pagination page size for timeSlots is 500\r\n  const extraParams = {\r\n    perPage: 500,\r\n    page: 1,\r\n  };\r\n\r\n  return dispatch(timeSlotsRequest({ listingId, start, end, ...extraParams }))\r\n    .then(timeSlots => {\r\n      dispatch(fetchTimeSlotsSuccess(monthId, timeSlots));\r\n    })\r\n    .catch(e => {\r\n      dispatch(fetchTimeSlotsError(monthId, storableError(e)));\r\n    });\r\n};\r\n\r\nexport const sendInquiry = (listing, message) => (dispatch, getState, sdk) => {\r\n  dispatch(sendInquiryRequest());\r\n  const processAlias = listing?.attributes?.publicData?.transactionProcessAlias;\r\n  if (!processAlias) {\r\n    const error = new Error('No transaction process attached to listing');\r\n    log.error(error, 'listing-process-missing', {\r\n      listingId: listing?.id?.uuid,\r\n    });\r\n    dispatch(sendInquiryError(storableError(error)));\r\n    return Promise.reject(error);\r\n  }\r\n\r\n  const listingId = listing?.id;\r\n  const [processName, alias] = processAlias.split('/');\r\n  const transitions = getProcess(processName)?.transitions;\r\n\r\n  const bodyParams = {\r\n    transition: transitions.INQUIRE,\r\n    processAlias,\r\n    params: { listingId },\r\n  };\r\n  return sdk.transactions\r\n    .initiate(bodyParams)\r\n    .then(response => {\r\n      const transactionId = response.data.data.id;\r\n\r\n      // Send the message to the created transaction\r\n      return sdk.messages.send({ transactionId, content: message }).then(() => {\r\n        dispatch(sendInquirySuccess());\r\n        dispatch(fetchCurrentUserHasOrdersSuccess(true));\r\n        return transactionId;\r\n      });\r\n    })\r\n    .catch(e => {\r\n      dispatch(sendInquiryError(storableError(e)));\r\n      throw e;\r\n    });\r\n};\r\n\r\n// Helper function for loadData call.\r\nconst fetchMonthlyTimeSlots = (dispatch, listing) => {\r\n  const hasWindow = typeof window !== 'undefined';\r\n  const attributes = listing.attributes;\r\n  // Listing could be ownListing entity too, so we just check if attributes key exists\r\n  const hasTimeZone =\r\n    attributes && attributes.availabilityPlan && attributes.availabilityPlan.timezone;\r\n\r\n  // Fetch time-zones on client side only.\r\n  if (hasWindow && listing.id && hasTimeZone) {\r\n    const tz = listing.attributes.availabilityPlan.timezone;\r\n    const unitType = attributes?.publicData?.unitType;\r\n    const timeUnit = unitType === 'hour' ? 'hour' : 'day';\r\n    const nextBoundary = findNextBoundary(new Date(), timeUnit, tz);\r\n\r\n    const nextMonth = getStartOf(nextBoundary, 'month', tz, 1, 'months');\r\n    const nextAfterNextMonth = getStartOf(nextMonth, 'month', tz, 1, 'months');\r\n\r\n    return Promise.all([\r\n      dispatch(fetchTimeSlots(listing.id, nextBoundary, nextMonth, tz)),\r\n      dispatch(fetchTimeSlots(listing.id, nextMonth, nextAfterNextMonth, tz)),\r\n    ]);\r\n  }\r\n\r\n  // By default return an empty array\r\n  return Promise.all([]);\r\n};\r\n\r\nexport const fetchTransactionLineItems = ({ orderData, listingId, isOwnListing }) => dispatch => {\r\n  dispatch(fetchLineItemsRequest());\r\n  transactionLineItems({ orderData, listingId, isOwnListing })\r\n    .then(response => {\r\n      const lineItems = response.data;\r\n      dispatch(fetchLineItemsSuccess(lineItems));\r\n    })\r\n    .catch(e => {\r\n      dispatch(fetchLineItemsError(storableError(e)));\r\n      log.error(e, 'fetching-line-items-failed', {\r\n        listingId: listingId.uuid,\r\n        orderData,\r\n      });\r\n    });\r\n};\r\n\r\nexport const loadData = (params, search, config) => dispatch => {\r\n  const listingId = new UUID(params.id);\r\n\r\n  // Clear old line-items\r\n  dispatch(setInitialValues({ lineItems: null }));\r\n\r\n  const ownListingVariants = [LISTING_PAGE_DRAFT_VARIANT, LISTING_PAGE_PENDING_APPROVAL_VARIANT];\r\n  if (ownListingVariants.includes(params.variant)) {\r\n    return dispatch(showListing(listingId, config, true));\r\n  }\r\n\r\n  return Promise.all([\r\n    dispatch(showListing(listingId, config)),\r\n    dispatch(fetchReviews(listingId)),\r\n  ]).then(response => {\r\n    const listing = response[0].data.data;\r\n    const transactionProcessAlias = listing?.attributes?.publicData?.transactionProcessAlias || '';\r\n    if (isBookingProcessAlias(transactionProcessAlias)) {\r\n      // Fetch timeSlots.\r\n      // This can happen parallel to loadData.\r\n      // We are not interested to return them from loadData call.\r\n      fetchMonthlyTimeSlots(dispatch, listing);\r\n    }\r\n    return response;\r\n  });\r\n};\r\n","import { updatedEntities, denormalisedEntities } from '../../util/data';\r\nimport { storableError } from '../../util/errors';\r\nimport { createImageVariantConfig } from '../../util/sdkLoader';\r\nimport { parse } from '../../util/urlHelpers';\r\n\r\n// Pagination page size might need to be dynamic on responsive page layouts\r\n// Current design has max 3 columns 42 is divisible by 2 and 3\r\n// So, there's enough cards to fill all columns on full pagination pages\r\nconst RESULT_PAGE_SIZE = 42;\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const FETCH_LISTINGS_REQUEST = 'app/ManageListingsPage/FETCH_LISTINGS_REQUEST';\r\nexport const FETCH_LISTINGS_SUCCESS = 'app/ManageListingsPage/FETCH_LISTINGS_SUCCESS';\r\nexport const FETCH_LISTINGS_ERROR = 'app/ManageListingsPage/FETCH_LISTINGS_ERROR';\r\n\r\nexport const OPEN_LISTING_REQUEST = 'app/ManageListingsPage/OPEN_LISTING_REQUEST';\r\nexport const OPEN_LISTING_SUCCESS = 'app/ManageListingsPage/OPEN_LISTING_SUCCESS';\r\nexport const OPEN_LISTING_ERROR = 'app/ManageListingsPage/OPEN_LISTING_ERROR';\r\n\r\nexport const CLOSE_LISTING_REQUEST = 'app/ManageListingsPage/CLOSE_LISTING_REQUEST';\r\nexport const CLOSE_LISTING_SUCCESS = 'app/ManageListingsPage/CLOSE_LISTING_SUCCESS';\r\nexport const CLOSE_LISTING_ERROR = 'app/ManageListingsPage/CLOSE_LISTING_ERROR';\r\n\r\nexport const ADD_OWN_ENTITIES = 'app/ManageListingsPage/ADD_OWN_ENTITIES';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  pagination: null,\r\n  queryParams: null,\r\n  queryInProgress: false,\r\n  queryListingsError: null,\r\n  currentPageResultIds: [],\r\n  ownEntities: {},\r\n  openingListing: null,\r\n  openingListingError: null,\r\n  closingListing: null,\r\n  closingListingError: null,\r\n};\r\n\r\nconst resultIds = data => data.data.map(l => l.id);\r\n\r\nconst merge = (state, sdkResponse) => {\r\n  const apiResponse = sdkResponse.data;\r\n  return {\r\n    ...state,\r\n    ownEntities: updatedEntities({ ...state.ownEntities }, apiResponse),\r\n  };\r\n};\r\n\r\nconst updateListingAttributes = (state, listingEntity) => {\r\n  const oldListing = state.ownEntities.ownListing[listingEntity.id.uuid];\r\n  const updatedListing = { ...oldListing, attributes: listingEntity.attributes };\r\n  const ownListingEntities = {\r\n    ...state.ownEntities.ownListing,\r\n    [listingEntity.id.uuid]: updatedListing,\r\n  };\r\n  return {\r\n    ...state,\r\n    ownEntities: { ...state.ownEntities, ownListing: ownListingEntities },\r\n  };\r\n};\r\n\r\nconst manageListingsPageReducer = (state = initialState, action = {}) => {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case FETCH_LISTINGS_REQUEST:\r\n      return {\r\n        ...state,\r\n        queryParams: payload.queryParams,\r\n        queryInProgress: true,\r\n        queryListingsError: null,\r\n        currentPageResultIds: [],\r\n      };\r\n    case FETCH_LISTINGS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        currentPageResultIds: resultIds(payload.data),\r\n        pagination: payload.data.meta,\r\n        queryInProgress: false,\r\n      };\r\n    case FETCH_LISTINGS_ERROR:\r\n      // eslint-disable-next-line no-console\r\n      console.error(payload);\r\n      return { ...state, queryInProgress: false, queryListingsError: payload };\r\n\r\n    case OPEN_LISTING_REQUEST:\r\n      return {\r\n        ...state,\r\n        openingListing: payload.listingId,\r\n        openingListingError: null,\r\n      };\r\n    case OPEN_LISTING_SUCCESS:\r\n      return {\r\n        ...updateListingAttributes(state, payload.data),\r\n        openingListing: null,\r\n      };\r\n    case OPEN_LISTING_ERROR: {\r\n      // eslint-disable-next-line no-console\r\n      console.error(payload);\r\n      return {\r\n        ...state,\r\n        openingListing: null,\r\n        openingListingError: {\r\n          listingId: state.openingListing,\r\n          error: payload,\r\n        },\r\n      };\r\n    }\r\n\r\n    case CLOSE_LISTING_REQUEST:\r\n      return {\r\n        ...state,\r\n        closingListing: payload.listingId,\r\n        closingListingError: null,\r\n      };\r\n    case CLOSE_LISTING_SUCCESS:\r\n      return {\r\n        ...updateListingAttributes(state, payload.data),\r\n        closingListing: null,\r\n      };\r\n    case CLOSE_LISTING_ERROR: {\r\n      // eslint-disable-next-line no-console\r\n      console.error(payload);\r\n      return {\r\n        ...state,\r\n        closingListing: null,\r\n        closingListingError: {\r\n          listingId: state.closingListing,\r\n          error: payload,\r\n        },\r\n      };\r\n    }\r\n\r\n    case ADD_OWN_ENTITIES:\r\n      return merge(state, payload);\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default manageListingsPageReducer;\r\n\r\n// ================ Selectors ================ //\r\n\r\n/**\r\n * Get the denormalised own listing entities with the given IDs\r\n *\r\n * @param {Object} state the full Redux store\r\n * @param {Array<UUID>} listingIds listing IDs to select from the store\r\n */\r\nexport const getOwnListingsById = (state, listingIds) => {\r\n  const { ownEntities } = state.ManageListingsPage;\r\n  const resources = listingIds.map(id => ({\r\n    id,\r\n    type: 'ownListing',\r\n  }));\r\n  const throwIfNotFound = false;\r\n  return denormalisedEntities(ownEntities, resources, throwIfNotFound);\r\n};\r\n\r\n// ================ Action creators ================ //\r\n\r\n// This works the same way as addMarketplaceEntities,\r\n// but we don't want to mix own listings with searched listings\r\n// (own listings data contains different info - e.g. exact location etc.)\r\nexport const addOwnEntities = sdkResponse => ({\r\n  type: ADD_OWN_ENTITIES,\r\n  payload: sdkResponse,\r\n});\r\n\r\nexport const openListingRequest = listingId => ({\r\n  type: OPEN_LISTING_REQUEST,\r\n  payload: { listingId },\r\n});\r\n\r\nexport const openListingSuccess = response => ({\r\n  type: OPEN_LISTING_SUCCESS,\r\n  payload: response.data,\r\n});\r\n\r\nexport const openListingError = e => ({\r\n  type: OPEN_LISTING_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nexport const closeListingRequest = listingId => ({\r\n  type: CLOSE_LISTING_REQUEST,\r\n  payload: { listingId },\r\n});\r\n\r\nexport const closeListingSuccess = response => ({\r\n  type: CLOSE_LISTING_SUCCESS,\r\n  payload: response.data,\r\n});\r\n\r\nexport const closeListingError = e => ({\r\n  type: CLOSE_LISTING_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nexport const queryListingsRequest = queryParams => ({\r\n  type: FETCH_LISTINGS_REQUEST,\r\n  payload: { queryParams },\r\n});\r\n\r\nexport const queryListingsSuccess = response => ({\r\n  type: FETCH_LISTINGS_SUCCESS,\r\n  payload: { data: response.data },\r\n});\r\n\r\nexport const queryListingsError = e => ({\r\n  type: FETCH_LISTINGS_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\n// Throwing error for new (loadData may need that info)\r\nexport const queryOwnListings = queryParams => (dispatch, getState, sdk) => {\r\n  dispatch(queryListingsRequest(queryParams));\r\n\r\n  const { perPage, ...rest } = queryParams;\r\n  const params = { ...rest, perPage };\r\n\r\n  return sdk.ownListings\r\n    .query(params)\r\n    .then(response => {\r\n      dispatch(addOwnEntities(response));\r\n      dispatch(queryListingsSuccess(response));\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      dispatch(queryListingsError(storableError(e)));\r\n      throw e;\r\n    });\r\n};\r\n\r\nexport const closeListing = listingId => (dispatch, getState, sdk) => {\r\n  dispatch(closeListingRequest(listingId));\r\n\r\n  return sdk.ownListings\r\n    .close({ id: listingId }, { expand: true })\r\n    .then(response => {\r\n      dispatch(closeListingSuccess(response));\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      dispatch(closeListingError(storableError(e)));\r\n    });\r\n};\r\n\r\nexport const openListing = listingId => (dispatch, getState, sdk) => {\r\n  dispatch(openListingRequest(listingId));\r\n\r\n  return sdk.ownListings\r\n    .open({ id: listingId }, { expand: true })\r\n    .then(response => {\r\n      dispatch(openListingSuccess(response));\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      dispatch(openListingError(storableError(e)));\r\n    });\r\n};\r\n\r\nexport const loadData = (params, search, config) => {\r\n  const queryParams = parse(search);\r\n  const page = queryParams.page || 1;\r\n\r\n  const {\r\n    aspectWidth = 1,\r\n    aspectHeight = 1,\r\n    variantPrefix = 'listing-card',\r\n  } = config.layout.listingImage;\r\n  const aspectRatio = aspectHeight / aspectWidth;\r\n\r\n  return queryOwnListings({\r\n    ...queryParams,\r\n    page,\r\n    perPage: RESULT_PAGE_SIZE,\r\n    include: ['images', 'currentStock'],\r\n    'fields.image': [`variants.${variantPrefix}`, `variants.${variantPrefix}-2x`],\r\n    ...createImageVariantConfig(`${variantPrefix}`, 400, aspectRatio),\r\n    ...createImageVariantConfig(`${variantPrefix}-2x`, 800, aspectRatio),\r\n    'limit.images': 1,\r\n  });\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"SearchForm_root__A80Lu\",\"searchInputIcon\":\"SearchForm_searchInputIcon__lmrvN\",\"searchInput\":\"SearchForm_searchInput__B+GJf\",\"searchPredictions\":\"SearchForm_searchPredictions__e5bpg\",\"keywordSearchWrapper\":\"SearchForm_keywordSearchWrapper__HMv28\",\"keywordInput\":\"SearchForm_keywordInput__MK9sj\",\"searchSubmit\":\"SearchForm_searchSubmit__4KWSf\",\"iconSvgGroup\":\"SearchForm_iconSvgGroup__h-SXo\",\"iconSvg\":\"SearchForm_iconSvg__27lE7\"};","import React from 'react';\r\n\r\nimport css from './SearchForm.module.css';\r\n\r\nconst IconSearchDesktop = () => (\r\n  <svg\r\n    className={css.iconSvg}\r\n    width=\"21\"\r\n    height=\"22\"\r\n    viewBox=\"0 0 21 22\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n  >\r\n    <g\r\n      className={css.iconSvgGroup}\r\n      transform=\"matrix(-1 0 0 1 20 1)\"\r\n      strokeWidth=\"2\"\r\n      fill=\"none\"\r\n      fillRule=\"evenodd\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n    >\r\n      <path d=\"M13 14l5.241 5.241\" />\r\n      <circle cx=\"7.5\" cy=\"7.5\" r=\"7.5\" />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nexport default IconSearchDesktop;\r\n","import React from 'react';\r\nimport { bool, func, string } from 'prop-types';\r\nimport { Form as FinalForm, Field } from 'react-final-form';\r\nimport classNames from 'classnames';\r\n\r\nimport { intlShape, injectIntl } from '../../../util/reactIntl';\r\nimport { Form, LocationAutocompleteInput } from '../../../components';\r\n\r\nimport IconSearchDesktop from './IconSearchDesktop';\r\n\r\nimport css from './SearchForm.module.css';\r\n\r\nconst identity = v => v;\r\n\r\nconst KeywordSearchField = props => {\r\n  const { intl, inputRef } = props;\r\n  return (\r\n    <div className={css.keywordSearchWrapper}>\r\n      <button className={css.searchSubmit}>\r\n        <div className={css.searchInputIcon}>\r\n          <IconSearchDesktop />\r\n        </div>\r\n      </button>\r\n      <Field\r\n        name=\"keywords\"\r\n        render={({ input, meta }) => {\r\n          return (\r\n            <input\r\n              className={css.keywordInput}\r\n              {...input}\r\n              id={'keyword-search-404'}\r\n              type=\"text\"\r\n              placeholder={intl.formatMessage({\r\n                id: 'NotFoundPage.SearchForm.placeholder',\r\n              })}\r\n              autoComplete=\"off\"\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst LocationSearchField = props => {\r\n  const { intl, handleChange } = props;\r\n  return (\r\n    <Field\r\n      name=\"location\"\r\n      format={identity}\r\n      render={({ input, meta }) => {\r\n        const { onChange, ...restInput } = input;\r\n\r\n        // Merge the standard onChange function with custom behaviur. A better solution would\r\n        // be to use the FormSpy component from Final Form and pass this.onChange to the\r\n        // onChange prop but that breaks due to insufficient subscription handling.\r\n        // See: https://github.com/final-form/react-final-form/issues/159\r\n        const searchOnChange = value => {\r\n          onChange(value);\r\n          handleChange(value);\r\n        };\r\n\r\n        const searchInput = { ...restInput, onChange: searchOnChange };\r\n        return (\r\n          <LocationAutocompleteInput\r\n            placeholder={intl.formatMessage({ id: 'NotFoundPage.SearchForm.placeholder' })}\r\n            iconClassName={css.searchInputIcon}\r\n            inputClassName={css.searchInput}\r\n            predictionsClassName={css.searchPredictions}\r\n            input={searchInput}\r\n            meta={meta}\r\n          />\r\n        );\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst SearchFormComponent = props => {\r\n  const handleChange = location => {\r\n    if (location.selectedPlace) {\r\n      // Note that we use `onSubmit` instead of the conventional\r\n      // `handleSubmit` prop for submitting. We want to autosubmit\r\n      // when a place is selected, and don't require any extra\r\n      // validations for the form.\r\n      props.onSubmit({ location });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <FinalForm\r\n      {...props}\r\n      render={formRenderProps => {\r\n        const { rootClassName, className, isKeywordSearch, intl, handleSubmit } = formRenderProps;\r\n        const classes = classNames(rootClassName || css.root, className);\r\n\r\n        // Allow form submit only when the place has changed\r\n        const preventFormSubmit = e => e.preventDefault();\r\n        const submitFormFn = isKeywordSearch ? handleSubmit : preventFormSubmit;\r\n\r\n        return (\r\n          <Form className={classes} onSubmit={submitFormFn}>\r\n            {isKeywordSearch ? (\r\n              <KeywordSearchField intl={intl} />\r\n            ) : (\r\n              <LocationSearchField intl={intl} handleChange={handleChange} />\r\n            )}\r\n          </Form>\r\n        );\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nSearchFormComponent.defaultProps = { rootClassName: null, className: null };\r\n\r\nSearchFormComponent.propTypes = {\r\n  rootClassName: string,\r\n  className: string,\r\n  onSubmit: func.isRequired,\r\n  isKeywordSearch: bool.isRequired,\r\n\r\n  // from injectIntl\r\n  intl: intlShape.isRequired,\r\n};\r\n\r\nconst SearchForm = injectIntl(SearchFormComponent);\r\n\r\nexport default SearchForm;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"NotFoundPage_root__4J4R8\",\"content\":\"NotFoundPage_content__nEurh\",\"number\":\"NotFoundPage_number__u8r42 marketplaceHeroTitleFontStyles\",\"heading\":\"NotFoundPage_heading__OE2v2 marketplaceModalTitleStyles\",\"description\":\"NotFoundPage_description__e-oM-\",\"searchForm\":\"NotFoundPage_searchForm__pwM6k\"};","import React, { Component } from 'react';\r\nimport { arrayOf, bool, func, object, shape, string } from 'prop-types';\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { useConfiguration } from '../../context/configurationContext';\r\nimport { useRouteConfiguration } from '../../context/routeConfigurationContext';\r\nimport { FormattedMessage, useIntl, intlShape } from '../../util/reactIntl';\r\nimport { propTypes } from '../../util/types';\r\nimport { createResourceLocatorString } from '../../util/routes';\r\nimport { isMainSearchTypeKeywords } from '../../util/search';\r\nimport { isScrollingDisabled } from '../../ducks/ui.duck';\r\n\r\nimport { Heading, Page, LayoutSingleColumn } from '../../components';\r\n\r\nimport TopbarContainer from '../../containers/TopbarContainer/TopbarContainer';\r\nimport FooterContainer from '../../containers/FooterContainer/FooterContainer';\r\n\r\nimport SearchForm from './SearchForm/SearchForm';\r\n\r\nimport css from './NotFoundPage.module.css';\r\n\r\nexport class NotFoundPageComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // The StaticRouter component used in server side rendering\r\n    // provides the context object. We attach a `notfound` flag to\r\n    // the context to tell the server to change the response status\r\n    // code into a 404.\r\n    this.props.staticContext.notfound = true;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      history,\r\n      routeConfiguration,\r\n      marketplaceName,\r\n      isKeywordSearch,\r\n      intl,\r\n      scrollingDisabled,\r\n    } = this.props;\r\n\r\n    const title = intl.formatMessage({\r\n      id: 'NotFoundPage.title',\r\n    });\r\n\r\n    const handleSearchSubmit = values => {\r\n      const { keywords, location } = values;\r\n      const { search, selectedPlace } = location || {};\r\n      const { origin, bounds } = selectedPlace || {};\r\n      const searchParams = keywords ? { keywords } : { address: search, origin, bounds };\r\n      history.push(createResourceLocatorString('SearchPage', routeConfiguration, {}, searchParams));\r\n    };\r\n\r\n    return (\r\n      <Page title={title} scrollingDisabled={scrollingDisabled}>\r\n        <LayoutSingleColumn topbar={<TopbarContainer />} footer={<FooterContainer />}>\r\n          <div className={css.root}>\r\n            <div className={css.content}>\r\n              <div className={css.number}>404</div>\r\n              <Heading as=\"h1\" rootClassName={css.heading}>\r\n                <FormattedMessage id=\"NotFoundPage.heading\" />\r\n              </Heading>\r\n              <p className={css.description}>\r\n                <FormattedMessage id=\"NotFoundPage.description\" values={{ marketplaceName }} />\r\n              </p>\r\n              <SearchForm\r\n                className={css.searchForm}\r\n                isKeywordSearch={isKeywordSearch}\r\n                onSubmit={handleSearchSubmit}\r\n              />\r\n            </div>\r\n          </div>\r\n        </LayoutSingleColumn>\r\n      </Page>\r\n    );\r\n  }\r\n}\r\n\r\nNotFoundPageComponent.defaultProps = {\r\n  staticContext: {},\r\n};\r\n\r\nNotFoundPageComponent.propTypes = {\r\n  scrollingDisabled: bool.isRequired,\r\n  marketplaceName: string.isRequired,\r\n  isKeywordSearch: bool.isRequired,\r\n\r\n  // context object from StaticRouter, injected by the withRouter wrapper\r\n  staticContext: object,\r\n\r\n  // from useIntl\r\n  intl: intlShape.isRequired,\r\n\r\n  // from useRouteConfiguration\r\n  routeConfiguration: arrayOf(propTypes.route).isRequired,\r\n\r\n  // from useHistory\r\n  history: shape({\r\n    push: func.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nconst EnhancedNotFoundPage = props => {\r\n  const routeConfiguration = useRouteConfiguration();\r\n  const config = useConfiguration();\r\n  const history = useHistory();\r\n  const intl = useIntl();\r\n\r\n  return (\r\n    <NotFoundPageComponent\r\n      routeConfiguration={routeConfiguration}\r\n      marketplaceName={config.marketplaceName}\r\n      isKeywordSearch={isMainSearchTypeKeywords(config)}\r\n      history={history}\r\n      intl={intl}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    scrollingDisabled: isScrollingDisabled(state),\r\n  };\r\n};\r\n\r\n// Note: it is important that the withRouter HOC is **outside** the\r\n// connect HOC, otherwise React Router won't rerender any Route\r\n// components since connect implements a shouldComponentUpdate\r\n// lifecycle hook.\r\n//\r\n// See: https://github.com/ReactTraining/react-router/issues/4671\r\nconst NotFoundPage = compose(connect(mapStateToProps))(EnhancedNotFoundPage);\r\n\r\nexport default NotFoundPage;\r\n","import { storableError } from '../../util/errors';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const CHANGE_PASSWORD_REQUEST = 'app/PasswordChangePage/CHANGE_PASSWORD_REQUEST';\r\nexport const CHANGE_PASSWORD_SUCCESS = 'app/PasswordChangePage/CHANGE_PASSWORD_SUCCESS';\r\nexport const CHANGE_PASSWORD_ERROR = 'app/PasswordChangePage/CHANGE_PASSWORD_ERROR';\r\n\r\nexport const CHANGE_PASSWORD_CLEAR = 'app/PasswordChangePage/CHANGE_PASSWORD_CLEAR';\r\n\r\nexport const RESET_PASSWORD_REQUEST = 'app/PasswordChangePage/RESET_PASSWORD_REQUEST';\r\nexport const RESET_PASSWORD_SUCCESS = 'app/PasswordChangePage/RESET_PASSWORD_SUCCESS';\r\nexport const RESET_PASSWORD_ERROR = 'app/PasswordChangePage/RESET_PASSWORD_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  changePasswordError: null,\r\n  changePasswordInProgress: false,\r\n  passwordChanged: false,\r\n  resetPasswordInProgress: false,\r\n  resetPasswordError: null,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case CHANGE_PASSWORD_REQUEST:\r\n      return {\r\n        ...state,\r\n        changePasswordInProgress: true,\r\n        changePasswordError: null,\r\n        passwordChanged: false,\r\n      };\r\n    case CHANGE_PASSWORD_SUCCESS:\r\n      return { ...state, changePasswordInProgress: false, passwordChanged: true };\r\n    case CHANGE_PASSWORD_ERROR:\r\n      return { ...state, changePasswordInProgress: false, changePasswordError: payload };\r\n\r\n    case CHANGE_PASSWORD_CLEAR:\r\n      return { ...initialState };\r\n\r\n    case RESET_PASSWORD_REQUEST:\r\n      return { ...state, resetPasswordInProgress: true, resetPasswordError: null };\r\n    case RESET_PASSWORD_SUCCESS:\r\n      return { ...state, resetPasswordInProgress: false };\r\n    case RESET_PASSWORD_ERROR:\r\n      console.error(payload); // eslint-disable-line no-console\r\n      return { ...state, resetPasswordInProgress: false, resetPasswordError: payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const changePasswordRequest = () => ({ type: CHANGE_PASSWORD_REQUEST });\r\nexport const changePasswordSuccess = () => ({ type: CHANGE_PASSWORD_SUCCESS });\r\nexport const changePasswordError = error => ({\r\n  type: CHANGE_PASSWORD_ERROR,\r\n  payload: error,\r\n  error: true,\r\n});\r\n\r\nexport const changePasswordClear = () => ({ type: CHANGE_PASSWORD_CLEAR });\r\n\r\nexport const resetPasswordRequest = () => ({ type: RESET_PASSWORD_REQUEST });\r\n\r\nexport const resetPasswordSuccess = () => ({ type: RESET_PASSWORD_SUCCESS });\r\n\r\nexport const resetPasswordError = e => ({\r\n  type: RESET_PASSWORD_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const changePassword = params => (dispatch, getState, sdk) => {\r\n  dispatch(changePasswordRequest());\r\n  const { newPassword, currentPassword } = params;\r\n\r\n  return sdk.currentUser\r\n    .changePassword({ newPassword, currentPassword })\r\n    .then(() => dispatch(changePasswordSuccess()))\r\n    .catch(e => {\r\n      dispatch(changePasswordError(storableError(storableError(e))));\r\n      // This is thrown so that form can be cleared\r\n      // after a timeout on changePassword submit handler\r\n      throw e;\r\n    });\r\n};\r\n\r\nexport const resetPassword = email => (dispatch, getState, sdk) => {\r\n  dispatch(resetPasswordRequest());\r\n  return sdk.passwordReset\r\n    .request({ email })\r\n    .then(() => dispatch(resetPasswordSuccess()))\r\n    .catch(e => dispatch(resetPasswordError(storableError(e))));\r\n};\r\n","import { storableError } from '../../util/errors';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const RECOVERY_REQUEST = 'app/PasswordRecoveryPage/RECOVERY_REQUEST';\r\nexport const RECOVERY_SUCCESS = 'app/PasswordRecoveryPage/RECOVERY_SUCCESS';\r\nexport const RECOVERY_ERROR = 'app/PasswordRecoveryPage/RECOVERY_ERROR';\r\nexport const RETYPE_EMAIL = 'app/PasswordRecoveryPage/RETYPE_EMAIL';\r\nexport const CLEAR_RECOVERY_ERROR = 'app/PasswordRecoveryPage/CLEAR_RECOVERY_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  initialEmail: null,\r\n  submittedEmail: null,\r\n  recoveryError: null,\r\n  recoveryInProgress: false,\r\n  passwordRequested: false,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case RECOVERY_REQUEST:\r\n      return {\r\n        ...state,\r\n        submittedEmail: null,\r\n        recoveryInProgress: true,\r\n        recoveryError: null,\r\n      };\r\n    case RECOVERY_SUCCESS:\r\n      return {\r\n        ...state,\r\n        submittedEmail: payload.email,\r\n        initialEmail: payload.email,\r\n        recoveryInProgress: false,\r\n        passwordRequested: true,\r\n      };\r\n    case RECOVERY_ERROR:\r\n      return {\r\n        ...state,\r\n        recoveryInProgress: false,\r\n        recoveryError: payload.error,\r\n        initialEmail: payload.email,\r\n      };\r\n    case RETYPE_EMAIL:\r\n      return {\r\n        ...state,\r\n        initialEmail: state.submittedEmail,\r\n        submittedEmail: null,\r\n        passwordRequested: false,\r\n      };\r\n    case CLEAR_RECOVERY_ERROR:\r\n      return { ...state, recoveryError: null };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const passwordRecoveryRequest = () => ({ type: RECOVERY_REQUEST });\r\nexport const passwordRecoverySuccess = email => ({ type: RECOVERY_SUCCESS, payload: { email } });\r\nexport const passwordRecoveryError = (error, email) => ({\r\n  type: RECOVERY_ERROR,\r\n  payload: { error, email },\r\n  error: true,\r\n});\r\nexport const retypePasswordRecoveryEmail = () => ({ type: RETYPE_EMAIL });\r\nexport const clearPasswordRecoveryError = () => ({ type: CLEAR_RECOVERY_ERROR });\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const recoverPassword = email => (dispatch, getState, sdk) => {\r\n  dispatch(passwordRecoveryRequest());\r\n\r\n  return sdk.passwordReset\r\n    .request({ email })\r\n    .then(() => dispatch(passwordRecoverySuccess(email)))\r\n    .catch(e => dispatch(passwordRecoveryError(storableError(e), email)));\r\n};\r\n","import { storableError } from '../../util/errors';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const RESET_PASSWORD_REQUEST = 'app/PasswordResetPage/RESET_PASSWORD_REQUEST';\r\nexport const RESET_PASSWORD_SUCCESS = 'app/PasswordResetPage/RESET_PASSWORD_SUCCESS';\r\nexport const RESET_PASSWORD_ERROR = 'app/PasswordResetPage/RESET_PASSWORD_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  resetPasswordInProgress: false,\r\n  resetPasswordError: null,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case RESET_PASSWORD_REQUEST:\r\n      return { ...state, resetPasswordInProgress: true, resetPasswordError: null };\r\n    case RESET_PASSWORD_SUCCESS:\r\n      return { ...state, resetPasswordInProgress: false };\r\n    case RESET_PASSWORD_ERROR:\r\n      console.error(payload); // eslint-disable-line no-console\r\n      return { ...state, resetPasswordInProgress: false, resetPasswordError: payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const resetPasswordRequest = () => ({ type: RESET_PASSWORD_REQUEST });\r\n\r\nexport const resetPasswordSuccess = () => ({ type: RESET_PASSWORD_SUCCESS });\r\n\r\nexport const resetPasswordError = e => ({\r\n  type: RESET_PASSWORD_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const resetPassword = (email, passwordResetToken, newPassword) => (\r\n  dispatch,\r\n  getState,\r\n  sdk\r\n) => {\r\n  dispatch(resetPasswordRequest());\r\n  const params = { email, passwordResetToken, newPassword };\r\n  return sdk.passwordReset\r\n    .reset(params)\r\n    .then(() => dispatch(resetPasswordSuccess()))\r\n    .catch(e => dispatch(resetPasswordError(storableError(e))));\r\n};\r\n","import { fetchCurrentUser } from '../../ducks/user.duck';\r\nimport { setInitialValues as setInitialValuesForPaymentMethods } from '../../ducks/paymentMethods.duck';\r\nimport { storableError } from '../../util/errors';\r\nimport * as log from '../../util/log';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const SETUP_INTENT_REQUEST = 'app/PaymentMethodsPage/SETUP_INTENT_REQUEST';\r\nexport const SETUP_INTENT_SUCCESS = 'app/PaymentMethodsPage/SETUP_INTENT_SUCCESS';\r\nexport const SETUP_INTENT_ERROR = 'app/PaymentMethodsPage/SETUP_INTENT_ERROR';\r\n\r\nexport const STRIPE_CUSTOMER_REQUEST = 'app/PaymentMethodsPage/STRIPE_CUSTOMER_REQUEST';\r\nexport const STRIPE_CUSTOMER_SUCCESS = 'app/PaymentMethodsPage/STRIPE_CUSTOMER_SUCCESS';\r\nexport const STRIPE_CUSTOMER_ERROR = 'app/PaymentMethodsPage/STRIPE_CUSTOMER_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  setupIntentInProgress: false,\r\n  setupIntentError: null,\r\n  setupIntent: null,\r\n  stripeCustomerFetched: false,\r\n};\r\n\r\nexport default function payoutMethodsPageReducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SETUP_INTENT_REQUEST:\r\n      return { ...state, setupIntentInProgress: true, setupIntentError: null };\r\n    case SETUP_INTENT_SUCCESS:\r\n      return {\r\n        ...state,\r\n        setupIntentInProgress: false,\r\n        setupIntentError: null,\r\n        setupIntent: payload,\r\n      };\r\n    case SETUP_INTENT_ERROR:\r\n      console.error(payload); // eslint-disable-line no-console\r\n      return { ...state, setupIntentInProgress: false, setupIntentError: null };\r\n    case STRIPE_CUSTOMER_REQUEST:\r\n      return { ...state, stripeCustomerFetched: false };\r\n    case STRIPE_CUSTOMER_SUCCESS:\r\n      return { ...state, stripeCustomerFetched: true };\r\n    case STRIPE_CUSTOMER_ERROR:\r\n      console.error(payload); // eslint-disable-line no-console\r\n      return { ...state, stripeCustomerFetchError: payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const setupIntentRequest = () => ({ type: SETUP_INTENT_REQUEST });\r\nexport const setupIntentSuccess = () => ({ type: SETUP_INTENT_SUCCESS });\r\nexport const setupIntentError = e => ({\r\n  type: SETUP_INTENT_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nexport const stripeCustomerRequest = () => ({ type: STRIPE_CUSTOMER_REQUEST });\r\nexport const stripeCustomerSuccess = () => ({ type: STRIPE_CUSTOMER_SUCCESS });\r\nexport const stripeCustomerError = e => ({\r\n  type: STRIPE_CUSTOMER_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n// ================ Thunks ================ //\r\n\r\nexport const createStripeSetupIntent = () => (dispatch, getState, sdk) => {\r\n  dispatch(setupIntentRequest());\r\n  return sdk.stripeSetupIntents\r\n    .create()\r\n    .then(response => {\r\n      const setupIntent = response.data.data;\r\n      dispatch(setupIntentSuccess(setupIntent));\r\n      return setupIntent;\r\n    })\r\n    .catch(e => {\r\n      const error = storableError(e);\r\n      log.error(error, 'create-setup-intent-failed');\r\n      dispatch(setupIntentError(error));\r\n      return { createStripeSetupIntentSuccess: false };\r\n    });\r\n};\r\n\r\nexport const stripeCustomer = () => (dispatch, getState, sdk) => {\r\n  dispatch(stripeCustomerRequest());\r\n\r\n  return dispatch(fetchCurrentUser({ include: ['stripeCustomer.defaultPaymentMethod'] }))\r\n    .then(response => {\r\n      dispatch(stripeCustomerSuccess());\r\n    })\r\n    .catch(e => {\r\n      const error = storableError(e);\r\n      log.error(error, 'fetch-stripe-customer-failed');\r\n      dispatch(stripeCustomerError(error));\r\n    });\r\n};\r\n\r\nexport const loadData = () => (dispatch, getState, sdk) => {\r\n  dispatch(setInitialValuesForPaymentMethods());\r\n\r\n  return dispatch(stripeCustomer());\r\n};\r\n","import React from 'react';\r\nimport { shape, string } from 'prop-types';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { parse } from '../../util/urlHelpers';\r\nimport { NamedRedirect } from '../../components';\r\n\r\n// Get page asset name from asset path\r\nconst getPageAssetName = assetPath => {\r\n  const cmsPageRegex = new RegExp('content/pages/(.*).json');\r\n  const matches = assetPath.match(cmsPageRegex);\r\n  // The asset name is found from the matches array;\r\n  return matches?.[1];\r\n};\r\n\r\n// This page resolves what route on the client app should be shown,\r\n// when Console redirects the operator to the client app.\r\n// The URL that Sharetribe Console uses looks like this:\r\n// https://my.marketplace.com/preview?asset-path=content/pages/privacy-policy.json\r\n//\r\n// If the asset path starts with \"content/pages\",\r\n// we try to pick the asset name (e.g. privacy-policy) and resolve the correct route based on that.\r\nconst PreviewResolverPage = props => {\r\n  const search = props?.location?.search;\r\n  const parsedQueryString = parse(search);\r\n  const assetPath = parsedQueryString?.['asset-path'] || '';\r\n  const pageAssetName = getPageAssetName(assetPath);\r\n  const hasCMSPagePath = !!pageAssetName;\r\n\r\n  const toTermsOfServicePage = <NamedRedirect name=\"TermsOfServicePage\" />;\r\n  const toPrivacyPolicyPage = <NamedRedirect name=\"PrivacyPolicyPage\" />;\r\n  const toCMSPage = <NamedRedirect name=\"CMSPage\" params={{ pageId: pageAssetName }} />;\r\n  const toLandingPage = <NamedRedirect name=\"LandingPage\" />;\r\n\r\n  // Check if a specific page should be shown\r\n  // If pageAssetName can't be detected, redirect to LandingPage\r\n  return pageAssetName === 'terms-of-service'\r\n    ? toTermsOfServicePage\r\n    : pageAssetName === 'privacy-policy'\r\n    ? toPrivacyPolicyPage\r\n    : pageAssetName === 'landing-page'\r\n    ? toLandingPage\r\n    : hasCMSPagePath\r\n    ? toCMSPage\r\n    : toLandingPage;\r\n};\r\n\r\nPreviewResolverPage.propTypes = {\r\n  // from withRouter\r\n  location: shape({\r\n    search: string.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nexport default withRouter(PreviewResolverPage);\r\n","import { fetchPageAssets } from '../../ducks/hostedAssets.duck';\r\nexport const ASSET_NAME = 'privacy-policy';\r\n\r\nexport const loadData = (params, search) => dispatch => {\r\n  const pageAsset = { privacyPolicy: `content/pages/${ASSET_NAME}.json` };\r\n  return dispatch(fetchPageAssets(pageAsset, true));\r\n};\r\n","import { addMarketplaceEntities } from '../../ducks/marketplaceData.duck';\r\nimport { fetchCurrentUser } from '../../ducks/user.duck';\r\nimport { types as sdkTypes, createImageVariantConfig } from '../../util/sdkLoader';\r\nimport { denormalisedResponseEntities } from '../../util/data';\r\nimport { storableError } from '../../util/errors';\r\n\r\nconst { UUID } = sdkTypes;\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const SET_INITIAL_STATE = 'app/ProfilePage/SET_INITIAL_STATE';\r\n\r\nexport const SHOW_USER_REQUEST = 'app/ProfilePage/SHOW_USER_REQUEST';\r\nexport const SHOW_USER_SUCCESS = 'app/ProfilePage/SHOW_USER_SUCCESS';\r\nexport const SHOW_USER_ERROR = 'app/ProfilePage/SHOW_USER_ERROR';\r\n\r\nexport const QUERY_LISTINGS_REQUEST = 'app/ProfilePage/QUERY_LISTINGS_REQUEST';\r\nexport const QUERY_LISTINGS_SUCCESS = 'app/ProfilePage/QUERY_LISTINGS_SUCCESS';\r\nexport const QUERY_LISTINGS_ERROR = 'app/ProfilePage/QUERY_LISTINGS_ERROR';\r\n\r\nexport const QUERY_REVIEWS_REQUEST = 'app/ProfilePage/QUERY_REVIEWS_REQUEST';\r\nexport const QUERY_REVIEWS_SUCCESS = 'app/ProfilePage/QUERY_REVIEWS_SUCCESS';\r\nexport const QUERY_REVIEWS_ERROR = 'app/ProfilePage/QUERY_REVIEWS_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  userId: null,\r\n  userListingRefs: [],\r\n  userShowError: null,\r\n  queryListingsError: null,\r\n  reviews: [],\r\n  queryReviewsError: null,\r\n};\r\n\r\nexport default function profilePageReducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SET_INITIAL_STATE:\r\n      return { ...initialState };\r\n    case SHOW_USER_REQUEST:\r\n      return { ...state, userShowError: null, userId: payload.userId };\r\n    case SHOW_USER_SUCCESS:\r\n      return state;\r\n    case SHOW_USER_ERROR:\r\n      return { ...state, userShowError: payload };\r\n\r\n    case QUERY_LISTINGS_REQUEST:\r\n      return {\r\n        ...state,\r\n\r\n        // Empty listings only when user id changes\r\n        userListingRefs: payload.userId === state.userId ? state.userListingRefs : [],\r\n\r\n        queryListingsError: null,\r\n      };\r\n    case QUERY_LISTINGS_SUCCESS:\r\n      return { ...state, userListingRefs: payload.listingRefs };\r\n    case QUERY_LISTINGS_ERROR:\r\n      return { ...state, userListingRefs: [], queryListingsError: payload };\r\n    case QUERY_REVIEWS_REQUEST:\r\n      return { ...state, queryReviewsError: null };\r\n    case QUERY_REVIEWS_SUCCESS:\r\n      return { ...state, reviews: payload };\r\n    case QUERY_REVIEWS_ERROR:\r\n      return { ...state, reviews: [], queryReviewsError: payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const setInitialState = () => ({\r\n  type: SET_INITIAL_STATE,\r\n});\r\n\r\nexport const showUserRequest = userId => ({\r\n  type: SHOW_USER_REQUEST,\r\n  payload: { userId },\r\n});\r\n\r\nexport const showUserSuccess = () => ({\r\n  type: SHOW_USER_SUCCESS,\r\n});\r\n\r\nexport const showUserError = e => ({\r\n  type: SHOW_USER_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nexport const queryListingsRequest = userId => ({\r\n  type: QUERY_LISTINGS_REQUEST,\r\n  payload: { userId },\r\n});\r\n\r\nexport const queryListingsSuccess = listingRefs => ({\r\n  type: QUERY_LISTINGS_SUCCESS,\r\n  payload: { listingRefs },\r\n});\r\n\r\nexport const queryListingsError = e => ({\r\n  type: QUERY_LISTINGS_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nexport const queryReviewsRequest = () => ({\r\n  type: QUERY_REVIEWS_REQUEST,\r\n});\r\n\r\nexport const queryReviewsSuccess = reviews => ({\r\n  type: QUERY_REVIEWS_SUCCESS,\r\n  payload: reviews,\r\n});\r\n\r\nexport const queryReviewsError = e => ({\r\n  type: QUERY_REVIEWS_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const queryUserListings = (userId, config) => (dispatch, getState, sdk) => {\r\n  dispatch(queryListingsRequest(userId));\r\n\r\n  const {\r\n    aspectWidth = 1,\r\n    aspectHeight = 1,\r\n    variantPrefix = 'listing-card',\r\n  } = config.layout.listingImage;\r\n  const aspectRatio = aspectHeight / aspectWidth;\r\n\r\n  return sdk.listings\r\n    .query({\r\n      author_id: userId,\r\n      include: ['author', 'images'],\r\n      'fields.image': [`variants.${variantPrefix}`, `variants.${variantPrefix}-2x`],\r\n      ...createImageVariantConfig(`${variantPrefix}`, 400, aspectRatio),\r\n      ...createImageVariantConfig(`${variantPrefix}-2x`, 800, aspectRatio),\r\n    })\r\n    .then(response => {\r\n      // Pick only the id and type properties from the response listings\r\n      const listingRefs = response.data.data.map(({ id, type }) => ({ id, type }));\r\n      dispatch(addMarketplaceEntities(response));\r\n      dispatch(queryListingsSuccess(listingRefs));\r\n      return response;\r\n    })\r\n    .catch(e => dispatch(queryListingsError(storableError(e))));\r\n};\r\n\r\nexport const queryUserReviews = userId => (dispatch, getState, sdk) => {\r\n  sdk.reviews\r\n    .query({\r\n      subject_id: userId,\r\n      state: 'public',\r\n      include: ['author', 'author.profileImage'],\r\n      'fields.image': ['variants.square-small', 'variants.square-small2x'],\r\n    })\r\n    .then(response => {\r\n      const reviews = denormalisedResponseEntities(response);\r\n      dispatch(queryReviewsSuccess(reviews));\r\n    })\r\n    .catch(e => dispatch(queryReviewsError(e)));\r\n};\r\n\r\nexport const showUser = userId => (dispatch, getState, sdk) => {\r\n  dispatch(showUserRequest(userId));\r\n  return sdk.users\r\n    .show({\r\n      id: userId,\r\n      include: ['profileImage'],\r\n      'fields.image': ['variants.square-small', 'variants.square-small2x'],\r\n    })\r\n    .then(response => {\r\n      dispatch(addMarketplaceEntities(response));\r\n      dispatch(showUserSuccess());\r\n      return response;\r\n    })\r\n    .catch(e => dispatch(showUserError(storableError(e))));\r\n};\r\n\r\nexport const loadData = (params, search, config) => (dispatch, getState, sdk) => {\r\n  const userId = new UUID(params.id);\r\n\r\n  // Clear state so that previously loaded data is not visible\r\n  // in case this page load fails.\r\n  dispatch(setInitialState());\r\n\r\n  return Promise.all([\r\n    dispatch(fetchCurrentUser()),\r\n    dispatch(showUser(userId)),\r\n    dispatch(queryUserListings(userId, config)),\r\n    dispatch(queryUserReviews(userId)),\r\n  ]);\r\n};\r\n","import { denormalisedResponseEntities } from '../../util/data';\r\nimport { storableError } from '../../util/errors';\r\nimport { currentUserShowSuccess } from '../../ducks/user.duck';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const CLEAR_UPDATED_FORM = 'app/ProfileSettingsPage/CLEAR_UPDATED_FORM';\r\n\r\nexport const UPLOAD_IMAGE_REQUEST = 'app/ProfileSettingsPage/UPLOAD_IMAGE_REQUEST';\r\nexport const UPLOAD_IMAGE_SUCCESS = 'app/ProfileSettingsPage/UPLOAD_IMAGE_SUCCESS';\r\nexport const UPLOAD_IMAGE_ERROR = 'app/ProfileSettingsPage/UPLOAD_IMAGE_ERROR';\r\n\r\nexport const UPDATE_PROFILE_REQUEST = 'app/ProfileSettingsPage/UPDATE_PROFILE_REQUEST';\r\nexport const UPDATE_PROFILE_SUCCESS = 'app/ProfileSettingsPage/UPDATE_PROFILE_SUCCESS';\r\nexport const UPDATE_PROFILE_ERROR = 'app/ProfileSettingsPage/UPDATE_PROFILE_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  image: null,\r\n  uploadImageError: null,\r\n  uploadInProgress: false,\r\n  updateInProgress: false,\r\n  updateProfileError: null,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case UPLOAD_IMAGE_REQUEST:\r\n      // payload.params: { id: 'tempId', file }\r\n      return {\r\n        ...state,\r\n        image: { ...payload.params },\r\n        uploadInProgress: true,\r\n        uploadImageError: null,\r\n      };\r\n    case UPLOAD_IMAGE_SUCCESS: {\r\n      // payload: { id: 'tempId', uploadedImage }\r\n      const { id, uploadedImage } = payload;\r\n      const { file } = state.image || {};\r\n      const image = { id, imageId: uploadedImage.id, file, uploadedImage };\r\n      return { ...state, image, uploadInProgress: false };\r\n    }\r\n    case UPLOAD_IMAGE_ERROR: {\r\n      // eslint-disable-next-line no-console\r\n      return { ...state, image: null, uploadInProgress: false, uploadImageError: payload.error };\r\n    }\r\n\r\n    case UPDATE_PROFILE_REQUEST:\r\n      return {\r\n        ...state,\r\n        updateInProgress: true,\r\n        updateProfileError: null,\r\n      };\r\n    case UPDATE_PROFILE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        image: null,\r\n        updateInProgress: false,\r\n      };\r\n    case UPDATE_PROFILE_ERROR:\r\n      return {\r\n        ...state,\r\n        image: null,\r\n        updateInProgress: false,\r\n        updateProfileError: payload,\r\n      };\r\n\r\n    case CLEAR_UPDATED_FORM:\r\n      return { ...state, updateProfileError: null, uploadImageError: null };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Selectors ================ //\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const clearUpdatedForm = () => ({\r\n  type: CLEAR_UPDATED_FORM,\r\n});\r\n\r\n// SDK method: images.upload\r\nexport const uploadImageRequest = params => ({ type: UPLOAD_IMAGE_REQUEST, payload: { params } });\r\nexport const uploadImageSuccess = result => ({ type: UPLOAD_IMAGE_SUCCESS, payload: result.data });\r\nexport const uploadImageError = error => ({\r\n  type: UPLOAD_IMAGE_ERROR,\r\n  payload: error,\r\n  error: true,\r\n});\r\n\r\n// SDK method: sdk.currentUser.updateProfile\r\nexport const updateProfileRequest = params => ({\r\n  type: UPDATE_PROFILE_REQUEST,\r\n  payload: { params },\r\n});\r\nexport const updateProfileSuccess = result => ({\r\n  type: UPDATE_PROFILE_SUCCESS,\r\n  payload: result.data,\r\n});\r\nexport const updateProfileError = error => ({\r\n  type: UPDATE_PROFILE_ERROR,\r\n  payload: error,\r\n  error: true,\r\n});\r\n\r\n// ================ Thunk ================ //\r\n\r\n// Images return imageId which we need to map with previously generated temporary id\r\nexport function uploadImage(actionPayload) {\r\n  return (dispatch, getState, sdk) => {\r\n    const id = actionPayload.id;\r\n    dispatch(uploadImageRequest(actionPayload));\r\n\r\n    const bodyParams = {\r\n      image: actionPayload.file,\r\n    };\r\n    const queryParams = {\r\n      expand: true,\r\n      'fields.image': ['variants.square-small', 'variants.square-small2x'],\r\n    };\r\n\r\n    return sdk.images\r\n      .upload(bodyParams, queryParams)\r\n      .then(resp => {\r\n        const uploadedImage = resp.data.data;\r\n        dispatch(uploadImageSuccess({ data: { id, uploadedImage } }));\r\n      })\r\n      .catch(e => dispatch(uploadImageError({ id, error: storableError(e) })));\r\n  };\r\n}\r\n\r\nexport const updateProfile = actionPayload => {\r\n  return (dispatch, getState, sdk) => {\r\n    dispatch(updateProfileRequest());\r\n\r\n    const queryParams = {\r\n      expand: true,\r\n      include: ['profileImage'],\r\n      'fields.image': ['variants.square-small', 'variants.square-small2x'],\r\n    };\r\n\r\n    return sdk.currentUser\r\n      .updateProfile(actionPayload, queryParams)\r\n      .then(response => {\r\n        dispatch(updateProfileSuccess(response));\r\n\r\n        const entities = denormalisedResponseEntities(response);\r\n        if (entities.length !== 1) {\r\n          throw new Error('Expected a resource in the sdk.currentUser.updateProfile response');\r\n        }\r\n        const currentUser = entities[0];\r\n\r\n        // Update current user in state.user.currentUser through user.duck.js\r\n        dispatch(currentUserShowSuccess(currentUser));\r\n      })\r\n      .catch(e => dispatch(updateProfileError(storableError(e))));\r\n  };\r\n};\r\n","import { storableError } from '../../util/errors';\r\nimport { convertUnitToSubUnit, unitDivisor } from '../../util/currency';\r\nimport {\r\n  parseDateFromISO8601,\r\n  getExclusiveEndDate,\r\n  addTime,\r\n  subtractTime,\r\n  daysBetween,\r\n  getStartOf,\r\n} from '../../util/dates';\r\nimport { createImageVariantConfig } from '../../util/sdkLoader';\r\nimport { isOriginInUse, isStockInUse } from '../../util/search';\r\nimport { parse } from '../../util/urlHelpers';\r\nimport { addMarketplaceEntities } from '../../ducks/marketplaceData.duck';\r\n\r\n// Pagination page size might need to be dynamic on responsive page layouts\r\n// Current design has max 3 columns 12 is divisible by 2 and 3\r\n// So, there's enough cards to fill all columns on full pagination pages\r\nconst RESULT_PAGE_SIZE = 24;\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const SEARCH_LISTINGS_REQUEST = 'app/SearchPage/SEARCH_LISTINGS_REQUEST';\r\nexport const SEARCH_LISTINGS_SUCCESS = 'app/SearchPage/SEARCH_LISTINGS_SUCCESS';\r\nexport const SEARCH_LISTINGS_ERROR = 'app/SearchPage/SEARCH_LISTINGS_ERROR';\r\n\r\nexport const SEARCH_MAP_LISTINGS_REQUEST = 'app/SearchPage/SEARCH_MAP_LISTINGS_REQUEST';\r\nexport const SEARCH_MAP_LISTINGS_SUCCESS = 'app/SearchPage/SEARCH_MAP_LISTINGS_SUCCESS';\r\nexport const SEARCH_MAP_LISTINGS_ERROR = 'app/SearchPage/SEARCH_MAP_LISTINGS_ERROR';\r\n\r\nexport const SEARCH_MAP_SET_ACTIVE_LISTING = 'app/SearchPage/SEARCH_MAP_SET_ACTIVE_LISTING';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  pagination: null,\r\n  searchParams: null,\r\n  searchInProgress: false,\r\n  searchListingsError: null,\r\n  currentPageResultIds: [],\r\n};\r\n\r\nconst resultIds = data => data.data.map(l => l.id);\r\n\r\nconst listingPageReducer = (state = initialState, action = {}) => {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SEARCH_LISTINGS_REQUEST:\r\n      return {\r\n        ...state,\r\n        searchParams: payload.searchParams,\r\n        searchInProgress: true,\r\n        searchMapListingIds: [],\r\n        searchListingsError: null,\r\n      };\r\n    case SEARCH_LISTINGS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        currentPageResultIds: resultIds(payload.data),\r\n        pagination: payload.data.meta,\r\n        searchInProgress: false,\r\n      };\r\n    case SEARCH_LISTINGS_ERROR:\r\n      // eslint-disable-next-line no-console\r\n      console.error(payload);\r\n      return { ...state, searchInProgress: false, searchListingsError: payload };\r\n\r\n    case SEARCH_MAP_SET_ACTIVE_LISTING:\r\n      return {\r\n        ...state,\r\n        activeListingId: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default listingPageReducer;\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const searchListingsRequest = searchParams => ({\r\n  type: SEARCH_LISTINGS_REQUEST,\r\n  payload: { searchParams },\r\n});\r\n\r\nexport const searchListingsSuccess = response => ({\r\n  type: SEARCH_LISTINGS_SUCCESS,\r\n  payload: { data: response.data },\r\n});\r\n\r\nexport const searchListingsError = e => ({\r\n  type: SEARCH_LISTINGS_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nexport const searchListings = (searchParams, config) => (dispatch, getState, sdk) => {\r\n  dispatch(searchListingsRequest(searchParams));\r\n\r\n  // SearchPage can enforce listing query to only those listings with valid listingType\r\n  // NOTE: this only works if you have set 'enum' type search schema to listing's public data fields\r\n  //       - listingType\r\n  //       Same setup could be expanded to 2 other extended data fields:\r\n  //       - transactionProcessAlias\r\n  //       - unitType\r\n  //       ...and then turned enforceValidListingType config to true in configListing.js\r\n  // Read More:\r\n  // https://www.sharetribe.com/docs/how-to/manage-search-schemas-with-flex-cli/#adding-listing-search-schemas\r\n  const searchValidListingTypes = listingTypes => {\r\n    return config.listing.enforceValidListingType\r\n      ? {\r\n          pub_listingType: listingTypes.map(l => l.listingType),\r\n          // pub_transactionProcessAlias: listingTypes.map(l => l.transactionType.alias),\r\n          // pub_unitType: listingTypes.map(l => l.transactionType.unitType),\r\n        }\r\n      : {};\r\n  };\r\n\r\n  const priceSearchParams = priceParam => {\r\n    const inSubunits = value => convertUnitToSubUnit(value, unitDivisor(config.currency));\r\n    const values = priceParam ? priceParam.split(',') : [];\r\n    return priceParam && values.length === 2\r\n      ? {\r\n          price: [inSubunits(values[0]), inSubunits(values[1]) + 1].join(','),\r\n        }\r\n      : {};\r\n  };\r\n\r\n  const datesSearchParams = datesParam => {\r\n    const searchTZ = 'Etc/UTC';\r\n    const datesFilter = config.search.defaultFilters.find(f => f.key === 'dates');\r\n    const values = datesParam ? datesParam.split(',') : [];\r\n    const hasValues = datesFilter && datesParam && values.length === 2;\r\n    const { dateRangeMode, availability } = datesFilter || {};\r\n    const isNightlyMode = dateRangeMode === 'night';\r\n    const isEntireRangeAvailable = availability === 'time-full';\r\n\r\n    // SearchPage need to use a single time zone but listings can have different time zones\r\n    // We need to expand/prolong the time window (start & end) to cover other time zones too.\r\n    //\r\n    // NOTE: you might want to consider changing UI so that\r\n    //   1) location is always asked first before date range\r\n    //   2) use some 3rd party service to convert location to time zone (IANA tz name)\r\n    //   3) Make exact dates filtering against that specific time zone\r\n    //   This setup would be better for dates filter,\r\n    //   but it enforces a UX where location is always asked first and therefore configurability\r\n    const getProlongedStart = date => subtractTime(date, 14, 'hours', searchTZ);\r\n    const getProlongedEnd = date => addTime(date, 12, 'hours', searchTZ);\r\n\r\n    const startDate = hasValues ? parseDateFromISO8601(values[0], searchTZ) : null;\r\n    const endRaw = hasValues ? parseDateFromISO8601(values[1], searchTZ) : null;\r\n    const endDate =\r\n      hasValues && isNightlyMode\r\n        ? endRaw\r\n        : hasValues\r\n        ? getExclusiveEndDate(endRaw, searchTZ)\r\n        : null;\r\n\r\n    const today = getStartOf(new Date(), 'day', searchTZ);\r\n    const possibleStartDate = subtractTime(today, 14, 'hours', searchTZ);\r\n    const hasValidDates =\r\n      hasValues &&\r\n      startDate.getTime() >= possibleStartDate.getTime() &&\r\n      startDate.getTime() <= endDate.getTime();\r\n\r\n    const dayCount = isEntireRangeAvailable ? daysBetween(startDate, endDate) : 1;\r\n    const day = 1440;\r\n    const hour = 60;\r\n    // When entire range is required to be available, we count minutes of included date range,\r\n    // but there's a need to subtract one hour due to possibility of daylight saving time.\r\n    // If partial range is needed, then we just make sure that the shortest time unit supported\r\n    // is available within the range.\r\n    // You might want to customize this to match with your time units (e.g. day: 1440 - 60)\r\n    const minDuration = isEntireRangeAvailable ? dayCount * day - hour : hour;\r\n    return hasValidDates\r\n      ? {\r\n          start: getProlongedStart(startDate),\r\n          end: getProlongedEnd(endDate),\r\n          // Availability can be time-full or time-partial.\r\n          // However, due to prolonged time window, we need to use time-partial.\r\n          availability: 'time-partial',\r\n          // minDuration uses minutes\r\n          minDuration,\r\n        }\r\n      : {};\r\n  };\r\n\r\n  const stockFilters = datesMaybe => {\r\n    const hasDatesFilterInUse = Object.keys(datesMaybe).length > 0;\r\n\r\n    // If dates filter is not in use,\r\n    //   1) Add minStock filter with default value (1)\r\n    //   2) Add relaxed stockMode: \"match-undefined\"\r\n    // The latter is used to filter out all the listings that explicitly are out of stock,\r\n    // but keeps bookable and inquiry listings.\r\n    return hasDatesFilterInUse ? {} : { minStock: 1, stockMode: 'match-undefined' };\r\n  };\r\n\r\n  const { perPage, price, dates, sort, ...rest } = searchParams;\r\n  const priceMaybe = priceSearchParams(price);\r\n  const datesMaybe = datesSearchParams(dates);\r\n  const stockMaybe = stockFilters(datesMaybe);\r\n  const sortMaybe = sort === config.search.sortConfig.relevanceKey ? {} : { sort };\r\n\r\n  const params = {\r\n    ...rest,\r\n    ...priceMaybe,\r\n    ...datesMaybe,\r\n    ...stockMaybe,\r\n    ...sortMaybe,\r\n    ...searchValidListingTypes(config.listing.listingTypes),\r\n    perPage,\r\n  };\r\n\r\n  return sdk.listings\r\n    .query(params)\r\n    .then(response => {\r\n      const listingFields = config?.listing?.listingFields;\r\n      const sanitizeConfig = { listingFields };\r\n\r\n      dispatch(addMarketplaceEntities(response, sanitizeConfig));\r\n      dispatch(searchListingsSuccess(response));\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      dispatch(searchListingsError(storableError(e)));\r\n      throw e;\r\n    });\r\n};\r\n\r\nexport const setActiveListing = listingId => ({\r\n  type: SEARCH_MAP_SET_ACTIVE_LISTING,\r\n  payload: listingId,\r\n});\r\n\r\nexport const loadData = (params, search, config) => {\r\n  const queryParams = parse(search, {\r\n    latlng: ['origin'],\r\n    latlngBounds: ['bounds'],\r\n  });\r\n\r\n  const { page = 1, address, origin, ...rest } = queryParams;\r\n  const originMaybe = isOriginInUse(config) && origin ? { origin } : {};\r\n\r\n  const {\r\n    aspectWidth = 1,\r\n    aspectHeight = 1,\r\n    variantPrefix = 'listing-card',\r\n  } = config.layout.listingImage;\r\n  const aspectRatio = aspectHeight / aspectWidth;\r\n\r\n  return searchListings(\r\n    {\r\n      ...rest,\r\n      ...originMaybe,\r\n      page,\r\n      perPage: RESULT_PAGE_SIZE,\r\n      include: ['author', 'images'],\r\n      'fields.listing': [\r\n        'title',\r\n        'geolocation',\r\n        'price',\r\n        'publicData.listingType',\r\n        'publicData.transactionProcessAlias',\r\n        'publicData.unitType',\r\n        // These help rendering of 'purchase' listings,\r\n        // when transitioning from search page to listing page\r\n        'publicData.pickupEnabled',\r\n        'publicData.shippingEnabled',\r\n      ],\r\n      'fields.user': ['profile.displayName', 'profile.abbreviatedName'],\r\n      'fields.image': [\r\n        'variants.scaled-small',\r\n        'variants.scaled-medium',\r\n        `variants.${variantPrefix}`,\r\n        `variants.${variantPrefix}-2x`,\r\n      ],\r\n      ...createImageVariantConfig(`${variantPrefix}`, 400, aspectRatio),\r\n      ...createImageVariantConfig(`${variantPrefix}-2x`, 800, aspectRatio),\r\n      'limit.images': 1,\r\n    },\r\n    config\r\n  );\r\n};\r\n","import pick from 'lodash/pick';\r\nimport {\r\n  createStripeAccount,\r\n  updateStripeAccount,\r\n  fetchStripeAccount,\r\n} from '../../ducks/stripeConnectAccount.duck';\r\nimport { fetchCurrentUser } from '../../ducks/user.duck';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const SET_INITIAL_VALUES = 'app/StripePayoutPage/SET_INITIAL_VALUES';\r\nexport const SAVE_PAYOUT_DETAILS_REQUEST = 'app/StripePayoutPage/SAVE_PAYOUT_DETAILS_REQUEST';\r\nexport const SAVE_PAYOUT_DETAILS_SUCCESS = 'app/StripePayoutPage/SAVE_PAYOUT_DETAILS_SUCCESS';\r\nexport const SAVE_PAYOUT_DETAILS_ERROR = 'app/StripePayoutPage/SAVE_PAYOUT_DETAILS_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  payoutDetailsSaveInProgress: false,\r\n  payoutDetailsSaved: false,\r\n  fromReturnURL: false,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SET_INITIAL_VALUES:\r\n      return { ...initialState, ...payload };\r\n\r\n    case SAVE_PAYOUT_DETAILS_REQUEST:\r\n      return { ...state, payoutDetailsSaveInProgress: true };\r\n    case SAVE_PAYOUT_DETAILS_ERROR:\r\n      return { ...state, payoutDetailsSaveInProgress: false };\r\n    case SAVE_PAYOUT_DETAILS_SUCCESS:\r\n      return { ...state, payoutDetailsSaveInProgress: false, payoutDetailsSaved: true };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const setInitialValues = initialValues => ({\r\n  type: SET_INITIAL_VALUES,\r\n  payload: pick(initialValues, Object.keys(initialState)),\r\n});\r\n\r\nexport const savePayoutDetailsRequest = () => ({\r\n  type: SAVE_PAYOUT_DETAILS_REQUEST,\r\n});\r\nexport const savePayoutDetailsError = () => ({\r\n  type: SAVE_PAYOUT_DETAILS_ERROR,\r\n});\r\nexport const savePayoutDetailsSuccess = () => ({\r\n  type: SAVE_PAYOUT_DETAILS_SUCCESS,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const savePayoutDetails = (values, isUpdateCall) => (dispatch, getState, sdk) => {\r\n  const upsertThunk = isUpdateCall ? updateStripeAccount : createStripeAccount;\r\n  dispatch(savePayoutDetailsRequest());\r\n\r\n  return dispatch(upsertThunk(values, { expand: true }))\r\n    .then(response => {\r\n      dispatch(savePayoutDetailsSuccess());\r\n      return response;\r\n    })\r\n    .catch(() => dispatch(savePayoutDetailsError()));\r\n};\r\n\r\nexport const loadData = () => (dispatch, getState, sdk) => {\r\n  // Clear state so that previously loaded data is not visible\r\n  // in case this page load fails.\r\n  dispatch(setInitialValues());\r\n\r\n  return dispatch(fetchCurrentUser()).then(response => {\r\n    const currentUser = getState().user.currentUser;\r\n    if (currentUser && currentUser.stripeAccount) {\r\n      dispatch(fetchStripeAccount());\r\n    }\r\n    return response;\r\n  });\r\n};\r\n","import { fetchPageAssets } from '../../ducks/hostedAssets.duck';\r\nexport const ASSET_NAME = 'terms-of-service';\r\n\r\nexport const loadData = (params, search) => dispatch => {\r\n  const pageAsset = { termsOfService: `content/pages/${ASSET_NAME}.json` };\r\n  return dispatch(fetchPageAssets(pageAsset, true));\r\n};\r\n","import React from 'react';\r\nimport { array, bool, func, number, object, shape, string } from 'prop-types';\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport loadable from '@loadable/component';\r\n\r\nimport { propTypes } from '../../util/types';\r\n\r\nimport { sendVerificationEmail, hasCurrentUserErrors } from '../../ducks/user.duck';\r\nimport { logout, authenticationInProgress } from '../../ducks/auth.duck';\r\nimport { manageDisableScrolling } from '../../ducks/ui.duck';\r\n\r\nconst Topbar = loadable(() => import(/* webpackChunkName: \"Topbar\" */ './Topbar/Topbar'));\r\n\r\nexport const TopbarContainerComponent = props => {\r\n  const {\r\n    authInProgress,\r\n    currentPage,\r\n    currentSearchParams,\r\n    currentUser,\r\n    currentUserHasListings,\r\n    currentUserHasOrders,\r\n    history,\r\n    isAuthenticated,\r\n    authScopes,\r\n    hasGenericError,\r\n    location,\r\n    notificationCount,\r\n    onLogout,\r\n    onManageDisableScrolling,\r\n    sendVerificationEmailInProgress,\r\n    sendVerificationEmailError,\r\n    onResendVerificationEmail,\r\n    ...rest\r\n  } = props;\r\n\r\n  return (\r\n    <Topbar\r\n      authInProgress={authInProgress}\r\n      currentPage={currentPage}\r\n      currentSearchParams={currentSearchParams}\r\n      currentUser={currentUser}\r\n      currentUserHasListings={currentUserHasListings}\r\n      currentUserHasOrders={currentUserHasOrders}\r\n      history={history}\r\n      isAuthenticated={isAuthenticated}\r\n      authScopes={authScopes}\r\n      location={location}\r\n      notificationCount={notificationCount}\r\n      onLogout={onLogout}\r\n      onManageDisableScrolling={onManageDisableScrolling}\r\n      onResendVerificationEmail={onResendVerificationEmail}\r\n      sendVerificationEmailInProgress={sendVerificationEmailInProgress}\r\n      sendVerificationEmailError={sendVerificationEmailError}\r\n      showGenericError={hasGenericError}\r\n      {...rest}\r\n    />\r\n  );\r\n};\r\n\r\nTopbarContainerComponent.defaultProps = {\r\n  currentPage: null,\r\n  currentSearchParams: null,\r\n  currentUser: null,\r\n  currentUserHasOrders: null,\r\n  notificationCount: 0,\r\n  sendVerificationEmailError: null,\r\n  authScopes: null,\r\n};\r\n\r\nTopbarContainerComponent.propTypes = {\r\n  authInProgress: bool.isRequired,\r\n  currentPage: string,\r\n  currentSearchParams: object,\r\n  currentUser: propTypes.currentUser,\r\n  currentUserHasListings: bool.isRequired,\r\n  currentUserHasOrders: bool,\r\n  isAuthenticated: bool.isRequired,\r\n  authScopes: array,\r\n  notificationCount: number,\r\n  onLogout: func.isRequired,\r\n  onManageDisableScrolling: func.isRequired,\r\n  sendVerificationEmailInProgress: bool.isRequired,\r\n  sendVerificationEmailError: propTypes.error,\r\n  onResendVerificationEmail: func.isRequired,\r\n  hasGenericError: bool.isRequired,\r\n\r\n  // from withRouter\r\n  history: shape({\r\n    push: func.isRequired,\r\n  }).isRequired,\r\n  location: shape({ state: object }).isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  // Topbar needs isAuthenticated\r\n  const { isAuthenticated, logoutError, authScopes } = state.auth;\r\n  // Topbar needs user info.\r\n  const {\r\n    currentUser,\r\n    currentUserHasListings,\r\n    currentUserHasOrders,\r\n    currentUserNotificationCount: notificationCount,\r\n    sendVerificationEmailInProgress,\r\n    sendVerificationEmailError,\r\n  } = state.user;\r\n  const hasGenericError = !!(logoutError || hasCurrentUserErrors(state));\r\n  return {\r\n    authInProgress: authenticationInProgress(state),\r\n    currentUser,\r\n    currentUserHasListings,\r\n    currentUserHasOrders,\r\n    notificationCount,\r\n    isAuthenticated,\r\n    authScopes,\r\n    sendVerificationEmailInProgress,\r\n    sendVerificationEmailError,\r\n    hasGenericError,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  onLogout: historyPush => dispatch(logout(historyPush)),\r\n  onManageDisableScrolling: (componentId, disableScrolling) =>\r\n    dispatch(manageDisableScrolling(componentId, disableScrolling)),\r\n  onResendVerificationEmail: () => dispatch(sendVerificationEmail()),\r\n});\r\n\r\n// Note: it is important that the withRouter HOC is **outside** the\r\n// connect HOC, otherwise React Router won't rerender any Route\r\n// components since connect implements a shouldComponentUpdate\r\n// lifecycle hook.\r\n//\r\n// See: https://github.com/ReactTraining/react-router/issues/4671\r\nconst TopbarContainer = compose(\r\n  withRouter,\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n  )\r\n)(TopbarContainerComponent);\r\n\r\nexport default TopbarContainer;\r\n","import pick from 'lodash/pick';\r\nimport pickBy from 'lodash/pickBy';\r\nimport isEmpty from 'lodash/isEmpty';\r\n\r\nimport { types as sdkTypes, createImageVariantConfig } from '../../util/sdkLoader';\r\nimport { findNextBoundary, getStartOf, monthIdString } from '../../util/dates';\r\nimport { isTransactionsTransitionInvalidTransition, storableError } from '../../util/errors';\r\nimport { transactionLineItems } from '../../util/api';\r\nimport * as log from '../../util/log';\r\nimport {\r\n  updatedEntities,\r\n  denormalisedEntities,\r\n  denormalisedResponseEntities,\r\n} from '../../util/data';\r\nimport {\r\n  resolveLatestProcessName,\r\n  getProcess,\r\n  isBookingProcess,\r\n} from '../../transactions/transaction';\r\n\r\nimport { addMarketplaceEntities } from '../../ducks/marketplaceData.duck';\r\nimport { fetchCurrentUserNotifications } from '../../ducks/user.duck';\r\n\r\nconst { UUID } = sdkTypes;\r\n\r\nconst MESSAGES_PAGE_SIZE = 100;\r\nconst REVIEW_TX_INCLUDES = ['reviews', 'reviews.author', 'reviews.subject'];\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const SET_INITIAL_VALUES = 'app/TransactionPage/SET_INITIAL_VALUES';\r\n\r\nexport const FETCH_TRANSACTION_REQUEST = 'app/TransactionPage/FETCH_TRANSACTION_REQUEST';\r\nexport const FETCH_TRANSACTION_SUCCESS = 'app/TransactionPage/FETCH_TRANSACTION_SUCCESS';\r\nexport const FETCH_TRANSACTION_ERROR = 'app/TransactionPage/FETCH_TRANSACTION_ERROR';\r\n\r\nexport const FETCH_TRANSITIONS_REQUEST = 'app/TransactionPage/FETCH_TRANSITIONS_REQUEST';\r\nexport const FETCH_TRANSITIONS_SUCCESS = 'app/TransactionPage/FETCH_TRANSITIONS_SUCCESS';\r\nexport const FETCH_TRANSITIONS_ERROR = 'app/TransactionPage/FETCH_TRANSITIONS_ERROR';\r\n\r\nexport const TRANSITION_REQUEST = 'app/TransactionPage/MARK_RECEIVED_REQUEST';\r\nexport const TRANSITION_SUCCESS = 'app/TransactionPage/TRANSITION_SUCCESS';\r\nexport const TRANSITION_ERROR = 'app/TransactionPage/TRANSITION_ERROR';\r\n\r\nexport const FETCH_MESSAGES_REQUEST = 'app/TransactionPage/FETCH_MESSAGES_REQUEST';\r\nexport const FETCH_MESSAGES_SUCCESS = 'app/TransactionPage/FETCH_MESSAGES_SUCCESS';\r\nexport const FETCH_MESSAGES_ERROR = 'app/TransactionPage/FETCH_MESSAGES_ERROR';\r\n\r\nexport const SEND_MESSAGE_REQUEST = 'app/TransactionPage/SEND_MESSAGE_REQUEST';\r\nexport const SEND_MESSAGE_SUCCESS = 'app/TransactionPage/SEND_MESSAGE_SUCCESS';\r\nexport const SEND_MESSAGE_ERROR = 'app/TransactionPage/SEND_MESSAGE_ERROR';\r\n\r\nexport const SEND_REVIEW_REQUEST = 'app/TransactionPage/SEND_REVIEW_REQUEST';\r\nexport const SEND_REVIEW_SUCCESS = 'app/TransactionPage/SEND_REVIEW_SUCCESS';\r\nexport const SEND_REVIEW_ERROR = 'app/TransactionPage/SEND_REVIEW_ERROR';\r\n\r\nexport const FETCH_TIME_SLOTS_REQUEST = 'app/TransactionPage/FETCH_TIME_SLOTS_REQUEST';\r\nexport const FETCH_TIME_SLOTS_SUCCESS = 'app/TransactionPage/FETCH_TIME_SLOTS_SUCCESS';\r\nexport const FETCH_TIME_SLOTS_ERROR = 'app/TransactionPage/FETCH_TIME_SLOTS_ERROR';\r\n\r\nexport const FETCH_LINE_ITEMS_REQUEST = 'app/TransactionPage/FETCH_LINE_ITEMS_REQUEST';\r\nexport const FETCH_LINE_ITEMS_SUCCESS = 'app/TransactionPage/FETCH_LINE_ITEMS_SUCCESS';\r\nexport const FETCH_LINE_ITEMS_ERROR = 'app/TransactionPage/FETCH_LINE_ITEMS_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  fetchTransactionInProgress: false,\r\n  fetchTransactionError: null,\r\n  transactionRef: null,\r\n  transitionInProgress: null,\r\n  transitionError: null,\r\n  fetchMessagesInProgress: false,\r\n  fetchMessagesError: null,\r\n  totalMessages: 0,\r\n  totalMessagePages: 0,\r\n  oldestMessagePageFetched: 0,\r\n  messages: [],\r\n  initialMessageFailedToTransaction: null,\r\n  savePaymentMethodFailed: false,\r\n  sendMessageInProgress: false,\r\n  sendMessageError: null,\r\n  sendReviewInProgress: false,\r\n  sendReviewError: null,\r\n  monthlyTimeSlots: {\r\n    // '2022-03': {\r\n    //   timeSlots: [],\r\n    //   fetchTimeSlotsError: null,\r\n    //   fetchTimeSlotsInProgress: null,\r\n    // },\r\n  },\r\n  fetchTransitionsInProgress: false,\r\n  fetchTransitionsError: null,\r\n  processTransitions: null,\r\n  lineItems: null,\r\n  fetchLineItemsInProgress: false,\r\n  fetchLineItemsError: null,\r\n};\r\n\r\n// Merge entity arrays using ids, so that conflicting items in newer array (b) overwrite old values (a).\r\n// const a = [{ id: { uuid: 1 } }, { id: { uuid: 3 } }];\r\n// const b = [{ id: : { uuid: 2 } }, { id: : { uuid: 1 } }];\r\n// mergeEntityArrays(a, b)\r\n// => [{ id: { uuid: 3 } }, { id: : { uuid: 2 } }, { id: : { uuid: 1 } }]\r\nconst mergeEntityArrays = (a, b) => {\r\n  return a.filter(aEntity => !b.find(bEntity => aEntity.id.uuid === bEntity.id.uuid)).concat(b);\r\n};\r\n\r\nexport default function transactionPageReducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SET_INITIAL_VALUES:\r\n      return { ...initialState, ...payload };\r\n\r\n    case FETCH_TRANSACTION_REQUEST:\r\n      return { ...state, fetchTransactionInProgress: true, fetchTransactionError: null };\r\n    case FETCH_TRANSACTION_SUCCESS: {\r\n      const transactionRef = { id: payload.data.data.id, type: 'transaction' };\r\n      return { ...state, fetchTransactionInProgress: false, transactionRef };\r\n    }\r\n    case FETCH_TRANSACTION_ERROR:\r\n      console.error(payload); // eslint-disable-line\r\n      return { ...state, fetchTransactionInProgress: false, fetchTransactionError: payload };\r\n\r\n    case FETCH_TRANSITIONS_REQUEST:\r\n      return { ...state, fetchTransitionsInProgress: true, fetchTransitionsError: null };\r\n    case FETCH_TRANSITIONS_SUCCESS:\r\n      return { ...state, fetchTransitionsInProgress: false, processTransitions: payload };\r\n    case FETCH_TRANSITIONS_ERROR:\r\n      console.error(payload); // eslint-disable-line\r\n      return { ...state, fetchTransitionsInProgress: false, fetchTransitionsError: payload };\r\n\r\n    case TRANSITION_REQUEST:\r\n      return {\r\n        ...state,\r\n        transitionInProgress: payload,\r\n        transitionError: null,\r\n      };\r\n    case TRANSITION_SUCCESS:\r\n      return { ...state, transitionInProgress: null };\r\n    case TRANSITION_ERROR:\r\n      return {\r\n        ...state,\r\n        transitionInProgress: null,\r\n        transitionError: payload,\r\n      };\r\n\r\n    case FETCH_MESSAGES_REQUEST:\r\n      return { ...state, fetchMessagesInProgress: true, fetchMessagesError: null };\r\n    case FETCH_MESSAGES_SUCCESS: {\r\n      const oldestMessagePageFetched =\r\n        state.oldestMessagePageFetched > payload.page\r\n          ? state.oldestMessagePageFetched\r\n          : payload.page;\r\n      return {\r\n        ...state,\r\n        fetchMessagesInProgress: false,\r\n        messages: mergeEntityArrays(state.messages, payload.messages),\r\n        totalMessages: payload.totalItems,\r\n        totalMessagePages: payload.totalPages,\r\n        oldestMessagePageFetched,\r\n      };\r\n    }\r\n    case FETCH_MESSAGES_ERROR:\r\n      return { ...state, fetchMessagesInProgress: false, fetchMessagesError: payload };\r\n\r\n    case SEND_MESSAGE_REQUEST:\r\n      return {\r\n        ...state,\r\n        sendMessageInProgress: true,\r\n        sendMessageError: null,\r\n        initialMessageFailedToTransaction: null,\r\n      };\r\n    case SEND_MESSAGE_SUCCESS:\r\n      return { ...state, sendMessageInProgress: false };\r\n    case SEND_MESSAGE_ERROR:\r\n      return { ...state, sendMessageInProgress: false, sendMessageError: payload };\r\n\r\n    case SEND_REVIEW_REQUEST:\r\n      return { ...state, sendReviewInProgress: true, sendReviewError: null };\r\n    case SEND_REVIEW_SUCCESS:\r\n      return { ...state, sendReviewInProgress: false };\r\n    case SEND_REVIEW_ERROR:\r\n      return { ...state, sendReviewInProgress: false, sendReviewError: payload };\r\n\r\n    case FETCH_TIME_SLOTS_REQUEST: {\r\n      const monthlyTimeSlots = {\r\n        ...state.monthlyTimeSlots,\r\n        [payload]: {\r\n          ...state.monthlyTimeSlots[payload],\r\n          fetchTimeSlotsError: null,\r\n          fetchTimeSlotsInProgress: true,\r\n        },\r\n      };\r\n      return { ...state, monthlyTimeSlots };\r\n    }\r\n    case FETCH_TIME_SLOTS_SUCCESS: {\r\n      const monthId = payload.monthId;\r\n      const monthlyTimeSlots = {\r\n        ...state.monthlyTimeSlots,\r\n        [monthId]: {\r\n          ...state.monthlyTimeSlots[monthId],\r\n          fetchTimeSlotsInProgress: false,\r\n          timeSlots: payload.timeSlots,\r\n        },\r\n      };\r\n      return { ...state, monthlyTimeSlots };\r\n    }\r\n    case FETCH_TIME_SLOTS_ERROR: {\r\n      const monthId = payload.monthId;\r\n      const monthlyTimeSlots = {\r\n        ...state.monthlyTimeSlots,\r\n        [monthId]: {\r\n          ...state.monthlyTimeSlots[monthId],\r\n          fetchTimeSlotsInProgress: false,\r\n          fetchTimeSlotsError: payload.error,\r\n        },\r\n      };\r\n      return { ...state, monthlyTimeSlots };\r\n    }\r\n\r\n    case FETCH_LINE_ITEMS_REQUEST:\r\n      return { ...state, fetchLineItemsInProgress: true, fetchLineItemsError: null };\r\n    case FETCH_LINE_ITEMS_SUCCESS:\r\n      return { ...state, fetchLineItemsInProgress: false, lineItems: payload };\r\n    case FETCH_LINE_ITEMS_ERROR:\r\n      return { ...state, fetchLineItemsInProgress: false, fetchLineItemsError: payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Selectors ================ //\r\n\r\nexport const transitionInProgress = state => {\r\n  return state.TransactionPage.transitionInProgress;\r\n};\r\n\r\n// ================ Action creators ================ //\r\nexport const setInitialValues = initialValues => ({\r\n  type: SET_INITIAL_VALUES,\r\n  payload: pick(initialValues, Object.keys(initialState)),\r\n});\r\n\r\nconst fetchTransactionRequest = () => ({ type: FETCH_TRANSACTION_REQUEST });\r\nconst fetchTransactionSuccess = response => ({\r\n  type: FETCH_TRANSACTION_SUCCESS,\r\n  payload: response,\r\n});\r\nconst fetchTransactionError = e => ({ type: FETCH_TRANSACTION_ERROR, error: true, payload: e });\r\n\r\nconst fetchTransitionsRequest = () => ({ type: FETCH_TRANSITIONS_REQUEST });\r\nconst fetchTransitionsSuccess = response => ({\r\n  type: FETCH_TRANSITIONS_SUCCESS,\r\n  payload: response,\r\n});\r\nconst fetchTransitionsError = e => ({ type: FETCH_TRANSITIONS_ERROR, error: true, payload: e });\r\n\r\nconst transitionRequest = transitionName => ({ type: TRANSITION_REQUEST, payload: transitionName });\r\nconst transitionSuccess = () => ({ type: TRANSITION_SUCCESS });\r\nconst transitionError = e => ({ type: TRANSITION_ERROR, error: true, payload: e });\r\n\r\nconst fetchMessagesRequest = () => ({ type: FETCH_MESSAGES_REQUEST });\r\nconst fetchMessagesSuccess = (messages, pagination) => ({\r\n  type: FETCH_MESSAGES_SUCCESS,\r\n  payload: { messages, ...pagination },\r\n});\r\nconst fetchMessagesError = e => ({ type: FETCH_MESSAGES_ERROR, error: true, payload: e });\r\n\r\nconst sendMessageRequest = () => ({ type: SEND_MESSAGE_REQUEST });\r\nconst sendMessageSuccess = () => ({ type: SEND_MESSAGE_SUCCESS });\r\nconst sendMessageError = e => ({ type: SEND_MESSAGE_ERROR, error: true, payload: e });\r\n\r\nconst sendReviewRequest = () => ({ type: SEND_REVIEW_REQUEST });\r\nconst sendReviewSuccess = () => ({ type: SEND_REVIEW_SUCCESS });\r\nconst sendReviewError = e => ({ type: SEND_REVIEW_ERROR, error: true, payload: e });\r\n\r\nexport const fetchTimeSlotsRequest = monthId => ({\r\n  type: FETCH_TIME_SLOTS_REQUEST,\r\n  payload: monthId,\r\n});\r\nexport const fetchTimeSlotsSuccess = (monthId, timeSlots) => ({\r\n  type: FETCH_TIME_SLOTS_SUCCESS,\r\n  payload: { timeSlots, monthId },\r\n});\r\nexport const fetchTimeSlotsError = (monthId, error) => ({\r\n  type: FETCH_TIME_SLOTS_ERROR,\r\n  error: true,\r\n  payload: { monthId, error },\r\n});\r\n\r\nexport const fetchLineItemsRequest = () => ({ type: FETCH_LINE_ITEMS_REQUEST });\r\nexport const fetchLineItemsSuccess = lineItems => ({\r\n  type: FETCH_LINE_ITEMS_SUCCESS,\r\n  payload: lineItems,\r\n});\r\nexport const fetchLineItemsError = error => ({\r\n  type: FETCH_LINE_ITEMS_ERROR,\r\n  error: true,\r\n  payload: error,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nconst timeSlotsRequest = params => (dispatch, getState, sdk) => {\r\n  return sdk.timeslots.query(params).then(response => {\r\n    return denormalisedResponseEntities(response);\r\n  });\r\n};\r\n\r\nexport const fetchTimeSlots = (listingId, start, end, timeZone) => (dispatch, getState, sdk) => {\r\n  const monthId = monthIdString(start, timeZone);\r\n\r\n  dispatch(fetchTimeSlotsRequest(monthId));\r\n\r\n  // The maximum pagination page size for timeSlots is 500\r\n  const extraParams = {\r\n    perPage: 500,\r\n    page: 1,\r\n  };\r\n\r\n  return dispatch(timeSlotsRequest({ listingId, start, end, ...extraParams }))\r\n    .then(timeSlots => {\r\n      dispatch(fetchTimeSlotsSuccess(monthId, timeSlots));\r\n    })\r\n    .catch(e => {\r\n      dispatch(fetchTimeSlotsError(monthId, storableError(e)));\r\n    });\r\n};\r\n\r\n// Helper function for loadData call.\r\nconst fetchMonthlyTimeSlots = (dispatch, listing) => {\r\n  const hasWindow = typeof window !== 'undefined';\r\n  const attributes = listing.attributes;\r\n  // Listing could be ownListing entity too, so we just check if attributes key exists\r\n  const hasTimeZone =\r\n    attributes && attributes.availabilityPlan && attributes.availabilityPlan.timezone;\r\n\r\n  // Fetch time-zones on client side only.\r\n  if (hasWindow && listing.id && hasTimeZone) {\r\n    const tz = listing.attributes.availabilityPlan.timezone;\r\n    const nextBoundary = findNextBoundary(new Date(), 'hour', tz);\r\n\r\n    const nextMonth = getStartOf(nextBoundary, 'month', tz, 1, 'months');\r\n    const nextAfterNextMonth = getStartOf(nextMonth, 'month', tz, 1, 'months');\r\n\r\n    return Promise.all([\r\n      dispatch(fetchTimeSlots(listing.id, nextBoundary, nextMonth, tz)),\r\n      dispatch(fetchTimeSlots(listing.id, nextMonth, nextAfterNextMonth, tz)),\r\n    ]);\r\n  }\r\n\r\n  // By default return an empty array\r\n  return Promise.all([]);\r\n};\r\n\r\n// Helper to fetch correct image variants for different thunk calls\r\nconst getImageVariants = listingImageConfig => {\r\n  const { aspectWidth = 1, aspectHeight = 1, variantPrefix = 'listing-card' } = listingImageConfig;\r\n  const aspectRatio = aspectHeight / aspectWidth;\r\n  return {\r\n    'fields.image': [\r\n      // Profile images\r\n      'variants.square-small',\r\n      'variants.square-small2x',\r\n\r\n      // Listing images:\r\n      `variants.${variantPrefix}`,\r\n      `variants.${variantPrefix}-2x`,\r\n    ],\r\n    ...createImageVariantConfig(`${variantPrefix}`, 400, aspectRatio),\r\n    ...createImageVariantConfig(`${variantPrefix}-2x`, 800, aspectRatio),\r\n  };\r\n};\r\n\r\nconst listingRelationship = txResponse => {\r\n  return txResponse.data.data.relationships.listing.data;\r\n};\r\n\r\nexport const fetchTransaction = (id, txRole, config) => (dispatch, getState, sdk) => {\r\n  dispatch(fetchTransactionRequest());\r\n  let txResponse = null;\r\n\r\n  return sdk.transactions\r\n    .show(\r\n      {\r\n        id,\r\n        include: [\r\n          'customer',\r\n          'customer.profileImage',\r\n          'provider',\r\n          'provider.profileImage',\r\n          'listing',\r\n          'listing.currentStock',\r\n          'booking',\r\n          'reviews',\r\n          'reviews.author',\r\n          'reviews.subject',\r\n        ],\r\n        ...getImageVariants(config.layout.listingImage),\r\n      },\r\n      { expand: true }\r\n    )\r\n    .then(response => {\r\n      txResponse = response;\r\n      const listingId = listingRelationship(response).id;\r\n      const entities = updatedEntities({}, response.data);\r\n      const listingRef = { id: listingId, type: 'listing' };\r\n      const transactionRef = { id, type: 'transaction' };\r\n      const denormalised = denormalisedEntities(entities, [listingRef, transactionRef]);\r\n      const listing = denormalised[0];\r\n      const transaction = denormalised[1];\r\n      const processName = resolveLatestProcessName(transaction.attributes.processName);\r\n      try {\r\n        const process = getProcess(processName);\r\n        const isInquiry = process.getState(transaction) === process.states.INQUIRY;\r\n\r\n        // Fetch time slots for transactions that are in inquired state\r\n        const canFetchTimeslots =\r\n          txRole === 'customer' && isBookingProcess(processName) && isInquiry;\r\n\r\n        if (canFetchTimeslots) {\r\n          fetchMonthlyTimeSlots(dispatch, listing);\r\n        }\r\n      } catch (error) {\r\n        console.log(`transaction process (${processName}) was not recognized`);\r\n      }\r\n\r\n      const canFetchListing = listing && listing.attributes && !listing.attributes.deleted;\r\n      if (canFetchListing) {\r\n        return sdk.listings.show({\r\n          id: listingId,\r\n          include: ['author', 'author.profileImage', 'images'],\r\n          ...getImageVariants(config.layout.listingImage),\r\n        });\r\n      } else {\r\n        return response;\r\n      }\r\n    })\r\n    .then(response => {\r\n      const listingFields = config?.listing?.listingFields;\r\n      const sanitizeConfig = { listingFields };\r\n\r\n      dispatch(addMarketplaceEntities(txResponse, sanitizeConfig));\r\n      dispatch(addMarketplaceEntities(response, sanitizeConfig));\r\n      dispatch(fetchTransactionSuccess(txResponse));\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      dispatch(fetchTransactionError(storableError(e)));\r\n      throw e;\r\n    });\r\n};\r\n\r\nconst delay = ms => new Promise(resolve => window.setTimeout(resolve, ms));\r\nconst refreshTx = (sdk, txId) => sdk.transactions.show({ id: txId }, { expand: true });\r\nconst refreshTransactionEntity = (sdk, txId, dispatch) => {\r\n  delay(3000)\r\n    .then(() => refreshTx(sdk, txId))\r\n    .then(response => {\r\n      dispatch(addMarketplaceEntities(response));\r\n      const lastTransition = response?.data?.data?.attributes?.lastTransition;\r\n      // We'll make another attempt if mark-received-from-purchased from default-purchase process is still the latest.\r\n      if (lastTransition === 'transition/mark-received-from-purchased') {\r\n        return delay(8000)\r\n          .then(() => refreshTx(sdk, txId))\r\n          .then(response => {\r\n            dispatch(addMarketplaceEntities(response));\r\n          });\r\n      }\r\n    })\r\n    .catch(e => {\r\n      // refresh failed, but we don't act upon it.\r\n      console.log('error', e);\r\n    });\r\n};\r\n\r\nexport const makeTransition = (txId, transitionName, params) => (dispatch, getState, sdk) => {\r\n  if (transitionInProgress(getState())) {\r\n    return Promise.reject(new Error('Transition already in progress'));\r\n  }\r\n  dispatch(transitionRequest(transitionName));\r\n\r\n  return sdk.transactions\r\n    .transition({ id: txId, transition: transitionName, params }, { expand: true })\r\n    .then(response => {\r\n      dispatch(addMarketplaceEntities(response));\r\n      dispatch(transitionSuccess());\r\n      dispatch(fetchCurrentUserNotifications());\r\n\r\n      // There could be automatic transitions after this transition\r\n      // For example mark-received-from-purchased > auto-complete.\r\n      // Here, we make 1-2 delayed updates for the tx entity.\r\n      // This way \"leave a review\" link should show up for the customer.\r\n      refreshTransactionEntity(sdk, txId, dispatch);\r\n\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      dispatch(transitionError(storableError(e)));\r\n      log.error(e, `${transitionName}-failed`, {\r\n        txId,\r\n        transition: transitionName,\r\n      });\r\n      throw e;\r\n    });\r\n};\r\n\r\nconst fetchMessages = (txId, page, config) => (dispatch, getState, sdk) => {\r\n  const paging = { page, perPage: MESSAGES_PAGE_SIZE };\r\n  dispatch(fetchMessagesRequest());\r\n\r\n  return sdk.messages\r\n    .query({\r\n      transaction_id: txId,\r\n      include: ['sender', 'sender.profileImage'],\r\n      ...getImageVariants(config.layout.listingImage),\r\n      ...paging,\r\n    })\r\n    .then(response => {\r\n      const messages = denormalisedResponseEntities(response);\r\n      const { totalItems, totalPages, page: fetchedPage } = response.data.meta;\r\n      const pagination = { totalItems, totalPages, page: fetchedPage };\r\n      const totalMessages = getState().TransactionPage.totalMessages;\r\n\r\n      // Original fetchMessages call succeeded\r\n      dispatch(fetchMessagesSuccess(messages, pagination));\r\n\r\n      // Check if totalItems has changed between fetched pagination pages\r\n      // if totalItems has changed, fetch first page again to include new incoming messages.\r\n      // TODO if there're more than 100 incoming messages,\r\n      // this should loop through most recent pages instead of fetching just the first one.\r\n      if (totalItems > totalMessages && page > 1) {\r\n        dispatch(fetchMessages(txId, 1, config))\r\n          .then(() => {\r\n            // Original fetch was enough as a response for user action,\r\n            // this just includes new incoming messages\r\n          })\r\n          .catch(() => {\r\n            // Background update, no need to to do anything atm.\r\n          });\r\n      }\r\n    })\r\n    .catch(e => {\r\n      dispatch(fetchMessagesError(storableError(e)));\r\n      throw e;\r\n    });\r\n};\r\n\r\nexport const fetchMoreMessages = (txId, config) => (dispatch, getState, sdk) => {\r\n  const state = getState();\r\n  const { oldestMessagePageFetched, totalMessagePages } = state.TransactionPage;\r\n  const hasMoreOldMessages = totalMessagePages > oldestMessagePageFetched;\r\n\r\n  // In case there're no more old pages left we default to fetching the current cursor position\r\n  const nextPage = hasMoreOldMessages ? oldestMessagePageFetched + 1 : oldestMessagePageFetched;\r\n\r\n  return dispatch(fetchMessages(txId, nextPage, config));\r\n};\r\n\r\nexport const sendMessage = (txId, message, config) => (dispatch, getState, sdk) => {\r\n  dispatch(sendMessageRequest());\r\n\r\n  return sdk.messages\r\n    .send({ transactionId: txId, content: message })\r\n    .then(response => {\r\n      const messageId = response.data.data.id;\r\n\r\n      // We fetch the first page again to add sent message to the page data\r\n      // and update possible incoming messages too.\r\n      // TODO if there're more than 100 incoming messages,\r\n      // this should loop through most recent pages instead of fetching just the first one.\r\n      return dispatch(fetchMessages(txId, 1, config))\r\n        .then(() => {\r\n          dispatch(sendMessageSuccess());\r\n          return messageId;\r\n        })\r\n        .catch(() => dispatch(sendMessageSuccess()));\r\n    })\r\n    .catch(e => {\r\n      dispatch(sendMessageError(storableError(e)));\r\n      // Rethrow so the page can track whether the sending failed, and\r\n      // keep the message in the form for a retry.\r\n      throw e;\r\n    });\r\n};\r\n\r\n// If other party has already sent a review, we need to make transition to\r\n// transitions.REVIEW_2_BY_<CUSTOMER/PROVIDER>\r\nconst sendReviewAsSecond = (txId, transition, params, dispatch, sdk, config) => {\r\n  const include = REVIEW_TX_INCLUDES;\r\n\r\n  return sdk.transactions\r\n    .transition(\r\n      { id: txId, transition, params },\r\n      { expand: true, include, ...getImageVariants(config.layout.listingImage) }\r\n    )\r\n    .then(response => {\r\n      dispatch(addMarketplaceEntities(response));\r\n      dispatch(sendReviewSuccess());\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      dispatch(sendReviewError(storableError(e)));\r\n\r\n      // Rethrow so the page can track whether the sending failed, and\r\n      // keep the message in the form for a retry.\r\n      throw e;\r\n    });\r\n};\r\n\r\n// If other party has not yet sent a review, we need to make transition to\r\n// transitions.REVIEW_1_BY_<CUSTOMER/PROVIDER>\r\n// However, the other party might have made the review after previous data synch point.\r\n// So, error is likely to happen and then we must try another state transition\r\n// by calling sendReviewAsSecond().\r\nconst sendReviewAsFirst = (txId, transition, params, dispatch, sdk, config) => {\r\n  const include = REVIEW_TX_INCLUDES;\r\n\r\n  return sdk.transactions\r\n    .transition(\r\n      { id: txId, transition, params },\r\n      { expand: true, include, ...getImageVariants(config.layout.listingImage) }\r\n    )\r\n    .then(response => {\r\n      dispatch(addMarketplaceEntities(response));\r\n      dispatch(sendReviewSuccess());\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      // If transaction transition is invalid, lets try another endpoint.\r\n      if (isTransactionsTransitionInvalidTransition(e)) {\r\n        return sendReviewAsSecond(id, params, role, dispatch, sdk);\r\n      } else {\r\n        dispatch(sendReviewError(storableError(e)));\r\n\r\n        // Rethrow so the page can track whether the sending failed, and\r\n        // keep the message in the form for a retry.\r\n        throw e;\r\n      }\r\n    });\r\n};\r\n\r\nexport const sendReview = (tx, transitionOptionsInfo, params, config) => (\r\n  dispatch,\r\n  getState,\r\n  sdk\r\n) => {\r\n  const { reviewAsFirst, reviewAsSecond, hasOtherPartyReviewedFirst } = transitionOptionsInfo;\r\n  dispatch(sendReviewRequest());\r\n\r\n  return hasOtherPartyReviewedFirst\r\n    ? sendReviewAsSecond(tx?.id, reviewAsSecond, params, dispatch, sdk, config)\r\n    : sendReviewAsFirst(tx?.id, reviewAsFirst, params, dispatch, sdk, config);\r\n};\r\n\r\nconst isNonEmpty = value => {\r\n  return typeof value === 'object' || Array.isArray(value) ? !isEmpty(value) : !!value;\r\n};\r\n\r\nexport const fetchNextTransitions = id => (dispatch, getState, sdk) => {\r\n  dispatch(fetchTransitionsRequest());\r\n\r\n  return sdk.processTransitions\r\n    .query({ transactionId: id })\r\n    .then(res => {\r\n      dispatch(fetchTransitionsSuccess(res.data.data));\r\n    })\r\n    .catch(e => {\r\n      dispatch(fetchTransitionsError(storableError(e)));\r\n    });\r\n};\r\n\r\nexport const fetchTransactionLineItems = ({ orderData, listingId, isOwnListing }) => dispatch => {\r\n  dispatch(fetchLineItemsRequest());\r\n  transactionLineItems({ orderData, listingId, isOwnListing })\r\n    .then(response => {\r\n      const lineItems = response.data;\r\n      dispatch(fetchLineItemsSuccess(lineItems));\r\n    })\r\n    .catch(e => {\r\n      dispatch(fetchLineItemsError(storableError(e)));\r\n      log.error(e, 'fetching-line-items-failed', {\r\n        listingId: listingId.uuid,\r\n        orderData,\r\n      });\r\n    });\r\n};\r\n\r\n// loadData is a collection of async calls that need to be made\r\n// before page has all the info it needs to render itself\r\nexport const loadData = (params, search, config) => (dispatch, getState) => {\r\n  const txId = new UUID(params.id);\r\n  const state = getState().TransactionPage;\r\n  const txRef = state.transactionRef;\r\n  const txRole = params.transactionRole;\r\n\r\n  // In case a transaction reference is found from a previous\r\n  // data load -> clear the state. Otherwise keep the non-null\r\n  // and non-empty values which may have been set from a previous page.\r\n  const initialValues = txRef ? {} : pickBy(state, isNonEmpty);\r\n  dispatch(setInitialValues(initialValues));\r\n\r\n  // Sale / order (i.e. transaction entity in API)\r\n  return Promise.all([\r\n    dispatch(fetchTransaction(txId, txRole, config)),\r\n    dispatch(fetchMessages(txId, 1, config)),\r\n    dispatch(fetchNextTransitions(txId)),\r\n  ]);\r\n};\r\n","import { fetchPageAssets } from '../../ducks/hostedAssets.duck';\r\n\r\nexport const loadData = (params, search) => dispatch => {\r\n  const pageId = params.pageId;\r\n  const pageAsset = { [pageId]: `content/pages/${pageId}.json` };\r\n  const hasFallbackContent = false;\r\n  return dispatch(fetchPageAssets(pageAsset, hasFallbackContent));\r\n};\r\n","import { parse } from '../../util/urlHelpers';\r\nimport { verify } from '../../ducks/emailVerification.duck';\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const loadData = (params, search) => {\r\n  const urlParams = parse(search);\r\n  const verificationToken = urlParams.t;\r\n  const token = verificationToken ? `${verificationToken}` : null;\r\n  return verify(token);\r\n};\r\n","/**\r\n * Export loadData calls from ducks modules of different containers\r\n */\r\nimport { loadData as AuthenticationPageLoader } from './AuthenticationPage/AuthenticationPage.duck';\r\nimport { loadData as LandingPageLoader } from './LandingPage/LandingPage.duck';\r\nimport { setInitialValues as CheckoutPageInitialValues } from './CheckoutPage/CheckoutPage.duck';\r\nimport { loadData as CMSPageLoader } from './CMSPage/CMSPage.duck';\r\nimport { loadData as ContactDetailsPageLoader } from './ContactDetailsPage/ContactDetailsPage.duck';\r\nimport { loadData as EditListingPageLoader } from './EditListingPage/EditListingPage.duck';\r\nimport { loadData as EmailVerificationPageLoader } from './EmailVerificationPage/EmailVerificationPage.duck';\r\nimport { loadData as InboxPageLoader } from './InboxPage/InboxPage.duck';\r\nimport { loadData as ListingPageLoader } from './ListingPage/ListingPage.duck';\r\nimport { loadData as ManageListingsPageLoader } from './ManageListingsPage/ManageListingsPage.duck';\r\nimport { loadData as PaymentMethodsPageLoader } from './PaymentMethodsPage/PaymentMethodsPage.duck';\r\nimport { loadData as PrivacyPolicyPageLoader } from './PrivacyPolicyPage/PrivacyPolicyPage.duck';\r\nimport { loadData as ProfilePageLoader } from './ProfilePage/ProfilePage.duck';\r\nimport { loadData as SearchPageLoader } from './SearchPage/SearchPage.duck';\r\nimport { loadData as StripePayoutPageLoader } from './StripePayoutPage/StripePayoutPage.duck';\r\nimport { loadData as TermsOfServicePageLoader } from './TermsOfServicePage/TermsOfServicePage.duck';\r\nimport {\r\n  loadData as TransactionPageLoader,\r\n  setInitialValues as TransactionPageInitialValues,\r\n} from './TransactionPage/TransactionPage.duck';\r\n\r\nconst getPageDataLoadingAPI = () => {\r\n  return {\r\n    AuthenticationPage: {\r\n      loadData: AuthenticationPageLoader,\r\n    },\r\n    LandingPage: {\r\n      loadData: LandingPageLoader,\r\n    },\r\n    CheckoutPage: {\r\n      setInitialValues: CheckoutPageInitialValues,\r\n    },\r\n    CMSPage: {\r\n      loadData: CMSPageLoader,\r\n    },\r\n    ContactDetailsPage: {\r\n      loadData: ContactDetailsPageLoader,\r\n    },\r\n    EditListingPage: {\r\n      loadData: EditListingPageLoader,\r\n    },\r\n    EmailVerificationPage: {\r\n      loadData: EmailVerificationPageLoader,\r\n    },\r\n    InboxPage: {\r\n      loadData: InboxPageLoader,\r\n    },\r\n    ListingPage: {\r\n      loadData: ListingPageLoader,\r\n    },\r\n    ManageListingsPage: {\r\n      loadData: ManageListingsPageLoader,\r\n    },\r\n    PaymentMethodsPage: {\r\n      loadData: PaymentMethodsPageLoader,\r\n    },\r\n    PrivacyPolicyPage: {\r\n      loadData: PrivacyPolicyPageLoader,\r\n    },\r\n    ProfilePage: {\r\n      loadData: ProfilePageLoader,\r\n    },\r\n    SearchPage: {\r\n      loadData: SearchPageLoader,\r\n    },\r\n    StripePayoutPage: {\r\n      loadData: StripePayoutPageLoader,\r\n    },\r\n    TermsOfServicePage: {\r\n      loadData: TermsOfServicePageLoader,\r\n    },\r\n    TransactionPage: {\r\n      loadData: TransactionPageLoader,\r\n      setInitialValues: TransactionPageInitialValues,\r\n    },\r\n  };\r\n};\r\n\r\nexport default getPageDataLoadingAPI;\r\n","import { createContext, useContext } from 'react';\r\n\r\nexport const ConfigurationContext = createContext();\r\n\r\nexport const ConfigurationProvider = ConfigurationContext.Provider;\r\n\r\nexport const useConfiguration = () => {\r\n  return useContext(ConfigurationContext);\r\n};\r\n","import React, { createContext, useContext } from 'react';\r\n\r\nexport const RouteConfigurationContext = createContext();\r\n\r\nexport const RouteConfigurationProvider = RouteConfigurationContext.Provider;\r\n\r\nexport const useRouteConfiguration = () => {\r\n  return useContext(RouteConfigurationContext);\r\n};\r\n","import isEmpty from 'lodash/isEmpty';\r\nimport { clearCurrentUser, fetchCurrentUser } from './user.duck';\r\nimport { createUserWithIdp } from '../util/api';\r\nimport { storableError } from '../util/errors';\r\nimport * as log from '../util/log';\r\n\r\nconst authenticated = authInfo => authInfo && authInfo.isAnonymous === false;\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const AUTH_INFO_REQUEST = 'app/auth/AUTH_INFO_REQUEST';\r\nexport const AUTH_INFO_SUCCESS = 'app/auth/AUTH_INFO_SUCCESS';\r\n\r\nexport const LOGIN_REQUEST = 'app/auth/LOGIN_REQUEST';\r\nexport const LOGIN_SUCCESS = 'app/auth/LOGIN_SUCCESS';\r\nexport const LOGIN_ERROR = 'app/auth/LOGIN_ERROR';\r\n\r\nexport const LOGOUT_REQUEST = 'app/auth/LOGOUT_REQUEST';\r\nexport const LOGOUT_SUCCESS = 'app/auth/LOGOUT_SUCCESS';\r\nexport const LOGOUT_ERROR = 'app/auth/LOGOUT_ERROR';\r\n\r\nexport const SIGNUP_REQUEST = 'app/auth/SIGNUP_REQUEST';\r\nexport const SIGNUP_SUCCESS = 'app/auth/SIGNUP_SUCCESS';\r\nexport const SIGNUP_ERROR = 'app/auth/SIGNUP_ERROR';\r\n\r\nexport const CONFIRM_REQUEST = 'app/auth/CONFIRM_REQUEST';\r\nexport const CONFIRM_SUCCESS = 'app/auth/CONFIRM_SUCCESS';\r\nexport const CONFIRM_ERROR = 'app/auth/CONFIRM_ERROR';\r\n\r\n// Generic user_logout action that can be handled elsewhere\r\n// E.g. src/reducers.js clears store as a consequence\r\nexport const USER_LOGOUT = 'app/USER_LOGOUT';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n\r\n  // scopes associated with current token\r\n  authScopes: [],\r\n\r\n  // auth info\r\n  authInfoLoaded: false,\r\n\r\n  // login\r\n  loginError: null,\r\n  loginInProgress: false,\r\n\r\n  // logout\r\n  logoutError: null,\r\n  logoutInProgress: false,\r\n\r\n  // signup\r\n  signupError: null,\r\n  signupInProgress: false,\r\n\r\n  // confirm (create use with idp)\r\n  confirmError: null,\r\n  confirmInProgress: false,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case AUTH_INFO_REQUEST:\r\n      return state;\r\n    case AUTH_INFO_SUCCESS:\r\n      return {\r\n        ...state,\r\n        authInfoLoaded: true,\r\n        isAuthenticated: authenticated(payload),\r\n        authScopes: payload.scopes,\r\n      };\r\n\r\n    case LOGIN_REQUEST:\r\n      return {\r\n        ...state,\r\n        loginInProgress: true,\r\n        loginError: null,\r\n        logoutError: null,\r\n        signupError: null,\r\n      };\r\n    case LOGIN_SUCCESS:\r\n      return { ...state, loginInProgress: false, isAuthenticated: true };\r\n    case LOGIN_ERROR:\r\n      return { ...state, loginInProgress: false, loginError: payload };\r\n\r\n    case LOGOUT_REQUEST:\r\n      return { ...state, logoutInProgress: true, loginError: null, logoutError: null };\r\n    case LOGOUT_SUCCESS:\r\n      return { ...state, logoutInProgress: false, isAuthenticated: false, authScopes: [] };\r\n    case LOGOUT_ERROR:\r\n      return { ...state, logoutInProgress: false, logoutError: payload };\r\n\r\n    case SIGNUP_REQUEST:\r\n      return { ...state, signupInProgress: true, loginError: null, signupError: null };\r\n    case SIGNUP_SUCCESS:\r\n      return { ...state, signupInProgress: false };\r\n    case SIGNUP_ERROR:\r\n      return { ...state, signupInProgress: false, signupError: payload };\r\n\r\n    case CONFIRM_REQUEST:\r\n      return { ...state, confirmInProgress: true, loginError: null, confirmError: null };\r\n    case CONFIRM_SUCCESS:\r\n      return { ...state, confirmInProgress: false, isAuthenticated: true };\r\n    case CONFIRM_ERROR:\r\n      return { ...state, confirmInProgress: false, confirmError: payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Selectors ================ //\r\n\r\nexport const authenticationInProgress = state => {\r\n  const { loginInProgress, logoutInProgress, signupInProgress } = state.auth;\r\n  return loginInProgress || logoutInProgress || signupInProgress;\r\n};\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const authInfoRequest = () => ({ type: AUTH_INFO_REQUEST });\r\nexport const authInfoSuccess = info => ({ type: AUTH_INFO_SUCCESS, payload: info });\r\n\r\nexport const loginRequest = () => ({ type: LOGIN_REQUEST });\r\nexport const loginSuccess = () => ({ type: LOGIN_SUCCESS });\r\nexport const loginError = error => ({ type: LOGIN_ERROR, payload: error, error: true });\r\n\r\nexport const logoutRequest = () => ({ type: LOGOUT_REQUEST });\r\nexport const logoutSuccess = () => ({ type: LOGOUT_SUCCESS });\r\nexport const logoutError = error => ({ type: LOGOUT_ERROR, payload: error, error: true });\r\n\r\nexport const signupRequest = () => ({ type: SIGNUP_REQUEST });\r\nexport const signupSuccess = () => ({ type: SIGNUP_SUCCESS });\r\nexport const signupError = error => ({ type: SIGNUP_ERROR, payload: error, error: true });\r\n\r\nexport const confirmRequest = () => ({ type: CONFIRM_REQUEST });\r\nexport const confirmSuccess = () => ({ type: CONFIRM_SUCCESS });\r\nexport const confirmError = error => ({ type: CONFIRM_ERROR, payload: error, error: true });\r\n\r\nexport const userLogout = () => ({ type: USER_LOGOUT });\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const authInfo = () => (dispatch, getState, sdk) => {\r\n  dispatch(authInfoRequest());\r\n  return sdk\r\n    .authInfo()\r\n    .then(info => dispatch(authInfoSuccess(info)))\r\n    .catch(e => {\r\n      // Requesting auth info just reads the token from the token\r\n      // store (i.e. cookies), and should not fail in normal\r\n      // circumstances. If it fails, it's due to a programming\r\n      // error. In that case we mark the operation done and dispatch\r\n      // `null` success action that marks the user as unauthenticated.\r\n      log.error(e, 'auth-info-failed');\r\n      dispatch(authInfoSuccess(null));\r\n    });\r\n};\r\n\r\nexport const login = (username, password) => (dispatch, getState, sdk) => {\r\n  if (authenticationInProgress(getState())) {\r\n    return Promise.reject(new Error('Login or logout already in progress'));\r\n  }\r\n  dispatch(loginRequest());\r\n\r\n  // Note that the thunk does not reject when the login fails, it\r\n  // just dispatches the login error action.\r\n  return sdk\r\n    .login({ username, password })\r\n    .then(() => dispatch(loginSuccess()))\r\n    .then(() => dispatch(fetchCurrentUser()))\r\n    .catch(e => dispatch(loginError(storableError(e))));\r\n};\r\n\r\nexport const logout = () => (dispatch, getState, sdk) => {\r\n  if (authenticationInProgress(getState())) {\r\n    return Promise.reject(new Error('Login or logout already in progress'));\r\n  }\r\n  dispatch(logoutRequest());\r\n\r\n  // Note that the thunk does not reject when the logout fails, it\r\n  // just dispatches the logout error action.\r\n  return sdk\r\n    .logout()\r\n    .then(() => {\r\n      // The order of the dispatched actions\r\n      dispatch(logoutSuccess());\r\n      dispatch(clearCurrentUser());\r\n      log.clearUserId();\r\n      dispatch(userLogout());\r\n    })\r\n    .catch(e => dispatch(logoutError(storableError(e))));\r\n};\r\n\r\nexport const signup = params => (dispatch, getState, sdk) => {\r\n  if (authenticationInProgress(getState())) {\r\n    return Promise.reject(new Error('Login or logout already in progress'));\r\n  }\r\n  dispatch(signupRequest());\r\n  const { email, password, firstName, lastName, ...rest } = params;\r\n\r\n  const createUserParams = isEmpty(rest)\r\n    ? { email, password, firstName, lastName }\r\n    : { email, password, firstName, lastName, protectedData: { ...rest } };\r\n\r\n  // We must login the user if signup succeeds since the API doesn't\r\n  // do that automatically.\r\n  return sdk.currentUser\r\n    .create(createUserParams)\r\n    .then(() => dispatch(signupSuccess()))\r\n    .then(() => dispatch(login(email, password)))\r\n    .catch(e => {\r\n      dispatch(signupError(storableError(e)));\r\n      log.error(e, 'signup-failed', {\r\n        email: params.email,\r\n        firstName: params.firstName,\r\n        lastName: params.lastName,\r\n      });\r\n    });\r\n};\r\n\r\nexport const signupWithIdp = params => (dispatch, getState, sdk) => {\r\n  dispatch(confirmRequest());\r\n  return createUserWithIdp(params)\r\n    .then(res => {\r\n      return dispatch(confirmSuccess());\r\n    })\r\n    .then(() => dispatch(fetchCurrentUser()))\r\n    .catch(e => {\r\n      log.error(e, 'create-user-with-idp-failed', { params });\r\n      return dispatch(confirmError(storableError(e)));\r\n    });\r\n};\r\n","import { storableError } from '../util/errors';\r\nimport { fetchCurrentUser } from './user.duck';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const VERIFICATION_REQUEST = 'app/emailVerification/VERIFICATION_REQUEST';\r\nexport const VERIFICATION_SUCCESS = 'app/emailVerification/VERIFICATION_SUCCESS';\r\nexport const VERIFICATION_ERROR = 'app/emailVerification/VERIFICATION_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  isVerified: false,\r\n\r\n  // verification\r\n  verificationError: null,\r\n  verificationInProgress: false,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case VERIFICATION_REQUEST:\r\n      return {\r\n        ...state,\r\n        verificationInProgress: true,\r\n        verificationError: null,\r\n      };\r\n    case VERIFICATION_SUCCESS:\r\n      return { ...state, verificationInProgress: false, isVerified: true };\r\n    case VERIFICATION_ERROR:\r\n      return { ...state, verificationInProgress: false, verificationError: payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Selectors ================ //\r\n\r\nexport const verificationInProgress = state => {\r\n  return state.emailVerification.verificationInProgress;\r\n};\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const verificationRequest = () => ({ type: VERIFICATION_REQUEST });\r\nexport const verificationSuccess = () => ({ type: VERIFICATION_SUCCESS });\r\nexport const verificationError = error => ({\r\n  type: VERIFICATION_ERROR,\r\n  payload: error,\r\n  error: true,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const verify = verificationToken => (dispatch, getState, sdk) => {\r\n  if (verificationInProgress(getState())) {\r\n    return Promise.reject(new Error('Email verification already in progress'));\r\n  }\r\n  dispatch(verificationRequest());\r\n\r\n  // Note that the thunk does not reject when the verification fails, it\r\n  // just dispatches the login error action.\r\n  return sdk.currentUser\r\n    .verifyEmail({ verificationToken })\r\n    .then(() => dispatch(verificationSuccess()))\r\n    .then(() => dispatch(fetchCurrentUser()))\r\n    .catch(e => dispatch(verificationError(storableError(e))));\r\n};\r\n","import { denormalizeAssetData } from '../util/data';\r\nimport { storableError } from '../util/errors';\r\nimport * as log from '../util/log';\r\n\r\n// Pick paths from entries of appCdnAssets config (in configDefault.js)\r\nconst pickHostedConfigPaths = (assetEntries, excludeAssetNames) => {\r\n  // E.g. allPaths = ['any/foo.json', 'any/bar.json']\r\n  return assetEntries.reduce((pickedPaths, [name, path]) => {\r\n    if (excludeAssetNames.includes(name)) {\r\n      return pickedPaths;\r\n    }\r\n    return [...pickedPaths, path];\r\n  }, []);\r\n};\r\nconst getFirstAssetData = response => response?.data?.data[0]?.attributes?.data;\r\nconst getMultiAssetData = response => response?.data?.data;\r\nconst getMultiAssetIncluded = response => response?.data?.included;\r\nconst findJSONAsset = (assets, absolutePath) =>\r\n  assets.find(a => a.type === 'jsonAsset' && a.attributes.assetPath === absolutePath);\r\nconst getAbsolutePath = path => (path.charAt(0) !== '/' ? `/${path}` : path);\r\n\r\nconst getGoogleAnalyticsId = (configAssets, path) => {\r\n  if (!configAssets || !path) {\r\n    return null;\r\n  }\r\n  const configAssetsData = getMultiAssetData(configAssets);\r\n  const jsonAsset = findJSONAsset(configAssetsData, getAbsolutePath(path));\r\n  const { enabled, measurementId } = jsonAsset?.attributes?.data?.googleAnalytics || {};\r\n  return enabled ? measurementId : null;\r\n};\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const ASSETS_REQUEST = 'app/assets/REQUEST';\r\nexport const ASSETS_SUCCESS = 'app/assets/SUCCESS';\r\nexport const ASSETS_ERROR = 'app/assets/ERROR';\r\n\r\nexport const PAGE_ASSETS_REQUEST = 'app/assets/PAGE_ASSETS_REQUEST';\r\nexport const PAGE_ASSETS_SUCCESS = 'app/assets/PAGE_ASSETS_SUCCESS';\r\nexport const PAGE_ASSETS_ERROR = 'app/assets/PAGE_ASSETS_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  // List of app-wide assets that should be fetched and their path in Asset API.\r\n  // appAssets: { assetName: 'path/to/asset.json' }\r\n  appAssets: {},\r\n  pageAssetsData: null,\r\n  currentPageAssets: [],\r\n  // Current version of the saved asset.\r\n  // Typically, the version that is returned by the \"latest\" alias.\r\n  version: null,\r\n  inProgress: false,\r\n  error: null,\r\n};\r\n\r\nexport default function assetReducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case ASSETS_REQUEST:\r\n      return { ...state, inProgress: true, error: null };\r\n    case ASSETS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        appAssets: payload.assets,\r\n        version: state.version || payload.version,\r\n        googleAnalyticsId: payload.googleAnalyticsId,\r\n        inProgress: false,\r\n      };\r\n    case ASSETS_ERROR:\r\n      return { ...state, inProgress: false, error: payload };\r\n\r\n    case PAGE_ASSETS_REQUEST:\r\n      return { ...state, currentPageAssets: payload, inProgress: true, error: null };\r\n    case PAGE_ASSETS_SUCCESS:\r\n      return { ...state, pageAssetsData: payload, inProgress: false };\r\n    case PAGE_ASSETS_ERROR:\r\n      return { ...state, inProgress: false, error: payload };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const appAssetsRequested = () => ({ type: ASSETS_REQUEST });\r\nexport const appAssetsSuccess = (assets, version, googleAnalyticsId) => ({\r\n  type: ASSETS_SUCCESS,\r\n  payload: { assets, version, googleAnalyticsId },\r\n});\r\nexport const appAssetsError = error => ({\r\n  type: ASSETS_ERROR,\r\n  payload: error,\r\n});\r\n\r\nexport const pageAssetsRequested = assetKeys => ({ type: PAGE_ASSETS_REQUEST, payload: assetKeys });\r\nexport const pageAssetsSuccess = assets => ({ type: PAGE_ASSETS_SUCCESS, payload: assets });\r\nexport const pageAssetsError = error => ({\r\n  type: PAGE_ASSETS_ERROR,\r\n  payload: error,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const fetchAppAssets = (assets, version) => (dispatch, getState, sdk) => {\r\n  dispatch(appAssetsRequested());\r\n\r\n  // App-wide assets include 2 content assets: translations for microcopy and footer\r\n  const translationsPath = assets.translations;\r\n  const footerPath = assets.footer;\r\n\r\n  // The rest of the assets are considered as configurations\r\n  const assetEntries = Object.entries(assets);\r\n  const nonConfigAssets = ['translations', 'footer'];\r\n  const configPaths = pickHostedConfigPaths(assetEntries, nonConfigAssets);\r\n\r\n  // If version is given fetch assets by the version,\r\n  // otherwise default to \"latest\" alias\r\n  const fetchAssets = paths =>\r\n    version\r\n      ? sdk.assetsByVersion({ paths, version })\r\n      : sdk.assetsByAlias({ paths, alias: 'latest' });\r\n\r\n  const separateAssetFetches = [\r\n    // This is a big file, better fetch it alone.\r\n    // Then browser cache also comes into play.\r\n    fetchAssets([translationsPath]),\r\n    // Not a config, and potentially a big file.\r\n    // It can benefit of browser cache when being a separate fetch.\r\n    fetchAssets([footerPath]),\r\n    // App configs\r\n    fetchAssets(configPaths),\r\n  ];\r\n\r\n  return Promise.all(separateAssetFetches)\r\n    .then(([translationAsset, footerAsset, configAssets]) => {\r\n      const getVersionHash = response => response?.data?.meta?.version;\r\n      const versionInTranslationsCall = getVersionHash(translationAsset);\r\n      const versionInFooterCall = getVersionHash(footerAsset);\r\n      const versionInConfigsCall = getVersionHash(configAssets);\r\n      const hasSameVersions =\r\n        versionInTranslationsCall === versionInFooterCall &&\r\n        versionInFooterCall === versionInConfigsCall;\r\n\r\n      // NOTE: making separate calls means that there might be version mismatch\r\n      // when using 'latest' alias.\r\n      // Since we only fetch translations and footer as a separate calls from configs,\r\n      // there should not be major problems with this approach.\r\n      // TODO: potentially show an error page or reload if version mismatch is detected.\r\n      if (!version && !hasSameVersions) {\r\n        console.warn(\"Asset versions between calls don't match.\");\r\n      }\r\n\r\n      const googleAnalyticsId = getGoogleAnalyticsId(configAssets, assets.analytics);\r\n      dispatch(appAssetsSuccess(assets, versionInTranslationsCall, googleAnalyticsId));\r\n\r\n      // Returned value looks like this for a single asset with name: \"translations\":\r\n      // {\r\n      //    translations: {\r\n      //      path: 'content/translations.json', // an example path in Asset Delivery API\r\n      //      data, // translation key & value pairs\r\n      //    },\r\n      // }\r\n      return assetEntries.reduce((collectedAssets, assetEntry, i) => {\r\n        const [name, path] = assetEntry;\r\n\r\n        if (nonConfigAssets.includes(name)) {\r\n          // There are distinct calls for these assets\r\n          const assetResponse = name === 'translations' ? translationAsset : footerAsset;\r\n          return { ...collectedAssets, [name]: { path, data: getFirstAssetData(assetResponse) } };\r\n        }\r\n\r\n        // Other asset path are assumed to be config assets\r\n        const fetchedConfigAssets = getMultiAssetData(configAssets);\r\n        const jsonAsset = findJSONAsset(fetchedConfigAssets, getAbsolutePath(path));\r\n\r\n        // branding.json config asset can contain image references,\r\n        // which should be denormalized from \"included\" section of the response\r\n        const data = denormalizeAssetData({\r\n          data: jsonAsset?.attributes?.data,\r\n          included: getMultiAssetIncluded(configAssets),\r\n        });\r\n        return { ...collectedAssets, [name]: { path, data } };\r\n      }, {});\r\n    })\r\n    .catch(e => {\r\n      log.error(e, 'app-asset-fetch-failed', { assets, version });\r\n      dispatch(appAssetsError(storableError(e)));\r\n    });\r\n};\r\n\r\nexport const fetchPageAssets = (assets, hasFallback) => (dispatch, getState, sdk) => {\r\n  const version = getState()?.hostedAssets?.version;\r\n  if (typeof version === 'undefined') {\r\n    throw new Error(\r\n      'App-wide assets were not fetched first. Asset version missing from Redux store.'\r\n    );\r\n  }\r\n\r\n  dispatch(pageAssetsRequested(Object.keys(assets)));\r\n\r\n  // If version is given fetch assets by the version,\r\n  // otherwise default to \"latest\" alias\r\n  const fetchAssets = version\r\n    ? assetPath => sdk.assetByVersion({ path: assetPath, version })\r\n    : assetPath => sdk.assetByAlias({ path: assetPath, alias: 'latest' });\r\n\r\n  const assetEntries = Object.entries(assets);\r\n  const sdkAssets = assetEntries.map(([key, assetPath]) => fetchAssets(assetPath));\r\n\r\n  return Promise.all(sdkAssets)\r\n    .then(responses => {\r\n      const hostedAssetsState = getState()?.hostedAssets;\r\n      // These are fixed page assets that the app expects to be there. Keep fixed assets always in store.\r\n      const { termsOfService, privacyPolicy, landingPage, ...rest } =\r\n        hostedAssetsState?.pageAssetsData || {};\r\n      const fixedPageAssets = { termsOfService, privacyPolicy, landingPage };\r\n      // Avoid race condition, which might happen if automatic redirections try to fetch different assets\r\n      // This could happen, when logged-in user clicks some signup link (AuthenticationPage fetches terms&privacy, LandingPage fetches its asset)\r\n      const pickLatestPageAssetData = hostedAssetsState?.currentPageAssets.reduce(\r\n        (collected, pa) => {\r\n          const cmsPageData = rest[pa];\r\n          return cmsPageData ? { ...collected, [pa]: cmsPageData } : collected;\r\n        },\r\n        {}\r\n      );\r\n      // Returned value looks like this for a single asset with name: \"about-page\":\r\n      // {\r\n      //    \"about-page\": {\r\n      //      path: 'content/about-page.json', // an example path in Asset Delivery API\r\n      //      data, // translation key & value pairs\r\n      //    },\r\n      //    // etc.\r\n      // }\r\n      // Note: we'll pick fixed page assets and the current page asset always.\r\n      const pageAssets = assetEntries.reduce(\r\n        (collectedAssets, assetEntry, i) => {\r\n          const [name, path] = assetEntry;\r\n          const assetData = denormalizeAssetData(responses[i].data);\r\n          return { ...collectedAssets, [name]: { path, data: assetData } };\r\n        },\r\n        { ...fixedPageAssets, ...pickLatestPageAssetData }\r\n      );\r\n      dispatch(pageAssetsSuccess(pageAssets));\r\n      return pageAssets;\r\n    })\r\n    .catch(e => {\r\n      // If there's a fallback UI, something went wrong when fetching the \"known asset\" like landing-page.json.\r\n      // If there's no fallback UI created, we assume that the page URL was mistyped for 404 errors.\r\n      if (hasFallback || (!hasFallback && e.status === 404)) {\r\n        log.error(e, 'page-asset-fetch-failed', { assets, version });\r\n      }\r\n      dispatch(pageAssetsError(storableError(e)));\r\n    });\r\n};\r\n","import { updatedEntities, denormalisedEntities } from '../util/data';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const ADD_MARKETPLACE_ENTITIES = 'app/marketplaceData/ADD_MARKETPLACE_ENTITIES';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  // Database of all the fetched entities.\r\n  entities: {},\r\n};\r\n\r\nconst merge = (state, payload) => {\r\n  const { sdkResponse, sanitizeConfig } = payload;\r\n  const apiResponse = sdkResponse.data;\r\n  return {\r\n    ...state,\r\n    entities: updatedEntities({ ...state.entities }, apiResponse, sanitizeConfig),\r\n  };\r\n};\r\n\r\nexport default function marketplaceDataReducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case ADD_MARKETPLACE_ENTITIES:\r\n      return merge(state, payload);\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Selectors ================ //\r\n\r\n/**\r\n * Get the denormalised listing entities with the given IDs\r\n *\r\n * @param {Object} state the full Redux store\r\n * @param {Array<UUID>} listingIds listing IDs to select from the store\r\n */\r\nexport const getListingsById = (state, listingIds) => {\r\n  const { entities } = state.marketplaceData;\r\n  const resources = listingIds.map(id => ({\r\n    id,\r\n    type: 'listing',\r\n  }));\r\n  const throwIfNotFound = false;\r\n  return denormalisedEntities(entities, resources, throwIfNotFound);\r\n};\r\n\r\n/**\r\n * Get the denormalised entities from the given entity references.\r\n *\r\n * @param {Object} state the full Redux store\r\n *\r\n * @param {Array<{ id, type }} entityRefs References to entities that\r\n * we want to query from the data. Currently we expect that all the\r\n * entities have the same type.\r\n *\r\n * @return {Array<Object>} denormalised entities\r\n */\r\nexport const getMarketplaceEntities = (state, entityRefs) => {\r\n  const { entities } = state.marketplaceData;\r\n  const throwIfNotFound = false;\r\n  return denormalisedEntities(entities, entityRefs, throwIfNotFound);\r\n};\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const addMarketplaceEntities = (sdkResponse, sanitizeConfig) => ({\r\n  type: ADD_MARKETPLACE_ENTITIES,\r\n  payload: { sdkResponse, sanitizeConfig },\r\n});\r\n","import pick from 'lodash/pick';\r\nimport { storableError } from '../util/errors';\r\nimport * as log from '../util/log';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const SET_INITIAL_VALUES = 'app/paymentMethods/SET_INITIAL_VALUES';\r\n\r\nexport const CREATE_STRIPE_CUSTOMER_REQUEST = 'app/paymentMethods/CREATE_STRIPE_CUSTOMER_REQUEST';\r\nexport const CREATE_STRIPE_CUSTOMER_SUCCESS = 'app/paymentMethods/CREATE_STRIPE_CUSTOMER_SUCCESS';\r\nexport const CREATE_STRIPE_CUSTOMER_ERROR = 'app/paymentMethods/CREATE_STRIPE_CUSTOMER_ERROR';\r\n\r\nexport const ADD_PAYMENT_METHOD_REQUEST = 'app/paymentMethods/ADD_PAYMENT_METHOD_REQUEST';\r\nexport const ADD_PAYMENT_METHOD_SUCCESS = 'app/paymentMethods/ADD_PAYMENT_METHOD_SUCCESS';\r\nexport const ADD_PAYMENT_METHOD_ERROR = 'app/paymentMethods/ADD_PAYMENT_METHOD_ERROR';\r\n\r\nexport const DELETE_PAYMENT_METHOD_REQUEST = 'app/paymentMethods/DELETE_PAYMENT_METHOD_REQUEST';\r\nexport const DELETE_PAYMENT_METHOD_SUCCESS = 'app/paymentMethods/DELETE_PAYMENT_METHOD_SUCCESS';\r\nexport const DELETE_PAYMENT_METHOD_ERROR = 'app/paymentMethods/DELETE_PAYMENT_METHOD_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  addPaymentMethodInProgress: null,\r\n  addPaymentMethodError: null,\r\n  deletePaymentMethodInProgress: null,\r\n  deletePaymentMethodError: null,\r\n  createStripeCustomerInProgress: null,\r\n  createStripeCustomerError: null,\r\n  stripeCustomer: null,\r\n};\r\n\r\nexport default function payoutMethodsPageReducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case SET_INITIAL_VALUES:\r\n      return { ...initialState, ...payload };\r\n    case CREATE_STRIPE_CUSTOMER_REQUEST:\r\n      return { ...state, createStripeCustomerError: null, createStripeCustomerInProgress: true };\r\n    case CREATE_STRIPE_CUSTOMER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        createStripeCustomerInProgress: false,\r\n        stripeCustomer: payload,\r\n      };\r\n    case CREATE_STRIPE_CUSTOMER_ERROR:\r\n      console.error(payload);\r\n      return {\r\n        ...state,\r\n        createStripeCustomerError: payload,\r\n        createStripeCustomerInProgress: false,\r\n      };\r\n    case ADD_PAYMENT_METHOD_REQUEST:\r\n      return { ...state, addPaymentMethodError: null, addPaymentMethodInProgress: true };\r\n    case ADD_PAYMENT_METHOD_SUCCESS:\r\n      return {\r\n        ...state,\r\n        addPaymentMethodInProgress: false,\r\n        stripeCustomer: payload,\r\n      };\r\n    case ADD_PAYMENT_METHOD_ERROR:\r\n      console.error(payload);\r\n      return {\r\n        ...state,\r\n        addPaymentMethodError: payload,\r\n        addPaymentMethodInProgress: false,\r\n      };\r\n\r\n    case DELETE_PAYMENT_METHOD_REQUEST:\r\n      return { ...state, deletePaymentMethodError: null, deletePaymentMethodInProgress: true };\r\n    case DELETE_PAYMENT_METHOD_SUCCESS:\r\n      return {\r\n        ...state,\r\n        deletePaymentMethodInProgress: false,\r\n      };\r\n    case DELETE_PAYMENT_METHOD_ERROR:\r\n      console.error(payload);\r\n      return {\r\n        ...state,\r\n        deletePaymentMethodError: payload,\r\n        deletePaymentMethodInProgress: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const setInitialValues = initialValues => ({\r\n  type: SET_INITIAL_VALUES,\r\n  payload: pick(initialValues, Object.keys(initialState)),\r\n});\r\n\r\nexport const stripeCustomerCreateRequest = () => ({ type: CREATE_STRIPE_CUSTOMER_REQUEST });\r\n\r\nexport const stripeCustomerCreateSuccess = stripeCustomer => ({\r\n  type: CREATE_STRIPE_CUSTOMER_SUCCESS,\r\n  payload: stripeCustomer,\r\n});\r\n\r\nexport const stripeCustomerCreateError = e => ({\r\n  type: CREATE_STRIPE_CUSTOMER_ERROR,\r\n  payload: e,\r\n  error: true,\r\n});\r\n\r\nexport const addPaymentMethodRequest = () => ({ type: ADD_PAYMENT_METHOD_REQUEST });\r\n\r\nexport const addPaymentMethodSuccess = stripeCustomer => ({\r\n  type: ADD_PAYMENT_METHOD_SUCCESS,\r\n  payload: stripeCustomer,\r\n});\r\n\r\nexport const addPaymentMethodError = e => ({\r\n  type: ADD_PAYMENT_METHOD_ERROR,\r\n  payload: e,\r\n  error: true,\r\n});\r\n\r\nexport const deletePaymentMethodRequest = () => ({ type: DELETE_PAYMENT_METHOD_REQUEST });\r\n\r\nexport const deletePaymentMethodSuccess = stripeCustomer => ({\r\n  type: DELETE_PAYMENT_METHOD_SUCCESS,\r\n  payload: stripeCustomer,\r\n});\r\n\r\nexport const deletePaymentMethodError = e => ({\r\n  type: DELETE_PAYMENT_METHOD_ERROR,\r\n  payload: e,\r\n  error: true,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const createStripeCustomer = stripePaymentMethodId => (dispatch, getState, sdk) => {\r\n  dispatch(stripeCustomerCreateRequest());\r\n  return sdk.stripeCustomer\r\n    .create({ stripePaymentMethodId }, { expand: true, include: ['defaultPaymentMethod'] })\r\n    .then(response => {\r\n      const stripeCustomer = response.data.data;\r\n      dispatch(stripeCustomerCreateSuccess(stripeCustomer));\r\n      return stripeCustomer;\r\n    })\r\n    .catch(e => {\r\n      log.error(storableError(e), 'create-stripe-user-failed');\r\n      dispatch(stripeCustomerCreateError(storableError(e)));\r\n    });\r\n};\r\n\r\nexport const addPaymentMethod = stripePaymentMethodId => (dispatch, getState, sdk) => {\r\n  dispatch(addPaymentMethodRequest());\r\n  return sdk.stripeCustomer\r\n    .addPaymentMethod({ stripePaymentMethodId }, { expand: true })\r\n    .then(response => {\r\n      const stripeCustomer = response.data.data;\r\n      dispatch(addPaymentMethodSuccess(stripeCustomer));\r\n      return stripeCustomer;\r\n    })\r\n    .catch(e => {\r\n      log.error(storableError(e), 'add-payment-method-failed');\r\n      dispatch(addPaymentMethodError(storableError(e)));\r\n    });\r\n};\r\n\r\nexport const deletePaymentMethod = () => (dispatch, getState, sdk) => {\r\n  dispatch(deletePaymentMethodRequest());\r\n  return sdk.stripeCustomer\r\n    .deletePaymentMethod({}, { expand: true })\r\n    .then(response => {\r\n      const stripeCustomer = response.data.data;\r\n      dispatch(deletePaymentMethodSuccess(stripeCustomer));\r\n      return stripeCustomer;\r\n    })\r\n    .catch(e => {\r\n      log.error(storableError(e), 'add-payment-method-failed');\r\n      dispatch(deletePaymentMethodError(storableError(e)));\r\n    });\r\n};\r\n\r\nexport const updatePaymentMethod = stripePaymentMethodId => (dispatch, getState, sdk) => {\r\n  return dispatch(deletePaymentMethod())\r\n    .then(() => {\r\n      return dispatch(addPaymentMethod(stripePaymentMethodId));\r\n    })\r\n    .catch(e => {\r\n      log.error(storableError(e), 'updating-payment-method-failed');\r\n    });\r\n};\r\n\r\n// This function helps to choose correct thunk function\r\nexport const savePaymentMethod = (stripeCustomer, stripePaymentMethodId) => (\r\n  dispatch,\r\n  getState,\r\n  sdk\r\n) => {\r\n  const hasAlreadyDefaultPaymentMethod =\r\n    stripeCustomer && stripeCustomer.defaultPaymentMethod && stripeCustomer.defaultPaymentMethod.id;\r\n\r\n  const savePromise =\r\n    !stripeCustomer || !stripeCustomer.id\r\n      ? dispatch(createStripeCustomer(stripePaymentMethodId))\r\n      : hasAlreadyDefaultPaymentMethod\r\n      ? dispatch(updatePaymentMethod(stripePaymentMethodId))\r\n      : dispatch(addPaymentMethod(stripePaymentMethodId));\r\n\r\n  return savePromise\r\n    .then(response => {\r\n      const {\r\n        createStripeCustomerError,\r\n        addPaymentMethodError,\r\n        deletePaymentMethodError,\r\n      } = getState().paymentMethods;\r\n\r\n      // If there are any errors, return those errors\r\n      if (createStripeCustomerError || addPaymentMethodError || deletePaymentMethodError) {\r\n        return {\r\n          errors: { createStripeCustomerError, addPaymentMethodError, deletePaymentMethodError },\r\n        };\r\n      }\r\n      return response;\r\n    })\r\n    .catch(e => {\r\n      // errors are already catched in other thunk functions.\r\n    });\r\n};\r\n","// ================ Action types ================ //\r\n\r\nexport const LOCATION_CHANGED = 'app/routing/LOCATION_CHANGED';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  currentLocation: null,\r\n  currentCanonicalPath: null,\r\n};\r\n\r\nexport default function routingReducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case LOCATION_CHANGED:\r\n      return {\r\n        ...state,\r\n        currentLocation: payload.location,\r\n        currentCanonicalPath: payload.canonicalPath,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const locationChanged = (location, canonicalPath) => ({\r\n  type: LOCATION_CHANGED,\r\n  payload: { location, canonicalPath },\r\n});\r\n","import { storableError } from '../util/errors';\r\nimport * as log from '../util/log';\r\n\r\n// https://stripe.com/docs/api/payment_intents/object#payment_intent_object-status\r\nconst STRIPE_PI_HAS_PASSED_CONFIRM = ['processing', 'requires_capture', 'canceled', 'succeeded'];\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const STRIPE_ACCOUNT_CLEAR_ERROR = 'app/stripe/STRIPE_ACCOUNT_CLEAR_ERROR';\r\n\r\nexport const ACCOUNT_OPENER_CREATE_REQUEST = 'app/stripe/ACCOUNT_OPENER_CREATE_REQUEST';\r\nexport const ACCOUNT_OPENER_CREATE_SUCCESS = 'app/stripe/ACCOUNT_OPENER_CREATE_SUCCESS';\r\nexport const ACCOUNT_OPENER_CREATE_ERROR = 'app/stripe/ACCOUNT_OPENER_CREATE_ERROR';\r\n\r\nexport const PERSON_CREATE_REQUEST = 'app/stripe/PERSON_CREATE_REQUEST';\r\nexport const PERSON_CREATE_SUCCESS = 'app/stripe/PERSON_CREATE_SUCCESS';\r\nexport const PERSON_CREATE_ERROR = 'app/stripe/PERSON_CREATE_ERROR';\r\n\r\nexport const CLEAR_PAYMENT_TOKEN = 'app/stripe/CLEAR_PAYMENT_TOKEN';\r\n\r\nexport const HANDLE_CARD_PAYMENT_REQUEST = 'app/stripe/HANDLE_CARD_PAYMENT_REQUEST';\r\nexport const HANDLE_CARD_PAYMENT_SUCCESS = 'app/stripe/HANDLE_CARD_PAYMENT_SUCCESS';\r\nexport const HANDLE_CARD_PAYMENT_ERROR = 'app/stripe/HANDLE_CARD_PAYMENT_ERROR';\r\n\r\nexport const HANDLE_CARD_SETUP_REQUEST = 'app/stripe/HANDLE_CARD_SETUP_REQUEST';\r\nexport const HANDLE_CARD_SETUP_SUCCESS = 'app/stripe/HANDLE_CARD_SETUP_SUCCESS';\r\nexport const HANDLE_CARD_SETUP_ERROR = 'app/stripe/HANDLE_CARD_SETUP_ERROR';\r\n\r\nexport const CLEAR_HANDLE_CARD_PAYMENT = 'app/stripe/CLEAR_HANDLE_CARD_PAYMENT';\r\n\r\nexport const RETRIEVE_PAYMENT_INTENT_REQUEST = 'app/stripe/RETRIEVE_PAYMENT_INTENT_REQUEST';\r\nexport const RETRIEVE_PAYMENT_INTENT_SUCCESS = 'app/stripe/RETRIEVE_PAYMENT_INTENT_SUCCESS';\r\nexport const RETRIEVE_PAYMENT_INTENT_ERROR = 'app/stripe/RETRIEVE_PAYMENT_INTENT_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  confirmCardPaymentInProgress: false,\r\n  confirmCardPaymentError: null,\r\n  handleCardSetupInProgress: false,\r\n  handleCardSetupError: null,\r\n  paymentIntent: null,\r\n  setupIntent: null,\r\n  retrievePaymentIntentInProgress: false,\r\n  retrievePaymentIntentError: null,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case STRIPE_ACCOUNT_CLEAR_ERROR:\r\n      return { ...initialState };\r\n\r\n    case ACCOUNT_OPENER_CREATE_REQUEST:\r\n      return {\r\n        ...state,\r\n        createAccountOpenerError: null,\r\n        createAccountOpenerInProgress: true,\r\n      };\r\n    case ACCOUNT_OPENER_CREATE_SUCCESS:\r\n      return { ...state, createAccountOpenerInProgress: false, personAccountOpener: payload };\r\n    case ACCOUNT_OPENER_CREATE_ERROR:\r\n      console.error(payload);\r\n      return { ...state, createAccountOpenerError: payload, createAccountOpenerInProgress: false };\r\n\r\n    case PERSON_CREATE_REQUEST:\r\n      return {\r\n        ...state,\r\n        persons: [\r\n          ...state.persons,\r\n          {\r\n            ...payload,\r\n            createStripePersonError: null,\r\n            createStripePersonInProgress: true,\r\n          },\r\n        ],\r\n      };\r\n    case PERSON_CREATE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        persons: state.persons.map(p => {\r\n          return p.personToken === payload.personToken\r\n            ? { ...payload, createStripePersonInProgress: false }\r\n            : p;\r\n        }),\r\n      };\r\n    case PERSON_CREATE_ERROR:\r\n      console.error(payload);\r\n      return {\r\n        ...state,\r\n        persons: state.persons.map(p => {\r\n          return p.personToken === payload.personToken\r\n            ? { ...p, createStripePersonInProgress: false, createStripePersonError: payload.error }\r\n            : p;\r\n        }),\r\n      };\r\n\r\n    case HANDLE_CARD_PAYMENT_REQUEST:\r\n      return {\r\n        ...state,\r\n        confirmCardPaymentError: null,\r\n        confirmCardPaymentInProgress: true,\r\n      };\r\n    case HANDLE_CARD_PAYMENT_SUCCESS:\r\n      return { ...state, paymentIntent: payload, confirmCardPaymentInProgress: false };\r\n    case HANDLE_CARD_PAYMENT_ERROR:\r\n      console.error(payload);\r\n      return { ...state, confirmCardPaymentError: payload, confirmCardPaymentInProgress: false };\r\n\r\n    case HANDLE_CARD_SETUP_REQUEST:\r\n      return {\r\n        ...state,\r\n        handleCardSetupError: null,\r\n        handleCardSetupInProgress: true,\r\n      };\r\n    case HANDLE_CARD_SETUP_SUCCESS:\r\n      return { ...state, setupIntent: payload, handleCardSetupInProgress: false };\r\n    case HANDLE_CARD_SETUP_ERROR:\r\n      console.error(payload);\r\n      return { ...state, handleCardSetupError: payload, handleCardSetupInProgress: false };\r\n\r\n    case CLEAR_HANDLE_CARD_PAYMENT:\r\n      return {\r\n        ...state,\r\n        confirmCardPaymentInProgress: false,\r\n        confirmCardPaymentError: null,\r\n        paymentIntent: null,\r\n      };\r\n\r\n    case RETRIEVE_PAYMENT_INTENT_REQUEST:\r\n      return {\r\n        ...state,\r\n        retrievePaymentIntentError: null,\r\n        retrievePaymentIntentInProgress: true,\r\n      };\r\n    case RETRIEVE_PAYMENT_INTENT_SUCCESS:\r\n      return { ...state, paymentIntent: payload, retrievePaymentIntentInProgress: false };\r\n    case RETRIEVE_PAYMENT_INTENT_ERROR:\r\n      console.error(payload);\r\n      return {\r\n        ...state,\r\n        retrievePaymentIntentError: payload,\r\n        retrievePaymentIntentInProgress: false,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const stripeAccountClearError = () => ({\r\n  type: STRIPE_ACCOUNT_CLEAR_ERROR,\r\n});\r\n\r\nexport const confirmCardPaymentRequest = () => ({\r\n  type: HANDLE_CARD_PAYMENT_REQUEST,\r\n});\r\n\r\nexport const confirmCardPaymentSuccess = payload => ({\r\n  type: HANDLE_CARD_PAYMENT_SUCCESS,\r\n  payload,\r\n});\r\n\r\nexport const confirmCardPaymentError = payload => ({\r\n  type: HANDLE_CARD_PAYMENT_ERROR,\r\n  payload,\r\n  error: true,\r\n});\r\n\r\nexport const handleCardSetupRequest = () => ({\r\n  type: HANDLE_CARD_SETUP_REQUEST,\r\n});\r\n\r\nexport const handleCardSetupSuccess = payload => ({\r\n  type: HANDLE_CARD_SETUP_SUCCESS,\r\n  payload,\r\n});\r\n\r\nexport const handleCardSetupError = payload => ({\r\n  type: HANDLE_CARD_SETUP_ERROR,\r\n  payload,\r\n  error: true,\r\n});\r\n\r\nexport const initializeCardPaymentData = () => ({\r\n  type: CLEAR_HANDLE_CARD_PAYMENT,\r\n});\r\n\r\nexport const retrievePaymentIntentRequest = () => ({\r\n  type: RETRIEVE_PAYMENT_INTENT_REQUEST,\r\n});\r\n\r\nexport const retrievePaymentIntentSuccess = payload => ({\r\n  type: RETRIEVE_PAYMENT_INTENT_SUCCESS,\r\n  payload,\r\n});\r\n\r\nexport const retrievePaymentIntentError = payload => ({\r\n  type: RETRIEVE_PAYMENT_INTENT_ERROR,\r\n  payload,\r\n  error: true,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const retrievePaymentIntent = params => dispatch => {\r\n  const { stripe, stripePaymentIntentClientSecret } = params;\r\n  dispatch(retrievePaymentIntentRequest());\r\n\r\n  return stripe\r\n    .retrievePaymentIntent(stripePaymentIntentClientSecret)\r\n    .then(response => {\r\n      if (response.error) {\r\n        return Promise.reject(response);\r\n      } else {\r\n        dispatch(retrievePaymentIntentSuccess(response.paymentIntent));\r\n        return response;\r\n      }\r\n    })\r\n    .catch(err => {\r\n      // Unwrap Stripe error.\r\n      const e = err.error || storableError(err);\r\n      dispatch(retrievePaymentIntentError(e));\r\n\r\n      // Log error\r\n      const { code, doc_url, message, payment_intent } = err.error || {};\r\n      const loggableError = err.error\r\n        ? {\r\n            code,\r\n            message,\r\n            doc_url,\r\n            paymentIntentStatus: payment_intent\r\n              ? payment_intent.status\r\n              : 'no payment_intent included',\r\n          }\r\n        : e;\r\n      log.error(loggableError, 'stripe-retrieve-payment-intent-failed', {\r\n        stripeMessage: loggableError.message,\r\n      });\r\n      throw err;\r\n    });\r\n};\r\n\r\nexport const confirmCardPayment = params => dispatch => {\r\n  // It's required to use the same instance of Stripe as where the card has been created\r\n  // so that's why Stripe needs to be passed here and we can't create a new instance.\r\n  const { stripe, paymentParams, stripePaymentIntentClientSecret } = params;\r\n  const transactionId = params.orderId;\r\n\r\n  dispatch(confirmCardPaymentRequest());\r\n\r\n  // When using default payment method paymentParams.payment_method is\r\n  // already set Marketplace API side, when request-payment transition is made\r\n  // so there's no need for paymentParams\r\n  const args = paymentParams\r\n    ? [stripePaymentIntentClientSecret, paymentParams]\r\n    : [stripePaymentIntentClientSecret];\r\n\r\n  const doConfirmCardPayment = () =>\r\n    stripe.confirmCardPayment(...args).then(response => {\r\n      if (response.error) {\r\n        return Promise.reject(response);\r\n      } else {\r\n        dispatch(confirmCardPaymentSuccess(response));\r\n        return { ...response, transactionId };\r\n      }\r\n    });\r\n\r\n  // First, check if the payment intent has already been confirmed and it just requires capture.\r\n  return stripe\r\n    .retrievePaymentIntent(stripePaymentIntentClientSecret)\r\n    .then(response => {\r\n      // Handle response.error or response.paymentIntent\r\n      if (response.error) {\r\n        return Promise.reject(response);\r\n      } else if (STRIPE_PI_HAS_PASSED_CONFIRM.includes(response?.paymentIntent?.status)) {\r\n        // Payment Intent has been confirmed already, move forward.\r\n        dispatch(confirmCardPaymentSuccess(response));\r\n        return { ...response, transactionId };\r\n      } else {\r\n        // If payment intent has not been confirmed yet, confirm it.\r\n        return doConfirmCardPayment();\r\n      }\r\n    })\r\n    .catch(err => {\r\n      // Unwrap Stripe error.\r\n      const e = err.error || storableError(err);\r\n      dispatch(confirmCardPaymentError(e));\r\n\r\n      // Log error\r\n      const containsPaymentIntent = err.error && err.error.payment_intent;\r\n      const { code, doc_url, message, payment_intent } = containsPaymentIntent ? err.error : {};\r\n      const loggableError = containsPaymentIntent\r\n        ? {\r\n            code,\r\n            message,\r\n            doc_url,\r\n            paymentIntentStatus: payment_intent.status,\r\n          }\r\n        : e;\r\n      log.error(loggableError, 'stripe-handle-card-payment-failed', {\r\n        stripeMessage: loggableError.message,\r\n      });\r\n      throw e;\r\n    });\r\n};\r\n\r\nexport const handleCardSetup = params => dispatch => {\r\n  // It's required to use the same instance of Stripe as where the card has been created\r\n  // so that's why Stripe needs to be passed here and we can't create a new instance.\r\n  const { stripe, card, setupIntentClientSecret, paymentParams } = params;\r\n\r\n  dispatch(handleCardSetupRequest());\r\n\r\n  return stripe\r\n    .handleCardSetup(setupIntentClientSecret, card, paymentParams)\r\n    .then(response => {\r\n      if (response.error) {\r\n        return Promise.reject(response);\r\n      } else {\r\n        dispatch(handleCardSetupSuccess(response));\r\n        return response;\r\n      }\r\n    })\r\n    .catch(err => {\r\n      // Unwrap Stripe error.\r\n      const e = err.error || storableError(err);\r\n      dispatch(handleCardSetupError(e));\r\n\r\n      // Log error\r\n      const containsSetupIntent = err.error && err.error.setup_intent;\r\n      const { code, doc_url, message, setup_intent } = containsSetupIntent ? err.error : {};\r\n      const loggableError = containsSetupIntent\r\n        ? {\r\n            code,\r\n            message,\r\n            doc_url,\r\n            paymentIntentStatus: setup_intent.status,\r\n          }\r\n        : e;\r\n      log.error(loggableError, 'stripe-handle-card-setup-failed', {\r\n        stripeMessage: loggableError.message,\r\n      });\r\n      throw e;\r\n    });\r\n};\r\n","// This file deals with Marketplace API which will create Stripe Custom Connect accounts\r\n// from given bank_account tokens.\r\nimport { storableError } from '../util/errors';\r\nimport * as log from '../util/log';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const STRIPE_ACCOUNT_CREATE_REQUEST = 'app/stripe/STRIPE_ACCOUNT_CREATE_REQUEST';\r\nexport const STRIPE_ACCOUNT_CREATE_SUCCESS = 'app/stripe/STRIPE_ACCOUNT_CREATE_SUCCESS';\r\nexport const STRIPE_ACCOUNT_CREATE_ERROR = 'app/stripe/STRIPE_ACCOUNT_CREATE_ERROR';\r\n\r\nexport const STRIPE_ACCOUNT_UPDATE_REQUEST = 'app/stripe/STRIPE_ACCOUNT_UPDATE_REQUEST';\r\nexport const STRIPE_ACCOUNT_UPDATE_SUCCESS = 'app/stripe/STRIPE_ACCOUNT_UPDATE_SUCCESS';\r\nexport const STRIPE_ACCOUNT_UPDATE_ERROR = 'app/stripe/STRIPE_ACCOUNT_UPDATE_ERROR';\r\n\r\nexport const STRIPE_ACCOUNT_FETCH_REQUEST = 'app/stripe/STRIPE_ACCOUNT_FETCH_REQUEST';\r\nexport const STRIPE_ACCOUNT_FETCH_SUCCESS = 'app/stripe/STRIPE_ACCOUNT_FETCH_SUCCESS';\r\nexport const STRIPE_ACCOUNT_FETCH_ERROR = 'app/stripe/STRIPE_ACCOUNT_FETCH_ERROR';\r\n\r\nexport const STRIPE_ACCOUNT_CLEAR_ERROR = 'app/stripe/STRIPE_ACCOUNT_CLEAR_ERROR';\r\n\r\nexport const GET_ACCOUNT_LINK_REQUEST = 'app/stripeConnectAccount.duck.js/GET_ACCOUNT_LINK_REQUEST';\r\nexport const GET_ACCOUNT_LINK_SUCCESS = 'app/stripeConnectAccount.duck.js/GET_ACCOUNT_LINK_SUCCESS';\r\nexport const GET_ACCOUNT_LINK_ERROR = 'app/stripeConnectAccount.duck.js/GET_ACCOUNT_LINK_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  createStripeAccountInProgress: false,\r\n  createStripeAccountError: null,\r\n  updateStripeAccountInProgress: false,\r\n  updateStripeAccountError: null,\r\n  fetchStripeAccountInProgress: false,\r\n  fetchStripeAccountError: null,\r\n  getAccountLinkInProgress: false,\r\n  getAccountLinkError: null,\r\n  stripeAccount: null,\r\n  stripeAccountFetched: false,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case STRIPE_ACCOUNT_CREATE_REQUEST:\r\n      return { ...state, createStripeAccountError: null, createStripeAccountInProgress: true };\r\n    case STRIPE_ACCOUNT_CREATE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        createStripeAccountInProgress: false,\r\n        stripeAccount: payload,\r\n        stripeAccountFetched: true,\r\n      };\r\n    case STRIPE_ACCOUNT_CREATE_ERROR:\r\n      console.error(payload);\r\n      return { ...state, createStripeAccountError: payload, createStripeAccountInProgress: false };\r\n\r\n    case STRIPE_ACCOUNT_UPDATE_REQUEST:\r\n      return { ...state, updateStripeAccountError: null, updateStripeAccountInProgress: true };\r\n    case STRIPE_ACCOUNT_UPDATE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        updateStripeAccountInProgress: false,\r\n        stripeAccount: payload,\r\n        stripeAccountFetched: true,\r\n      };\r\n    case STRIPE_ACCOUNT_UPDATE_ERROR:\r\n      console.error(payload);\r\n      return { ...state, updateStripeAccountError: payload, createStripeAccountInProgress: false };\r\n\r\n    case STRIPE_ACCOUNT_FETCH_REQUEST:\r\n      return { ...state, fetchStripeAccountError: null, fetchStripeAccountInProgress: true };\r\n    case STRIPE_ACCOUNT_FETCH_SUCCESS:\r\n      return {\r\n        ...state,\r\n        fetchStripeAccountInProgress: false,\r\n        stripeAccount: payload,\r\n        stripeAccountFetched: true,\r\n      };\r\n    case STRIPE_ACCOUNT_FETCH_ERROR:\r\n      console.error(payload);\r\n      return { ...state, fetchStripeAccountError: payload, fetchStripeAccountInProgress: false };\r\n\r\n    case STRIPE_ACCOUNT_CLEAR_ERROR:\r\n      return { ...initialState };\r\n\r\n    case GET_ACCOUNT_LINK_REQUEST:\r\n      return { ...state, getAccountLinkError: null, getAccountLinkInProgress: true };\r\n    case GET_ACCOUNT_LINK_ERROR:\r\n      console.error(payload);\r\n      return { ...state, getAccountLinkInProgress: false, getAccountLinkError: payload };\r\n    case GET_ACCOUNT_LINK_SUCCESS:\r\n      return { ...state, getAccountLinkInProgress: false };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const stripeAccountCreateRequest = () => ({ type: STRIPE_ACCOUNT_CREATE_REQUEST });\r\n\r\nexport const stripeAccountCreateSuccess = stripeAccount => ({\r\n  type: STRIPE_ACCOUNT_CREATE_SUCCESS,\r\n  payload: stripeAccount,\r\n});\r\n\r\nexport const stripeAccountCreateError = e => ({\r\n  type: STRIPE_ACCOUNT_CREATE_ERROR,\r\n  payload: e,\r\n  error: true,\r\n});\r\n\r\nexport const stripeAccountUpdateRequest = () => ({ type: STRIPE_ACCOUNT_UPDATE_REQUEST });\r\n\r\nexport const stripeAccountUpdateSuccess = stripeAccount => ({\r\n  type: STRIPE_ACCOUNT_UPDATE_SUCCESS,\r\n  payload: stripeAccount,\r\n});\r\n\r\nexport const stripeAccountUpdateError = e => ({\r\n  type: STRIPE_ACCOUNT_UPDATE_ERROR,\r\n  payload: e,\r\n  error: true,\r\n});\r\n\r\nexport const stripeAccountFetchRequest = () => ({ type: STRIPE_ACCOUNT_FETCH_REQUEST });\r\n\r\nexport const stripeAccountFetchSuccess = stripeAccount => ({\r\n  type: STRIPE_ACCOUNT_FETCH_SUCCESS,\r\n  payload: stripeAccount,\r\n});\r\n\r\nexport const stripeAccountFetchError = e => ({\r\n  type: STRIPE_ACCOUNT_FETCH_ERROR,\r\n  payload: e,\r\n  error: true,\r\n});\r\n\r\nexport const stripeAccountClearError = () => ({\r\n  type: STRIPE_ACCOUNT_CLEAR_ERROR,\r\n});\r\n\r\nexport const getAccountLinkRequest = () => ({\r\n  type: GET_ACCOUNT_LINK_REQUEST,\r\n});\r\nexport const getAccountLinkError = e => ({\r\n  type: GET_ACCOUNT_LINK_ERROR,\r\n  payload: e,\r\n  error: true,\r\n});\r\nexport const getAccountLinkSuccess = () => ({\r\n  type: GET_ACCOUNT_LINK_SUCCESS,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const createStripeAccount = params => (dispatch, getState, sdk) => {\r\n  if (typeof window === 'undefined' || !window.Stripe) {\r\n    throw new Error('Stripe must be loaded for submitting PayoutPreferences');\r\n  }\r\n  const {\r\n    country,\r\n    accountType,\r\n    bankAccountToken,\r\n    businessProfileMCC,\r\n    businessProfileURL,\r\n    stripePublishableKey,\r\n  } = params;\r\n  const stripe = window.Stripe(stripePublishableKey);\r\n\r\n  // Capabilities are a collection of settings that can be requested for each provider.\r\n  // What Capabilities are required determines what information Stripe requires to be\r\n  // collected from the providers.\r\n  // You can read more from here: https://stripe.com/docs/connect/capabilities-overview\r\n  // Note: with default processes, both 'card_payments' and 'transfers' are required.\r\n  const requestedCapabilities = ['card_payments', 'transfers'];\r\n\r\n  const accountInfo = {\r\n    business_type: accountType,\r\n    tos_shown_and_accepted: true,\r\n  };\r\n\r\n  dispatch(stripeAccountCreateRequest());\r\n\r\n  return stripe\r\n    .createToken('account', accountInfo)\r\n    .then(response => {\r\n      const accountToken = response.token.id;\r\n      return sdk.stripeAccount.create(\r\n        {\r\n          country,\r\n          accountToken,\r\n          bankAccountToken,\r\n          requestedCapabilities,\r\n          businessProfileMCC,\r\n          businessProfileURL,\r\n        },\r\n        { expand: true }\r\n      );\r\n    })\r\n    .then(response => {\r\n      const stripeAccount = response.data.data;\r\n      dispatch(stripeAccountCreateSuccess(stripeAccount));\r\n      return stripeAccount;\r\n    })\r\n    .catch(err => {\r\n      const e = storableError(err);\r\n      dispatch(stripeAccountCreateError(e));\r\n      const stripeMessage =\r\n        e.apiErrors && e.apiErrors.length > 0 && e.apiErrors[0].meta\r\n          ? e.apiErrors[0].meta.stripeMessage\r\n          : null;\r\n      log.error(err, 'create-stripe-account-failed', { stripeMessage });\r\n      throw e;\r\n    });\r\n};\r\n\r\n// This function is used for updating the bank account token\r\n// but could be expanded to other information as well.\r\n//\r\n// If the Stripe account has been created with account token,\r\n// you need to use account token also to update the account.\r\n// By default the account token will not be used.\r\n// See API reference for more information:\r\n// https://www.sharetribe.com/api-reference/?javascript#update-stripe-account\r\nexport const updateStripeAccount = params => (dispatch, getState, sdk) => {\r\n  const { bankAccountToken } = params;\r\n\r\n  dispatch(stripeAccountUpdateRequest());\r\n  return sdk.stripeAccount\r\n    .update(\r\n      { bankAccountToken, requestedCapabilities: ['card_payments', 'transfers'] },\r\n      { expand: true }\r\n    )\r\n    .then(response => {\r\n      const stripeAccount = response.data.data;\r\n      dispatch(stripeAccountUpdateSuccess(stripeAccount));\r\n      return stripeAccount;\r\n    })\r\n    .catch(err => {\r\n      const e = storableError(err);\r\n      dispatch(stripeAccountUpdateError(e));\r\n      const stripeMessage =\r\n        e.apiErrors && e.apiErrors.length > 0 && e.apiErrors[0].meta\r\n          ? e.apiErrors[0].meta.stripeMessage\r\n          : null;\r\n      log.error(err, 'update-stripe-account-failed', { stripeMessage });\r\n      throw e;\r\n    });\r\n};\r\n\r\nexport const fetchStripeAccount = params => (dispatch, getState, sdk) => {\r\n  dispatch(stripeAccountFetchRequest());\r\n\r\n  return sdk.stripeAccount\r\n    .fetch()\r\n    .then(response => {\r\n      const stripeAccount = response.data.data;\r\n      dispatch(stripeAccountFetchSuccess(stripeAccount));\r\n      return stripeAccount;\r\n    })\r\n    .catch(err => {\r\n      const e = storableError(err);\r\n      dispatch(stripeAccountFetchError(e));\r\n      const stripeMessage =\r\n        e.apiErrors && e.apiErrors.length > 0 && e.apiErrors[0].meta\r\n          ? e.apiErrors[0].meta.stripeMessage\r\n          : null;\r\n      log.error(err, 'fetch-stripe-account-failed', { stripeMessage });\r\n      throw e;\r\n    });\r\n};\r\n\r\nexport const getStripeConnectAccountLink = params => (dispatch, getState, sdk) => {\r\n  const { failureURL, successURL, type } = params;\r\n  dispatch(getAccountLinkRequest());\r\n\r\n  return sdk.stripeAccountLinks\r\n    .create({\r\n      failureURL,\r\n      successURL,\r\n      type,\r\n      collect: 'currently_due',\r\n    })\r\n    .then(response => {\r\n      // Return the account link\r\n      return response.data.data.attributes.url;\r\n    })\r\n    .catch(err => {\r\n      const e = storableError(err);\r\n      dispatch(getAccountLinkError(e));\r\n      const stripeMessage =\r\n        e.apiErrors && e.apiErrors.length > 0 && e.apiErrors[0].meta\r\n          ? e.apiErrors[0].meta.stripeMessage\r\n          : null;\r\n      log.error(err, 'get-stripe-account-link-failed', { stripeMessage });\r\n      throw e;\r\n    });\r\n};\r\n","// ================ Action types ================ //\r\n\r\nexport const DISABLE_SCROLLING = 'app/ui/DISABLE_SCROLLING';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst initialState = {\r\n  disableScrollRequests: [],\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case DISABLE_SCROLLING: {\r\n      const { componentId, disableScrolling } = payload;\r\n      const disableScrollRequests = state.disableScrollRequests;\r\n      const componentIdExists = disableScrollRequests.find(c => c.componentId === componentId);\r\n\r\n      if (componentIdExists) {\r\n        const disableScrollRequestArray = disableScrollRequests.map(c => {\r\n          return c.componentId === componentId ? { ...c, disableScrolling } : c;\r\n        });\r\n        return { ...state, disableScrollRequests: [...disableScrollRequestArray] };\r\n      }\r\n\r\n      const disableScrollRequestArray = [\r\n        ...disableScrollRequests,\r\n        { componentId, disableScrolling },\r\n      ];\r\n      return {\r\n        ...state,\r\n        disableScrollRequests: disableScrollRequestArray,\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const manageDisableScrolling = (componentId, disableScrolling) => ({\r\n  type: DISABLE_SCROLLING,\r\n  payload: { componentId, disableScrolling },\r\n});\r\n\r\n// ================ Selectors ================ //\r\n\r\nexport const isScrollingDisabled = state => {\r\n  const { disableScrollRequests } = state.ui;\r\n  return disableScrollRequests.some(r => r.disableScrolling);\r\n};\r\n","import { denormalisedResponseEntities, ensureOwnListing } from '../util/data';\r\nimport { storableError } from '../util/errors';\r\nimport { LISTING_STATE_DRAFT } from '../util/types';\r\nimport * as log from '../util/log';\r\nimport { getTransitionsNeedingProviderAttention } from '../transactions/transaction';\r\n\r\nimport { authInfo } from './auth.duck';\r\nimport { stripeAccountCreateSuccess } from './stripeConnectAccount.duck';\r\nimport { util as sdkUtil } from '../util/sdkLoader';\r\n\r\n// ================ Action types ================ //\r\n\r\nexport const CURRENT_USER_SHOW_REQUEST = 'app/user/CURRENT_USER_SHOW_REQUEST';\r\nexport const CURRENT_USER_SHOW_SUCCESS = 'app/user/CURRENT_USER_SHOW_SUCCESS';\r\nexport const CURRENT_USER_SHOW_ERROR = 'app/user/CURRENT_USER_SHOW_ERROR';\r\n\r\nexport const CLEAR_CURRENT_USER = 'app/user/CLEAR_CURRENT_USER';\r\n\r\nexport const FETCH_CURRENT_USER_HAS_LISTINGS_REQUEST =\r\n  'app/user/FETCH_CURRENT_USER_HAS_LISTINGS_REQUEST';\r\nexport const FETCH_CURRENT_USER_HAS_LISTINGS_SUCCESS =\r\n  'app/user/FETCH_CURRENT_USER_HAS_LISTINGS_SUCCESS';\r\nexport const FETCH_CURRENT_USER_HAS_LISTINGS_ERROR =\r\n  'app/user/FETCH_CURRENT_USER_HAS_LISTINGS_ERROR';\r\n\r\nexport const FETCH_CURRENT_USER_NOTIFICATIONS_REQUEST =\r\n  'app/user/FETCH_CURRENT_USER_NOTIFICATIONS_REQUEST';\r\nexport const FETCH_CURRENT_USER_NOTIFICATIONS_SUCCESS =\r\n  'app/user/FETCH_CURRENT_USER_NOTIFICATIONS_SUCCESS';\r\nexport const FETCH_CURRENT_USER_NOTIFICATIONS_ERROR =\r\n  'app/user/FETCH_CURRENT_USER_NOTIFICATIONS_ERROR';\r\n\r\nexport const FETCH_CURRENT_USER_HAS_ORDERS_REQUEST =\r\n  'app/user/FETCH_CURRENT_USER_HAS_ORDERS_REQUEST';\r\nexport const FETCH_CURRENT_USER_HAS_ORDERS_SUCCESS =\r\n  'app/user/FETCH_CURRENT_USER_HAS_ORDERS_SUCCESS';\r\nexport const FETCH_CURRENT_USER_HAS_ORDERS_ERROR = 'app/user/FETCH_CURRENT_USER_HAS_ORDERS_ERROR';\r\n\r\nexport const SEND_VERIFICATION_EMAIL_REQUEST = 'app/user/SEND_VERIFICATION_EMAIL_REQUEST';\r\nexport const SEND_VERIFICATION_EMAIL_SUCCESS = 'app/user/SEND_VERIFICATION_EMAIL_SUCCESS';\r\nexport const SEND_VERIFICATION_EMAIL_ERROR = 'app/user/SEND_VERIFICATION_EMAIL_ERROR';\r\n\r\n// ================ Reducer ================ //\r\n\r\nconst mergeCurrentUser = (oldCurrentUser, newCurrentUser) => {\r\n  const { id: oId, type: oType, attributes: oAttr, ...oldRelationships } = oldCurrentUser || {};\r\n  const { id, type, attributes, ...relationships } = newCurrentUser || {};\r\n\r\n  // Passing null will remove currentUser entity.\r\n  // Only relationships are merged.\r\n  // TODO figure out if sparse fields handling needs a better handling.\r\n  return newCurrentUser === null\r\n    ? null\r\n    : oldCurrentUser === null\r\n    ? newCurrentUser\r\n    : { id, type, attributes, ...oldRelationships, ...relationships };\r\n};\r\n\r\nconst initialState = {\r\n  currentUser: null,\r\n  currentUserShowError: null,\r\n  currentUserHasListings: false,\r\n  currentUserHasListingsError: null,\r\n  currentUserNotificationCount: 0,\r\n  currentUserNotificationCountError: null,\r\n  currentUserHasOrders: null, // This is not fetched unless unverified emails exist\r\n  currentUserHasOrdersError: null,\r\n  sendVerificationEmailInProgress: false,\r\n  sendVerificationEmailError: null,\r\n};\r\n\r\nexport default function reducer(state = initialState, action = {}) {\r\n  const { type, payload } = action;\r\n  switch (type) {\r\n    case CURRENT_USER_SHOW_REQUEST:\r\n      return { ...state, currentUserShowError: null };\r\n    case CURRENT_USER_SHOW_SUCCESS:\r\n      return { ...state, currentUser: mergeCurrentUser(state.currentUser, payload) };\r\n    case CURRENT_USER_SHOW_ERROR:\r\n      // eslint-disable-next-line no-console\r\n      console.error(payload);\r\n      return { ...state, currentUserShowError: payload };\r\n\r\n    case CLEAR_CURRENT_USER:\r\n      return {\r\n        ...state,\r\n        currentUser: null,\r\n        currentUserShowError: null,\r\n        currentUserHasListings: false,\r\n        currentUserHasListingsError: null,\r\n        currentUserNotificationCount: 0,\r\n        currentUserNotificationCountError: null,\r\n      };\r\n\r\n    case FETCH_CURRENT_USER_HAS_LISTINGS_REQUEST:\r\n      return { ...state, currentUserHasListingsError: null };\r\n    case FETCH_CURRENT_USER_HAS_LISTINGS_SUCCESS:\r\n      return { ...state, currentUserHasListings: payload.hasListings };\r\n    case FETCH_CURRENT_USER_HAS_LISTINGS_ERROR:\r\n      console.error(payload); // eslint-disable-line\r\n      return { ...state, currentUserHasListingsError: payload };\r\n\r\n    case FETCH_CURRENT_USER_NOTIFICATIONS_REQUEST:\r\n      return { ...state, currentUserNotificationCountError: null };\r\n    case FETCH_CURRENT_USER_NOTIFICATIONS_SUCCESS:\r\n      return { ...state, currentUserNotificationCount: payload.transactions.length };\r\n    case FETCH_CURRENT_USER_NOTIFICATIONS_ERROR:\r\n      console.error(payload); // eslint-disable-line\r\n      return { ...state, currentUserNotificationCountError: payload };\r\n\r\n    case FETCH_CURRENT_USER_HAS_ORDERS_REQUEST:\r\n      return { ...state, currentUserHasOrdersError: null };\r\n    case FETCH_CURRENT_USER_HAS_ORDERS_SUCCESS:\r\n      return { ...state, currentUserHasOrders: payload.hasOrders };\r\n    case FETCH_CURRENT_USER_HAS_ORDERS_ERROR:\r\n      console.error(payload); // eslint-disable-line\r\n      return { ...state, currentUserHasOrdersError: payload };\r\n\r\n    case SEND_VERIFICATION_EMAIL_REQUEST:\r\n      return {\r\n        ...state,\r\n        sendVerificationEmailInProgress: true,\r\n        sendVerificationEmailError: null,\r\n      };\r\n    case SEND_VERIFICATION_EMAIL_SUCCESS:\r\n      return {\r\n        ...state,\r\n        sendVerificationEmailInProgress: false,\r\n      };\r\n    case SEND_VERIFICATION_EMAIL_ERROR:\r\n      return {\r\n        ...state,\r\n        sendVerificationEmailInProgress: false,\r\n        sendVerificationEmailError: payload,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// ================ Selectors ================ //\r\n\r\nexport const hasCurrentUserErrors = state => {\r\n  const { user } = state;\r\n  return (\r\n    user.currentUserShowError ||\r\n    user.currentUserHasListingsError ||\r\n    user.currentUserNotificationCountError ||\r\n    user.currentUserHasOrdersError\r\n  );\r\n};\r\n\r\nexport const verificationSendingInProgress = state => {\r\n  return state.user.sendVerificationEmailInProgress;\r\n};\r\n\r\n// ================ Action creators ================ //\r\n\r\nexport const currentUserShowRequest = () => ({ type: CURRENT_USER_SHOW_REQUEST });\r\n\r\nexport const currentUserShowSuccess = user => ({\r\n  type: CURRENT_USER_SHOW_SUCCESS,\r\n  payload: user,\r\n});\r\n\r\nexport const currentUserShowError = e => ({\r\n  type: CURRENT_USER_SHOW_ERROR,\r\n  payload: e,\r\n  error: true,\r\n});\r\n\r\nexport const clearCurrentUser = () => ({ type: CLEAR_CURRENT_USER });\r\n\r\nconst fetchCurrentUserHasListingsRequest = () => ({\r\n  type: FETCH_CURRENT_USER_HAS_LISTINGS_REQUEST,\r\n});\r\n\r\nexport const fetchCurrentUserHasListingsSuccess = hasListings => ({\r\n  type: FETCH_CURRENT_USER_HAS_LISTINGS_SUCCESS,\r\n  payload: { hasListings },\r\n});\r\n\r\nconst fetchCurrentUserHasListingsError = e => ({\r\n  type: FETCH_CURRENT_USER_HAS_LISTINGS_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nconst fetchCurrentUserNotificationsRequest = () => ({\r\n  type: FETCH_CURRENT_USER_NOTIFICATIONS_REQUEST,\r\n});\r\n\r\nexport const fetchCurrentUserNotificationsSuccess = transactions => ({\r\n  type: FETCH_CURRENT_USER_NOTIFICATIONS_SUCCESS,\r\n  payload: { transactions },\r\n});\r\n\r\nconst fetchCurrentUserNotificationsError = e => ({\r\n  type: FETCH_CURRENT_USER_NOTIFICATIONS_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nconst fetchCurrentUserHasOrdersRequest = () => ({\r\n  type: FETCH_CURRENT_USER_HAS_ORDERS_REQUEST,\r\n});\r\n\r\nexport const fetchCurrentUserHasOrdersSuccess = hasOrders => ({\r\n  type: FETCH_CURRENT_USER_HAS_ORDERS_SUCCESS,\r\n  payload: { hasOrders },\r\n});\r\n\r\nconst fetchCurrentUserHasOrdersError = e => ({\r\n  type: FETCH_CURRENT_USER_HAS_ORDERS_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\nexport const sendVerificationEmailRequest = () => ({\r\n  type: SEND_VERIFICATION_EMAIL_REQUEST,\r\n});\r\n\r\nexport const sendVerificationEmailSuccess = () => ({\r\n  type: SEND_VERIFICATION_EMAIL_SUCCESS,\r\n});\r\n\r\nexport const sendVerificationEmailError = e => ({\r\n  type: SEND_VERIFICATION_EMAIL_ERROR,\r\n  error: true,\r\n  payload: e,\r\n});\r\n\r\n// ================ Thunks ================ //\r\n\r\nexport const fetchCurrentUserHasListings = () => (dispatch, getState, sdk) => {\r\n  dispatch(fetchCurrentUserHasListingsRequest());\r\n  const { currentUser } = getState().user;\r\n\r\n  if (!currentUser) {\r\n    dispatch(fetchCurrentUserHasListingsSuccess(false));\r\n    return Promise.resolve(null);\r\n  }\r\n\r\n  const params = {\r\n    // Since we are only interested in if the user has\r\n    // listings, we only need at most one result.\r\n    page: 1,\r\n    perPage: 1,\r\n  };\r\n\r\n  return sdk.ownListings\r\n    .query(params)\r\n    .then(response => {\r\n      const hasListings = response.data.data && response.data.data.length > 0;\r\n\r\n      const hasPublishedListings =\r\n        hasListings &&\r\n        ensureOwnListing(response.data.data[0]).attributes.state !== LISTING_STATE_DRAFT;\r\n      dispatch(fetchCurrentUserHasListingsSuccess(!!hasPublishedListings));\r\n    })\r\n    .catch(e => dispatch(fetchCurrentUserHasListingsError(storableError(e))));\r\n};\r\n\r\nexport const fetchCurrentUserHasOrders = () => (dispatch, getState, sdk) => {\r\n  dispatch(fetchCurrentUserHasOrdersRequest());\r\n\r\n  if (!getState().user.currentUser) {\r\n    dispatch(fetchCurrentUserHasOrdersSuccess(false));\r\n    return Promise.resolve(null);\r\n  }\r\n\r\n  const params = {\r\n    only: 'order',\r\n    page: 1,\r\n    perPage: 1,\r\n  };\r\n\r\n  return sdk.transactions\r\n    .query(params)\r\n    .then(response => {\r\n      const hasOrders = response.data.data && response.data.data.length > 0;\r\n      dispatch(fetchCurrentUserHasOrdersSuccess(!!hasOrders));\r\n    })\r\n    .catch(e => dispatch(fetchCurrentUserHasOrdersError(storableError(e))));\r\n};\r\n\r\n// Notificaiton page size is max (100 items on page)\r\nconst NOTIFICATION_PAGE_SIZE = 100;\r\n\r\nexport const fetchCurrentUserNotifications = () => (dispatch, getState, sdk) => {\r\n  const transitionsNeedingAttention = getTransitionsNeedingProviderAttention();\r\n  if (transitionsNeedingAttention.length === 0) {\r\n    // Don't update state, if there's no need to draw user's attention after last transitions.\r\n    return;\r\n  }\r\n\r\n  const apiQueryParams = {\r\n    only: 'sale',\r\n    last_transitions: transitionsNeedingAttention,\r\n    page: 1,\r\n    perPage: NOTIFICATION_PAGE_SIZE,\r\n  };\r\n\r\n  dispatch(fetchCurrentUserNotificationsRequest());\r\n  sdk.transactions\r\n    .query(apiQueryParams)\r\n    .then(response => {\r\n      const transactions = response.data.data;\r\n      dispatch(fetchCurrentUserNotificationsSuccess(transactions));\r\n    })\r\n    .catch(e => dispatch(fetchCurrentUserNotificationsError(storableError(e))));\r\n};\r\n\r\nexport const fetchCurrentUser = (params = null) => (dispatch, getState, sdk) => {\r\n  dispatch(currentUserShowRequest());\r\n  const { isAuthenticated } = getState().auth;\r\n\r\n  if (!isAuthenticated) {\r\n    // Make sure current user is null\r\n    dispatch(currentUserShowSuccess(null));\r\n    return Promise.resolve({});\r\n  }\r\n\r\n  const parameters = params || {\r\n    include: ['profileImage', 'stripeAccount'],\r\n    'fields.image': [\r\n      'variants.square-small',\r\n      'variants.square-small2x',\r\n      'variants.square-xsmall',\r\n      'variants.square-xsmall2x',\r\n    ],\r\n    'imageVariant.square-xsmall': sdkUtil.objectQueryString({\r\n      w: 40,\r\n      h: 40,\r\n      fit: 'crop',\r\n    }),\r\n    'imageVariant.square-xsmall2x': sdkUtil.objectQueryString({\r\n      w: 80,\r\n      h: 80,\r\n      fit: 'crop',\r\n    }),\r\n  };\r\n\r\n  return sdk.currentUser\r\n    .show(parameters)\r\n    .then(response => {\r\n      const entities = denormalisedResponseEntities(response);\r\n      if (entities.length !== 1) {\r\n        throw new Error('Expected a resource in the sdk.currentUser.show response');\r\n      }\r\n      const currentUser = entities[0];\r\n\r\n      // Save stripeAccount to store.stripe.stripeAccount if it exists\r\n      if (currentUser.stripeAccount) {\r\n        dispatch(stripeAccountCreateSuccess(currentUser.stripeAccount));\r\n      }\r\n\r\n      // set current user id to the logger\r\n      log.setUserId(currentUser.id.uuid);\r\n      dispatch(currentUserShowSuccess(currentUser));\r\n      return currentUser;\r\n    })\r\n    .then(currentUser => {\r\n      dispatch(fetchCurrentUserHasListings());\r\n      dispatch(fetchCurrentUserNotifications());\r\n      if (!currentUser.attributes.emailVerified) {\r\n        dispatch(fetchCurrentUserHasOrders());\r\n      }\r\n\r\n      // Make sure auth info is up to date\r\n      dispatch(authInfo());\r\n    })\r\n    .catch(e => {\r\n      // Make sure auth info is up to date\r\n      dispatch(authInfo());\r\n      log.error(e, 'fetch-current-user-failed');\r\n      dispatch(currentUserShowError(storableError(e)));\r\n    });\r\n};\r\n\r\nexport const sendVerificationEmail = () => (dispatch, getState, sdk) => {\r\n  if (verificationSendingInProgress(getState())) {\r\n    return Promise.reject(new Error('Verification email sending already in progress'));\r\n  }\r\n  dispatch(sendVerificationEmailRequest());\r\n  return sdk.currentUser\r\n    .sendVerificationEmail()\r\n    .then(() => dispatch(sendVerificationEmailSuccess()))\r\n    .catch(e => dispatch(sendVerificationEmailError(storableError(e))));\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.delete-all.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.every.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.filter.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.find.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.find-key.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.from.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.group-by.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.includes.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.key-by.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.key-of.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.map-keys.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.map-values.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.merge.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.of.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.reduce.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.some.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.map.update.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/web.dom-collections.iterator.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.add-all.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.delete-all.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.difference.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.every.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.filter.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.find.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.from.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.intersection.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.is-disjoint-from.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.is-subset-of.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.is-superset-of.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.join.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.map.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.of.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.reduce.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.some.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.symmetric-difference.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"core-js/modules/esnext.set.union.js\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"raf/polyfill\");","export class LoggingAnalyticsHandler {\r\n  trackPageView(url) {\r\n    console.log('Analytics page view:', url);\r\n  }\r\n}\r\n\r\n// Google Analytics 4 (GA4) using gtag.js script, which is included in util/includeScripts.js\r\nexport class GoogleAnalyticsHandler {\r\n  trackPageView(canonicalPath, previousPath) {\r\n    // GA4 property. Manually send page_view events\r\n    // https://developers.google.com/analytics/devguides/collection/gtagjs/single-page-applications\r\n    // Note 1: You should turn \"Enhanced measurement\" off.\r\n    //         It attaches own listeners to elements and that breaks in-app navigation.\r\n    // Note 2: If previousPath is null (just after page load), gtag script sends page_view event automatically.\r\n    //         Only in-app navigation needs to be sent manually from SPA.\r\n    // Note 3: Timeout is needed because gtag script picks up <title>,\r\n    //         and location change event happens before initial rendering.\r\n    if (previousPath && window.gtag) {\r\n      window.setTimeout(() => {\r\n        window.gtag('event', 'page_view', {\r\n          page_path: canonicalPath,\r\n        });\r\n      }, 300);\r\n    }\r\n  }\r\n}\r\n","/**\r\n * This is the main entrypoint file for the application.\r\n *\r\n * When loaded in the client side, the application is rendered in the\r\n * #root element.\r\n *\r\n * When the bundle created from this file is imported in the server\r\n * side, the exported `renderApp` function can be used for server side\r\n * rendering.\r\n *\r\n * Note that this file is required for the build process.\r\n */\r\n\r\n// React 16 depends on the collection types Map and Set, as well as requestAnimationFrame.\r\n// https://reactjs.org/docs/javascript-environment-requirements.html\r\nimport 'core-js/features/map';\r\nimport 'core-js/features/set';\r\nimport 'raf/polyfill';\r\n\r\n// Dependency libs\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { loadableReady } from '@loadable/component';\r\n\r\n// Import default styles before other CSS-related modules are imported\r\n// This ensures that the styles in marketplaceDefaults.css are included\r\n// as first ones in the final build CSS build file.\r\nimport './styles/marketplaceDefaults.css';\r\n\r\n// Configs and store setup\r\nimport appSettings from './config/settings';\r\nimport defaultConfig from './config/configDefault';\r\nimport { LoggingAnalyticsHandler, GoogleAnalyticsHandler } from './analytics/handlers';\r\nimport configureStore from './store';\r\n\r\n// Utils\r\nimport { createInstance, types as sdkTypes } from './util/sdkLoader';\r\nimport { mergeConfig } from './util/configHelpers';\r\nimport { matchPathname } from './util/routes';\r\nimport * as apiUtils from './util/api';\r\nimport * as log from './util/log';\r\n\r\n// Import relevant global duck files\r\nimport { authInfo } from './ducks/auth.duck';\r\nimport { fetchAppAssets } from './ducks/hostedAssets.duck';\r\nimport { fetchCurrentUser } from './ducks/user.duck';\r\n\r\n// Route config\r\nimport routeConfiguration from './routing/routeConfiguration';\r\n// App it self\r\nimport { ClientApp, renderApp } from './app';\r\n\r\nconst render = (store, shouldHydrate) => {\r\n  // If the server already loaded the auth information, render the app\r\n  // immediately. Otherwise wait for the flag to be loaded and render\r\n  // when auth information is present.\r\n  const state = store.getState();\r\n  const cdnAssetsVersion = state.hostedAssets.version;\r\n  const authInfoLoaded = state.auth.authInfoLoaded;\r\n  const info = authInfoLoaded ? Promise.resolve({}) : store.dispatch(authInfo());\r\n  info\r\n    .then(() => {\r\n      store.dispatch(fetchCurrentUser());\r\n      // Ensure that Loadable Components is ready\r\n      // and fetch hosted assets in parallel before initializing the ClientApp\r\n      return Promise.all([\r\n        loadableReady(),\r\n        store.dispatch(fetchAppAssets(defaultConfig.appCdnAssets, cdnAssetsVersion)),\r\n      ]);\r\n    })\r\n    .then(([_, fetchedAppAssets]) => {\r\n      const { translations: translationsRaw, ...rest } = fetchedAppAssets || {};\r\n      // We'll handle translations as a separate data.\r\n      // It's given to React Intl instead of pushing to config Context\r\n      const translations = translationsRaw?.data || {};\r\n\r\n      // Rest of the assets are considered as hosted configs\r\n      const configEntries = Object.entries(rest);\r\n      const hostedConfig = configEntries.reduce((collectedData, [name, content]) => {\r\n        return { ...collectedData, [name]: content.data || {} };\r\n      }, {});\r\n\r\n      if (shouldHydrate) {\r\n        ReactDOM.hydrate(\r\n          <ClientApp store={store} hostedTranslations={translations} hostedConfig={hostedConfig} />,\r\n          document.getElementById('root')\r\n        );\r\n      } else {\r\n        ReactDOM.render(\r\n          <ClientApp store={store} hostedTranslations={translations} hostedConfig={hostedConfig} />,\r\n          document.getElementById('root')\r\n        );\r\n      }\r\n    })\r\n    .catch(e => {\r\n      log.error(e, 'browser-side-render-failed');\r\n    });\r\n};\r\n\r\nconst setupAnalyticsHandlers = googleAnalyticsId => {\r\n  let handlers = [];\r\n\r\n  // Log analytics page views and events in dev mode\r\n  if (appSettings.dev) {\r\n    handlers.push(new LoggingAnalyticsHandler());\r\n  }\r\n\r\n  // Add Google Analytics 4 (GA4) handler if tracker ID is found\r\n  if (googleAnalyticsId) {\r\n    if (googleAnalyticsId.indexOf('G-') !== 0) {\r\n      console.warn(\r\n        'Google Analytics 4 (GA4) should have measurement id that starts with \"G-\" prefix'\r\n      );\r\n    } else {\r\n      handlers.push(new GoogleAnalyticsHandler());\r\n    }\r\n  }\r\n\r\n  return handlers;\r\n};\r\n\r\n// If we're in a browser already, render the client application.\r\nif (typeof window !== 'undefined') {\r\n  // set up logger with Sentry DSN client key and environment\r\n  log.setup();\r\n\r\n  const baseUrl = appSettings.sdk.baseUrl ? { baseUrl: appSettings.sdk.baseUrl } : {};\r\n  const assetCdnBaseUrl = appSettings.sdk.assetCdnBaseUrl\r\n    ? { assetCdnBaseUrl: appSettings.sdk.assetCdnBaseUrl }\r\n    : {};\r\n\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  const preloadedState = window.__PRELOADED_STATE__ || '{}';\r\n  const initialState = JSON.parse(preloadedState, sdkTypes.reviver);\r\n  const sdk = createInstance({\r\n    transitVerbose: appSettings.sdk.transitVerbose,\r\n    clientId: appSettings.sdk.clientId,\r\n    secure: appSettings.usingSSL,\r\n    typeHandlers: apiUtils.typeHandlers,\r\n    ...baseUrl,\r\n    ...assetCdnBaseUrl,\r\n  });\r\n\r\n  // Note: on localhost:3000, you need to use environment variable.\r\n  const googleAnalyticsIdFromSSR = initialState?.hostedAssets?.googleAnalyticsId;\r\n  const googleAnalyticsId = googleAnalyticsIdFromSSR || process.env.REACT_APP_GOOGLE_ANALYTICS_ID;\r\n  const analyticsHandlers = setupAnalyticsHandlers(googleAnalyticsId);\r\n  const store = configureStore(initialState, sdk, analyticsHandlers);\r\n\r\n  require('./util/polyfills');\r\n  render(store, !!window.__PRELOADED_STATE__);\r\n\r\n  if (appSettings.dev) {\r\n    // Expose stuff for the browser REPL\r\n    window.app = {\r\n      appSettings,\r\n      defaultConfig,\r\n      sdk,\r\n      sdkTypes,\r\n      store,\r\n    };\r\n  }\r\n}\r\n\r\n// Show warning if CSP is not enabled\r\nconst CSP = process.env.REACT_APP_CSP;\r\nconst cspEnabled = CSP === 'block' || CSP === 'report';\r\n\r\nif (CSP === 'report' && process.env.REACT_APP_ENV === 'production') {\r\n  console.warn(\r\n    'Your production environment should use CSP with \"block\" mode. Read more from: https://www.sharetribe.com/docs/ftw-security/how-to-set-up-csp-for-ftw/'\r\n  );\r\n} else if (!cspEnabled) {\r\n  console.warn(\r\n    \"CSP is currently not enabled! You should add an environment variable REACT_APP_CSP with the value 'report' or 'block'. Read more from: https://www.sharetribe.com/docs/ftw-security/how-to-set-up-csp-for-ftw/\"\r\n  );\r\n}\r\n\r\n// Export the function for server side rendering.\r\nexport default renderApp;\r\n\r\n// exporting matchPathname and configureStore for server side rendering.\r\n// matchPathname helps to figure out which route is called and if it has preloading needs\r\n// configureStore is used for creating initial store state for Redux after preloading\r\nexport {\r\n  matchPathname,\r\n  configureStore,\r\n  routeConfiguration,\r\n  defaultConfig,\r\n  mergeConfig,\r\n  fetchAppAssets,\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LoadableComponentErrorBoundary_root__8npxo\",\"topbar\":\"LoadableComponentErrorBoundary_topbar__gKJ0o\",\"logoMobile\":\"LoadableComponentErrorBoundary_logoMobile__xJbR8\",\"logoDesktop\":\"LoadableComponentErrorBoundary_logoDesktop__5OEVt\",\"content\":\"LoadableComponentErrorBoundary_content__3m4ZJ\",\"number\":\"LoadableComponentErrorBoundary_number__lBUiS marketplaceHeroTitleFontStyles\",\"heading\":\"LoadableComponentErrorBoundary_heading__whQQo marketplaceModalTitleStyles\",\"description\":\"LoadableComponentErrorBoundary_description__R2Dsu\"};","import React from 'react';\r\nimport { FormattedMessage } from '../../util/reactIntl';\r\nimport { pathByRouteName } from '../../util/routes';\r\nimport { useRouteConfiguration } from '../../context/routeConfigurationContext';\r\n\r\nimport { InlineTextButton, Logo, Heading, LayoutSingleColumn } from '../../components';\r\n\r\nimport css from './LoadableComponentErrorBoundary.module.css';\r\n\r\nexport const LoadableComponentErrorBoundaryPage = () => {\r\n  const routeConfiguration = useRouteConfiguration();\r\n  const landingPagePath = pathByRouteName('LandingPage', routeConfiguration);\r\n  const handleOnClick = () => {\r\n    if (typeof window !== 'undefined') {\r\n      window.location = landingPagePath;\r\n    }\r\n  };\r\n\r\n  const landingPageLink = (\r\n    <InlineTextButton onClick={handleOnClick}>\r\n      <FormattedMessage id=\"LoadableComponentErrorBoundaryPage.landingPageLink\" />\r\n    </InlineTextButton>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <LayoutSingleColumn\r\n        topbar={\r\n          <div className={css.topbar}>\r\n            <InlineTextButton onClick={handleOnClick}>\r\n              <Logo className={css.logoMobile} layout=\"mobile\" />\r\n              <Logo className={css.logoDesktop} layout=\"desktop\" />\r\n            </InlineTextButton>\r\n          </div>\r\n        }\r\n        footer={null}\r\n      >\r\n        <div className={css.root}>\r\n          <div className={css.content}>\r\n            <div className={css.number}>404</div>\r\n            <Heading as=\"h1\" rootClassName={css.heading}>\r\n              <FormattedMessage id=\"LoadableComponentErrorBoundaryPage.heading\" />\r\n            </Heading>\r\n            <p className={css.description}>\r\n              <FormattedMessage\r\n                id=\"LoadableComponentErrorBoundaryPage.description\"\r\n                values={{ link: landingPageLink }}\r\n              />\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </LayoutSingleColumn>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Component } from 'react';\r\n\r\nimport appSettings from '../../config/settings';\r\n\r\nimport { LoadableComponentErrorBoundaryPage } from './LoadableComponentErrorBoundaryPage';\r\n\r\n// Use ErrorBoyndary to catch ChunkLoadError\r\n// https://reactjs.org/docs/error-boundaries.html\r\nclass LoadableComponentErrorBoundary extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { error: null };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // Update state so the next render will show the fallback UI.\r\n    return { error };\r\n  }\r\n\r\n  render() {\r\n    if (this.state.error && this.state.error.name === 'ChunkLoadError') {\r\n      return <LoadableComponentErrorBoundaryPage />;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\n// LoadableComponentErrorBoundary helps in situations\r\n// where production build changes in the server and\r\n// long-living client app tries to fetch code chunks that don't exist anymore.\r\n// Note: in development mode with Hot Module Reloading (HMR) in use, this causes error loops.\r\nconst UseLoadableErrorBoundaryOnlyInProdutionMode = props => {\r\n  const { children } = props;\r\n  return appSettings.dev ? (\r\n    children\r\n  ) : (\r\n    <LoadableComponentErrorBoundary>{children}</LoadableComponentErrorBoundary>\r\n  );\r\n};\r\nexport default UseLoadableErrorBoundaryOnlyInProdutionMode;\r\n","import React, { Component } from 'react';\r\nimport { arrayOf, bool, object, func, shape, string } from 'prop-types';\r\nimport { compose } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport { Switch, Route, withRouter } from 'react-router-dom';\r\n\r\nimport { useRouteConfiguration } from '../context/routeConfigurationContext';\r\nimport { propTypes } from '../util/types';\r\nimport * as log from '../util/log';\r\nimport { canonicalRoutePath } from '../util/routes';\r\nimport { useConfiguration } from '../context/configurationContext';\r\n\r\nimport { locationChanged } from '../ducks/routing.duck';\r\n\r\nimport { NamedRedirect } from '../components';\r\nimport NotFoundPage from '../containers/NotFoundPage/NotFoundPage';\r\n\r\nimport LoadableComponentErrorBoundary from './LoadableComponentErrorBoundary/LoadableComponentErrorBoundary';\r\n\r\nconst canShowComponent = props => {\r\n  const { isAuthenticated, route } = props;\r\n  const { auth } = route;\r\n  return !auth || isAuthenticated;\r\n};\r\n\r\nconst callLoadData = props => {\r\n  const { match, location, route, dispatch, logoutInProgress, config } = props;\r\n  const { loadData, name } = route;\r\n  const shouldLoadData =\r\n    typeof loadData === 'function' && canShowComponent(props) && !logoutInProgress;\r\n\r\n  if (shouldLoadData) {\r\n    dispatch(loadData(match.params, location.search, config))\r\n      .then(() => {\r\n        if (props.logLoadDataCalls) {\r\n          // This gives good input for debugging issues on live environments, but with test it's not needed.\r\n          console.log(`loadData success for ${name} route`);\r\n        }\r\n      })\r\n      .catch(e => {\r\n        log.error(e, 'load-data-failed', { routeName: name });\r\n      });\r\n  }\r\n};\r\n\r\nconst setPageScrollPosition = (location, delayed) => {\r\n  if (!location.hash) {\r\n    // No hash, scroll to top\r\n    window.scroll({\r\n      top: 0,\r\n      left: 0,\r\n    });\r\n  } else {\r\n    const el = document.querySelector(location.hash);\r\n    if (el) {\r\n      // Found element from the current page with the given fragment identifier,\r\n      // scrolling to that element.\r\n      //\r\n      // NOTE: This only works on in-app navigation within the same page.\r\n      // If smooth scrolling is needed between different pages, one needs to wait\r\n      //   1. loadData fetch and\r\n      //   2. code-chunk fetch\r\n      // before making el.scrollIntoView call.\r\n\r\n      el.scrollIntoView({\r\n        block: 'start',\r\n        behavior: 'smooth',\r\n      });\r\n    } else {\r\n      // A naive attempt to make a delayed call to scrollIntoView\r\n      // Note: 300 milliseconds might not be enough, but adding too much delay\r\n      // might affect user initiated scrolling.\r\n      delayed = window.setTimeout(() => {\r\n        const reTry = document.querySelector(location.hash);\r\n        reTry.scrollIntoView({\r\n          block: 'start',\r\n          behavior: 'smooth',\r\n        });\r\n      }, 300);\r\n    }\r\n  }\r\n};\r\n\r\nconst handleLocationChanged = (dispatch, location, routeConfiguration, delayed) => {\r\n  setPageScrollPosition(location, delayed);\r\n  const path = canonicalRoutePath(routeConfiguration, location);\r\n  dispatch(locationChanged(location, path));\r\n};\r\n\r\n/**\r\n * RouteComponentRenderer handles loadData calls on client-side.\r\n * It also checks authentication and redirects unauthenticated users\r\n * away from routes that are for authenticated users only\r\n * (aka \"auth: true\" is set in routeConfiguration.js)\r\n *\r\n * This component is a container: it needs to be connected to Redux.\r\n */\r\nclass RouteComponentRenderer extends Component {\r\n  componentDidMount() {\r\n    const { dispatch, location, routeConfiguration } = this.props;\r\n    this.delayed = null;\r\n    // Calling loadData on initial rendering (on client side).\r\n    callLoadData(this.props);\r\n    handleLocationChanged(dispatch, location, routeConfiguration, this.delayed);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { dispatch, location, routeConfiguration } = this.props;\r\n    // Call for handleLocationChanged affects store/state\r\n    // and it generates an unnecessary update.\r\n    if (prevProps.location !== this.props.location) {\r\n      // Calling loadData after initial rendering (on client side).\r\n      // This makes it possible to use loadData as default client side data loading technique.\r\n      // However it is better to fetch data before location change to avoid \"Loading data\" state.\r\n      callLoadData(this.props);\r\n      handleLocationChanged(dispatch, location, routeConfiguration, this.delayed);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.delayed) {\r\n      window.clearTimeout(this.resetTimeoutId);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { route, match, location, staticContext } = this.props;\r\n    const { component: RouteComponent, authPage = 'SignupPage', extraProps } = route;\r\n    const canShow = canShowComponent(this.props);\r\n    if (!canShow) {\r\n      staticContext.unauthorized = true;\r\n    }\r\n    return canShow ? (\r\n      <LoadableComponentErrorBoundary>\r\n        <RouteComponent params={match.params} location={location} {...extraProps} />\r\n      </LoadableComponentErrorBoundary>\r\n    ) : (\r\n      <NamedRedirect\r\n        name={authPage}\r\n        state={{ from: `${location.pathname}${location.search}${location.hash}` }}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nRouteComponentRenderer.defaultProps = { staticContext: {} };\r\n\r\nRouteComponentRenderer.propTypes = {\r\n  isAuthenticated: bool.isRequired,\r\n  logoutInProgress: bool.isRequired,\r\n  route: propTypes.route.isRequired,\r\n  routeConfiguration: arrayOf(propTypes.route).isRequired,\r\n  match: shape({\r\n    params: object.isRequired,\r\n    url: string.isRequired,\r\n  }).isRequired,\r\n  location: shape({\r\n    search: string.isRequired,\r\n  }).isRequired,\r\n  staticContext: object,\r\n  dispatch: func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  const { isAuthenticated, logoutInProgress } = state.auth;\r\n  return { isAuthenticated, logoutInProgress };\r\n};\r\nconst RouteComponentContainer = compose(connect(mapStateToProps))(RouteComponentRenderer);\r\n\r\n/**\r\n * Routes component creates React Router rendering setup.\r\n * It needs routeConfiguration (named as \"routes\") through props.\r\n * Using that configuration it creates navigation on top of page-level\r\n * components. Essentially, it's something like:\r\n * <Switch>\r\n *   <Route render={pageA} />\r\n *   <Route render={pageB} />\r\n * </Switch>\r\n */\r\nconst Routes = (props, context) => {\r\n  const routeConfiguration = useRouteConfiguration();\r\n  const config = useConfiguration();\r\n  const { isAuthenticated, logoutInProgress, logLoadDataCalls } = props;\r\n\r\n  const toRouteComponent = route => {\r\n    const renderProps = {\r\n      isAuthenticated,\r\n      logoutInProgress,\r\n      route,\r\n      routeConfiguration,\r\n      config,\r\n      logLoadDataCalls,\r\n    };\r\n\r\n    // By default, our routes are exact.\r\n    // https://reacttraining.com/react-router/web/api/Route/exact-bool\r\n    const isExact = route.exact != null ? route.exact : true;\r\n    return (\r\n      <Route\r\n        key={route.name}\r\n        path={route.path}\r\n        exact={isExact}\r\n        render={matchProps => (\r\n          <RouteComponentContainer\r\n            {...renderProps}\r\n            match={matchProps.match}\r\n            location={matchProps.location}\r\n            staticContext={matchProps.staticContext}\r\n          />\r\n        )}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Switch>\r\n      {routeConfiguration.map(toRouteComponent)}\r\n      <Route component={NotFoundPage} />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default withRouter(Routes);\r\n","import React from 'react';\r\nimport loadable from '@loadable/component';\r\n\r\nimport getPageDataLoadingAPI from '../containers/pageDataLoadingAPI';\r\nimport NotFoundPage from '../containers/NotFoundPage/NotFoundPage';\r\nimport PreviewResolverPage from '../containers/PreviewResolverPage/PreviewResolverPage';\r\n\r\n// routeConfiguration needs to initialize containers first\r\n// Otherwise, components will import form container eventually and\r\n// at that point css bundling / imports will happen in wrong order.\r\nimport { NamedRedirect } from '../components';\r\n\r\nconst pageDataLoadingAPI = getPageDataLoadingAPI();\r\n\r\nconst AuthenticationPage = loadable(() => import(/* webpackChunkName: \"AuthenticationPage\" */ '../containers/AuthenticationPage/AuthenticationPage'));\r\nconst CheckoutPage = loadable(() => import(/* webpackChunkName: \"CheckoutPage\" */ '../containers/CheckoutPage/CheckoutPage'));\r\nconst CMSPage = loadable(() => import(/* webpackChunkName: \"CMSPage\" */ '../containers/CMSPage/CMSPage'));\r\nconst ContactDetailsPage = loadable(() => import(/* webpackChunkName: \"ContactDetailsPage\" */ '../containers/ContactDetailsPage/ContactDetailsPage'));\r\nconst EditListingPage = loadable(() => import(/* webpackChunkName: \"EditListingPage\" */ '../containers/EditListingPage/EditListingPage'));\r\nconst EmailVerificationPage = loadable(() => import(/* webpackChunkName: \"EmailVerificationPage\" */ '../containers/EmailVerificationPage/EmailVerificationPage'));\r\nconst InboxPage = loadable(() => import(/* webpackChunkName: \"InboxPage\" */ '../containers/InboxPage/InboxPage'));\r\nconst LandingPage = loadable(() => import(/* webpackChunkName: \"LandingPage\" */ '../containers/LandingPage/LandingPage'));\r\nconst ListingPageCoverPhoto = loadable(() => import(/* webpackChunkName: \"ListingPageCoverPhoto\" */ /* webpackPrefetch: true */ '../containers/ListingPage/ListingPageCoverPhoto'));\r\nconst ListingPageCarousel = loadable(() => import(/* webpackChunkName: \"ListingPageCarousel\" */ /* webpackPrefetch: true */ '../containers/ListingPage/ListingPageCarousel'));\r\nconst ManageListingsPage = loadable(() => import(/* webpackChunkName: \"ManageListingsPage\" */ '../containers/ManageListingsPage/ManageListingsPage'));\r\nconst PasswordChangePage = loadable(() => import(/* webpackChunkName: \"PasswordChangePage\" */ '../containers/PasswordChangePage/PasswordChangePage'));\r\nconst PasswordRecoveryPage = loadable(() => import(/* webpackChunkName: \"PasswordRecoveryPage\" */ '../containers/PasswordRecoveryPage/PasswordRecoveryPage'));\r\nconst PasswordResetPage = loadable(() => import(/* webpackChunkName: \"PasswordResetPage\" */ '../containers/PasswordResetPage/PasswordResetPage'));\r\nconst PaymentMethodsPage = loadable(() => import(/* webpackChunkName: \"PaymentMethodsPage\" */ '../containers/PaymentMethodsPage/PaymentMethodsPage'));\r\nconst PrivacyPolicyPage = loadable(() => import(/* webpackChunkName: \"PrivacyPolicyPage\" */ '../containers/PrivacyPolicyPage/PrivacyPolicyPage'));\r\nconst ProfilePage = loadable(() => import(/* webpackChunkName: \"ProfilePage\" */ '../containers/ProfilePage/ProfilePage'));\r\nconst ProfileSettingsPage = loadable(() => import(/* webpackChunkName: \"ProfileSettingsPage\" */ '../containers/ProfileSettingsPage/ProfileSettingsPage'));\r\nconst SearchPageWithMap = loadable(() => import(/* webpackChunkName: \"SearchPageWithMap\" */ /* webpackPrefetch: true */  '../containers/SearchPage/SearchPageWithMap'));\r\nconst SearchPageWithGrid = loadable(() => import(/* webpackChunkName: \"SearchPageWithGrid\" */ /* webpackPrefetch: true */  '../containers/SearchPage/SearchPageWithGrid'));\r\nconst StripePayoutPage = loadable(() => import(/* webpackChunkName: \"StripePayoutPage\" */ '../containers/StripePayoutPage/StripePayoutPage'));\r\nconst TermsOfServicePage = loadable(() => import(/* webpackChunkName: \"TermsOfServicePage\" */ '../containers/TermsOfServicePage/TermsOfServicePage'));\r\nconst TransactionPage = loadable(() => import(/* webpackChunkName: \"TransactionPage\" */ '../containers/TransactionPage/TransactionPage'));\r\n\r\n// Styleguide helps you to review current components and develop new ones\r\nconst StyleguidePage = loadable(() => import(/* webpackChunkName: \"StyleguidePage\" */ '../containers/StyleguidePage/StyleguidePage'));\r\n\r\nexport const ACCOUNT_SETTINGS_PAGES = [\r\n  'ContactDetailsPage',\r\n  'PasswordChangePage',\r\n  'StripePayoutPage',\r\n  'PaymentMethodsPage',\r\n];\r\n\r\n// https://en.wikipedia.org/wiki/Universally_unique_identifier#Nil_UUID\r\nconst draftId = '00000000-0000-0000-0000-000000000000';\r\nconst draftSlug = 'draft';\r\n\r\nconst RedirectToLandingPage = () => <NamedRedirect name=\"LandingPage\" />;\r\n\r\n// NOTE: Most server-side endpoints are prefixed with /api. Requests to those\r\n// endpoints are indended to be handled in the server instead of the browser and\r\n// they will not render the application. So remember to avoid routes starting\r\n// with /api and if you encounter clashing routes see server/index.js if there's\r\n// a conflicting route defined there.\r\n\r\n// Our routes are exact by default.\r\n// See behaviour from Routes.js where Route is created.\r\nconst routeConfiguration = (layoutConfig) => {\r\n  const SearchPage = layoutConfig.searchPage?.variantType === 'map' \r\n    ? SearchPageWithMap \r\n    : SearchPageWithGrid;\r\n  const ListingPage = layoutConfig.listingPage?.variantType === 'carousel' \r\n    ? ListingPageCarousel \r\n    : ListingPageCoverPhoto;\r\n  \r\n  return [\r\n    {\r\n      path: '/',\r\n      name: 'LandingPage',\r\n      component: LandingPage,\r\n      loadData: pageDataLoadingAPI.LandingPage.loadData,\r\n    },\r\n    {\r\n      path: '/p/:pageId',\r\n      name: 'CMSPage',\r\n      component: CMSPage,\r\n      loadData: pageDataLoadingAPI.CMSPage.loadData,\r\n    },\r\n    {\r\n      path: '/s',\r\n      name: 'SearchPage',\r\n      component: SearchPage,\r\n      loadData: pageDataLoadingAPI.SearchPage.loadData,\r\n    },\r\n    {\r\n      path: '/l',\r\n      name: 'ListingBasePage',\r\n      component: RedirectToLandingPage,\r\n    },\r\n    {\r\n      path: '/l/:slug/:id',\r\n      name: 'ListingPage',\r\n      component: ListingPage,\r\n      loadData: pageDataLoadingAPI.ListingPage.loadData,\r\n    },\r\n    {\r\n      path: '/l/:slug/:id/checkout',\r\n      name: 'CheckoutPage',\r\n      auth: true,\r\n      component: CheckoutPage,\r\n      setInitialValues: pageDataLoadingAPI.CheckoutPage.setInitialValues,\r\n    },\r\n    {\r\n      path: '/l/:slug/:id/:variant',\r\n      name: 'ListingPageVariant',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: ListingPage,\r\n      loadData: pageDataLoadingAPI.ListingPage.loadData,\r\n    },\r\n    {\r\n      path: '/l/new',\r\n      name: 'NewListingPage',\r\n      auth: true,\r\n      component: () => (\r\n        <NamedRedirect\r\n          name=\"EditListingPage\"\r\n          params={{ slug: draftSlug, id: draftId, type: 'new', tab: 'details' }}\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      path: '/l/:slug/:id/:type/:tab',\r\n      name: 'EditListingPage',\r\n      auth: true,\r\n      component: EditListingPage,\r\n      loadData: pageDataLoadingAPI.EditListingPage.loadData,\r\n    },\r\n    {\r\n      path: '/l/:slug/:id/:type/:tab/:returnURLType',\r\n      name: 'EditListingStripeOnboardingPage',\r\n      auth: true,\r\n      component: EditListingPage,\r\n      loadData: pageDataLoadingAPI.EditListingPage.loadData,\r\n    },\r\n\r\n    // Canonical path should be after the `/l/new` path since they\r\n    // conflict and `new` is not a valid listing UUID.\r\n    {\r\n      path: '/l/:id',\r\n      name: 'ListingPageCanonical',\r\n      component: ListingPage,\r\n      loadData: pageDataLoadingAPI.ListingPage.loadData,\r\n    },\r\n    {\r\n      path: '/u',\r\n      name: 'ProfileBasePage',\r\n      component: RedirectToLandingPage,\r\n    },\r\n    {\r\n      path: '/u/:id',\r\n      name: 'ProfilePage',\r\n      component: ProfilePage,\r\n      loadData: pageDataLoadingAPI.ProfilePage.loadData,\r\n    },\r\n    {\r\n      path: '/profile-settings',\r\n      name: 'ProfileSettingsPage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: ProfileSettingsPage,\r\n    },\r\n\r\n    // Note: authenticating with IdP (e.g. Facebook) expects that /login path exists\r\n    // so that in the error case users can be redirected back to the LoginPage\r\n    // In case you change this, remember to update the route in server/api/auth/loginWithIdp.js\r\n    {\r\n      path: '/login',\r\n      name: 'LoginPage',\r\n      component: AuthenticationPage,\r\n      extraProps: { tab: 'login' },\r\n    },\r\n    {\r\n      path: '/signup',\r\n      name: 'SignupPage',\r\n      component: AuthenticationPage,\r\n      extraProps: { tab: 'signup' },\r\n      loadData: pageDataLoadingAPI.AuthenticationPage.loadData,\r\n    },\r\n    {\r\n      path: '/confirm',\r\n      name: 'ConfirmPage',\r\n      component: AuthenticationPage,\r\n      extraProps: { tab: 'confirm' },\r\n    },\r\n    {\r\n      path: '/recover-password',\r\n      name: 'PasswordRecoveryPage',\r\n      component: PasswordRecoveryPage,\r\n    },\r\n    {\r\n      path: '/inbox',\r\n      name: 'InboxBasePage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: () => <NamedRedirect name=\"InboxPage\" params={{ tab: 'sales' }} />,\r\n    },\r\n    {\r\n      path: '/inbox/:tab',\r\n      name: 'InboxPage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: InboxPage,\r\n      loadData: pageDataLoadingAPI.InboxPage.loadData,\r\n    },\r\n    {\r\n      path: '/order/:id',\r\n      name: 'OrderDetailsPage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: TransactionPage,\r\n      extraProps: { transactionRole: 'customer' },\r\n      loadData: (params, ...rest) =>\r\n        pageDataLoadingAPI.TransactionPage.loadData({ ...params, transactionRole: 'customer' }, ...rest),\r\n      setInitialValues: pageDataLoadingAPI.TransactionPage.setInitialValues,\r\n    },\r\n    {\r\n      path: '/order/:id/details',\r\n      name: 'OrderDetailsPageRedirect',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: props => <NamedRedirect name=\"OrderDetailsPage\" params={{ id: props.params?.id }} />,\r\n    },\r\n    {\r\n      path: '/sale/:id',\r\n      name: 'SaleDetailsPage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: TransactionPage,\r\n      extraProps: { transactionRole: 'provider' },\r\n      loadData: pageDataLoadingAPI.TransactionPage.loadData,\r\n    },\r\n    {\r\n      path: '/sale/:id/details',\r\n      name: 'SaleDetailsPageRedirect',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: props => <NamedRedirect name=\"SaleDetailsPage\" params={{ id: props.params?.id }} />,\r\n    },\r\n    {\r\n      path: '/listings',\r\n      name: 'ManageListingsPage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: ManageListingsPage,\r\n      loadData: pageDataLoadingAPI.ManageListingsPage.loadData,\r\n    },\r\n    {\r\n      path: '/account',\r\n      name: 'AccountSettingsPage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: () => <NamedRedirect name=\"ContactDetailsPage\" />,\r\n    },\r\n    {\r\n      path: '/account/contact-details',\r\n      name: 'ContactDetailsPage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: ContactDetailsPage,\r\n      loadData: pageDataLoadingAPI.ContactDetailsPage.loadData,\r\n    },\r\n    {\r\n      path: '/account/change-password',\r\n      name: 'PasswordChangePage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: PasswordChangePage,\r\n    },\r\n    {\r\n      path: '/account/payments',\r\n      name: 'StripePayoutPage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: StripePayoutPage,\r\n      loadData: pageDataLoadingAPI.StripePayoutPage.loadData,\r\n    },\r\n    {\r\n      path: '/account/payments/:returnURLType',\r\n      name: 'StripePayoutOnboardingPage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: StripePayoutPage,\r\n      loadData: pageDataLoadingAPI.StripePayoutPage.loadData,\r\n    },\r\n    {\r\n      path: '/account/payment-methods',\r\n      name: 'PaymentMethodsPage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: PaymentMethodsPage,\r\n      loadData: pageDataLoadingAPI.PaymentMethodsPage.loadData,\r\n    },\r\n    {\r\n      path: '/terms-of-service',\r\n      name: 'TermsOfServicePage',\r\n      component: TermsOfServicePage,\r\n      loadData: pageDataLoadingAPI.TermsOfServicePage.loadData,\r\n    },\r\n    {\r\n      path: '/privacy-policy',\r\n      name: 'PrivacyPolicyPage',\r\n      component: PrivacyPolicyPage,\r\n      loadData: pageDataLoadingAPI.PrivacyPolicyPage.loadData,\r\n    },\r\n    {\r\n      path: '/styleguide',\r\n      name: 'Styleguide',\r\n      component: StyleguidePage,\r\n    },\r\n    {\r\n      path: '/styleguide/g/:group',\r\n      name: 'StyleguideGroup',\r\n      component: StyleguidePage,\r\n    },\r\n    {\r\n      path: '/styleguide/c/:component',\r\n      name: 'StyleguideComponent',\r\n      component: StyleguidePage,\r\n    },\r\n    {\r\n      path: '/styleguide/c/:component/:example',\r\n      name: 'StyleguideComponentExample',\r\n      component: StyleguidePage,\r\n    },\r\n    {\r\n      path: '/styleguide/c/:component/:example/raw',\r\n      name: 'StyleguideComponentExampleRaw',\r\n      component: StyleguidePage,\r\n      extraProps: { raw: true },\r\n    },\r\n    {\r\n      path: '/notfound',\r\n      name: 'NotFoundPage',\r\n      component: props => <NotFoundPage {...props} />,\r\n    },\r\n\r\n    // Do not change this path!\r\n    //\r\n    // The API expects that the application implements /reset-password endpoint\r\n    {\r\n      path: '/reset-password',\r\n      name: 'PasswordResetPage',\r\n      component: PasswordResetPage ,\r\n    },\r\n\r\n    // Do not change this path!\r\n    //\r\n    // The API expects that the application implements /verify-email endpoint\r\n    {\r\n      path: '/verify-email',\r\n      name: 'EmailVerificationPage',\r\n      auth: true,\r\n      authPage: 'LoginPage',\r\n      component: EmailVerificationPage,\r\n      loadData: pageDataLoadingAPI.EmailVerificationPage.loadData,\r\n    },\r\n    // Do not change this path!\r\n    //\r\n    // The API expects that the application implements /preview endpoint\r\n    {\r\n      path: '/preview',\r\n      name: 'PreviewResolverPage',\r\n      component: PreviewResolverPage ,\r\n    },\r\n  ];\r\n};\r\n\r\nexport default routeConfiguration;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"redux-thunk\");","import { combineReducers } from 'redux';\r\nimport { USER_LOGOUT } from './ducks/auth.duck';\r\nimport * as globalReducers from './ducks';\r\nimport * as pageReducers from './containers/reducers';\r\n\r\n/**\r\n * Function _createReducer_ combines global reducers (reducers that are used in\r\n * multiple pages) and reducers that are handling actions happening inside one page container.\r\n * Since we combineReducers, pageReducers will get page specific key (e.g. SearchPage)\r\n * which is page specific.\r\n * Future: this structure could take in asyncReducers, which are changed when you navigate pages.\r\n */\r\nconst appReducer = combineReducers({ ...globalReducers, ...pageReducers });\r\n\r\nconst createReducer = () => {\r\n  return (state, action) => {\r\n    const appState = action.type === USER_LOGOUT ? undefined : state;\r\n\r\n    // Clear sessionStorage when logging out.\r\n    if (action.type === USER_LOGOUT && typeof window !== 'undefined' && !!window.sessionStorage) {\r\n      window.sessionStorage.clear();\r\n    }\r\n\r\n    return appReducer(appState, action);\r\n  };\r\n};\r\n\r\nexport default createReducer;\r\n","import { LOCATION_CHANGED } from '../ducks/routing.duck';\r\n\r\n// Create a Redux middleware from the given analytics handlers. Each\r\n// handler should have the following methods:\r\n//\r\n// - trackPageView(canonicalPath, previousPath): called when the URL is changed\r\nexport const creShwcseiddleware = handlers => store => next => action => {\r\n  const { type, payload } = action;\r\n\r\n  if (type === LOCATION_CHANGED) {\r\n    const previousPath = store?.getState()?.routing?.currentCanonicalPath;\r\n    const { canonicalPath } = payload;\r\n    handlers.forEach(handler => {\r\n      handler.trackPageView(canonicalPath, previousPath);\r\n    });\r\n  }\r\n\r\n  next(action);\r\n};\r\n","// We create Redux store directly, instead of using any extra dependencies.\r\nimport { legacy_createStore as createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport createReducer from './reducers';\r\nimport * as analytics from './analytics/analytics';\r\nimport appSettings from './config/settings';\r\n\r\n/**\r\n * Create a new store with the given initial state. Adds Redux\r\n * middleware and enhancers.\r\n */\r\nexport default function configureStore(initialState = {}, sdk = null, analyticsHandlers = []) {\r\n  const middlewares = [thunk.withExtraArgument(sdk), analytics.creShwcseiddleware(analyticsHandlers)];\r\n\r\n  // Enable Redux Devtools in client side dev mode.\r\n  const composeEnhancers =\r\n    appSettings.dev && typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n      ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n      : compose;\r\n\r\n  const enhancer = composeEnhancers(applyMiddleware(...middlewares));\r\n\r\n  const store = createStore(createReducer(), initialState, enhancer);\r\n\r\n  return store;\r\n}\r\n","/**\r\n * Transaction process graph for product orders:\r\n *   - default-purchase\r\n */\r\n\r\n/**\r\n * Transitions\r\n *\r\n * These strings must sync with values defined in Marketplace API,\r\n * since transaction objects given by API contain info about last transitions.\r\n * All the actions in API side happen in transitions,\r\n * so we need to understand what those strings mean.\r\n */\r\n\r\nexport const transitions = {\r\n  // When a customer makes an order for a listing, a transaction is\r\n  // created with the initial request-payment transition.\r\n  // At this transition a PaymentIntent is created by Marketplace API.\r\n  // After this transition, the actual payment must be made on client-side directly to Stripe.\r\n  REQUEST_PAYMENT: 'transition/request-payment',\r\n\r\n  // A customer can also initiate a transaction with an inquiry, and\r\n  // then transition that with a request.\r\n  INQUIRE: 'transition/inquire',\r\n  REQUEST_PAYMENT_AFTER_INQUIRY: 'transition/request-payment-after-inquiry',\r\n\r\n  // Stripe SDK might need to ask 3D security from customer, in a separate front-end step.\r\n  // Therefore we need to make another transition to Marketplace API,\r\n  // to tell that the payment is confirmed.\r\n  CONFIRM_PAYMENT: 'transition/confirm-payment',\r\n\r\n  // If the payment is not confirmed in the time limit set in transaction process (by default 15min)\r\n  // the transaction will expire automatically.\r\n  EXPIRE_PAYMENT: 'transition/expire-payment',\r\n\r\n  // Provider or opeartor can mark the product shipped/delivered\r\n  MARK_DELIVERED: 'transition/mark-delivered',\r\n  OPERATOR_MARK_DELIVERED: 'transition/operator-mark-delivered',\r\n\r\n  // Customer can mark the product received (e.g. picked up from provider)\r\n  MARK_RECEIVED_FROM_PURCHASED: 'transition/mark-received-from-purchased',\r\n\r\n  // Automatic cancellation happens if none marks the delivery happened\r\n  AUTO_CANCEL: 'transition/auto-cancel',\r\n\r\n  // Operator can cancel the purchase before product has been marked as delivered / received\r\n  CANCEL: 'transition/cancel',\r\n\r\n  // If provider has marked the product delivered (e.g. shipped),\r\n  // customer can then mark the product received\r\n  MARK_RECEIVED: 'transition/mark-received',\r\n\r\n  // If customer doesn't mark the product received manually, it can happen automatically\r\n  AUTO_MARK_RECEIVED: 'transition/auto-mark-received',\r\n\r\n  // When provider has marked the product delivered, customer or operator can dispute the transaction\r\n  DISPUTE: 'transition/dispute',\r\n  OPERATOR_DISPUTE: 'transition/operator-dispute',\r\n\r\n  // If nothing is done to disputed transaction it ends up to Canceled state\r\n  AUTO_CANCEL_FROM_DISPUTED: 'transition/auto-cancel-from-disputed',\r\n\r\n  // Operator can cancel disputed transaction manually\r\n  CANCEL_FROM_DISPUTED: 'transition/cancel-from-disputed',\r\n\r\n  // Operator can mark the disputed transaction as received\r\n  MARK_RECEIVED_FROM_DISPUTED: 'transition/mark-received-from-disputed',\r\n\r\n  // System moves transaction automatically from received state to complete state\r\n  // This makes it possible to to add notifications to that single transition.\r\n  AUTO_COMPLETE: 'transition/auto-complete',\r\n\r\n  // Reviews are given through transaction transitions. Review 1 can be\r\n  // by provider or customer, and review 2 will be the other party of\r\n  // the transaction.\r\n  REVIEW_1_BY_PROVIDER: 'transition/review-1-by-provider',\r\n  REVIEW_2_BY_PROVIDER: 'transition/review-2-by-provider',\r\n  REVIEW_1_BY_CUSTOMER: 'transition/review-1-by-customer',\r\n  REVIEW_2_BY_CUSTOMER: 'transition/review-2-by-customer',\r\n  EXPIRE_CUSTOMER_REVIEW_PERIOD: 'transition/expire-customer-review-period',\r\n  EXPIRE_PROVIDER_REVIEW_PERIOD: 'transition/expire-provider-review-period',\r\n  EXPIRE_REVIEW_PERIOD: 'transition/expire-review-period',\r\n};\r\n\r\n/**\r\n * States\r\n *\r\n * These constants are only for making it clear how transitions work together.\r\n * You should not use these constants outside of this file.\r\n *\r\n * Note: these states are not in sync with states used transaction process definitions\r\n *       in Marketplace API. Only last transitions are passed along transaction object.\r\n */\r\n\r\nexport const states = {\r\n  INITIAL: 'initial',\r\n  INQUIRY: 'inquiry',\r\n  PENDING_PAYMENT: 'pending-payment',\r\n  PAYMENT_EXPIRED: 'payment-expired',\r\n  PURCHASED: 'purchased',\r\n  DELIVERED: 'delivered',\r\n  RECEIVED: 'received',\r\n  DISPUTED: 'disputed',\r\n  CANCELED: 'canceled',\r\n  COMPLETED: 'completed',\r\n  REVIEWED: 'reviewed',\r\n  REVIEWED_BY_CUSTOMER: 'reviewed-by-customer',\r\n  REVIEWED_BY_PROVIDER: 'reviewed-by-provider',\r\n};\r\n\r\n/**\r\n * Description of transaction process graph\r\n *\r\n * You should keep this in sync with transaction process defined in Marketplace API\r\n *\r\n * Note: we don't use yet any state machine library,\r\n *       but this description format is following Xstate (FSM library)\r\n *       https://xstate.js.org/docs/\r\n */\r\nexport const graph = {\r\n  // id is defined only to support Xstate format.\r\n  // However if you have multiple transaction processes defined,\r\n  // it is best to keep them in sync with transaction process aliases.\r\n  id: 'default-purchase/release-1',\r\n\r\n  // This 'initial' state is a starting point for new transaction\r\n  initial: states.INITIAL,\r\n\r\n  // States\r\n  states: {\r\n    [states.INITIAL]: {\r\n      on: {\r\n        [transitions.INQUIRE]: states.INQUIRY,\r\n        [transitions.REQUEST_PAYMENT]: states.PENDING_PAYMENT,\r\n      },\r\n    },\r\n    [states.INQUIRY]: {\r\n      on: {\r\n        [transitions.REQUEST_PAYMENT_AFTER_INQUIRY]: states.PENDING_PAYMENT,\r\n      },\r\n    },\r\n\r\n    [states.PENDING_PAYMENT]: {\r\n      on: {\r\n        [transitions.EXPIRE_PAYMENT]: states.PAYMENT_EXPIRED,\r\n        [transitions.CONFIRM_PAYMENT]: states.PURCHASED,\r\n      },\r\n    },\r\n\r\n    [states.PAYMENT_EXPIRED]: {},\r\n    [states.PURCHASED]: {\r\n      on: {\r\n        [transitions.MARK_DELIVERED]: states.DELIVERED,\r\n        [transitions.OPERATOR_MARK_DELIVERED]: states.DELIVERED,\r\n        [transitions.MARK_RECEIVED_FROM_PURCHASED]: states.RECEIVED,\r\n        [transitions.AUTO_CANCEL]: states.CANCELED,\r\n        [transitions.CANCEL]: states.CANCELED,\r\n      },\r\n    },\r\n\r\n    [states.CANCELED]: {},\r\n\r\n    [states.DELIVERED]: {\r\n      on: {\r\n        [transitions.MARK_RECEIVED]: states.RECEIVED,\r\n        [transitions.AUTO_MARK_RECEIVED]: states.RECEIVED,\r\n        [transitions.DISPUTE]: states.DISPUTED,\r\n        [transitions.OPERATOR_DISPUTE]: states.DISPUTED,\r\n      },\r\n    },\r\n\r\n    [states.DISPUTED]: {\r\n      on: {\r\n        [transitions.AUTO_CANCEL_FROM_DISPUTED]: states.CANCELED,\r\n        [transitions.CANCEL_FROM_DISPUTED]: states.CANCELED,\r\n        [transitions.MARK_RECEIVED_FROM_DISPUTED]: states.RECEIVED,\r\n      },\r\n    },\r\n\r\n    [states.RECEIVED]: {\r\n      on: {\r\n        [transitions.AUTO_COMPLETE]: states.COMPLETED,\r\n      },\r\n    },\r\n\r\n    [states.COMPLETED]: {\r\n      on: {\r\n        [transitions.EXPIRE_REVIEW_PERIOD]: states.REVIEWED,\r\n        [transitions.REVIEW_1_BY_CUSTOMER]: states.REVIEWED_BY_CUSTOMER,\r\n        [transitions.REVIEW_1_BY_PROVIDER]: states.REVIEWED_BY_PROVIDER,\r\n      },\r\n    },\r\n\r\n    [states.REVIEWED_BY_CUSTOMER]: {\r\n      on: {\r\n        [transitions.REVIEW_2_BY_PROVIDER]: states.REVIEWED,\r\n        [transitions.EXPIRE_PROVIDER_REVIEW_PERIOD]: states.REVIEWED,\r\n      },\r\n    },\r\n    [states.REVIEWED_BY_PROVIDER]: {\r\n      on: {\r\n        [transitions.REVIEW_2_BY_CUSTOMER]: states.REVIEWED,\r\n        [transitions.EXPIRE_CUSTOMER_REVIEW_PERIOD]: states.REVIEWED,\r\n      },\r\n    },\r\n    [states.REVIEWED]: { type: 'final' },\r\n  },\r\n};\r\n\r\n// Check if a transition is the kind that should be rendered\r\n// when showing transition history (e.g. ActivityFeed)\r\n// The first transition and most of the expiration transitions made by system are not relevant\r\nexport const isRelevantPastTransition = transition => {\r\n  return [\r\n    transitions.CONFIRM_PAYMENT,\r\n    transitions.AUTO_CANCEL,\r\n    transitions.CANCEL,\r\n    transitions.MARK_DELIVERED,\r\n    transitions.OPERATOR_MARK_DELIVERED,\r\n    transitions.DISPUTE,\r\n    transitions.OPERATOR_DISPUTE,\r\n    transitions.AUTO_COMPLETE,\r\n    transitions.AUTO_CANCEL_FROM_DISPUTED,\r\n    transitions.CANCEL_FROM_DISPUTED,\r\n    transitions.REVIEW_1_BY_CUSTOMER,\r\n    transitions.REVIEW_1_BY_PROVIDER,\r\n    transitions.REVIEW_2_BY_CUSTOMER,\r\n    transitions.REVIEW_2_BY_PROVIDER,\r\n  ].includes(transition);\r\n};\r\nexport const isCustomerReview = transition => {\r\n  return [transitions.REVIEW_1_BY_CUSTOMER, transitions.REVIEW_2_BY_CUSTOMER].includes(transition);\r\n};\r\n\r\nexport const isProviderReview = transition => {\r\n  return [transitions.REVIEW_1_BY_PROVIDER, transitions.REVIEW_2_BY_PROVIDER].includes(transition);\r\n};\r\n\r\n// Check if the given transition is privileged.\r\n//\r\n// Privileged transitions need to be handled from a secure context,\r\n// i.e. the backend. This helper is used to check if the transition\r\n// should go through the local API endpoints, or if using JS SDK is\r\n// enough.\r\nexport const isPrivileged = transition => {\r\n  return [transitions.REQUEST_PAYMENT, transitions.REQUEST_PAYMENT_AFTER_INQUIRY].includes(\r\n    transition\r\n  );\r\n};\r\n\r\n// Check when transaction is completed (item is received and review notifications sent)\r\nexport const isCompleted = transition => {\r\n  const txCompletedTransitions = [\r\n    transitions.AUTO_COMPLETE,\r\n    transitions.REVIEW_1_BY_CUSTOMER,\r\n    transitions.REVIEW_1_BY_PROVIDER,\r\n    transitions.REVIEW_2_BY_CUSTOMER,\r\n    transitions.REVIEW_2_BY_PROVIDER,\r\n    transitions.EXPIRE_REVIEW_PERIOD,\r\n    transitions.EXPIRE_CUSTOMER_REVIEW_PERIOD,\r\n    transitions.EXPIRE_PROVIDER_REVIEW_PERIOD,\r\n  ];\r\n  return txCompletedTransitions.includes(transition);\r\n};\r\n\r\n// Check when transaction is refunded (order did not happen)\r\n// In these transitions action/stripe-refund-payment is called\r\nexport const isRefunded = transition => {\r\n  const txRefundedTransitions = [\r\n    transitions.EXPIRE_PAYMENT,\r\n    transitions.CANCEL,\r\n    transitions.AUTO_CANCEL,\r\n    transitions.AUTO_CANCEL_FROM_DISPUTED,\r\n    transitions.CANCEL_FROM_DISPUTED,\r\n  ];\r\n  return txRefundedTransitions.includes(transition);\r\n};\r\n\r\nexport const statesNeedingProviderAttention = [states.PURCHASED];\r\n","/**\r\n * Transaction process graph for bookings:\r\n *   - default-booking\r\n */\r\n\r\n/**\r\n * Transitions\r\n *\r\n * These strings must sync with values defined in Marketplace API,\r\n * since transaction objects given by API contain info about last transitions.\r\n * All the actions in API side happen in transitions,\r\n * so we need to understand what those strings mean.\r\n */\r\n\r\nexport const transitions = {\r\n  // When a customer makes a booking to a listing, a transaction is\r\n  // created with the initial request-payment transition.\r\n  // At this transition a PaymentIntent is created by Marketplace API.\r\n  // After this transition, the actual payment must be made on client-side directly to Stripe.\r\n  REQUEST_PAYMENT: 'transition/request-payment',\r\n\r\n  // A customer can also initiate a transaction with an inquiry, and\r\n  // then transition that with a request.\r\n  INQUIRE: 'transition/inquire',\r\n  REQUEST_PAYMENT_AFTER_INQUIRY: 'transition/request-payment-after-inquiry',\r\n\r\n  // Stripe SDK might need to ask 3D security from customer, in a separate front-end step.\r\n  // Therefore we need to make another transition to Marketplace API,\r\n  // to tell that the payment is confirmed.\r\n  CONFIRM_PAYMENT: 'transition/confirm-payment',\r\n\r\n  // If the payment is not confirmed in the time limit set in transaction process (by default 15min)\r\n  // the transaction will expire automatically.\r\n  EXPIRE_PAYMENT: 'transition/expire-payment',\r\n\r\n  // When the provider accepts or declines a transaction from the\r\n  // SalePage, it is transitioned with the accept or decline transition.\r\n  ACCEPT: 'transition/accept',\r\n  DECLINE: 'transition/decline',\r\n\r\n  // The operator can accept or decline the offer on behalf of the provider\r\n  OPERATOR_ACCEPT: 'transition/operator-accept',\r\n  OPERATOR_DECLINE: 'transition/operator-decline',\r\n\r\n  // The backend automatically expire the transaction.\r\n  EXPIRE: 'transition/expire',\r\n\r\n  // Admin can also cancel the transition.\r\n  CANCEL: 'transition/cancel',\r\n\r\n  // The backend will mark the transaction completed.\r\n  COMPLETE: 'transition/complete',\r\n  OPERATOR_COMPLETE: 'transition/operator-complete',\r\n\r\n  // Reviews are given through transaction transitions. Review 1 can be\r\n  // by provider or customer, and review 2 will be the other party of\r\n  // the transaction.\r\n  REVIEW_1_BY_PROVIDER: 'transition/review-1-by-provider',\r\n  REVIEW_2_BY_PROVIDER: 'transition/review-2-by-provider',\r\n  REVIEW_1_BY_CUSTOMER: 'transition/review-1-by-customer',\r\n  REVIEW_2_BY_CUSTOMER: 'transition/review-2-by-customer',\r\n  EXPIRE_CUSTOMER_REVIEW_PERIOD: 'transition/expire-customer-review-period',\r\n  EXPIRE_PROVIDER_REVIEW_PERIOD: 'transition/expire-provider-review-period',\r\n  EXPIRE_REVIEW_PERIOD: 'transition/expire-review-period',\r\n};\r\n\r\n/**\r\n * States\r\n *\r\n * These constants are only for making it clear how transitions work together.\r\n * You should not use these constants outside of this file.\r\n *\r\n * Note: these states are not in sync with states used transaction process definitions\r\n *       in Marketplace API. Only last transitions are passed along transaction object.\r\n */\r\nexport const states = {\r\n  INITIAL: 'initial',\r\n  INQUIRY: 'inquiry',\r\n  PENDING_PAYMENT: 'pending-payment',\r\n  PAYMENT_EXPIRED: 'payment-expired',\r\n  PREAUTHORIZED: 'preauthorized',\r\n  DECLINED: 'declined',\r\n  ACCEPTED: 'accepted',\r\n  EXPIRED: 'expired',\r\n  CANCELED: 'canceled',\r\n  DELIVERED: 'delivered',\r\n  REVIEWED: 'reviewed',\r\n  REVIEWED_BY_CUSTOMER: 'reviewed-by-customer',\r\n  REVIEWED_BY_PROVIDER: 'reviewed-by-provider',\r\n};\r\n\r\n/**\r\n * Description of transaction process graph\r\n *\r\n * You should keep this in sync with transaction process defined in Marketplace API\r\n *\r\n * Note: we don't use yet any state machine library,\r\n *       but this description format is following Xstate (FSM library)\r\n *       https://xstate.js.org/docs/\r\n */\r\nexport const graph = {\r\n  // id is defined only to support Xstate format.\r\n  // However if you have multiple transaction processes defined,\r\n  // it is best to keep them in sync with transaction process aliases.\r\n  id: 'default-booking/release-1',\r\n\r\n  // This 'initial' state is a starting point for new transaction\r\n  initial: states.INITIAL,\r\n\r\n  // States\r\n  states: {\r\n    [states.INITIAL]: {\r\n      on: {\r\n        [transitions.INQUIRE]: states.INQUIRY,\r\n        [transitions.REQUEST_PAYMENT]: states.PENDING_PAYMENT,\r\n      },\r\n    },\r\n    [states.INQUIRY]: {\r\n      on: {\r\n        [transitions.REQUEST_PAYMENT_AFTER_INQUIRY]: states.PENDING_PAYMENT,\r\n      },\r\n    },\r\n\r\n    [states.PENDING_PAYMENT]: {\r\n      on: {\r\n        [transitions.EXPIRE_PAYMENT]: states.PAYMENT_EXPIRED,\r\n        [transitions.CONFIRM_PAYMENT]: states.PREAUTHORIZED,\r\n      },\r\n    },\r\n\r\n    [states.PAYMENT_EXPIRED]: {},\r\n    [states.PREAUTHORIZED]: {\r\n      on: {\r\n        [transitions.DECLINE]: states.DECLINED,\r\n        [transitions.OPERATOR_DECLINE]: states.DECLINED,\r\n        [transitions.EXPIRE]: states.EXPIRED,\r\n        [transitions.ACCEPT]: states.ACCEPTED,\r\n        [transitions.OPERATOR_ACCEPT]: states.ACCEPTED,\r\n      },\r\n    },\r\n\r\n    [states.DECLINED]: {},\r\n    [states.EXPIRED]: {},\r\n    [states.ACCEPTED]: {\r\n      on: {\r\n        [transitions.CANCEL]: states.CANCELED,\r\n        [transitions.COMPLETE]: states.DELIVERED,\r\n        [transitions.OPERATOR_COMPLETE]: states.DELIVERED,\r\n      },\r\n    },\r\n\r\n    [states.CANCELED]: {},\r\n    [states.DELIVERED]: {\r\n      on: {\r\n        [transitions.EXPIRE_REVIEW_PERIOD]: states.REVIEWED,\r\n        [transitions.REVIEW_1_BY_CUSTOMER]: states.REVIEWED_BY_CUSTOMER,\r\n        [transitions.REVIEW_1_BY_PROVIDER]: states.REVIEWED_BY_PROVIDER,\r\n      },\r\n    },\r\n\r\n    [states.REVIEWED_BY_CUSTOMER]: {\r\n      on: {\r\n        [transitions.REVIEW_2_BY_PROVIDER]: states.REVIEWED,\r\n        [transitions.EXPIRE_PROVIDER_REVIEW_PERIOD]: states.REVIEWED,\r\n      },\r\n    },\r\n    [states.REVIEWED_BY_PROVIDER]: {\r\n      on: {\r\n        [transitions.REVIEW_2_BY_CUSTOMER]: states.REVIEWED,\r\n        [transitions.EXPIRE_CUSTOMER_REVIEW_PERIOD]: states.REVIEWED,\r\n      },\r\n    },\r\n    [states.REVIEWED]: { type: 'final' },\r\n  },\r\n};\r\n\r\n// Check if a transition is the kind that should be rendered\r\n// when showing transition history (e.g. ActivityFeed)\r\n// The first transition and most of the expiration transitions made by system are not relevant\r\nexport const isRelevantPastTransition = transition => {\r\n  return [\r\n    transitions.ACCEPT,\r\n    transitions.OPERATOR_ACCEPT,\r\n    transitions.CANCEL,\r\n    transitions.COMPLETE,\r\n    transitions.OPERATOR_COMPLETE,\r\n    transitions.CONFIRM_PAYMENT,\r\n    transitions.DECLINE,\r\n    transitions.OPERATOR_DECLINE,\r\n    transitions.EXPIRE,\r\n    transitions.REVIEW_1_BY_CUSTOMER,\r\n    transitions.REVIEW_1_BY_PROVIDER,\r\n    transitions.REVIEW_2_BY_CUSTOMER,\r\n    transitions.REVIEW_2_BY_PROVIDER,\r\n  ].includes(transition);\r\n};\r\n\r\n// Processes might be different on how reviews are handled.\r\n// Default processes use two-sided diamond shape, where either party can make the review first\r\nexport const isCustomerReview = transition => {\r\n  return [transitions.REVIEW_1_BY_CUSTOMER, transitions.REVIEW_2_BY_CUSTOMER].includes(transition);\r\n};\r\n\r\n// Processes might be different on how reviews are handled.\r\n// Default processes use two-sided diamond shape, where either party can make the review first\r\nexport const isProviderReview = transition => {\r\n  return [transitions.REVIEW_1_BY_PROVIDER, transitions.REVIEW_2_BY_PROVIDER].includes(transition);\r\n};\r\n\r\n// Check if the given transition is privileged.\r\n//\r\n// Privileged transitions need to be handled from a secure context,\r\n// i.e. the backend. This helper is used to check if the transition\r\n// should go through the local API endpoints, or if using JS SDK is\r\n// enough.\r\nexport const isPrivileged = transition => {\r\n  return [transitions.REQUEST_PAYMENT, transitions.REQUEST_PAYMENT_AFTER_INQUIRY].includes(\r\n    transition\r\n  );\r\n};\r\n\r\n// Check when transaction is completed (booking over)\r\nexport const isCompleted = transition => {\r\n  const txCompletedTransitions = [\r\n    transitions.COMPLETE,\r\n    transitions.OPERATOR_COMPLETE,\r\n    transitions.REVIEW_1_BY_CUSTOMER,\r\n    transitions.REVIEW_1_BY_PROVIDER,\r\n    transitions.REVIEW_2_BY_CUSTOMER,\r\n    transitions.REVIEW_2_BY_PROVIDER,\r\n    transitions.EXPIRE_REVIEW_PERIOD,\r\n    transitions.EXPIRE_CUSTOMER_REVIEW_PERIOD,\r\n    transitions.EXPIRE_PROVIDER_REVIEW_PERIOD,\r\n  ];\r\n  return txCompletedTransitions.includes(transition);\r\n};\r\n\r\n// Check when transaction is refunded (booking did not happen)\r\n// In these transitions action/stripe-refund-payment is called\r\nexport const isRefunded = transition => {\r\n  const txRefundedTransitions = [\r\n    transitions.EXPIRE_PAYMENT,\r\n    transitions.EXPIRE,\r\n    transitions.CANCEL,\r\n    transitions.DECLINE,\r\n  ];\r\n  return txRefundedTransitions.includes(transition);\r\n};\r\n\r\nexport const statesNeedingProviderAttention = [states.PREAUTHORIZED];\r\n","/**\r\n * Transaction process graph for plain inquiries:\r\n *   - default-inquiry\r\n */\r\n\r\n/**\r\n * Transitions\r\n *\r\n * These strings must sync with values defined in Marketplace API,\r\n * since transaction objects given by API contain info about last transitions.\r\n * All the actions in API side happen in transitions,\r\n * so we need to understand what those strings mean.\r\n */\r\n\r\nexport const transitions = {\r\n  // A customer can initiate a transaction with an inquiry, and\r\n  // then transition that with a request.\r\n  INQUIRE_WITHOUT_PAYMENT: 'transition/inquire-without-payment',\r\n};\r\n\r\n/**\r\n * States\r\n *\r\n * These constants are only for making it clear how transitions work together.\r\n * You should not use these constants outside of this file.\r\n *\r\n * Note: these states are not in sync with states used transaction process definitions\r\n *       in Marketplace API. Only last transitions are passed along transaction object.\r\n */\r\nexport const states = {\r\n  INITIAL: 'initial',\r\n  FREE_INQUIRY: 'free-inquiry',\r\n};\r\n\r\n/**\r\n * Description of transaction process graph\r\n *\r\n * You should keep this in sync with transaction process defined in Marketplace API\r\n *\r\n * Note: we don't use yet any state machine library,\r\n *       but this description format is following Xstate (FSM library)\r\n *       https://xstate.js.org/docs/\r\n */\r\nexport const graph = {\r\n  // id is defined only to support Xstate format.\r\n  // However if you have multiple transaction processes defined,\r\n  // it is best to keep them in sync with transaction process aliases.\r\n  id: 'default-inquiry/release-1',\r\n\r\n  // This 'initial' state is a starting point for new transaction\r\n  initial: states.INITIAL,\r\n\r\n  // States\r\n  states: {\r\n    [states.INITIAL]: {\r\n      on: {\r\n        [transitions.INQUIRE_WITHOUT_PAYMENT]: states.FREE_INQUIRY,\r\n      },\r\n    },\r\n    [states.FREE_INQUIRY]: { type: 'final' },\r\n  },\r\n};\r\n\r\n// Check if a transition is the kind that should be rendered\r\n// when showing transition history (e.g. ActivityFeed)\r\n// The first transition and most of the expiration transitions made by system are not relevant\r\nexport const isRelevantPastTransition = transition => {\r\n  return [transitions.INQUIRE_WITHOUT_PAYMENT].includes(transition);\r\n};\r\n\r\n// Processes might be different on how reviews are handled.\r\n// Default processes use two-sided diamond shape, where either party can make the review first\r\n// NOTE: this functions is added just for the sake of consistency\r\nexport const isCustomerReview = transition => {\r\n  return false;\r\n};\r\n\r\n// Processes might be different on how reviews are handled.\r\n// Default processes use two-sided diamond shape, where either party can make the review first\r\n// NOTE: this functions is added just for the sake of consistency\r\nexport const isProviderReview = transition => {\r\n  return false;\r\n};\r\n\r\n// Check if the given transition is privileged.\r\n//\r\n// Privileged transitions need to be handled from a secure context,\r\n// i.e. the backend. This helper is used to check if the transition\r\n// should go through the local API endpoints, or if using JS SDK is\r\n// enough.\r\n// NOTE: this functions is added just for the sake of consistency\r\nexport const isPrivileged = transition => {\r\n  return false;\r\n};\r\n\r\n// Check when transaction is completed (booking over)\r\n// NOTE: this functions is added just for the sake of consistency\r\nexport const isCompleted = transition => {\r\n  return false;\r\n};\r\n\r\n// Check when transaction is refunded (booking did not happen)\r\n// In these transitions action/stripe-refund-payment is called\r\n// NOTE: this functions is added just for the sake of consistency\r\nexport const isRefunded = transition => {\r\n  return false;\r\n};\r\n\r\n// NOTE: this functions is added just for the sake of consistency\r\n// We don't know if inquiry is on-going or complete\r\nexport const statesNeedingProviderAttention = [];\r\n","import * as log from '../util/log';\r\nimport { ensureTransaction } from '../util/data';\r\nimport * as purchaseProcess from './transactionProcessPurchase';\r\nimport * as bookingProcess from './transactionProcessBooking';\r\nimport * as inquiryProcess from './transactionProcessInquiry';\r\n\r\n// Supported unit types\r\n// Note: These are passed to translations/microcopy in certain cases.\r\n//       Therefore, they can't contain wordbreaks like '-' or space ' '\r\nexport const ITEM = 'item';\r\nexport const DAY = 'day';\r\nexport const NIGHT = 'night';\r\nexport const HOUR = 'hour';\r\nexport const INQUIRY = 'inquiry';\r\n\r\n// Then names of supported processes\r\nexport const PURCHASE_PROCESS_NAME = 'default-purchase';\r\nexport const BOOKING_PROCESS_NAME = 'default-booking';\r\nexport const INQUIRY_PROCESS_NAME = 'default-inquiry';\r\n\r\n/**\r\n * A process should export:\r\n * - graph\r\n * - states\r\n * - transitions\r\n * - isRelevantPastTransition(transition)\r\n * - isPrivileged(transition)\r\n * - isCompleted(transition)\r\n * - isRefunded(transition)\r\n * - isCustomerReview(transition)\r\n * - isProviderReview(transition)\r\n * - statesNeedingCustomerAttention\r\n */\r\nconst PROCESSES = [\r\n  {\r\n    name: PURCHASE_PROCESS_NAME,\r\n    alias: `${PURCHASE_PROCESS_NAME}/release-1`,\r\n    process: purchaseProcess,\r\n    unitTypes: [ITEM],\r\n  },\r\n  {\r\n    name: BOOKING_PROCESS_NAME,\r\n    alias: `${BOOKING_PROCESS_NAME}/release-1`,\r\n    process: bookingProcess,\r\n    unitTypes: [DAY, NIGHT, HOUR],\r\n  },\r\n  {\r\n    name: INQUIRY_PROCESS_NAME,\r\n    alias: `${INQUIRY_PROCESS_NAME}/release-1`,\r\n    process: inquiryProcess,\r\n    unitTypes: [INQUIRY],\r\n  },\r\n];\r\n\r\n/**\r\n * Helper functions to figure out if transaction is in a specific state.\r\n * State is based on lastTransition given by transaction object and state description.\r\n *\r\n * @param {Object} tx transaction entity\r\n */\r\nconst txLastTransition = tx => tx?.attributes?.lastTransition;\r\n\r\n/**\r\n * Get states from the graph.\r\n *\r\n * Note: currently we assume that state description is in stateX format\r\n *       and it doesn't contain nested states.\r\n *\r\n * @param {Object} graph Description of transaction process graph in StateX format\r\n */\r\nconst statesObjectFromGraph = graph => graph.states || {};\r\n\r\n/**\r\n * This is a helper function that's attached to exported 'getProcess'.\r\n * Get next process state after given transition.\r\n *\r\n * @param {Object} process imported from a separate file\r\n * @returns {function} Returns a function to check the next state after given transition.\r\n */\r\nconst getStateAfterTransition = process => transition => {\r\n  const statesObj = statesObjectFromGraph(process.graph);\r\n  const stateNames = Object.keys(statesObj);\r\n  const fromState = stateNames.find(stateName => {\r\n    const transitionsForward = Object.keys(statesObj[stateName]?.on || {});\r\n    return transitionsForward.includes(transition);\r\n  });\r\n\r\n  return fromState && transition && statesObj[fromState]?.on[transition]\r\n    ? statesObj[fromState]?.on[transition]\r\n    : null;\r\n};\r\n\r\n/**\r\n * This is a helper function that's attached to exported 'getProcess' as 'getState'\r\n * Get state based on lastTransition of given transaction entity.\r\n *\r\n * How to use this function:\r\n *   // import { getProcess } from '../../transactions/transaction';\r\n *   const process = getProcess(processName);\r\n *   const state = process.getState(tx);\r\n *   const isInquiry = state === process.states.INQUIRY\r\n *\r\n * @param {Object} process imported from a separate file\r\n * @returns {function} Returns a function to check the current state of transaction entity against\r\n * given process.\r\n */\r\nconst getProcessState = process => tx => {\r\n  return getStateAfterTransition(process)(txLastTransition(tx));\r\n};\r\n\r\n/**\r\n * Pick transition names that lead to target state from given entries.\r\n *\r\n * First parameter, \"transitionEntries\", should look like this:\r\n * [\r\n *   [transitionForward1, stateY],\r\n *   [transitionForward2, stateY],\r\n *   [transitionForward3, stateZ],\r\n * ]\r\n *\r\n * @param {Array} transitionEntries\r\n * @param {String} targetState\r\n * @param {Array} initialTransitions\r\n */\r\nconst pickTransitionsToTargetState = (transitionEntries, targetState, initialTransitions) => {\r\n  return transitionEntries.reduce((pickedTransitions, transitionEntry) => {\r\n    const [transition, nextState] = transitionEntry;\r\n    return nextState === targetState ? [...pickedTransitions, transition] : pickedTransitions;\r\n  }, initialTransitions);\r\n};\r\n\r\n/**\r\n * Get all the transitions that lead to specified state.\r\n *\r\n * Process uses following syntax to describe the graph:\r\n * states: {\r\n *   stateX: {\r\n *     on: {\r\n *       transitionForward1: stateY,\r\n *       transitionForward2: stateY,\r\n *       transitionForward3: stateZ,\r\n *     },\r\n *   },\r\n *   stateY: {},\r\n *   stateZ: {\r\n *     on: {\r\n *       transitionForward4: stateY,\r\n *     },\r\n *   },\r\n * },\r\n *\r\n * Finding all the transitions to 'stateY' should pick transitions: 1, 2, 4\r\n *\r\n * @param {Object} process\r\n * @param {String} targetState\r\n */\r\nconst getTransitionsToState = (process, targetState) => {\r\n  const states = Object.values(statesObjectFromGraph(process.graph));\r\n\r\n  return states.reduce((collectedTransitions, inspectedState) => {\r\n    const transitionEntriesForward = Object.entries(inspectedState.on || {});\r\n    return pickTransitionsToTargetState(\r\n      transitionEntriesForward,\r\n      targetState,\r\n      collectedTransitions\r\n    );\r\n  }, []);\r\n};\r\n\r\n/**\r\n * Transitions that lead to given states.\r\n *\r\n * @param {Object} process against which transitions and states are checked.\r\n * @returns {function} Returns a function to get the transitions that lead to given states.\r\n */\r\nconst getTransitionsToStates = process => stateNames => {\r\n  return stateNames.reduce((pickedTransitions, stateName) => {\r\n    return [...pickedTransitions, ...getTransitionsToState(process, stateName)];\r\n  }, []);\r\n};\r\n\r\n/**\r\n * Helper functions to figure out if transaction has passed a given state.\r\n * This is based on transitions history given by transaction object.\r\n *\r\n * @param {Object} process against which passed states are checked.\r\n */\r\nconst hasPassedState = process => (stateName, tx) => {\r\n  const txTransitions = tx => tx?.attributes?.transitions || [];\r\n  const hasPassedTransition = (transitionName, tx) =>\r\n    !!txTransitions(tx).find(t => t.transition === transitionName);\r\n\r\n  return (\r\n    getTransitionsToState(process, stateName).filter(t => hasPassedTransition(t, tx)).length > 0\r\n  );\r\n};\r\n\r\n/**\r\n * If process has been renamed, but the graph itself is the same,\r\n * this function allows referencing the updated name of the process.\r\n * ProcessName is used in some translation keys and stateData functions.\r\n *\r\n * Note: If the process graph has changed, you must create a separate process graph for it.\r\n *\r\n * @param {String} processName\r\n */\r\nexport const resolveLatestProcessName = processName => {\r\n  switch (processName) {\r\n    case 'flex-product-default-process':\r\n    case 'default-buying-products':\r\n    case PURCHASE_PROCESS_NAME:\r\n      return PURCHASE_PROCESS_NAME;\r\n    case 'flex-default-process':\r\n    case 'flex-hourly-default-process':\r\n    case 'flex-booking-default-process':\r\n    case BOOKING_PROCESS_NAME:\r\n      return BOOKING_PROCESS_NAME;\r\n    case INQUIRY_PROCESS_NAME:\r\n      return INQUIRY_PROCESS_NAME;\r\n    default:\r\n      return processName;\r\n  }\r\n};\r\n\r\n/**\r\n * Get process based on process name\r\n * @param {String} processName\r\n */\r\nexport const getProcess = processName => {\r\n  const latestProcessName = resolveLatestProcessName(processName);\r\n  const processInfo = PROCESSES.find(process => process.name === latestProcessName);\r\n  if (processInfo) {\r\n    return {\r\n      ...processInfo.process,\r\n      getState: getProcessState(processInfo.process),\r\n      getStateAfterTransition: getStateAfterTransition(processInfo.process),\r\n      getTransitionsToStates: getTransitionsToStates(processInfo.process),\r\n      hasPassedState: hasPassedState(processInfo.process),\r\n    };\r\n  } else {\r\n    const error = new Error(`Unknown transaction process name: ${processName}`);\r\n    log.error(error, 'unknown-transaction-process', { processName });\r\n    throw error;\r\n  }\r\n};\r\n\r\n/**\r\n * Get the info about supported processes: name, alias, unitTypes\r\n */\r\nexport const getSupportedProcessesInfo = () =>\r\n  PROCESSES.map(p => {\r\n    const { process, ...rest } = p;\r\n    return rest;\r\n  });\r\n\r\n/**\r\n * Get all the transitions for every supported process\r\n */\r\nexport const getAllTransitionsForEveryProcess = () => {\r\n  return PROCESSES.reduce((accTransitions, processInfo) => {\r\n    return [...accTransitions, ...Object.values(processInfo.process.transitions)];\r\n  }, []);\r\n};\r\n\r\n/**\r\n * Check if the process is purchase process\r\n *\r\n * @param {String} processName\r\n */\r\nexport const isPurchaseProcess = processName => {\r\n  const latestProcessName = resolveLatestProcessName(processName);\r\n  const processInfo = PROCESSES.find(process => process.name === latestProcessName);\r\n  return [PURCHASE_PROCESS_NAME].includes(processInfo?.name);\r\n};\r\n\r\n/**\r\n * Check if the process/alias points to a booking process\r\n *\r\n * @param {String} processAlias\r\n */\r\nexport const isPurchaseProcessAlias = processAlias => {\r\n  const processName = processAlias ? processAlias.split('/')[0] : null;\r\n  return processAlias ? isPurchaseProcess(processName) : false;\r\n};\r\n\r\n/**\r\n * Check if the process is booking process\r\n *\r\n * @param {String} processName\r\n */\r\nexport const isBookingProcess = processName => {\r\n  const latestProcessName = resolveLatestProcessName(processName);\r\n  const processInfo = PROCESSES.find(process => process.name === latestProcessName);\r\n  return [BOOKING_PROCESS_NAME].includes(processInfo?.name);\r\n};\r\n\r\n/**\r\n * Check if the process/alias points to a booking process\r\n *\r\n * @param {String} processAlias\r\n */\r\nexport const isBookingProcessAlias = processAlias => {\r\n  const processName = processAlias ? processAlias.split('/')[0] : null;\r\n  return processAlias ? isBookingProcess(processName) : false;\r\n};\r\n\r\n/**\r\n * Check from unit type if full days should be used.\r\n * E.g. unit type is day or night\r\n * This is mainly used for availability management.\r\n *\r\n * @param {String} unitType\r\n */\r\nexport const isFullDay = unitType => {\r\n  return [DAY, NIGHT].includes(unitType);\r\n};\r\n\r\n/**\r\n * Get transitions that need provider's attention for every supported process\r\n */\r\nexport const getTransitionsNeedingProviderAttention = () => {\r\n  return PROCESSES.reduce((accTransitions, processInfo) => {\r\n    const statesNeedingProviderAttention = Object.values(\r\n      processInfo.process.statesNeedingProviderAttention\r\n    );\r\n    const process = processInfo.process;\r\n    const processTransitions = statesNeedingProviderAttention.reduce(\r\n      (pickedTransitions, stateName) => {\r\n        return [...pickedTransitions, ...getTransitionsToState(process, stateName)];\r\n      },\r\n      []\r\n    );\r\n    // Return only unique transitions names\r\n    // TODO: this setup is subject to problems if one process has important transition named\r\n    // similarly as unimportant transition in another process.\r\n    return [...new Set([...accTransitions, ...processTransitions])];\r\n  }, []);\r\n};\r\n\r\n/**\r\n * Actors\r\n *\r\n * There are 4 different actors that might initiate transitions:\r\n */\r\n\r\n// Roles of actors that perform transaction transitions\r\nexport const TX_TRANSITION_ACTOR_CUSTOMER = 'customer';\r\nexport const TX_TRANSITION_ACTOR_PROVIDER = 'provider';\r\nexport const TX_TRANSITION_ACTOR_SYSTEM = 'system';\r\nexport const TX_TRANSITION_ACTOR_OPERATOR = 'operator';\r\n\r\nexport const TX_TRANSITION_ACTORS = [\r\n  TX_TRANSITION_ACTOR_CUSTOMER,\r\n  TX_TRANSITION_ACTOR_PROVIDER,\r\n  TX_TRANSITION_ACTOR_SYSTEM,\r\n  TX_TRANSITION_ACTOR_OPERATOR,\r\n];\r\n\r\n/**\r\n * Get the role of the current user on given transaction entity.\r\n *\r\n * @param {UUID} currentUserId UUID of the currentUser entity\r\n * @param {Object} transaction Transaction entity from Marketplace API\r\n */\r\nexport const getUserTxRole = (currentUserId, transaction) => {\r\n  const tx = ensureTransaction(transaction);\r\n  const customer = tx.customer;\r\n  if (currentUserId && currentUserId.uuid && tx.id && customer.id) {\r\n    // user can be either customer or provider\r\n    return currentUserId.uuid === customer.id.uuid\r\n      ? TX_TRANSITION_ACTOR_CUSTOMER\r\n      : TX_TRANSITION_ACTOR_PROVIDER;\r\n  } else {\r\n    throw new Error(`Parameters for \"userIsCustomer\" function were wrong.\r\n      currentUserId: ${currentUserId}, transaction: ${transaction}`);\r\n  }\r\n};\r\n\r\n/**\r\n * Wildcard string for ConditionalResolver's conditions.\r\n */\r\nexport const CONDITIONAL_RESOLVER_WILDCARD = '*';\r\n\r\n/**\r\n * This class helps to resolve correct UI data for each combination of conditional data [state & role]\r\n *\r\n * Usage:\r\n *  const stateData = new ConditionalResolver([currentState, currentRole])\r\n *    .cond(['inquiry', 'customer'], () => {\r\n *      return { showInfoX: true, isSomethingOn: true };\r\n *    })\r\n *    .cond(['purchase', _], () => {\r\n *      return { showInfoX: false, isSomethingOn: true };\r\n *    })\r\n *    .default(() => {\r\n *      return { showDetailCardHeadings: true };\r\n *    })\r\n *    .resolve();\r\n */\r\nexport class ConditionalResolver {\r\n  constructor(data) {\r\n    this.data = data;\r\n    this.resolver = null;\r\n    this.defaultResolver = null;\r\n  }\r\n  cond(conditions, resolver) {\r\n    if (conditions?.length === this.data.length && this.resolver == null) {\r\n      const isDefined = item => typeof item !== 'undefined';\r\n      const isWildcard = item => item === CONDITIONAL_RESOLVER_WILDCARD;\r\n      const isMatch = conditions.reduce(\r\n        (isPartialMatch, item, i) =>\r\n          isPartialMatch && isDefined(item) && (isWildcard(item) || item === this.data[i]),\r\n        true\r\n      );\r\n      this.resolver = isMatch ? resolver : null;\r\n    }\r\n    return this;\r\n  }\r\n  default(defaultResolver) {\r\n    this.defaultResolver = defaultResolver;\r\n    return this;\r\n  }\r\n  resolve() {\r\n    // This resolves the output against current conditions.\r\n    // Therefore, call for resolve() must be the last call in method chain.\r\n    return this.resolver ? this.resolver() : this.defaultResolver ? this.defaultResolver() : null;\r\n  }\r\n}\r\n","// Add here the translations of the country names using key \"<language_code>: 'transalation'\" e.g. fi: 'Afganistan'\r\n// prettier-ignore\r\nconst countryCodes = [\r\n  { code: 'AF', en: 'Afghanistan', fr: 'Afghanistan', es: 'Afganistn', de: 'Afghanistan' },\r\n  { code: 'AX', en: 'land Islands', fr: 'les land', es: 'Islas land', de: 'land' },\r\n  { code: 'AL', en: 'Albania', fr: 'Albanie', es: 'Albania', de: 'Albanien' },\r\n  { code: 'DZ', en: 'Algeria', fr: 'Algrie', es: 'Argel', de: 'Algerien' },\r\n  { code: 'AS', en: 'American Samoa', fr: 'Samoa amricaines', es: 'Samoa Americana', de: 'Amerikanisch-Samoa' },\r\n  { code: 'AD', en: 'Andorra', fr: 'Andorre', es: 'Andorra', de: 'Andorra' },\r\n  { code: 'AO', en: 'Angola', fr: 'Angola', es: 'Angola', de: 'Angola' },\r\n  { code: 'AI', en: 'Anguilla', fr: 'Anguilla', es: 'Anguila', de: 'Anguilla' },\r\n  { code: 'AQ', en: 'Antarctica', fr: 'Antarctique', es: 'Antrtida', de: 'Antarktika' },\r\n  { code: 'AG', en: 'Antigua and Barbuda', fr: 'Antigua-et-Barbuda', es: 'Antigua y Barbuda', de: 'Antigua und Barbuda' },\r\n  { code: 'AR', en: 'Argentina', fr: 'Argentine', es: 'Argentina', de: 'Argentinien' },\r\n  { code: 'AM', en: 'Armenia', fr: 'Armnie', es: 'Armenia', de: 'Armenien' },\r\n  { code: 'AW', en: 'Aruba', fr: 'Aruba', es: 'Aruba', de: 'Aruba' },\r\n  { code: 'AU', en: 'Australia', fr: 'Australie', es: 'Australia', de: 'Australien' },\r\n  { code: 'AT', en: 'Austria', fr: 'Autriche', es: 'Austria', de: 'sterreich' },\r\n  { code: 'AZ', en: 'Azerbaijan', fr: 'Azerbadjan', es: 'Azerbaiyn', de: 'Aserbaidschan' },\r\n  { code: 'BS', en: 'Bahamas', fr: 'Bahamas', es: 'Bahamas', de: 'Bahamas' },\r\n  { code: 'BH', en: 'Bahrain', fr: 'Bahren', es: 'Bahrin', de: 'Bahrain' },\r\n  { code: 'BD', en: 'Bangladesh', fr: 'Bangladesh', es: 'Bangladesh', de: 'Bangladesch' },\r\n  { code: 'BB', en: 'Barbados', fr: 'Barbade', es: 'Barbados', de: 'Barbados' },\r\n  { code: 'BY', en: 'Belarus', fr: 'Bilorussie', es: 'Belars', de: 'Belarus' },\r\n  { code: 'BE', en: 'Belgium', fr: 'Belgique', es: 'Blgica', de: 'Belgien' },\r\n  { code: 'BZ', en: 'Belize', fr: 'Belize', es: 'Belice', de: 'Belize' },\r\n  { code: 'BJ', en: 'Benin', fr: 'Bnin', es: 'Benin', de: 'Benin' },\r\n  { code: 'BM', en: 'Bermuda', fr: 'Bermudes', es: 'Bermudas', de: 'Bermuda' },\r\n  { code: 'BT', en: 'Bhutan', fr: 'Bhoutan', es: 'Bhutn', de: 'Bhutan' },\r\n  { code: 'BO', en: 'Bolivia', fr: 'Bolivie', es: 'Bolivia', de: 'Bolivien' },\r\n  { code: 'BQ', en: 'Bonaire, Sint Eustatius and Saba', fr: 'Pays-Bas caribens', es: 'Caribe Neerlands', de: 'Bonaire, Sint Eustatius und Saba' },\r\n  { code: 'BA', en: 'Bosnia and Herzegovina', fr: 'Bosnie-Herzgovine', es: 'Bosnia y Herzegovina', de: 'Bosnien und Herzegowina' },\r\n  { code: 'BW', en: 'Botswana', fr: 'Botswana', es: 'Botsuana', de: 'Botswana' },\r\n  { code: 'BV', en: 'Bouvet Island', fr: 'le Bouvet', es: 'Isla Bouvet', de: 'Bouvetinsel' },\r\n  { code: 'BR', en: 'Brazil', fr: 'Brsil', es: 'Brasil', de: 'Brasilien' },\r\n  { code: 'IO', en: 'British Indian Ocean Territory', fr: 'Territoire britannique de lOcan Indien', es: 'Territorio Britnico del Ocano ndico', de: 'Britisches Territorium im Indischen Ozean' },\r\n  { code: 'BN', en: 'Brunei Darussalam', fr: 'Brunei Darussalam', es: 'Bruni', de: 'Brunei Darussalam' },\r\n  { code: 'BG', en: 'Bulgaria', fr: 'Bulgarie', es: 'Bulgaria', de: 'Bulgarien' },\r\n  { code: 'BF', en: 'Burkina Faso', fr: 'Burkina Faso', es: 'Burkina Faso', de: 'Burkina Faso' },\r\n  { code: 'BI', en: 'Burundi', fr: 'Burundi', es: 'Burundi', de: 'Burundi' },\r\n  { code: 'KH', en: 'Cambodia', fr: 'Cambodge', es: 'Camboya', de: 'Kambodscha' },\r\n  { code: 'CM', en: 'Cameroon', fr: 'Cameroun', es: 'Camern', de: 'Kamerun' },\r\n  { code: 'CA', en: 'Canada', fr: 'Canada', es: 'Canad', de: 'Kanada' },\r\n  { code: 'CV', en: 'Cape Verde', fr: 'Cap-Vert', es: 'Cabo Verde', de: 'Kap Verde' },\r\n  { code: 'KY', en: 'Cayman Islands', fr: 'Iles Cayman', es: 'Islas Caimn', de: 'Kaimaninseln' },\r\n  { code: 'CF', en: 'Central African Republic', fr: 'Rpublique centrafricaine', es: 'Repblica Centro-Africana', de: 'Zentralafrikanische Republik' },\r\n  { code: 'TD', en: 'Chad', fr: 'Tchad', es: 'Chad', de: 'Tschad' },\r\n  { code: 'CL', en: 'Chile', fr: 'Chili', es: 'Chile', de: 'Chile' },\r\n  { code: 'CN', en: 'China', fr: 'Chine', es: 'China', de: 'China, Volksrepublik' },\r\n  { code: 'CX', en: 'Christmas Island', fr: 'le Christmas', es: 'Islas Christmas', de: 'Weihnachtsinsel' },\r\n  { code: 'CC', en: 'Cocos (Keeling) Islands', fr: 'les Cocos', es: 'Islas Cocos', de: 'Kokosinseln' },\r\n  { code: 'CO', en: 'Colombia', fr: 'Colombie', es: 'Colombia', de: 'Kolumbien' },\r\n  { code: 'KM', en: 'Comoros', fr: 'Comores', es: 'Comoros', de: 'Komoren' },\r\n  { code: 'CG', en: 'Congo', fr: 'Rpublique du Congo', es: 'Congo', de: 'Kongo, Republik' },\r\n  { code: 'CD', en: 'Congo, the Democratic Republic of the', fr: 'Rpublique dmocratique du Congo', es: 'Repblica democrtica del Congo', de: 'Kongo, Demokratische Republik' },\r\n  { code: 'CK', en: 'Cook Islands', fr: 'les Cook', es: 'Islas Cook', de: 'Cookinseln' },\r\n  { code: 'CR', en: 'Costa Rica', fr: 'Costa Rica', es: 'Costa Rica', de: 'Costa Rica' },\r\n  { code: 'CI', en: 'Cte d\\'Ivoire', fr: 'Cte dIvoire', es: 'Costa de Marfil', de: 'Cte dIvoire' },\r\n  { code: 'HR', en: 'Croatia', fr: 'Croatie', es: 'Croacia', de: 'Kroatien' },\r\n  { code: 'CU', en: 'Cuba', fr: 'Cuba', es: 'Cuba', de: 'Kuba' },\r\n  { code: 'CW', en: 'Curaao', fr: 'Curaao', es: 'Curazao', de: 'Curaao' },\r\n  { code: 'CY', en: 'Cyprus', fr: 'Chypre', es: 'Chipre', de: 'Zypern' },\r\n  { code: 'CZ', en: 'Czech Republic', fr: 'Rpublique tchque', es: 'Repblica Checa', de: 'Tschechien' },\r\n  { code: 'DK', en: 'Denmark', fr: 'Danemark', es: 'Dinamarca', de: 'Dnemark' },\r\n  { code: 'DJ', en: 'Djibouti', fr: 'Djibouti', es: 'Yibuti', de: 'Dschibuti' },\r\n  { code: 'DM', en: 'Dominica', fr: 'Dominique', es: 'Domnica', de: 'Dominica' },\r\n  { code: 'DO', en: 'Dominican Republic', fr: 'Rpublique dominicaine', es: 'Repblica Dominicana', de: 'Dominikanische Republik' },\r\n  { code: 'EC', en: 'Ecuador', fr: 'quateur', es: 'Ecuador', de: 'Ecuador' },\r\n  { code: 'EG', en: 'Egypt', fr: 'gypte', es: 'Egipto', de: 'gypten' },\r\n  { code: 'SV', en: 'El Salvador', fr: 'Salvador', es: 'El Salvador', de: 'El Salvador' },\r\n  { code: 'GQ', en: 'Equatorial Guinea', fr: 'Guine quatoriale', es: 'Guinea Ecuatorial', de: 'quatorialguinea' },\r\n  { code: 'ER', en: 'Eritrea', fr: 'rythre', es: 'Eritrea', de: 'Eritrea' },\r\n  { code: 'EE', en: 'Estonia', fr: 'Estonie', es: 'Estonia', de: 'Estland' },\r\n  { code: 'ET', en: 'Ethiopia', fr: 'thiopie', es: 'Etiopa', de: 'thiopien' },\r\n  { code: 'FK', en: 'Falkland Islands (Malvinas)', fr: 'les Falkland', es: 'Islas Malvinas', de: 'Falklandinseln' },\r\n  { code: 'FO', en: 'Faroe Islands', fr: 'les Fro', es: 'Islas Faroe', de: 'Frer' },\r\n  { code: 'FJ', en: 'Fiji', fr: 'Fidji', es: 'Fiji', de: 'Fidschi' },\r\n  { code: 'FI', en: 'Finland', fr: 'Finlande', es: 'Finlandia', de: 'Finnland' },\r\n  { code: 'FR', en: 'France', fr: 'France', es: 'Francia', de: 'Frankreich' },\r\n  { code: 'GF', en: 'French Guiana', fr: 'Guyane franaise', es: 'Guayana Francesa', de: 'Franzsisch-Guayana' },\r\n  { code: 'PF', en: 'French Polynesia', fr: 'Polynsie franaise', es: 'Polinesia Francesa', de: 'Franzsisch-Polynesien' },\r\n  { code: 'TF', en: 'French Southern Territories', fr: 'Terres australes et antarctiques franaises', es: 'Territorios Australes Franceses', de: 'Franzsische Sd- und Antarktisgebiete' },\r\n  { code: 'GA', en: 'Gabon', fr: 'Gabon', es: 'Gabn', de: 'Gabun' },\r\n  { code: 'GM', en: 'Gambia', fr: 'Gambie', es: 'Gambia', de: 'Gambia' },\r\n  { code: 'GE', en: 'Georgia', fr: 'Gorgie', es: 'Georgia', de: 'Georgien' },\r\n  { code: 'DE', en: 'Germany', fr: 'Allemagne', es: 'Alemania', de: 'Deutschland' },\r\n  { code: 'GH', en: 'Ghana', fr: 'Ghana', es: 'Ghana', de: 'Ghana' },\r\n  { code: 'GI', en: 'Gibraltar', fr: 'Gibraltar', es: 'Gibraltar', de: 'Gibraltar' },\r\n  { code: 'GR', en: 'Greece', fr: 'Grce', es: 'Grecia', de: 'Griechenland' },\r\n  { code: 'GL', en: 'Greenland', fr: 'Groenland', es: 'Groenlandia', de: 'Grnland' },\r\n  { code: 'GD', en: 'Grenada', fr: 'Grenade', es: 'Granada', de: 'Grenada' },\r\n  { code: 'GP', en: 'Guadeloupe', fr: 'Guadeloupe', es: 'Guadalupe', de: 'Guadeloupe' },\r\n  { code: 'GU', en: 'Guam', fr: 'Guam', es: 'Guam', de: 'Guam' },\r\n  { code: 'GT', en: 'GuShwcseala', fr: 'GuShwcseala', es: 'GuShwcseala', de: 'GuShwcseala' },\r\n  { code: 'GG', en: 'Guernsey', fr: 'Guernesey', es: 'Guernsey', de: 'Guernsey' },\r\n  { code: 'GN', en: 'Guinea', fr: 'Guine', es: 'Guinea', de: 'Guinea' },\r\n  { code: 'GW', en: 'Guinea-Bissau', fr: 'Guine-Bissau', es: 'Guinea-Bissau', de: 'Guinea-Bissau' },\r\n  { code: 'GY', en: 'Guyana', fr: 'Guyane', es: 'Guayana', de: 'Guyana' },\r\n  { code: 'HT', en: 'Haiti', fr: 'Hati', es: 'Hait', de: 'Haiti' },\r\n  { code: 'HM', en: 'Heard Island and McDonald Islands', fr: 'les Heard-et-MacDonald', es: 'Islas Heard y McDonald', de: 'Heard und McDonaldinseln' },\r\n  { code: 'VA', en: 'Holy See (Vatican City State)', fr: 'Saint-Sige (Vatican)', es: 'Ciudad del Vaticano', de: 'Vatikanstadt' },\r\n  { code: 'HN', en: 'Honduras', fr: 'Honduras', es: 'Honduras', de: 'Honduras' },\r\n  { code: 'HK', en: 'Hong Kong', fr: 'Hong Kong', es: 'Hong Kong', de: 'Hongkong' },\r\n  { code: 'HU', en: 'Hungary', fr: 'Hongrie', es: 'Hungra', de: 'Ungarn' },\r\n  { code: 'IS', en: 'Iceland', fr: 'Islande', es: 'Islandia', de: 'Island' },\r\n  { code: 'IN', en: 'India', fr: 'Inde', es: 'India', de: 'Indien' },\r\n  { code: 'ID', en: 'Indonesia', fr: 'Indonsie', es: 'Indonesia', de: 'Indonesien' },\r\n  { code: 'IR', en: 'Iran, Islamic Republic of', fr: 'Iran', es: 'Irn', de: 'Iran, Islamische Republik' },\r\n  { code: 'IQ', en: 'Iraq', fr: 'Irak', es: 'Irak', de: 'Irak' },\r\n  { code: 'IE', en: 'Ireland', fr: 'Irlande', es: 'Irlanda', de: 'Irland' },\r\n  { code: 'IM', en: 'Isle of Man', fr: 'Ile de Man', es: 'Isla de Man', de: 'Insel Man' },\r\n  { code: 'IL', en: 'Israel', fr: 'Isral', es: 'Israel', de: 'Israel' },\r\n  { code: 'IT', en: 'Italy', fr: 'Italie', es: 'Italia', de: 'Italien' },\r\n  { code: 'JM', en: 'Jamaica', fr: 'Jamaque', es: 'Jamaica', de: 'Jamaika' },\r\n  { code: 'JP', en: 'Japan', fr: 'Japon', es: 'Japn', de: 'Japan' },\r\n  { code: 'JE', en: 'Jersey', fr: 'Jersey', es: 'Jersey', de: 'Jersey(Kanalinsel)' },\r\n  { code: 'JO', en: 'Jordan', fr: 'Jordanie', es: 'Jordania', de: 'Jordanien' },\r\n  { code: 'KZ', en: 'Kazakhstan', fr: 'Kazakhstan', es: 'Kazajstn', de: 'Kasachstan' },\r\n  { code: 'KE', en: 'Kenya', fr: 'Kenya', es: 'Kenia', de: 'Kenia' },\r\n  { code: 'KI', en: 'Kiribati', fr: 'Kiribati', es: 'Kiribati', de: 'Kiribati' },\r\n  { code: 'KP', en: 'Korea, Democratic People\\'s Republic of', fr: 'Core du Nord', es: 'Corea del Norte', de: 'Korea, Demokratische Volksrepublik(Nordkorea)' },\r\n  { code: 'KR', en: 'Korea, Republic of', fr: 'Core du Sud', es: 'Corea del Sur', de: 'Korea, Republik(Sdkorea)' },\r\n  { code: 'KW', en: 'Kuwait', fr: 'Kowet', es: 'Kuwait', de: 'Kuwait' },\r\n  { code: 'KG', en: 'Kyrgyzstan', fr: 'Kirghizistan', es: 'Kirguistn', de: 'Kirgisistan' },\r\n  { code: 'LA', en: 'Laos', fr: 'Laos', es: 'Laos', de: 'Laos' },\r\n  { code: 'LV', en: 'Latvia', fr: 'Lettonie', es: 'Letonia', de: 'Lettland' },\r\n  { code: 'LB', en: 'Lebanon', fr: 'Liban', es: 'Lbano', de: 'Libanon' },\r\n  { code: 'LS', en: 'Lesotho', fr: 'Lesotho', es: 'Lesotho', de: 'Lesotho' },\r\n  { code: 'LR', en: 'Liberia', fr: 'Libria', es: 'Liberia', de: 'Liberia' },\r\n  { code: 'LY', en: 'Libya', fr: 'Libye', es: 'Libia', de: 'Libyen' },\r\n  { code: 'LI', en: 'Liechtenstein', fr: 'Liechtenstein', es: 'Liechtenstein', de: 'Liechtenstein' },\r\n  { code: 'LT', en: 'Lithuania', fr: 'Lituanie', es: 'Lituania', de: 'Litauen' },\r\n  { code: 'LU', en: 'Luxembourg', fr: 'Luxembourg', es: 'Luxemburgo', de: 'Luxemburg' },\r\n  { code: 'MO', en: 'Macao', fr: 'Macao', es: 'Macao', de: 'Macau' },\r\n  { code: 'MK', en: 'North Macedonia', fr: 'Macdoine du Nord', es: 'Macedonia del Norte', de: 'Nordmazedonien' },\r\n  { code: 'MG', en: 'Madagascar', fr: 'Madagascar', es: 'Madagascar', de: 'Madagaskar' },\r\n  { code: 'MW', en: 'Malawi', fr: 'Malawi', es: 'Malawi', de: 'Malawi' },\r\n  { code: 'MY', en: 'Malaysia', fr: 'Malaisie', es: 'Malasia', de: 'Malaysia' },\r\n  { code: 'MV', en: 'Maldives', fr: 'Maldives', es: 'Maldivas', de: 'Malediven' },\r\n  { code: 'ML', en: 'Mali', fr: 'Mali', es: 'Mali', de: 'Mali' },\r\n  { code: 'MT', en: 'Malta', fr: 'Malte', es: 'Malta', de: 'Malta' },\r\n  { code: 'MH', en: 'Marshall Islands', fr: 'les Marshall', es: 'Islas Marshall', de: 'Marshallinseln' },\r\n  { code: 'MQ', en: 'Martinique', fr: 'Martinique', es: 'Martinica', de: 'Martinique' },\r\n  { code: 'MR', en: 'Mauritania', fr: 'Mauritanie', es: 'Mauritania', de: 'Mauretanien' },\r\n  { code: 'MU', en: 'Mauritius', fr: 'Maurice', es: 'Mauricio', de: 'Mauritius' },\r\n  { code: 'YT', en: 'Mayotte', fr: 'Mayotte', es: 'Mayotte', de: 'Mayotte' },\r\n  { code: 'MX', en: 'Mexico', fr: 'Mexique', es: 'Mxico', de: 'Mexiko' },\r\n  { code: 'FM', en: 'Micronesia, Federated States of', fr: 'Micronsie', es: 'Micronesia', de: 'Mikronesien' },\r\n  { code: 'MD', en: 'Moldova', fr: 'Moldavie', es: 'Moldova', de: 'Moldawien' },\r\n  { code: 'MC', en: 'Monaco', fr: 'Monaco', es: 'Mnaco', de: 'Monaco' },\r\n  { code: 'MN', en: 'Mongolia', fr: 'Mongolie', es: 'Mongolia', de: 'Mongolei' },\r\n  { code: 'ME', en: 'Montenegro', fr: 'Montngro', es: 'Montenegro', de: 'Montenegro' },\r\n  { code: 'MS', en: 'Montserrat', fr: 'Montserrat', es: 'Montserrat', de: 'Montserrat' },\r\n  { code: 'MA', en: 'Morocco', fr: 'Maroc', es: 'Marruecos', de: 'Marokko' },\r\n  { code: 'MZ', en: 'Mozambique', fr: 'Mozambique', es: 'Mozambique', de: 'Mosambik' },\r\n  { code: 'MM', en: 'Myanmar', fr: 'Myanmar', es: 'Myanmar', de: 'Myanmar' },\r\n  { code: 'NA', en: 'Namibia', fr: 'Namibie', es: 'Namibia', de: 'Namibia' },\r\n  { code: 'NR', en: 'Nauru', fr: 'Nauru', es: 'Nauru', de: 'Nauru' },\r\n  { code: 'NP', en: 'Nepal', fr: 'Npal', es: 'Nepal', de: 'Nepal' },\r\n  { code: 'NL', en: 'Netherlands', fr: 'Pays-Bas', es: 'Pases Bajos', de: 'Niederlande' },\r\n  { code: 'NC', en: 'New Caledonia', fr: 'Nouvelle-Caldonie', es: 'Nueva Caledonia', de: 'Neukaledonien' },\r\n  { code: 'NZ', en: 'New Zealand', fr: 'Nouvelle-Zlande', es: 'Nueva Zelanda', de: 'Neuseeland' },\r\n  { code: 'NI', en: 'Nicaragua', fr: 'Nicaragua', es: 'Nicaragua', de: 'Nicaragua' },\r\n  { code: 'NE', en: 'Niger', fr: 'Niger', es: 'Nger', de: 'Niger' },\r\n  { code: 'NG', en: 'Nigeria', fr: 'Nigeria', es: 'Nigeria', de: 'Nigeria' },\r\n  { code: 'NU', en: 'Niue', fr: 'Niue', es: 'Niue', de: 'Niue' },\r\n  { code: 'NF', en: 'Norfolk Island', fr: 'le Norfolk', es: 'Islas Norkfolk', de: 'Norfolkinsel' },\r\n  { code: 'MP', en: 'Northern Mariana Islands', fr: 'les Mariannes du Nord', es: 'Islas Marianas del Norte', de: 'Nrdliche Marianen' },\r\n  { code: 'NO', en: 'Norway', fr: 'Norvge', es: 'Noruega', de: 'Norwegen' },\r\n  { code: 'OM', en: 'Oman', fr: 'Oman', es: 'Omn', de: 'Oman' },\r\n  { code: 'PK', en: 'Pakistan', fr: 'Pakistan', es: 'Pakistn', de: 'Pakistan' },\r\n  { code: 'PW', en: 'Palau', fr: 'Palau', es: 'Islas Palaos', de: 'Palau' },\r\n  { code: 'PS', en: 'Palestine, State of', fr: 'Palestine', es: 'Palestina', de: 'Staat Palstina' },\r\n  { code: 'PA', en: 'Panama', fr: 'Panama', es: 'Panam', de: 'Panama' },\r\n  { code: 'PG', en: 'Papua New Guinea', fr: 'Papouasie-Nouvelle-Guine', es: 'Papa Nueva Guinea', de: 'Papua-Neuguinea' },\r\n  { code: 'PY', en: 'Paraguay', fr: 'Paraguay', es: 'Paraguay', de: 'Paraguay' },\r\n  { code: 'PE', en: 'Peru', fr: 'Prou', es: 'Per', de: 'Peru' },\r\n  { code: 'PH', en: 'Philippines', fr: 'Philippines', es: 'Filipinas', de: 'Philippinen' },\r\n  { code: 'PN', en: 'Pitcairn', fr: 'Pitcairn', es: 'Islas Pitcairn', de: 'Pitcairninseln' },\r\n  { code: 'PL', en: 'Poland', fr: 'Pologne', es: 'Polonia', de: 'Polen' },\r\n  { code: 'PT', en: 'Portugal', fr: 'Portugal', es: 'Portugal', de: 'Portugal' },\r\n  { code: 'PR', en: 'Puerto Rico', fr: 'Puerto Rico', es: 'Puerto Rico', de: 'Puerto Rico' },\r\n  { code: 'QA', en: 'Qatar', fr: 'Qatar', es: 'Qatar', de: 'Katar' },\r\n  { code: 'RE', en: 'Runion', fr: 'Runion', es: 'Reunin', de: 'Runion' },\r\n  { code: 'RO', en: 'Romania', fr: 'Roumanie', es: 'Rumana', de: 'Rumnien' },\r\n  { code: 'RU', en: 'Russian Federation', fr: 'Russie', es: 'Rusia', de: 'Russische Fderation' },\r\n  { code: 'RW', en: 'Rwanda', fr: 'Rwanda', es: 'Ruanda', de: 'Ruanda' },\r\n  { code: 'BL', en: 'Saint Barthlemy', fr: 'Saint-Barthlemy', es: 'San Bartolom', de: 'Saint-Barthlemy' },\r\n  { code: 'SH', en: 'Saint Helena, Ascension and Tristan da Cunha', fr: 'Sainte-Hlne', es: 'Santa Elena', de: 'St. Helena' },\r\n  { code: 'KN', en: 'Saint Kitts and Nevis', fr: 'Saint-Kitts-et-Nevis', es: 'San Cristbal y Nieves', de: 'St. Kitts und Nevis' },\r\n  { code: 'LC', en: 'Saint Lucia', fr: 'Sainte-Lucie', es: 'Santa Luca', de: 'St. Lucia' },\r\n  { code: 'MF', en: 'Saint Martin (French part)', fr: 'Saint-Martin (partie franaise)', es: 'San Martn (parte francesa)', de: 'Saint-Martin(franz. Teil)' },\r\n  { code: 'PM', en: 'Saint Pierre and Miquelon', fr: 'Saint-Pierre-et-Miquelon', es: 'San Pedro y Miqueln', de: 'Saint-Pierre und Miquelon' },\r\n  { code: 'VC', en: 'Saint Vincent and the Grenadines', fr: 'Saint-Vincent-et-les Grenadines', es: 'San Vicente y las Granadinas', de: 'St. Vincent und die Grenadinen' },\r\n  { code: 'WS', en: 'Samoa', fr: 'Samoa', es: 'Samoa', de: 'Samoa' },\r\n  { code: 'SM', en: 'San Marino', fr: 'Saint-Marin', es: 'San Marino', de: 'San Marino' },\r\n  { code: 'ST', en: 'Sao Tome and Principe', fr: 'Sao Tom-et-Principe', es: 'Santo Tom y Prncipe', de: 'So Tom und Prncipe' },\r\n  { code: 'SA', en: 'Saudi Arabia', fr: 'Arabie Saoudite', es: 'Arabia Saudita', de: 'Saudi-Arabien' },\r\n  { code: 'SN', en: 'Senegal', fr: 'Sngal', es: 'Senegal', de: 'Senegal' },\r\n  { code: 'RS', en: 'Serbia', fr: 'Serbie', es: 'Serbia y Montenegro', de: 'Serbien' },\r\n  { code: 'SC', en: 'Seychelles', fr: 'Seychelles', es: 'Seychelles', de: 'Seychellen' },\r\n  { code: 'SL', en: 'Sierra Leone', fr: 'Sierra Leone', es: 'Sierra Leona', de: 'Sierra Leone' },\r\n  { code: 'SG', en: 'Singapore', fr: 'Singapour', es: 'Singapur', de: 'Singapur' },\r\n  { code: 'SX', en: 'Sint Maarten (Dutch part)', fr: 'Saint-Martin (partie nerlandaise)', es: 'San Martn (parte neerlandesa)', de: 'Sint Maarten(niederl. Teil)' },\r\n  { code: 'SK', en: 'Slovakia', fr: 'Slovaquie', es: 'Eslovaquia', de: 'Slowakei' },\r\n  { code: 'SI', en: 'Slovenia', fr: 'Slovnie', es: 'Eslovenia', de: 'Slowenien' },\r\n  { code: 'SB', en: 'Solomon Islands', fr: 'les Salomon', es: 'Islas Solomn', de: 'Salomonen' },\r\n  { code: 'SO', en: 'Somalia', fr: 'Somalie', es: 'Somalia', de: 'Somalia' },\r\n  { code: 'ZA', en: 'South Africa', fr: 'Afrique du Sud', es: 'Sudfrica', de: 'Sdafrika' },\r\n  { code: 'GS', en: 'South Georgia and the South Sandwich Islands', fr: 'Gorgie du Sud et les les Sandwich du Sud', es: 'Georgia del Sur e Islas Sandwich deSur', de: 'Sdgeorgien und die Sdlichen Sandwichinseln' },\r\n  { code: 'SS', en: 'South Sudan', fr: 'Sud-Soudan', es: 'Sudn del Sur', de: 'Sdsudan' },\r\n  { code: 'ES', en: 'Spain', fr: 'Espagne', es: 'Espaa', de: 'Spanien' },\r\n  { code: 'LK', en: 'Sri Lanka', fr: 'Sri Lanka', es: 'Sri Lanka', de: 'Sri Lanka' },\r\n  { code: 'SD', en: 'Sudan', fr: 'Soudan', es: 'Sudn', de: 'Sudan' },\r\n  { code: 'SR', en: 'Suriname', fr: 'Suriname', es: 'Surinam', de: 'Suriname' },\r\n  { code: 'SJ', en: 'Svalbard and Jan Mayen', fr: 'Svalbard et Jan Mayen', es: 'Islas Svalbard y Jan Mayen', de: 'SvalbardundJan Mayen' },\r\n  { code: 'SZ', en: 'Swaziland', fr: 'Eswatini', es: 'Suazilandia', de: 'Swasiland' },\r\n  { code: 'SE', en: 'Sweden', fr: 'Sude', es: 'Suecia', de: 'Schweden' },\r\n  { code: 'CH', en: 'Switzerland', fr: 'Suisse', es: 'Suiza', de: 'Schweiz' },\r\n  { code: 'SY', en: 'Syrian Arab Republic', fr: 'Syrie', es: 'Siria', de: 'Syrien, Arabische Republik' },\r\n  { code: 'TW', en: 'Taiwan', fr: 'Taiwan', es: 'Taiwn', de: 'Taiwan' },\r\n  { code: 'TJ', en: 'Tajikistan', fr: 'Tadjikistan', es: 'Tayikistn', de: 'Tadschikistan' },\r\n  { code: 'TZ', en: 'Tanzania', fr: 'Tanzanie', es: 'Tanzania', de: 'Tansania' },\r\n  { code: 'TH', en: 'Thailand', fr: 'Thalande', es: 'Tailandia', de: 'Thailand' },\r\n  { code: 'TL', en: 'Timor-Leste', fr: 'Timor-Leste', es: 'Timor-Leste', de: 'Osttimor' },\r\n  { code: 'TG', en: 'Togo', fr: 'Togo', es: 'Togo', de: 'Togo' },\r\n  { code: 'TK', en: 'Tokelau', fr: 'Tokelau', es: 'Tokelau', de: 'Tokelau' },\r\n  { code: 'TO', en: 'Tonga', fr: 'Tonga', es: 'Tonga', de: 'Tonga' },\r\n  { code: 'TT', en: 'Trinidad and Tobago', fr: 'Trinit-et-Tobago', es: 'Trinidad y Tobago', de: 'Trinidad und Tobago' },\r\n  { code: 'TN', en: 'Tunisia', fr: 'Tunisie', es: 'Tnez', de: 'Tunesien' },\r\n  { code: 'TR', en: 'Turkey', fr: 'Turquie', es: 'Turqua', de: 'Trkei' },\r\n  { code: 'TM', en: 'Turkmenistan', fr: 'Turkmnistan', es: 'Turkmenistn', de: 'Turkmenistan' },\r\n  { code: 'TC', en: 'Turks and Caicos Islands', fr: 'les Turques-et-Caques', es: 'Islas Turcas y Caicos', de: 'Turks- und Caicosinseln' },\r\n  { code: 'TV', en: 'Tuvalu', fr: 'Tuvalu', es: 'Tuvalu', de: 'Tuvalu' },\r\n  { code: 'UG', en: 'Uganda', fr: 'Ouganda', es: 'Uganda', de: 'Uganda' },\r\n  { code: 'UA', en: 'Ukraine', fr: 'Ukraine', es: 'Ucrania', de: 'Ukraine' },\r\n  { code: 'AE', en: 'United Arab Emirates', fr: 'mirats Arabes Unis', es: 'Emiratos rabes Unidos', de: 'Vereinigte Arabische Emirate' },\r\n  { code: 'GB', en: 'United Kingdom', fr: 'Royaume-Uni', es: 'Reino Unido', de: 'Vereinigtes Knigreich Grobritannien und Nordirland' },\r\n  { code: 'US', en: 'United States', fr: 'tats-Unis', es: 'Estados Unidos de Amrica', de: 'Vereinigte Staaten von Amerika' },\r\n  { code: 'UM', en: 'United States Minor Outlying Islands', fr: 'les mineures loignes des tats-Unis', es: 'Islas Ultramarinas Menores de Estados Unidos', de: 'United States Minor Outlying Islands' },\r\n  { code: 'UY', en: 'Uruguay', fr: 'Uruguay', es: 'Uruguay', de: 'Uruguay' },\r\n  { code: 'UZ', en: 'Uzbekistan', fr: 'Ouzbkistan', es: 'Uzbekistn', de: 'Usbekistan' },\r\n  { code: 'VU', en: 'Vanuatu', fr: 'Vanuatu', es: 'Vanuatu', de: 'Vanuatu' },\r\n  { code: 'VE', en: 'Venezuela', fr: 'Venezuela', es: 'Venezuela', de: 'Venezuela' },\r\n  { code: 'VN', en: 'Viet Nam', fr: 'Vit Nam', es: 'Vietnam', de: 'Vietnam' },\r\n  { code: 'VG', en: 'Virgin Islands, British', fr: 'British Virgin Islands', es: 'Islas Vrgenes Britnicas', de: 'Britische Jungferninseln' },\r\n  { code: 'VI', en: 'Virgin Islands, U.S.', fr: 'les Vierges amricaines', es: 'Islas Vrgenes de los Estados Unidos de Amrica', de: 'Amerikanische Jungferninseln' },\r\n  { code: 'WF', en: 'Wallis and Futuna', fr: 'Wallis-et-Futuna', es: 'Wallis y Futuna', de: 'Wallis und Futuna' },\r\n  { code: 'EH', en: 'Western Sahara', fr: 'Sahara occidental', es: 'Sahara Occidental', de: 'Westsahara' },\r\n  { code: 'YE', en: 'Yemen', fr: 'Ymen', es: 'Yemen', de: 'Jemen' },\r\n  { code: 'ZM', en: 'Zambia', fr: 'Zambie', es: 'Zambia', de: 'Sambia' },\r\n  { code: 'ZW', en: 'Zimbabwe', fr: 'Zimbabwe', es: 'Zimbabue', de: 'Simbabwe' },\r\n];\r\n\r\nconst getCountryCodes = lang => {\r\n  // Add the lnew locale here so that the correct translations will be returned.\r\n  // If locale is unknown or the translation is missing, this will default to english coutnry name.\r\n  const codes = countryCodes.map(c => {\r\n    const countryName = c[lang] ? c[lang] : c['en'];\r\n    const counryCode = c.code;\r\n\r\n    return { code: counryCode, name: countryName };\r\n  });\r\n  return codes;\r\n};\r\n\r\nexport default getCountryCodes;\r\n","// These helpers are calling this template's own server-side routes\r\n// so, they are not directly calling Marketplace API or Integration API.\r\n// You can find these api endpoints from 'server/api/...' directory\r\n\r\nimport appSettings from '../config/settings';\r\nimport { types as sdkTypes, transit } from './sdkLoader';\r\nimport Decimal from 'decimal.js';\r\n\r\nexport const apiBaseUrl = marketplaceRootURL => {\r\n  const port = process.env.REACT_APP_DEV_API_SERVER_PORT;\r\n  const useDevApiServer = process.env.NODE_ENV === 'development' && !!port;\r\n\r\n  // In development, the dev API server is running in a different port\r\n  if (useDevApiServer) {\r\n    return `http://localhost:${port}`;\r\n  }\r\n\r\n  // Otherwise, use the given marketplaceRootURL parameter or the same domain and port as the frontend\r\n  return marketplaceRootURL ? marketplaceRootURL.replace(/\\/$/, '') : `${window.location.origin}`;\r\n};\r\n\r\n// Application type handlers for JS SDK.\r\n//\r\n// NOTE: keep in sync with `typeHandlers` in `server/api-util/sdk.js`\r\nexport const typeHandlers = [\r\n  // Use Decimal type instead of SDK's BigDecimal.\r\n  {\r\n    type: sdkTypes.BigDecimal,\r\n    customType: Decimal,\r\n    writer: v => new sdkTypes.BigDecimal(v.toString()),\r\n    reader: v => new Decimal(v.value),\r\n  },\r\n];\r\n\r\nconst serialize = data => {\r\n  return transit.write(data, { typeHandlers, verbose: appSettings.sdk.transitVerbose });\r\n};\r\n\r\nconst deserialize = str => {\r\n  return transit.read(str, { typeHandlers });\r\n};\r\n\r\nconst methods = {\r\n  POST: 'POST',\r\n  GET: 'GET',\r\n  PUT: 'PUT',\r\n  PATCH: 'PATCH',\r\n  DELETE: 'DELETE',\r\n};\r\n\r\n// If server/api returns data from SDK, you should set Content-Type to 'application/transit+json'\r\nconst request = (path, options = {}) => {\r\n  const url = `${apiBaseUrl()}${path}`;\r\n  const { credentials, headers, body, ...rest } = options;\r\n\r\n  // If headers are not set, we assume that the body should be serialized as transit format.\r\n  const shouldSerializeBody =\r\n    (!headers || headers['Content-Type'] === 'application/transit+json') && body;\r\n  const bodyMaybe = shouldSerializeBody ? { body: serialize(body) } : {};\r\n\r\n  const fetchOptions = {\r\n    credentials: credentials || 'include',\r\n    // Since server/api mostly talks to Marketplace API using SDK,\r\n    // we default to 'application/transit+json' as content type (as SDK uses transit).\r\n    headers: headers || { 'Content-Type': 'application/transit+json' },\r\n    ...bodyMaybe,\r\n    ...rest,\r\n  };\r\n\r\n  return window.fetch(url, fetchOptions).then(res => {\r\n    const contentTypeHeader = res.headers.get('Content-Type');\r\n    const contentType = contentTypeHeader ? contentTypeHeader.split(';')[0] : null;\r\n\r\n    if (res.status >= 400) {\r\n      return res.json().then(data => {\r\n        let e = new Error();\r\n        e = Object.assign(e, data);\r\n\r\n        throw e;\r\n      });\r\n    }\r\n    if (contentType === 'application/transit+json') {\r\n      return res.text().then(deserialize);\r\n    } else if (contentType === 'application/json') {\r\n      return res.json();\r\n    }\r\n    return res.text();\r\n  });\r\n};\r\n\r\n// Keep the previous parameter order for the post method.\r\n// For now, only POST has own specific function, but you can create more or use request directly.\r\nconst post = (path, body, options = {}) => {\r\n  const requestOptions = {\r\n    ...options,\r\n    method: methods.POST,\r\n    body,\r\n  };\r\n\r\n  return request(path, requestOptions);\r\n};\r\n\r\n// Fetch transaction line items from the local API endpoint.\r\n//\r\n// See `server/api/transaction-line-items.js` to see what data should\r\n// be sent in the body.\r\nexport const transactionLineItems = body => {\r\n  return post('/api/transaction-line-items', body);\r\n};\r\n\r\n// Initiate a privileged transaction.\r\n//\r\n// With privileged transitions, the transactions need to be created\r\n// from the backend. This endpoint enables sending the order data to\r\n// the local backend, and passing that to the Marketplace API.\r\n//\r\n// See `server/api/initiate-privileged.js` to see what data should be\r\n// sent in the body.\r\nexport const initiatePrivileged = body => {\r\n  return post('/api/initiate-privileged', body);\r\n};\r\n\r\n// Transition a transaction with a privileged transition.\r\n//\r\n// This is similar to the `initiatePrivileged` above. It will use the\r\n// backend for the transition. The backend endpoint will add the\r\n// payment line items to the transition params.\r\n//\r\n// See `server/api/transition-privileged.js` to see what data should\r\n// be sent in the body.\r\nexport const transitionPrivileged = body => {\r\n  return post('/api/transition-privileged', body);\r\n};\r\n\r\n// Create user with identity provider (e.g. Facebook or Google)\r\n//\r\n// If loginWithIdp api call fails and user can't authenticate to Marketplace API with idp\r\n// we will show option to create a new user with idp.\r\n// For that user needs to confirm data fetched from the idp.\r\n// After the confirmation, this endpoint is called to create a new user with confirmed data.\r\n//\r\n// See `server/api/auth/createUserWithIdp.js` to see what data should\r\n// be sent in the body.\r\nexport const createUserWithIdp = body => {\r\n  return post('/api/auth/create-user-with-idp', body);\r\n};\r\n","import { subUnitDivisors } from '../config/settingsCurrency';\r\nimport { getSupportedProcessesInfo } from '../transactions/transaction';\r\n\r\n// Generic helpers for validating config values\r\n\r\nconst printErrorIfHostedAssetIsMissing = props => {\r\n  Object.entries(props).map(entry => {\r\n    const [key, value = {}] = entry || [];\r\n    if (Object.keys(value)?.length === 0) {\r\n      console.error(`Mandatory hosted asset for ${key} is missing.\r\n      Check that \"appCdnAssets\" property has valid paths in src/config/configDefault.js file,\r\n      and that the marketplace has added content in Console`);\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Check that listing fields don't have keys that clash with built-in keys\r\n * that this app uses in public data.\r\n *\r\n * @param {Object} listingFields object that has 'key' property.\r\n * @returns true if there's a clash with specific built-in keys.\r\n */\r\nconst hasClashWithBuiltInPublicDataKey = listingFields => {\r\n  const builtInPublicDataKeys = [\r\n    'listingType',\r\n    'transactionProcessAlias',\r\n    'unitType',\r\n    'location',\r\n    'pickupEnabled',\r\n    'shippingEnabled',\r\n    'shippingPriceInSubunitsOneItem',\r\n    'shippingPriceInSubunitsAdditionalItems',\r\n  ];\r\n  let hasClash = false;\r\n  listingFields.forEach(field => {\r\n    if (builtInPublicDataKeys.includes(field.key)) {\r\n      hasClash = true;\r\n      console.error(\r\n        `The id of a listing field (\"${field.key}\") clashes with the built-in keys that this app uses in public data.`\r\n      );\r\n    }\r\n  });\r\n  return hasClash;\r\n};\r\n\r\n/////////////////////////\r\n// Merge localizations //\r\n/////////////////////////\r\n\r\nconst mergeCurrency = (hostedCurrency, defaultCurrency) => {\r\n  const currency = hostedCurrency || defaultCurrency;\r\n  const supportedCurrencies = Object.keys(subUnitDivisors);\r\n  if (supportedCurrencies.includes(currency)) {\r\n    return currency;\r\n  } else {\r\n    console.error(\r\n      `The given currency (${currency}) is not supported.\r\n      There's a missing entry on subUnitDivisors`\r\n    );\r\n    return null;\r\n  }\r\n};\r\n\r\nconst validateStripeCurrency = stripe => {\r\n  const supportedCountries = stripe.supportedCountries || [];\r\n  const supportedCurrencies = Object.keys(subUnitDivisors);\r\n  const validSupportedCountries = supportedCountries.filter(country => {\r\n    const isSupported = supportedCurrencies.includes(country.currency);\r\n\r\n    if (!isSupported) {\r\n      console.error(\r\n        `Stripe configuration contained currency that was not supported by the client app.\r\n        There's a missing entry on subUnitDivisors for ${country.currency}.`\r\n      );\r\n    }\r\n\r\n    return isSupported;\r\n  });\r\n  return { ...stripe, supportedCountries: validSupportedCountries };\r\n};\r\n\r\nconst mergeLocalizations = (hostedLocalization, defaultLocalization) => {\r\n  // This defaults to 'en', if no locale is set.\r\n  const locale = hostedLocalization?.locale || defaultLocalization.locale || 'en';\r\n  // NOTE: We use this with react-dates and moment, the range should be 0 - 6 instead of 1-7.\r\n  const firstDay = hostedLocalization?.firstDayOfWeek || defaultLocalization.firstDayOfWeek || 1;\r\n  const firstDayInMomentRange = firstDay % 7;\r\n  return { locale, firstDayOfWeek: firstDayInMomentRange };\r\n};\r\n\r\n/////////////////////\r\n// Merge analytics //\r\n/////////////////////\r\n\r\n// The \"arguments\" (an Array like object) is only available for non-arrow functions.\r\nfunction joinStrings(str1, str2) {\r\n  const removeTrailingComma = str => str.trim().replace(/,\\s*$/, '');\r\n  // Filter out empty strings (falsy) and join remaining items with comma\r\n  return Array.from(arguments)\r\n    .filter(Boolean)\r\n    .map(str => removeTrailingComma(str))\r\n    .join(',');\r\n}\r\n\r\nconst mergeAnalyticsConfig = (hostedAnalyticsConfig, defaultAnalyticsConfig) => {\r\n  const { enabled, measurementId } = hostedAnalyticsConfig?.googleAnalytics || {};\r\n  const googleAnalyticsId =\r\n    enabled && measurementId ? measurementId : defaultAnalyticsConfig.googleAnalyticsId;\r\n\r\n  // With Plausible, we merge hosted analytics and default (built-in) analytics if any (Plausible supports multiple domains)\r\n  // Hosted format is: \"plausible\": { \"enabled\": true, \"domain\": \"example.com\" }\r\n  const plausibleHostedConfig = hostedAnalyticsConfig?.plausible || {};\r\n  const plausibleDomainsHosted =\r\n    plausibleHostedConfig?.enabled && plausibleHostedConfig?.domain\r\n      ? plausibleHostedConfig.domain\r\n      : '';\r\n  const plausibleDomainsDefault = defaultAnalyticsConfig.plausibleDomains;\r\n  const plausibleDomains = joinStrings(plausibleDomainsHosted, plausibleDomainsDefault);\r\n  const plausibleDomainsMaybe = plausibleDomains ? { plausibleDomains } : {};\r\n\r\n  return { googleAnalyticsId, ...plausibleDomainsMaybe };\r\n};\r\n\r\n////////////////////\r\n// Merge branding //\r\n////////////////////\r\n\r\n// Generate darker and lighter versions of marketplace color,\r\n// if those values are not set by default.\r\n// Adjusted from https://gist.github.com/xenozauros/f6e185c8de2a04cdfecf\r\nconst hexToCssHsl = (hexColor, lightnessDiff) => {\r\n  let hex = hexColor.replace(/^#/, '');\r\n  if (hex.length === 3) {\r\n    hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\r\n  }\r\n  const r = parseInt(hex.substr(0, 2), 16) / 255;\r\n  const g = parseInt(hex.substr(2, 2), 16) / 255;\r\n  const b = parseInt(hex.substr(4, 2), 16) / 255;\r\n\r\n  // r /= 255, g /= 255, b /= 255;\r\n  const max = Math.max(r, g, b);\r\n  const min = Math.min(r, g, b);\r\n\r\n  let h;\r\n  let s;\r\n  let l = (max + min) / 2;\r\n\r\n  if (max == min) {\r\n    // achromatic\r\n    h = 0;\r\n    s = 0;\r\n  } else {\r\n    const d = max - min;\r\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n    switch (max) {\r\n      case r:\r\n        h = (g - b) / d + (g < b ? 6 : 0);\r\n        break;\r\n      case g:\r\n        h = (b - r) / d + 2;\r\n        break;\r\n      case b:\r\n        h = (r - g) / d + 4;\r\n        break;\r\n    }\r\n    h /= 6;\r\n  }\r\n\r\n  h = Math.round(h * 360);\r\n  s = Math.round(s * 100);\r\n  l = Math.round(l * 100);\r\n\r\n  return `hsl(${h}, ${s}%, ${l + lightnessDiff}%)`;\r\n};\r\n\r\nconst getVariantURL = (socialSharingImage, variantName) => {\r\n  return socialSharingImage?.type === 'imageAsset'\r\n    ? socialSharingImage.attributes.variants[variantName]?.url\r\n    : null;\r\n};\r\n\r\nconst mergeBranding = (brandingConfig, defaultBranding) => {\r\n  const {\r\n    marketplaceColors,\r\n    logo,\r\n    logoSettings,\r\n    loginBackgroundImage,\r\n    socialSharingImage,\r\n    ...rest\r\n  } = brandingConfig || {};\r\n\r\n  const marketplaceColor = marketplaceColors?.mainColor || defaultBranding.marketplaceColor;\r\n  const marketplaceColorDark = marketplaceColor ? hexToCssHsl(marketplaceColor, -10) : null;\r\n  const marketplaceColorLight = marketplaceColor ? hexToCssHsl(marketplaceColor, 10) : null;\r\n\r\n  const logoSettingsRaw = logoSettings || defaultBranding.logoSettings;\r\n  const validLogoSettings =\r\n    logoSettingsRaw?.format === 'image' && [24, 36, 48].includes(logoSettingsRaw?.height);\r\n\r\n  const facebookImage =\r\n    getVariantURL(socialSharingImage, 'scaled1200') || defaultBranding.facebookImageURL;\r\n  const twitterImage =\r\n    getVariantURL(socialSharingImage, 'scaled600') || defaultBranding.twitterImageURL;\r\n\r\n  return {\r\n    marketplaceColor,\r\n    marketplaceColorDark,\r\n    marketplaceColorLight,\r\n    logoSettings: validLogoSettings ? logoSettingsRaw : { format: 'image', height: 24 },\r\n    logoImageDesktop: logo || defaultBranding.logoImageDesktopURL,\r\n    logoImageMobile: logo || defaultBranding.logoImageMobileURL,\r\n    brandImage: loginBackgroundImage,\r\n    facebookImage,\r\n    twitterImage,\r\n    ...rest,\r\n  };\r\n};\r\n\r\n///////////////////\r\n// Merge layouts //\r\n///////////////////\r\n\r\nconst pickVariant = (hostedVariant, defaultVariant) =>\r\n  hostedVariant?.variantType ? hostedVariant : defaultVariant;\r\nconst validVariantConfig = (hostedVariant, defaultVariant, validVariantTypes, fallback) => {\r\n  const variant = pickVariant(hostedVariant, defaultVariant);\r\n  const isValidVariant = validVariantTypes.includes(variant?.variantType);\r\n\r\n  if (!isValidVariant) {\r\n    console.warn('Unsupported layout option detected', variant);\r\n  }\r\n  if (variant.variantType === 'cropImage') {\r\n    const [w, h] = variant.aspectRatio.split('/') || ['1', '1'];\r\n    const aspectWidth = Number.parseInt(w, 10);\r\n    const aspectHeight = Number.parseInt(h, 10);\r\n    return isValidVariant\r\n      ? { ...variant, aspectWidth, aspectHeight, variantPrefix: defaultVariant.variantPrefix }\r\n      : fallback;\r\n  }\r\n\r\n  return isValidVariant ? variant : fallback;\r\n};\r\n\r\nconst mergeLayouts = (layoutConfig, defaultLayout) => {\r\n  const searchPage = validVariantConfig(\r\n    layoutConfig?.searchPage,\r\n    defaultLayout?.searchPage,\r\n    ['map', 'grid'],\r\n    { variantType: 'grid' }\r\n  );\r\n\r\n  const listingPage = validVariantConfig(\r\n    layoutConfig?.listingPage,\r\n    defaultLayout?.listingPage,\r\n    ['coverPhoto', 'carousel'],\r\n    { variantType: 'carousel' }\r\n  );\r\n\r\n  const listingImage = validVariantConfig(\r\n    layoutConfig?.listingImage,\r\n    defaultLayout?.listingImage,\r\n    ['cropImage'],\r\n    { variantType: 'cropImage', aspectWidth: 1, aspectHeight: 1, variantPrefix: 'listing-card' }\r\n  );\r\n\r\n  return {\r\n    searchPage,\r\n    listingPage,\r\n    listingImage,\r\n  };\r\n};\r\n\r\n////////////////////////////////////\r\n// Validate listing fields config //\r\n////////////////////////////////////\r\n\r\n// Validate enum type strings (if default value is given, value is considered optional)\r\nconst validEnumString = (key, value, options, defaultOption) => {\r\n  const isUndefined = typeof value === 'undefined';\r\n  const isValidValue = options.includes(value);\r\n  const isValid = (typeof defaultOption !== 'undefined' && isUndefined) || isValidValue;\r\n  const valueMaybe = isValid ? { [key]: value || defaultOption } : {};\r\n  return [isValid, valueMaybe];\r\n};\r\n\r\n// Validate boolean values (if default value is given, value is considered optional)\r\nconst validBoolean = (key, value, defaultValue) => {\r\n  const isUndefined = typeof value === 'undefined';\r\n  const isBoolean = typeof value == 'boolean';\r\n  const isValid = (typeof defaultValue !== 'undefined' && isUndefined) || isBoolean;\r\n\r\n  const validValue = isBoolean ? { [key]: value } : isValid ? { [key]: defaultValue } : {};\r\n  return [isValid, validValue];\r\n};\r\n\r\nconst validLabel = label => {\r\n  const isValid = typeof label === 'string';\r\n  const labelMaybe = isValid ? { label } : {};\r\n  return [isValid, labelMaybe];\r\n};\r\n\r\nconst validKey = (key, allKeys) => {\r\n  const isUniqueKey = allKeys.indexOf(key) === allKeys.lastIndexOf(key);\r\n  return [isUniqueKey, { key }];\r\n};\r\n\r\nconst validListingTypesForListingConfig = (includeForListingTypes, listingTypesInUse) => {\r\n  const isUndefinedOrNull = includeForListingTypes == null;\r\n  const isArray = Array.isArray(includeForListingTypes);\r\n  const validatedListingTypes = isArray\r\n    ? includeForListingTypes.filter(pa => listingTypesInUse.includes(pa))\r\n    : [];\r\n\r\n  const hasValidListingTypes = validatedListingTypes.length > 0;\r\n  const isValid = hasValidListingTypes || isUndefinedOrNull;\r\n  const validValue = hasValidListingTypes\r\n    ? { includeForListingTypes: validatedListingTypes }\r\n    : isUndefinedOrNull\r\n    ? { includeForListingTypes: listingTypesInUse }\r\n    : {};\r\n  return [isValid, validValue];\r\n};\r\n\r\nconst validListingTypesForListingTypeConfig = (listingTypeConfig, listingTypesInUse) => {\r\n  const { limitToListingTypeIds, listingTypeIds } = listingTypeConfig || {};\r\n\r\n  if (limitToListingTypeIds === true) {\r\n    const isArray = Array.isArray(listingTypeIds);\r\n    const validatedListingTypes = isArray\r\n      ? listingTypeIds.filter(lt => listingTypesInUse.includes(lt))\r\n      : [];\r\n\r\n    // If listingTypeIds array contains valid listing types,\r\n    // we'll rename the array as includeForListingTypes\r\n    const isValid = validatedListingTypes.length > 0;\r\n    const validValue = isValid ? { includeForListingTypes: validatedListingTypes } : {};\r\n    return [isValid, validValue];\r\n  } else {\r\n    // If hosted config returns limitToListingTypeIds as false,\r\n    // we return the full list of active listingTypes.\r\n    return [true, { includeForListingTypes: listingTypesInUse }];\r\n  }\r\n};\r\n\r\nconst isStringType = str => typeof str === 'string';\r\nconst pickOptionShapes = o => isStringType(o.option) && isStringType(o.label);\r\n\r\nconst validSchemaOptions = (enumOptions, schemaType) => {\r\n  const isUndefined = typeof enumOptions === 'undefined';\r\n  const isArray = Array.isArray(enumOptions);\r\n  const arrayContainsOptionShapes = isArray\r\n    ? enumOptions.filter(pickOptionShapes).length === enumOptions.length\r\n    : false;\r\n  const isEnumSchemaType = ['enum', 'multi-enum'].includes(schemaType);\r\n  const shouldHaveSchemaOptions = isEnumSchemaType && !isUndefined;\r\n\r\n  const isValid = isUndefined || (shouldHaveSchemaOptions && arrayContainsOptionShapes);\r\n  const schemaOptionsMaybe =\r\n    isEnumSchemaType && isArray ? { enumOptions } : isEnumSchemaType ? { enumOptions: [] } : {};\r\n  return [isValid, schemaOptionsMaybe];\r\n};\r\n\r\n// listingFieldsConfig.filterConfig\r\nconst filterTypes = ['SelectSingleFilter', 'SelectMultipleFilter'];\r\nconst validFilterType = (filterType, schemaType) => {\r\n  const isEnumSchemaType = ['enum', 'multi-enum'].includes(schemaType);\r\n  const isUndefined = typeof searchMode === 'undefined';\r\n  const isKnownFilterType = filterTypes.includes(filterType);\r\n  const shouldHaveFilterType = isEnumSchemaType && (isKnownFilterType || isUndefined);\r\n  const isValid = !isEnumSchemaType || shouldHaveFilterType;\r\n  const filterTypeMaybe = shouldHaveFilterType\r\n    ? { filterType: filterType || 'SelectMultipleFilter' }\r\n    : {};\r\n  return [isValid, filterTypeMaybe];\r\n};\r\n\r\nconst searchModes = ['has_all', 'has_any'];\r\nconst validSearchMode = (searchMode, schemaType) => {\r\n  const isMultiEnumSchemaType = schemaType === 'multi-enum';\r\n  const isUndefined = typeof searchMode === 'undefined';\r\n  const hasValidMode = searchModes.includes(searchMode);\r\n  const isSearchModeValid = isMultiEnumSchemaType && (isUndefined || hasValidMode);\r\n  const isValid = !isMultiEnumSchemaType || isSearchModeValid;\r\n  const searchModeMaybe = isSearchModeValid ? { searchMode: searchMode || 'has_all' } : {};\r\n  return [isValid, searchModeMaybe];\r\n};\r\n\r\nconst validFilterConfig = (config, schemaType) => {\r\n  const isUndefined = typeof config === 'undefined';\r\n  if (isUndefined) {\r\n    return [true, {}];\r\n  }\r\n  // Validate: indexForSearch, label, filterType, searchMode, group\r\n  const [isValidIndexForSearch, indexForSearch] = validBoolean(\r\n    'indexForSearch',\r\n    config.indexForSearch,\r\n    false\r\n  );\r\n  const [isValidLabel, label] = validLabel(config.label);\r\n  const [isValidFilterType, filterType] = validFilterType(config.filterType, schemaType);\r\n  const [isValidSearchMode, searchMode] = validSearchMode(config.searchMode, schemaType);\r\n  const groupOptions = ['primary', 'secondary'];\r\n  const [isValidGroup, group] = validEnumString('group', config.group, groupOptions, 'primary');\r\n\r\n  const isValid =\r\n    isValidIndexForSearch && isValidLabel && isValidFilterType && isValidSearchMode && isValidGroup;\r\n  const validValue = {\r\n    filterConfig: {\r\n      ...indexForSearch,\r\n      ...label,\r\n      ...filterType,\r\n      ...searchMode,\r\n      ...group,\r\n    },\r\n  };\r\n  return [isValid, validValue];\r\n};\r\n\r\n// listingFieldsConfig.showConfig\r\nconst validShowConfig = config => {\r\n  const isUndefined = typeof config === 'undefined';\r\n  if (isUndefined) {\r\n    return [true, {}];\r\n  }\r\n  // Validate: label, isDetail.\r\n  const [isValidLabel, label] = validLabel(config.label);\r\n  const [isValidIsDetail, isDetail] = validBoolean('isDetail', config.isDetail, true);\r\n\r\n  const isValid = isValidLabel && isValidIsDetail;\r\n  const validValue = {\r\n    showConfig: {\r\n      ...label,\r\n      ...isDetail,\r\n    },\r\n  };\r\n  return [isValid, validValue];\r\n};\r\n\r\n// listingFieldsConfig.saveConfig\r\nconst validPlaceholderMessage = placeholderMessage => {\r\n  const isUndefined = typeof placeholderMessage === 'undefined';\r\n  const isString = typeof placeholderMessage === 'string';\r\n  const isValid = isUndefined || isString;\r\n  const validValue = isValid ? { placeholderMessage } : {};\r\n  return [isValid, validValue];\r\n};\r\nconst validRequiredMessage = requiredMessage => {\r\n  const isUndefined = typeof requiredMessage === 'undefined';\r\n  const isString = typeof requiredMessage === 'string';\r\n  const isValid = isUndefined || isString;\r\n  const validValue = isValid ? { requiredMessage } : {};\r\n  return [isValid, validValue];\r\n};\r\n\r\nconst validSaveConfig = config => {\r\n  const isUndefined = typeof config === 'undefined';\r\n  if (isUndefined) {\r\n    return [true, {}];\r\n  }\r\n  // Validate: label, placeholderMessage, required, requiredMessage\r\n  const [isValidLabel, label] = validLabel(config.label);\r\n  const [isValidPlaceholder, placeholderMessage] = validPlaceholderMessage(\r\n    config.placeholderMessage\r\n  );\r\n  const [isValidIsRequired, isRequired] = validBoolean('isRequired', config.isRequired, false);\r\n  const [isValidRequiredMessage, requiredMessage] = validRequiredMessage(config.requiredMessage);\r\n\r\n  const isValid = isValidLabel && isValidPlaceholder && isValidIsRequired && isValidRequiredMessage;\r\n  const validValue = {\r\n    saveConfig: {\r\n      ...label,\r\n      ...placeholderMessage,\r\n      ...isRequired,\r\n      ...requiredMessage,\r\n    },\r\n  };\r\n  return [isValid, validValue];\r\n};\r\n\r\nconst validListingFields = (listingFields, listingTypesInUse) => {\r\n  const keys = listingFields.map(d => d.key);\r\n  const scopeOptions = ['public', 'private'];\r\n  const validSchemaTypes = ['enum', 'multi-enum', 'text', 'long', 'boolean'];\r\n\r\n  return listingFields.reduce((acc, data) => {\r\n    const schemaType = data.schemaType;\r\n\r\n    const validationData = Object.entries(data).reduce(\r\n      (acc, entry) => {\r\n        const [name, value] = entry;\r\n\r\n        // Validate each property\r\n        const [isValid, prop] =\r\n          name === 'key'\r\n            ? validKey(value, keys)\r\n            : name === 'scope'\r\n            ? validEnumString('scope', value, scopeOptions, 'public')\r\n            : name === 'includeForListingTypes'\r\n            ? validListingTypesForListingConfig(value, listingTypesInUse)\r\n            : name === 'listingTypeConfig'\r\n            ? validListingTypesForListingTypeConfig(value, listingTypesInUse)\r\n            : name === 'schemaType'\r\n            ? validEnumString('schemaType', value, validSchemaTypes)\r\n            : name === 'enumOptions'\r\n            ? validSchemaOptions(value, schemaType)\r\n            : name === 'filterConfig'\r\n            ? validFilterConfig(value, schemaType)\r\n            : name === 'showConfig'\r\n            ? validShowConfig(value)\r\n            : name === 'saveConfig'\r\n            ? validSaveConfig(value)\r\n            : [true, value];\r\n\r\n        const hasFoundValid = !(acc.isValid === false || isValid === false);\r\n        // Let's warn about wrong data in listing extended data config\r\n        if (isValid === false) {\r\n          console.warn(\r\n            `Unsupported listing extended data configurations detected (${name}) in`,\r\n            data\r\n          );\r\n        }\r\n\r\n        return { config: { ...acc.config, ...prop }, isValid: hasFoundValid };\r\n      },\r\n      { config: {}, isValid: true }\r\n    );\r\n\r\n    if (validationData.isValid) {\r\n      const hasIncludeForListingTypes = validationData.config?.includeForListingTypes;\r\n      const includeForListingTypesMaybe = !hasIncludeForListingTypes\r\n        ? { includeForListingTypes: listingTypesInUse }\r\n        : {};\r\n\r\n      return [...acc, { ...validationData.config, ...includeForListingTypesMaybe }];\r\n    } else {\r\n      return acc;\r\n    }\r\n  }, []);\r\n};\r\n\r\n///////////////////////////////////\r\n// Validate listing types config //\r\n///////////////////////////////////\r\n\r\nconst getListingTypeStringsInUse = listingTypes => {\r\n  return listingTypes.map(lt => `${lt.listingType}`);\r\n};\r\n\r\nconst validListingTypes = listingTypes => {\r\n  // Check what transaction processes this client app supports\r\n  const supportedProcessesInfo = getSupportedProcessesInfo();\r\n\r\n  const validTypes = listingTypes.reduce((validConfigs, listingType) => {\r\n    const { listingType: type, label, transactionType, ...restOfListingType } = listingType;\r\n    const { process: processName, alias, unitType, ...restOfTransactionType } = transactionType;\r\n\r\n    const isSupportedProcessName = supportedProcessesInfo.find(p => p.name === processName);\r\n    const isSupportedProcessAlias = supportedProcessesInfo.find(p => p.alias === alias);\r\n    const isSupportedUnitType = supportedProcessesInfo.find(p => p.unitTypes.includes(unitType));\r\n\r\n    if (isSupportedProcessName && isSupportedProcessAlias && isSupportedUnitType) {\r\n      return [\r\n        ...validConfigs,\r\n        {\r\n          listingType: type,\r\n          label,\r\n          transactionType: {\r\n            process: processName,\r\n            alias,\r\n            unitType,\r\n            ...restOfTransactionType,\r\n          },\r\n          // e.g. stockType\r\n          ...restOfListingType,\r\n        },\r\n      ];\r\n    }\r\n    console.warn('Unsupported listing type configurations detected', listingType);\r\n    return validConfigs;\r\n  }, []);\r\n\r\n  return validTypes;\r\n};\r\n\r\nexport const displayPrice = listingTypeConfig => {\r\n  return listingTypeConfig?.defaultListingFields?.price !== false;\r\n};\r\n\r\nexport const displayLocation = listingTypeConfig => {\r\n  return listingTypeConfig?.defaultListingFields?.location !== false;\r\n};\r\n\r\nexport const displayDeliveryPickup = listingTypeConfig => {\r\n  return listingTypeConfig?.defaultListingFields?.pickup !== false;\r\n};\r\n\r\nexport const displayDeliveryShipping = listingTypeConfig => {\r\n  return listingTypeConfig?.defaultListingFields?.shipping !== false;\r\n};\r\n\r\nexport const requirePayoutDetails = listingTypeConfig => {\r\n  return listingTypeConfig?.defaultListingFields?.payoutDetails !== false;\r\n};\r\n\r\n///////////////////////////////////////\r\n// Restructure hosted listing config //\r\n///////////////////////////////////////\r\n\r\nconst restructureListingTypes = hostedListingTypes => {\r\n  return (\r\n    hostedListingTypes?.map(listingType => {\r\n      const { id, label, transactionProcess, unitType, ...rest } = listingType;\r\n      return transactionProcess\r\n        ? {\r\n            listingType: id,\r\n            label,\r\n            transactionType: {\r\n              process: transactionProcess.name,\r\n              alias: transactionProcess.alias,\r\n              unitType,\r\n            },\r\n            ...rest,\r\n          }\r\n        : null;\r\n    }) || []\r\n  );\r\n};\r\n\r\nconst restructureListingFields = hostedListingFields => {\r\n  return (\r\n    hostedListingFields?.map(listingField => {\r\n      const {\r\n        key,\r\n        scope,\r\n        schemaType,\r\n        enumOptions,\r\n        label,\r\n        filterConfig = {},\r\n        showConfig = {},\r\n        saveConfig = {},\r\n        ...rest\r\n      } = listingField;\r\n      const defaultLabel = label || key;\r\n      const enumOptionsMaybe = ['enum', 'multi-enum'].includes(schemaType) ? { enumOptions } : {};\r\n      const { required: isRequired, ...restSaveConfig } = saveConfig;\r\n\r\n      return key\r\n        ? {\r\n            key,\r\n            scope,\r\n            schemaType,\r\n            ...enumOptionsMaybe,\r\n            filterConfig: {\r\n              ...filterConfig,\r\n              label: filterConfig.label || defaultLabel,\r\n            },\r\n            showConfig: {\r\n              ...showConfig,\r\n              label: showConfig.label || defaultLabel,\r\n            },\r\n            saveConfig: {\r\n              ...restSaveConfig,\r\n              isRequired,\r\n              label: saveConfig.label || defaultLabel,\r\n            },\r\n            ...rest,\r\n          }\r\n        : null;\r\n    }) || []\r\n  );\r\n};\r\n\r\n///////////////////////////\r\n// Merge listing configs //\r\n///////////////////////////\r\n\r\n// Merge 2 arrays and pick only unique objects according to \"key\" property\r\n// Note: This solution prefers objects from the second array\r\n//       I.e. default configs override hosted asset configs if they have the same key.\r\nconst union = (arr1, arr2, key) => {\r\n  const all = [...arr1, ...arr2];\r\n  const map = new Map(all.map(obj => [obj[key], obj]));\r\n  return [...map.values()];\r\n};\r\n\r\n// For debugging, it becomes sometimes important to be able to merge and overwrite with local values\r\n// Note: We don't want to expose this to production by default.\r\n//       If you customization relies on multiple listing types or custom listing fields, you need to change this.\r\nconst mergeDefaultTypesAndFieldsForDebugging = isDebugging => {\r\n  const isDev = process.env.NODE_ENV === 'development';\r\n  return isDebugging && isDev;\r\n};\r\n\r\n// Note: by default, listing types and fields are only merged if explicitly set for debugging\r\nconst mergeListingConfig = (hostedConfig, defaultConfigs) => {\r\n  // Listing configuration is splitted to several assets in Console\r\n  const hostedListingTypes = restructureListingTypes(hostedConfig.listingTypes?.listingTypes);\r\n  const hostedListingFields = restructureListingFields(hostedConfig.listingFields?.listingFields);\r\n\r\n  // The default values for local debugging\r\n  const { listingTypes: defaultListingTypes, listingFields: defaultListingFields, ...rest } =\r\n    defaultConfigs.listing || {};\r\n\r\n  // When debugging, include default configs.\r\n  // Otherwise, use listing types and fields from hosted assets.\r\n  const shouldMerge = mergeDefaultTypesAndFieldsForDebugging(false);\r\n  const listingTypes = shouldMerge\r\n    ? union(hostedListingTypes, defaultListingTypes, 'listingType')\r\n    : hostedListingTypes;\r\n  const listingFields = shouldMerge\r\n    ? union(hostedListingFields, defaultListingFields, 'key')\r\n    : hostedListingFields;\r\n\r\n  const listingTypesInUse = getListingTypeStringsInUse(listingTypes);\r\n\r\n  return {\r\n    ...rest,\r\n    listingFields: validListingFields(listingFields, listingTypesInUse),\r\n    listingTypes: validListingTypes(listingTypes),\r\n    enforceValidListingType: defaultConfigs.listing.enforceValidListingType,\r\n  };\r\n};\r\n\r\n//////////////////////////////\r\n// Validate Default filters //\r\n//////////////////////////////\r\n\r\nconst validDatesConfig = config => {\r\n  const {\r\n    enabled = true,\r\n    label = 'Dates',\r\n    dateRangeMode = 'day',\r\n    availability = 'time-full',\r\n  } = config;\r\n  const isValidLabel = typeof label === 'string';\r\n  const isValidMode = ['day', 'night'].includes(dateRangeMode);\r\n  const isValidAvailability = ['time-full', 'time-partial'].includes(availability);\r\n\r\n  if (!(enabled && isValidLabel && isValidMode && isValidAvailability)) {\r\n    return null;\r\n  }\r\n\r\n  return { key: 'dates', schemaType: 'dates', label, availability, dateRangeMode };\r\n};\r\n\r\nconst validPriceConfig = config => {\r\n  const { enabled = true, label = 'Price', min = 0, max = 1000, step = 5 } = config;\r\n  const isValidLabel = typeof label === 'string';\r\n  const isValidMin = typeof min === 'number';\r\n  const isValidMax = typeof max === 'number';\r\n  const isValidStep = typeof step === 'number';\r\n\r\n  if (!(enabled && isValidLabel && isValidMin && isValidMax && isValidStep)) {\r\n    return null;\r\n  }\r\n\r\n  const isMaxBigger = max > min;\r\n  if (!isMaxBigger) {\r\n    console.error(`Price filter: min value (${min}) needs to be smaller than max (${max})`);\r\n  }\r\n  return isMaxBigger ? { key: 'price', schemaType: 'price', label, min, max, step } : null;\r\n};\r\n\r\nconst validKeywordsConfig = config => {\r\n  const { enabled = true } = config;\r\n\r\n  if (!enabled) {\r\n    return null;\r\n  }\r\n\r\n  return { key: 'keywords', schemaType: 'keywords' };\r\n};\r\n\r\nconst validDefaultFilters = defaultFilters => {\r\n  return defaultFilters\r\n    .map(data => {\r\n      const schemaType = data.schemaType;\r\n      return schemaType === 'dates'\r\n        ? validDatesConfig(data)\r\n        : schemaType === 'price'\r\n        ? validPriceConfig(data)\r\n        : schemaType === 'keywords'\r\n        ? validKeywordsConfig(data)\r\n        : data;\r\n    })\r\n    .filter(Boolean);\r\n};\r\n\r\n//////////////////////////\r\n// Validate sort config //\r\n//////////////////////////\r\n\r\nconst validSortConfig = config => {\r\n  const active = typeof config.active === 'boolean' ? config.active : true;\r\n  const queryParamName = config.queryParamName || 'sort';\r\n  const relevanceKey = config.relevanceKey || 'relevance';\r\n  const relevanceFilter = config.relevanceFilter || 'keywords';\r\n  const conflictingFilters = config.conflictingFilters || [];\r\n  const optionsRaw = config.options || [];\r\n  const options = optionsRaw.filter(o => !!o.key && !!(o.label || o.labelTranslationKey));\r\n  return { active, queryParamName, relevanceKey, relevanceFilter, conflictingFilters, options };\r\n};\r\n\r\nconst mergeSearchConfig = (hostedSearchConfig, defaultSearchConfig) => {\r\n  // The sortConfig is not yet configurable through Console / hosted assets,\r\n  // but other default search configs come from hosted assets\r\n  const searchConfig = hostedSearchConfig?.mainSearch\r\n    ? {\r\n        sortConfig: defaultSearchConfig.sortConfig,\r\n        ...hostedSearchConfig,\r\n      }\r\n    : defaultSearchConfig;\r\n\r\n  const { mainSearch, dateRangeFilter, priceFilter, keywordsFilter, sortConfig, ...rest } =\r\n    searchConfig || {};\r\n  const searchType = ['location', 'keywords'].includes(mainSearch?.searchType)\r\n    ? mainSearch?.searchType\r\n    : 'keywords';\r\n\r\n  const keywordsFilterMaybe =\r\n    keywordsFilter?.enabled === true\r\n      ? [{ key: 'keywords', schemaType: 'keywords' }]\r\n      : defaultSearchConfig.keywordsFilter\r\n      ? [defaultSearchConfig.keywordsFilter]\r\n      : [];\r\n\r\n  // This will define the order of default filters\r\n  // The reason: later on, we'll add these default filters to config assets and\r\n  // there they'll be their own separate entities and not wrapped in an array.\r\n  const defaultFilters = [dateRangeFilter, priceFilter, ...keywordsFilterMaybe];\r\n  return {\r\n    mainSearch: { searchType },\r\n    defaultFilters: validDefaultFilters(defaultFilters),\r\n    sortConfig: validSortConfig(sortConfig),\r\n    ...rest,\r\n  };\r\n};\r\n\r\n//////////////////////////////////\r\n// Validate transaction configs //\r\n//////////////////////////////////\r\n\r\nconst getListingMinimumPrice = transactionSize => {\r\n  const { listingMinimumPrice } = transactionSize || {};\r\n  return listingMinimumPrice?.type === 'subunit' ? listingMinimumPrice.amount : 0;\r\n};\r\n\r\n////////////////////////////////////\r\n// Validate and merge map configs //\r\n////////////////////////////////////\r\nconst mergeMapConfig = (hostedMapConfig, defaultMapConfig) => {\r\n  const { mapProvider, mapboxAccessToken, googleMapsAPIKey, ...restOfDefault } = defaultMapConfig;\r\n  const mapProviderPicked = hostedMapConfig?.provider || mapProvider;\r\n  const mapboxAccessTokenPicked = hostedMapConfig?.mapboxAccessToken || mapboxAccessToken;\r\n  const googleMapsAPIKeyPicked = hostedMapConfig?.googleMapsApiKey || googleMapsAPIKey;\r\n\r\n  const hasApiAccess =\r\n    mapProviderPicked === 'googleMaps' ? !!googleMapsAPIKeyPicked : !!mapboxAccessTokenPicked;\r\n  if (!hasApiAccess) {\r\n    console.error(\r\n      `The access tokens are not in place for the selected map provider (${mapProviderPicked})`\r\n    );\r\n  }\r\n\r\n  return {\r\n    ...restOfDefault,\r\n    mapProvider: mapProviderPicked,\r\n    mapboxAccessToken: mapboxAccessTokenPicked,\r\n    googleMapsAPIKey: googleMapsAPIKeyPicked,\r\n  };\r\n};\r\n\r\n////////////////////////////////////\r\n// Validate and merge all configs //\r\n////////////////////////////////////\r\n\r\n// Check if all the mandatory info have been retrieved from hosted assets\r\nconst hasMandatoryConfigs = hostedConfig => {\r\n  const { branding, listingTypes, listingFields, transactionSize } = hostedConfig;\r\n  printErrorIfHostedAssetIsMissing({ branding, listingTypes, listingFields, transactionSize });\r\n  return (\r\n    branding?.logo &&\r\n    listingTypes?.listingTypes &&\r\n    listingFields?.listingFields &&\r\n    transactionSize?.listingMinimumPrice &&\r\n    !hasClashWithBuiltInPublicDataKey(listingFields?.listingFields)\r\n  );\r\n};\r\n\r\nexport const mergeConfig = (configAsset = {}, defaultConfigs = {}) => {\r\n  // Remove trailing slash from marketplaceRootURL if any\r\n  const marketplaceRootURL = defaultConfigs.marketplaceRootURL;\r\n  const cleanedRootURL =\r\n    typeof marketplaceRootURL === 'string' ? marketplaceRootURL.replace(/\\/$/, '') : '';\r\n\r\n  // defaultConfigs.listingMinimumPriceSubUnits is the backup for listing's minimum price\r\n  const listingMinimumPriceSubUnits =\r\n    getListingMinimumPrice(configAsset.transactionSize) ||\r\n    defaultConfigs.listingMinimumPriceSubUnits;\r\n\r\n  return {\r\n    // Use default configs as a starting point for app config.\r\n    ...defaultConfigs,\r\n\r\n    marketplaceRootURL: cleanedRootURL,\r\n\r\n    // Overwrite default configs if hosted config is available\r\n    listingMinimumPriceSubUnits,\r\n\r\n    // Localization: currency is first-level config atm.\r\n    currency: mergeCurrency(configAsset.localization?.currency, defaultConfigs.currency),\r\n\r\n    // Stripe config currently comes from defaultConfigs atm.\r\n    stripe: validateStripeCurrency(defaultConfigs.stripe),\r\n\r\n    // Localization (locale, first day of week)\r\n    localization: mergeLocalizations(configAsset.localization, defaultConfigs.localization),\r\n\r\n    // Analytics might come from hosted assets at some point.\r\n    analytics: mergeAnalyticsConfig(configAsset.analytics, defaultConfigs.analytics),\r\n\r\n    // Branding configuration comes entirely from hosted assets,\r\n    // but defaults to values set in defaultConfigs.branding for\r\n    // marketplace color, logo, brandImage and Facebook and Twitter images\r\n    branding: mergeBranding(configAsset.branding, defaultConfigs.branding),\r\n\r\n    // Layout configuration comes entirely from hosted assets,\r\n    // but defaultConfigs is used if type of the hosted configs is unknown\r\n    layout: mergeLayouts(configAsset.layout, defaultConfigs.layout),\r\n\r\n    // Listing configuration comes entirely from hosted assets\r\n    listing: mergeListingConfig(configAsset, defaultConfigs),\r\n\r\n    // Hosted search configuration does not yet contain sortConfig\r\n    search: mergeSearchConfig(configAsset.search, defaultConfigs.search),\r\n\r\n    // Map provider info might come from hosted assets. Other map configs come from defaultConfigs.\r\n    maps: mergeMapConfig(configAsset.maps, defaultConfigs.maps),\r\n\r\n    // Google Site Verification can be given through configs.\r\n    // Renders a meta tag: <meta name=\"google-site-verification\" content=\"[token-here]>\" />\r\n    googleSearchConsole: configAsset.googleSearchConsole?.googleSiteVerification\r\n      ? configAsset.googleSearchConsole\r\n      : defaultConfigs.googleSearchConsole,\r\n\r\n    // Include hosted footer config, if it exists\r\n    // Note: if footer asset is not set, Footer is not rendered.\r\n    footer: configAsset.footer,\r\n\r\n    // Check if all the mandatory info have been retrieved from hosted assets\r\n    hasMandatoryConfigurations: hasMandatoryConfigs(configAsset),\r\n  };\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/has\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/trimEnd\");","import has from 'lodash/has';\r\nimport trimEnd from 'lodash/trimEnd';\r\nimport Decimal from 'decimal.js';\r\n\r\nimport appSettings from '../config/settings';\r\nimport { types as sdkTypes } from '../util/sdkLoader';\r\n\r\nconst { subUnitDivisors } = appSettings;\r\nconst { Money } = sdkTypes;\r\n\r\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER\r\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/MIN_SAFE_INTEGER\r\n// https://stackoverflow.com/questions/26380364/why-is-number-max-safe-integer-9-007-199-254-740-991-and-not-9-007-199-254-740-9\r\nexport const MIN_SAFE_INTEGER = Number.MIN_SAFE_INTEGER || -1 * (2 ** 53 - 1);\r\nexport const MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 2 ** 53 - 1;\r\n\r\nexport const isSafeNumber = decimalValue => {\r\n  if (!(decimalValue instanceof Decimal)) {\r\n    throw new Error('Value must be a Decimal');\r\n  }\r\n  return decimalValue.gte(MIN_SAFE_INTEGER) && decimalValue.lte(MAX_SAFE_INTEGER);\r\n};\r\n\r\n// Get the minor unit divisor for the given currency\r\nexport const unitDivisor = currency => {\r\n  if (!has(subUnitDivisors, currency)) {\r\n    throw new Error(\r\n      `No minor unit divisor defined for currency: ${currency} in currencySettings.js`\r\n    );\r\n  }\r\n  return subUnitDivisors[currency];\r\n};\r\n\r\n////////// Currency manipulation in string format //////////\r\n\r\n/**\r\n * Ensures that the given string uses only dots or commas\r\n * e.g. ensureSeparator('9999999,99', false) // => '9999999.99'\r\n *\r\n * @param {String} str - string to be formatted\r\n *\r\n * @return {String} converted string\r\n */\r\nexport const ensureSeparator = (str, useComma = false) => {\r\n  if (typeof str !== 'string') {\r\n    throw new TypeError('Parameter must be a string');\r\n  }\r\n  return useComma ? str.replace(/\\./g, ',') : str.replace(/,/g, '.');\r\n};\r\n\r\n/**\r\n * Ensures that the given string uses only dots\r\n * (e.g. JavaScript floats use dots)\r\n *\r\n * @param {String} str - string to be formatted\r\n *\r\n * @return {String} converted string\r\n */\r\nexport const ensureDotSeparator = str => {\r\n  return ensureSeparator(str, false);\r\n};\r\n\r\n/**\r\n * Convert string to Decimal object (from Decimal.js math library)\r\n * Handles both dots and commas as decimal separators\r\n *\r\n * @param {String} str - string to be converted\r\n *\r\n * @return {Decimal} numeral value\r\n */\r\nexport const convertToDecimal = str => {\r\n  const dotFormattedStr = ensureDotSeparator(str);\r\n  return new Decimal(dotFormattedStr);\r\n};\r\n\r\n/**\r\n * Converts Decimal value to a string (from Decimal.js math library)\r\n *\r\n * @param {Decimal|Number|String} decimalValue\r\n *\r\n * @param {boolean} useComma - optional.\r\n * Specify if return value should use comma as separator\r\n *\r\n * @return {String} converted value\r\n */\r\nexport const convertDecimalToString = (decimalValue, useComma = false) => {\r\n  const d = new Decimal(decimalValue);\r\n  return ensureSeparator(d.toString(), useComma);\r\n};\r\n\r\n// Divisor can be positive value given as Decimal, Number, or String\r\nconst convertDivisorToDecimal = divisor => {\r\n  try {\r\n    const divisorAsDecimal = new Decimal(divisor);\r\n    if (divisorAsDecimal.isNegative()) {\r\n      throw new Error(`Parameter (${divisor}) must be a positive number.`);\r\n    }\r\n    return divisorAsDecimal;\r\n  } catch (e) {\r\n    throw new Error(`Parameter (${divisor}) must present a number.`, e);\r\n  }\r\n};\r\n\r\n/**\r\n * Limits value to sub-unit precision: \"1.4567\" -> \"1.45\"\r\n * Useful in input fields so this doesn't use rounding.\r\n *\r\n * @param {String} inputString - positive number presentation.\r\n *\r\n * @param {Decimal|Number|String} subUnitDivisor - should be something that can be converted to\r\n * Decimal. (This is a ratio between currency's main unit and sub units.)\r\n *\r\n * @param {boolean} useComma - optional.\r\n * Specify if return value should use comma as separator\r\n *\r\n * @return {String} truncated value\r\n */\r\nexport const truncateToSubUnitPrecision = (inputString, subUnitDivisor, useComma = false) => {\r\n  const subUnitDivisorAsDecimal = convertDivisorToDecimal(subUnitDivisor);\r\n\r\n  // '10,' should be passed through, but that format is not supported as valid number\r\n  const trimmed = trimEnd(inputString, useComma ? ',' : '.');\r\n  // create another instance and check if value is convertable\r\n  const value = convertToDecimal(trimmed, useComma);\r\n\r\n  if (value.isNegative()) {\r\n    throw new Error(`Parameter (${inputString}) must be a positive number.`);\r\n  }\r\n\r\n  // Amount is always counted in subunits\r\n  // E.g. $10 => 1000\r\n  const amount = value.times(subUnitDivisorAsDecimal);\r\n\r\n  if (!isSafeNumber(amount)) {\r\n    throw new Error(\r\n      `Cannot represent money minor unit value ${amount.toString()} safely as a number`\r\n    );\r\n  }\r\n\r\n  // Amount must be integer\r\n  // We don't deal with subunit fragments like 1000.345\r\n  if (amount.isInteger()) {\r\n    // accepted strings: '9', '9,' '9.' '9,99'\r\n    const decimalCount2 = value.toFixed(2);\r\n    const decimalPrecisionMax2 =\r\n      decimalCount2.length >= inputString.length ? inputString : value.toFixed(2);\r\n    return ensureSeparator(decimalPrecisionMax2, useComma);\r\n  } else {\r\n    // truncate strings ('9.999' => '9.99')\r\n    const truncated = amount.truncated().dividedBy(subUnitDivisorAsDecimal);\r\n    return convertDecimalToString(truncated, useComma);\r\n  }\r\n};\r\n\r\n////////// Currency - Money helpers //////////\r\n\r\n/**\r\n * Converts given value to sub unit value and returns it as a number\r\n *\r\n * @param {Number|String} value\r\n *\r\n * @param {Decimal|Number|String} subUnitDivisor - should be something that can be converted to\r\n * Decimal. (This is a ratio between currency's main unit and sub units.)\r\n *\r\n * @param {boolean} useComma - optional.\r\n * Specify if return value should use comma as separator\r\n *\r\n * @return {number} converted value\r\n */\r\nexport const convertUnitToSubUnit = (value, subUnitDivisor, useComma = false) => {\r\n  const subUnitDivisorAsDecimal = convertDivisorToDecimal(subUnitDivisor);\r\n\r\n  if (!(typeof value === 'string' || typeof value === 'number')) {\r\n    throw new TypeError('Value must be either number or string');\r\n  }\r\n\r\n  const val = typeof value === 'string' ? convertToDecimal(value, useComma) : new Decimal(value);\r\n  const amount = val.times(subUnitDivisorAsDecimal);\r\n\r\n  if (!isSafeNumber(amount)) {\r\n    throw new Error(\r\n      `Cannot represent money minor unit value ${amount.toString()} safely as a number`\r\n    );\r\n  } else if (amount.isInteger()) {\r\n    return amount.toNumber();\r\n  } else {\r\n    throw new Error(`value must divisible by ${subUnitDivisor}`);\r\n  }\r\n};\r\n\r\nconst isNumber = value => {\r\n  return typeof value === 'number' && !isNaN(value);\r\n};\r\n\r\n/* eslint-disable no-underscore-dangle */\r\n// Detect if the given value is a goog.math.Long object\r\n// See: https://google.github.io/closure-library/api/goog.math.Long.html\r\nconst isGoogleMathLong = value => {\r\n  return typeof value === 'object' && isNumber(value.low_) && isNumber(value.high_);\r\n};\r\n/* eslint-enable no-underscore-dangle */\r\n\r\n/**\r\n * Convert Money to a number\r\n *\r\n * @param {Money} value\r\n *\r\n * @return {Number} converted value\r\n */\r\nexport const convertMoneyToNumber = value => {\r\n  if (!(value instanceof Money)) {\r\n    throw new Error('Value must be a Money type');\r\n  }\r\n  const subUnitDivisorAsDecimal = convertDivisorToDecimal(unitDivisor(value.currency));\r\n  let amount;\r\n\r\n  if (isGoogleMathLong(value.amount)) {\r\n    // TODO: temporarily also handle goog.math.Long values created by\r\n    // the Transit tooling in the Sharetribe JS SDK. This should be\r\n    // removed when the value.amount will be a proper Decimal type.\r\n\r\n    // eslint-disable-next-line no-console\r\n    console.warn('goog.math.Long value in money amount:', value.amount, value.amount.toString());\r\n\r\n    amount = new Decimal(value.amount.toString());\r\n  } else {\r\n    amount = new Decimal(value.amount);\r\n  }\r\n\r\n  if (!isSafeNumber(amount)) {\r\n    throw new Error(\r\n      `Cannot represent money minor unit value ${amount.toString()} safely as a number`\r\n    );\r\n  }\r\n\r\n  return amount.dividedBy(subUnitDivisorAsDecimal).toNumber();\r\n};\r\n\r\n/**\r\n * Format the given money to a string\r\n *\r\n * @param {Object} intl\r\n * @param {Money} value\r\n *\r\n * @return {String} formatted money value\r\n */\r\nexport const formatMoney = (intl, value) => {\r\n  if (!(value instanceof Money)) {\r\n    throw new Error('Value must be a Money type');\r\n  }\r\n  const valueAsNumber = convertMoneyToNumber(value);\r\n\r\n  // See: https://github.com/yahoo/react-intl/wiki/API#formatnumber\r\n  const numberFormatOptions = {\r\n    style: 'currency',\r\n    currency: value.currency,\r\n    currencyDisplay: 'symbol',\r\n    useGrouping: true,\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2,\r\n  };\r\n\r\n  return intl.formatNumber(valueAsNumber, numberFormatOptions);\r\n};\r\n\r\n/**\r\n * Format the given major-unit string value as currency. E.g. \"10\" -> \"$10\".\r\n *\r\n * NOTE: This function should not be used with listing prices or other Money type.\r\n * This can be used with price filters and other components that doesn't send Money types to API.\r\n *\r\n * @param {Object} intl\r\n * @param {String} value\r\n *\r\n * @return {String} formatted money value\r\n */\r\nexport const formatCurrencyMajorUnit = (intl, currency, valueWithoutSubunits) => {\r\n  const valueAsNumber = new Decimal(valueWithoutSubunits).toNumber();\r\n\r\n  // See: https://github.com/yahoo/react-intl/wiki/API#formatnumber\r\n  const numberFormatOptions = {\r\n    style: 'currency',\r\n    currency,\r\n    currencyDisplay: 'symbol',\r\n    useGrouping: true,\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0,\r\n  };\r\n\r\n  return intl.formatNumber(valueAsNumber, numberFormatOptions);\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/isArray\");","import isArray from 'lodash/isArray';\r\nimport reduce from 'lodash/reduce';\r\nimport { sanitizeEntity } from './sanitize';\r\n// NOTE: This file imports sanitize.js, which may lead to circular dependency\r\n\r\n/**\r\n * Combine the given relationships objects\r\n *\r\n * See: http://jsonapi.org/format/#document-resource-object-relationships\r\n */\r\nexport const combinedRelationships = (oldRels, newRels) => {\r\n  if (!oldRels && !newRels) {\r\n    // Special case to avoid adding an empty relationships object when\r\n    // none of the resource objects had any relationships.\r\n    return null;\r\n  }\r\n  return { ...oldRels, ...newRels };\r\n};\r\n\r\n/**\r\n * Combine the given resource objects\r\n *\r\n * See: http://jsonapi.org/format/#document-resource-objects\r\n */\r\nexport const combinedResourceObjects = (oldRes, newRes) => {\r\n  const { id, type } = oldRes;\r\n  if (newRes.id.uuid !== id.uuid || newRes.type !== type) {\r\n    throw new Error('Cannot merge resource objects with different ids or types');\r\n  }\r\n  const attributes = newRes.attributes || oldRes.attributes;\r\n  const attributesOld = oldRes.attributes || {};\r\n  const attributesNew = newRes.attributes || {};\r\n  // Allow (potentially) sparse attributes to update only relevant fields\r\n  const attrs = attributes ? { attributes: { ...attributesOld, ...attributesNew } } : null;\r\n  const relationships = combinedRelationships(oldRes.relationships, newRes.relationships);\r\n  const rels = relationships ? { relationships } : null;\r\n  return { id, type, ...attrs, ...rels };\r\n};\r\n\r\n/**\r\n * Combine the resource objects form the given api response to the\r\n * existing entities.\r\n */\r\nexport const updatedEntities = (oldEntities, apiResponse, sanitizeConfig = {}) => {\r\n  const { data, included = [] } = apiResponse;\r\n  const objects = (Array.isArray(data) ? data : [data]).concat(included);\r\n\r\n  const newEntities = objects.reduce((entities, curr) => {\r\n    const { id, type } = curr;\r\n\r\n    // Some entities (e.g. listing and user) might include extended data,\r\n    // you should check if src/util/sanitize.js needs to be updated.\r\n    const current = sanitizeEntity(curr, sanitizeConfig);\r\n\r\n    entities[type] = entities[type] || {};\r\n    const entity = entities[type][id.uuid];\r\n    entities[type][id.uuid] = entity ? combinedResourceObjects({ ...entity }, current) : current;\r\n\r\n    return entities;\r\n  }, oldEntities);\r\n\r\n  return newEntities;\r\n};\r\n\r\n/**\r\n * Denormalise the entities with the resources from the entities object\r\n *\r\n * This function calculates the dernormalised tree structure from the\r\n * normalised entities object with all the relationships joined in.\r\n *\r\n * @param {Object} entities entities object in the SDK Redux store\r\n * @param {Array<{ id, type }} resources array of objects\r\n * with id and type\r\n * @param {Boolean} throwIfNotFound wheather to skip a resource that\r\n * is not found (false), or to throw an Error (true)\r\n *\r\n * @return {Array} the given resource objects denormalised that were\r\n * found in the entities\r\n */\r\nexport const denormalisedEntities = (entities, resources, throwIfNotFound = true) => {\r\n  const denormalised = resources.map(res => {\r\n    const { id, type } = res;\r\n    const entityFound = entities[type] && id && entities[type][id.uuid];\r\n    if (!entityFound) {\r\n      if (throwIfNotFound) {\r\n        throw new Error(`Entity with type \"${type}\" and id \"${id ? id.uuid : id}\" not found`);\r\n      }\r\n      return null;\r\n    }\r\n    const entity = entities[type][id.uuid];\r\n    const { relationships, ...entityData } = entity;\r\n\r\n    if (relationships) {\r\n      // Recursively join in all the relationship entities\r\n      return reduce(\r\n        relationships,\r\n        (ent, relRef, relName) => {\r\n          // A relationship reference can be either a single object or\r\n          // an array of objects. We want to keep that form in the final\r\n          // result.\r\n          const hasMultipleRefs = Array.isArray(relRef.data);\r\n          const multipleRefsEmpty = hasMultipleRefs && relRef.data.length === 0;\r\n          if (!relRef.data || multipleRefsEmpty) {\r\n            ent[relName] = hasMultipleRefs ? [] : null;\r\n          } else {\r\n            const refs = hasMultipleRefs ? relRef.data : [relRef.data];\r\n\r\n            // If a relationship is not found, an Error should be thrown\r\n            const rels = denormalisedEntities(entities, refs, true);\r\n\r\n            ent[relName] = hasMultipleRefs ? rels : rels[0];\r\n          }\r\n          return ent;\r\n        },\r\n        entityData\r\n      );\r\n    }\r\n    return entityData;\r\n  });\r\n  return denormalised.filter(e => !!e);\r\n};\r\n\r\n/**\r\n * Denormalise the data from the given SDK response\r\n *\r\n * @param {Object} sdkResponse response object from an SDK call\r\n *\r\n * @return {Array} entities in the response with relationships\r\n * denormalised from the included data\r\n */\r\nexport const denormalisedResponseEntities = sdkResponse => {\r\n  const apiResponse = sdkResponse.data;\r\n  const data = apiResponse.data;\r\n  const resources = Array.isArray(data) ? data : [data];\r\n\r\n  if (!data || resources.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  const entities = updatedEntities({}, apiResponse);\r\n  return denormalisedEntities(entities, resources);\r\n};\r\n\r\n/**\r\n * Denormalize JSON object.\r\n * NOTE: Currently, this only handles denormalization of image references\r\n *\r\n * @param {JSON} data from Asset API (e.g. page asset)\r\n * @param {JSON} included array of asset references (currently only images supported)\r\n * @returns deep copy of data with images denormalized into it.\r\n */\r\nconst denormalizeJsonData = (data, included) => {\r\n  let copy;\r\n\r\n  // Handle strings, numbers, booleans, null\r\n  if (data === null || typeof data !== 'object') {\r\n    return data;\r\n  }\r\n\r\n  // At this point the data has typeof 'object' (aka Array or Object)\r\n  // Array is the more specific case (of Object)\r\n  if (data instanceof Array) {\r\n    copy = data.map(datum => denormalizeJsonData(datum, included));\r\n    return copy;\r\n  }\r\n\r\n  // Generic Objects\r\n  if (data instanceof Object) {\r\n    copy = {};\r\n    Object.entries(data).forEach(([key, value]) => {\r\n      // Handle denormalization of image reference\r\n      const hasImageRefAsValue =\r\n        typeof value == 'object' && value?._ref?.type === 'imageAsset' && value?._ref?.id;\r\n      // If there is no image included,\r\n      // the _ref might contain parameters for image resolver (Asset Delivery API resolves image URLs on the fly)\r\n      const hasUnresolvedImageRef = typeof value == 'object' && value?._ref?.resolver === 'image';\r\n\r\n      if (hasImageRefAsValue) {\r\n        const foundRef = included.find(inc => inc.id === value._ref?.id);\r\n        copy[key] = foundRef;\r\n      } else if (hasUnresolvedImageRef) {\r\n        // Don't add faulty image ref\r\n        // Note: At the time of writing, assets can expose resolver configs,\r\n        //       which we don't want to deal with.\r\n      } else {\r\n        copy[key] = denormalizeJsonData(value, included);\r\n      }\r\n    });\r\n    return copy;\r\n  }\r\n\r\n  throw new Error(\"Unable to traverse data! It's not JSON.\");\r\n};\r\n\r\n/**\r\n * Denormalize asset json from Asset API.\r\n * @param {JSON} assetJson in format: { data, included }\r\n * @returns deep copy of asset data with images denormalized into it.\r\n */\r\nexport const denormalizeAssetData = assetJson => {\r\n  const { data, included } = assetJson || {};\r\n  return denormalizeJsonData(data, included);\r\n};\r\n\r\n/**\r\n * Create shell objects to ensure that attributes etc. exists.\r\n *\r\n * @param {Object} transaction entity object, which is to be ensured against null values\r\n */\r\nexport const ensureTransaction = (transaction, booking = null, listing = null, provider = null) => {\r\n  const empty = {\r\n    id: null,\r\n    type: 'transaction',\r\n    attributes: {},\r\n    booking,\r\n    listing,\r\n    provider,\r\n  };\r\n  return { ...empty, ...transaction };\r\n};\r\n\r\n/**\r\n * Create shell objects to ensure that attributes etc. exists.\r\n *\r\n * @param {Object} booking entity object, which is to be ensured against null values\r\n */\r\nexport const ensureBooking = booking => {\r\n  const empty = { id: null, type: 'booking', attributes: {} };\r\n  return { ...empty, ...booking };\r\n};\r\n\r\n/**\r\n * Create shell objects to ensure that attributes etc. exists.\r\n *\r\n * @param {Object} listing entity object, which is to be ensured against null values\r\n */\r\nexport const ensureListing = listing => {\r\n  const empty = {\r\n    id: null,\r\n    type: 'listing',\r\n    attributes: { publicData: {} },\r\n    images: [],\r\n  };\r\n  return { ...empty, ...listing };\r\n};\r\n\r\n/**\r\n * Create shell objects to ensure that attributes etc. exists.\r\n *\r\n * @param {Object} listing entity object, which is to be ensured against null values\r\n */\r\nexport const ensureOwnListing = listing => {\r\n  const empty = {\r\n    id: null,\r\n    type: 'ownListing',\r\n    attributes: { publicData: {} },\r\n    images: [],\r\n  };\r\n  return { ...empty, ...listing };\r\n};\r\n\r\n/**\r\n * Create shell objects to ensure that attributes etc. exists.\r\n *\r\n * @param {Object} user entity object, which is to be ensured against null values\r\n */\r\nexport const ensureUser = user => {\r\n  const empty = { id: null, type: 'user', attributes: { profile: {} } };\r\n  return { ...empty, ...user };\r\n};\r\n\r\n/**\r\n * Create shell objects to ensure that attributes etc. exists.\r\n *\r\n * @param {Object} current user entity object, which is to be ensured against null values\r\n */\r\nexport const ensureCurrentUser = user => {\r\n  const empty = { id: null, type: 'currentUser', attributes: { profile: {} }, profileImage: {} };\r\n  return { ...empty, ...user };\r\n};\r\n\r\n/**\r\n * Create shell objects to ensure that attributes etc. exists.\r\n *\r\n * @param {Object} time slot entity object, which is to be ensured against null values\r\n */\r\nexport const ensureTimeSlot = timeSlot => {\r\n  const empty = { id: null, type: 'timeSlot', attributes: {} };\r\n  return { ...empty, ...timeSlot };\r\n};\r\n\r\n/**\r\n * Create shell objects to ensure that attributes etc. exists.\r\n *\r\n * @param {Object} availability exception entity object, which is to be ensured against null values\r\n */\r\nexport const ensureDayAvailabilityPlan = availabilityPlan => {\r\n  const empty = { type: 'availability-plan/day', entries: [] };\r\n  return { ...empty, ...availabilityPlan };\r\n};\r\n\r\n/**\r\n * Create shell objects to ensure that attributes etc. exists.\r\n *\r\n * @param {Object} availability exception entity object, which is to be ensured against null values\r\n */\r\nexport const ensureAvailabilityException = availabilityException => {\r\n  const empty = { id: null, type: 'availabilityException', attributes: {} };\r\n  return { ...empty, ...availabilityException };\r\n};\r\n\r\n/**\r\n * Create shell objects to ensure that attributes etc. exists.\r\n *\r\n * @param {Object} stripeCustomer entity from API, which is to be ensured against null values\r\n */\r\nexport const ensureStripeCustomer = stripeCustomer => {\r\n  const empty = { id: null, type: 'stripeCustomer', attributes: {} };\r\n  return { ...empty, ...stripeCustomer };\r\n};\r\n\r\n/**\r\n * Create shell objects to ensure that attributes etc. exists.\r\n *\r\n * @param {Object} stripeCustomer entity from API, which is to be ensured against null values\r\n */\r\nexport const ensurePaymentMethodCard = stripePaymentMethod => {\r\n  const empty = {\r\n    id: null,\r\n    type: 'stripePaymentMethod',\r\n    attributes: { type: 'stripe-payment-method/card', card: {} },\r\n  };\r\n  const cardPaymentMethod = { ...empty, ...stripePaymentMethod };\r\n\r\n  if (cardPaymentMethod.attributes.type !== 'stripe-payment-method/card') {\r\n    throw new Error(`'ensurePaymentMethodCard' got payment method with wrong type.\r\n      'stripe-payment-method/card' was expected, received ${cardPaymentMethod.attributes.type}`);\r\n  }\r\n\r\n  return cardPaymentMethod;\r\n};\r\n\r\n/**\r\n * Get the display name of the given user as string. This function handles\r\n * missing data (e.g. when the user object is still being downloaded),\r\n * fully loaded users, as well as banned users.\r\n *\r\n * For banned or deleted users, a translated name should be provided.\r\n *\r\n * @param {propTypes.user} user\r\n * @param {String} defaultUserDisplayName\r\n *\r\n * @return {String} display name that can be rendered in the UI\r\n */\r\nexport const userDisplayNameAsString = (user, defaultUserDisplayName) => {\r\n  const hasDisplayName = user?.attributes?.profile?.displayName;\r\n\r\n  if (hasDisplayName) {\r\n    return user.attributes.profile.displayName;\r\n  } else {\r\n    return defaultUserDisplayName || '';\r\n  }\r\n};\r\n\r\n/**\r\n * DEPRECATED: Use userDisplayNameAsString function or UserDisplayName component instead\r\n *\r\n * @param {propTypes.user} user\r\n * @param {String} bannedUserDisplayName\r\n *\r\n * @return {String} display name that can be rendered in the UI\r\n */\r\nexport const userDisplayName = (user, bannedUserDisplayName) => {\r\n  console.warn(\r\n    `Function userDisplayName is deprecated!\r\nUser function userDisplayNameAsString or component UserDisplayName instead.`\r\n  );\r\n\r\n  return userDisplayNameAsString(user, bannedUserDisplayName);\r\n};\r\n\r\n/**\r\n * Get the abbreviated name of the given user. This function handles\r\n * missing data (e.g. when the user object is still being downloaded),\r\n * fully loaded users, as well as banned users.\r\n *\r\n * For banned  or deleted users, a default abbreviated name should be provided.\r\n *\r\n * @param {propTypes.user} user\r\n * @param {String} defaultUserAbbreviatedName\r\n *\r\n * @return {String} abbreviated name that can be rendered in the UI\r\n * (e.g. in Avatar initials)\r\n */\r\nexport const userAbbreviatedName = (user, defaultUserAbbreviatedName) => {\r\n  const hasAttributes = user && user.attributes;\r\n  const hasProfile = hasAttributes && user.attributes.profile;\r\n  const hasDisplayName = hasProfile && user.attributes.profile.abbreviatedName;\r\n\r\n  if (hasDisplayName) {\r\n    return user.attributes.profile.abbreviatedName;\r\n  } else {\r\n    return defaultUserAbbreviatedName || '';\r\n  }\r\n};\r\n\r\n/**\r\n * A customizer function to be used with the\r\n * mergeWith function from lodash.\r\n *\r\n * Works like merge in every way exept that on case of\r\n * an array the old value is completely overridden with\r\n * the new value.\r\n *\r\n * @param {Object} objValue Value of current field, denoted by key\r\n * @param {Object} srcValue New value\r\n * @param {String} key Key of the field currently being merged\r\n * @param {Object} object Target object that is receiving values from source\r\n * @param {Object} source Source object that is merged into object param\r\n * @param {Object} stack Tracks merged values\r\n *\r\n * @return {Object} New value for objValue if the original is an array,\r\n * otherwise undefined is returned, which results in mergeWith using the\r\n * standard merging function\r\n */\r\nexport const overrideArrays = (objValue, srcValue, key, object, source, stack) => {\r\n  if (isArray(objValue)) {\r\n    return srcValue;\r\n  }\r\n};\r\n\r\n/**\r\n * Humanizes a line item code. Strips the \"line-item/\" namespace\r\n * definition from the beginnign, replaces dashes with spaces and\r\n * capitalizes the first character.\r\n *\r\n * @param {string} code a line item code\r\n *\r\n * @return {string} returns the line item code humanized\r\n */\r\nexport const humanizeLineItemCode = code => {\r\n  if (!/^line-item\\/.+/.test(code)) {\r\n    throw new Error(`Invalid line item code: ${code}`);\r\n  }\r\n  const lowercase = code.replace(/^line-item\\//, '').replace(/-/g, ' ');\r\n\r\n  return lowercase.charAt(0).toUpperCase() + lowercase.slice(1);\r\n};\r\n","import moment from 'moment-timezone/builds/moment-timezone-with-data-10-year-range.min';\r\n\r\n/**\r\n * Input names for the DateRangePicker from react-dates.\r\n */\r\nexport const START_DATE = 'startDate';\r\nexport const END_DATE = 'endDate';\r\n\r\n/**\r\n * Check if the browser's DateTimeFormat API supports time zones.\r\n *\r\n * @returns {Boolean} true if the browser returns current time zone.\r\n */\r\nexport const isTimeZoneSupported = () => {\r\n  if (!Intl || typeof Intl === 'undefined' || typeof Intl.DateTimeFormat === 'undefined') {\r\n    return false;\r\n  }\r\n\r\n  const dtf = new Intl.DateTimeFormat();\r\n  if (typeof dtf === 'undefined' || typeof dtf.resolvedOptions === 'undefined') {\r\n    return false;\r\n  }\r\n\r\n  // TODO: Chrome and Firefox seem to have issues on macOS Sonoma, when populating timeZone on Intl API\r\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=1487920\r\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1856428\r\n  // Note: we might remove this, when the bugs have been resolved on those browsers\r\n  if (!dtf.resolvedOptions().timeZone && isValidTimeZone('Europe/Helsinki')) {\r\n    console.error(`Time zone was undefined (new Intl.DateTimeFormat().resolvedOptions().timeZone).\r\n    This might cause problems for date and duration calculation on this browser.`);\r\n    return true;\r\n  }\r\n\r\n  return !!dtf.resolvedOptions().timeZone;\r\n};\r\n\r\n/**\r\n * Detect the default timezone of user's browser.\r\n * This function can only be called from client side.\r\n * I.e. server-side rendering doesn't make sense - it would not return user's timezone.\r\n *\r\n * @returns {String} string containing IANA timezone key (e.g. 'Europe/Helsinki')\r\n */\r\nexport const getDefaultTimeZoneOnBrowser = () => {\r\n  if (typeof window === 'undefined') {\r\n    throw new Error(\r\n      'Utility function: getDefaultTimeZoneOnBrowser() should be called on client-side only.'\r\n    );\r\n  }\r\n\r\n  if (isTimeZoneSupported()) {\r\n    const dtf = new Intl.DateTimeFormat();\r\n    const currentTimeZone = dtf.resolvedOptions().timeZone;\r\n    if (currentTimeZone) {\r\n      return currentTimeZone;\r\n    }\r\n  }\r\n\r\n  console.error(\r\n    'Utility function: getDefaultTimeZoneOnBrowser() was not able to detect time zone.'\r\n  );\r\n  return 'Etc/UTC';\r\n};\r\n\r\n/**\r\n * Check if the given time zone key is valid.\r\n *\r\n * @param {String} timeZone time zone id, see:\r\n *   https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\r\n *\r\n * @returns {Boolean} true if the browser recognizes the key.\r\n */\r\nexport const isValidTimeZone = timeZone => {\r\n  try {\r\n    new Intl.DateTimeFormat('en-US', { timeZone }).format();\r\n    return true;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Return the names of the time zones according to IANA timezone db.\r\n *\r\n * @param {RegExp} relevantZonesRegExp is pattern to filter returned time zones.\r\n *\r\n * @returns {Array} an array of relevant time zones.\r\n */\r\nexport const getTimeZoneNames = relevantZonesRegExp => {\r\n  const allTimeZones = moment.tz.names();\r\n  return relevantZonesRegExp ? allTimeZones.filter(z => relevantZonesRegExp.test(z)) : allTimeZones;\r\n};\r\n\r\n/**\r\n * Check that the given parameter is a Date object.\r\n *\r\n * @param {Date} object that should be a Date.\r\n *\r\n * @returns {boolean} true if given parameter is a Date object.\r\n */\r\nexport const isDate = d =>\r\n  d && Object.prototype.toString.call(d) === '[object Date]' && !Number.isNaN(d.getTime());\r\n\r\n/**\r\n * Check if the given parameters represent the same Date value (timestamps are compared)\r\n *\r\n * @param {Date} first param that should be a Date and it should have same timestamp as second param.\r\n * @param {Date} second param that should be a Date and it should have same timestamp as second param.\r\n *\r\n * @returns {boolean} true if given parameters have the same timestamp.\r\n */\r\nexport const isSameDate = (a, b) => a && isDate(a) && b && isDate(b) && a.getTime() === b.getTime();\r\n\r\n/**\r\n * Compare is dateA is after dateB\r\n *\r\n * @param {Date} dateA date instance\r\n * @param {Date} dateB date instance\r\n *\r\n * @returns {Date} true if dateA is after dateB\r\n */\r\nexport const isAfterDate = (dateA, dateB) => {\r\n  return moment(dateA).isAfter(moment(dateB));\r\n};\r\n\r\n/**\r\n * Compare is dateA is after dateB\r\n *\r\n * @param {Date} dateA date instance\r\n * @param {Date} dateB date instance\r\n *\r\n * @returns {Date} true if dateA is after dateB\r\n */\r\nexport const isDateSameOrAfter = (dateA, dateB) => {\r\n  return moment(dateA).isSameOrAfter(moment(dateB));\r\n};\r\n\r\n/**\r\n * Check that the given dates are pointing to the same day.\r\n *\r\n * @param {Date} date1 first date object\r\n * @param {Date} date2 second date object\r\n * @param {String} timeZone (if omitted local time zone is used)\r\n *\r\n * @returns {boolean} true if Date objects are pointing to the same day on given time zone.\r\n */\r\nexport const isSameDay = (date1, date2, timeZone) => {\r\n  const d1 = timeZone ? moment(date1).tz(timeZone) : moment(date1);\r\n  const d2 = timeZone ? moment(date2).tz(timeZone) : moment(date2);\r\n  return d1.isSame(d2, 'day');\r\n};\r\n\r\n/**\r\n * Check if the date is in the given range, start and end included.\r\n * @param {Date} date to be checked\r\n * @param {Date} start start of the range\r\n * @param {Date} end end of the range\r\n * @param {string} timeUnit scope of the range, e.g. 'day', 'hour', 'minute', can be also null\r\n * @param {String} timeZone\r\n *\r\n * @returns {boolean} is date in range\r\n */\r\nexport const isInRange = (date, start, end, timeUnit, timeZone) => {\r\n  const dShwcseoment = timeZone ? moment(date).tz(timeZone) : moment(date);\r\n  // Range usually ends with 00:00, and with day timeUnit,\r\n  // this means that exclusive end is wrongly taken into range.\r\n  // Note about timeUnit with isBetween: in the event that the from and to parameters are the same,\r\n  // but the inclusivity parameters are different, false will preside.\r\n  // aka moment('2016-10-30').isBetween('2016-10-30', '2016-10-30', undefined, '(]'); //false\r\n  // => we need to use []\r\n  const millisecondBeforeEndTime = new Date(end.getTime() - 1);\r\n  return dShwcseoment.isBetween(start, millisecondBeforeEndTime, timeUnit, '[]');\r\n};\r\n\r\n/**\r\n * Checks if time-range contains a day (moment)\r\n * Returns true if the day is inside the range or if the time-range\r\n * starts or ends between start and end of the day.\r\n *\r\n * By default react-dates handles dates in the browser's timezone so\r\n * we need to convert the value `day` to given timezone before comparing it\r\n * to time-range.\r\n *\r\n * This is used with isDayBlocked in react-dates\r\n *\r\n * @param {Moment} dayMoment to be checked\r\n * @param {Date} start start of the range\r\n * @param {Date} end end of the range\r\n * @param {String} timeZone\r\n *\r\n * @returns {boolean} is day in range\r\n */\r\nexport const isDayMomentInsideRange = (dayMoment, start, end, timeZone) => {\r\n  const startOfDay = moment.tz(dayMoment.toArray().slice(0, 3), timeZone);\r\n\r\n  // Removing 1 millisecond, solves the exclusivity issue.\r\n  // Because we are only using the date and not the exact time we can remove the\r\n  // 1ms from the end date.\r\n  // Note about timeUnit with isBetween: in the event that the from and to parameters are the same,\r\n  // but the inclusivity parameters are different, false will preside.\r\n  // => we need to use []\r\n  const inclusiveEndDate = moment.tz(new Date(end.getTime() - 1), timeZone);\r\n\r\n  return startOfDay.isBetween(start, inclusiveEndDate, 'day', '[]');\r\n};\r\n\r\n/**\r\n * Convert timestamp to date\r\n * @param {string} timestamp\r\n *\r\n * @returns {Date} timestamp converted to date\r\n */\r\nexport const timestampToDate = timestamp => {\r\n  return new Date(Number.parseInt(timestamp, 10));\r\n};\r\n\r\n////////////////////////////////////////////////////////////////////\r\n// Manipulate time: time-of-day between different time zones etc. //\r\n////////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * Returns a new date, which indicates the same time of day in a given time zone\r\n * as given date is in local time zone\r\n *\r\n * @param {Date} date\r\n * @param {String} timeZone\r\n *\r\n * @returns {Date} date in given time zone\r\n */\r\nexport const timeOfDayFromLocalToTimeZone = (date, timeZone) => {\r\n  return moment.tz(moment(date).format('YYYY-MM-DD HH:mm:ss'), timeZone).toDate();\r\n};\r\n\r\n/**\r\n * Returns a new date, which indicates the same time of day in a local time zone\r\n * as given date is in specified time zone\r\n *\r\n * @param {Date} date\r\n * @param {String} timeZone\r\n *\r\n * @returns {Date} date in given time zone\r\n */\r\nexport const timeOfDayFromTimeZoneToLocal = (date, timeZone) => {\r\n  return moment(\r\n    moment(date)\r\n      .tz(timeZone)\r\n      .format('YYYY-MM-DD HH:mm:ss')\r\n  ).toDate();\r\n};\r\n\r\n/**\r\n * Get start of time unit (e.g. start of day)\r\n *\r\n * @param {Date} date date instance to be converted\r\n * @param {String} unit time-unit (e.g. \"day\")\r\n * @param {String} timeZone time zone id\r\n *\r\n * @returns {Date} date object converted to the start of given unit\r\n */\r\nexport const getStartOf = (date, unit, timeZone, offset = 0, offsetUnit = 'days') => {\r\n  const m = timeZone\r\n    ? moment(date)\r\n        .clone()\r\n        .tz(timeZone)\r\n    : moment(date).clone();\r\n\r\n  const startOfUnit = m.startOf(unit);\r\n  const startOfUnitWithOffset = offset === 0 ? startOfUnit : startOfUnit.add(offset, offsetUnit);\r\n  return startOfUnitWithOffset.toDate();\r\n};\r\n\r\n/**\r\n * Adds time-units to the date\r\n *\r\n * @param {Date} date date to be manipulated\r\n * @param {int} offset offset of time-units (e.g. \"3\" days)\r\n * @param {String} unit time-unit (e.g. \"days\")\r\n * @param {String} timeZone time zone name\r\n *\r\n * @returns {Date} date with given offset added\r\n */\r\nexport const addTime = (date, offset, unit, timeZone) => {\r\n  const m = timeZone\r\n    ? moment(date)\r\n        .clone()\r\n        .tz(timeZone)\r\n    : moment(date).clone();\r\n  return m.add(offset, unit).toDate();\r\n};\r\n\r\n/**\r\n * Subtract time-units from the date\r\n *\r\n * @param {Date} date date to be manipulated\r\n * @param {int} offset offset of time-units (e.g. \"3\" days)\r\n * @param {String} unit time-unit (e.g. \"days\")\r\n * @param {String} timeZone time zone name\r\n *\r\n * @returns {Date} date with given offset subtracted\r\n */\r\nexport const subtractTime = (date, offset, unit, timeZone) => {\r\n  const m = timeZone\r\n    ? moment(date)\r\n        .clone()\r\n        .tz(timeZone)\r\n    : moment(date).clone();\r\n  return m.subtract(offset, unit).toDate();\r\n};\r\n\r\n///////////////\r\n// Durations //\r\n///////////////\r\n\r\n/**\r\n * Calculate the number of days between the given dates.\r\n * This uses moment#diff and, therefore, it just checks,\r\n * if there are 1000x60x60x24 milliseconds between date objects.\r\n *\r\n * Note: This should not be used for checking if the local date has\r\n *       changed between \"2021-04-07 23:00\" and \"2021-04-08 05:00\".\r\n *\r\n * @param {Date} startDate start of the time period\r\n * @param {Date} endDate end of the time period. NOTE: with daily\r\n * bookings, it is expected that this date is the exclusive end date,\r\n * i.e. the last day of the booking is the previous date of this end\r\n * date.\r\n *\r\n * @throws Will throw if the end date is before the start date\r\n * @returns {Number} number of days between the given dates\r\n */\r\nexport const daysBetween = (startDate, endDate) => {\r\n  const days = moment(endDate).diff(startDate, 'days');\r\n  if (days < 0) {\r\n    throw new Error('End date cannot be before start date');\r\n  }\r\n  return days;\r\n};\r\n\r\n/**\r\n * Count the number of minutes between the given Date objects.\r\n *\r\n * @param {Date} startDate start of the time period\r\n * @param {Date} endDate end of the time period.\r\n *\r\n * @returns {Number} number of minutes between the given Date objects\r\n */\r\nexport const minutesBetween = (startDate, endDate) => {\r\n  const minutes = moment(endDate).diff(startDate, 'minutes');\r\n  return minutes;\r\n};\r\n\r\n/**\r\n * Calculate the difference between the given dates\r\n *\r\n * @param {Date} startDate start of the time period\r\n * @param {Date} endDate end of the time period.\r\n * @param {String} unit time unit. E.g. 'years'.\r\n * @param {String} useFloat Should return floating point numbers?\r\n *\r\n * @returns {Number} time difference between the given Date objects using given unit\r\n */\r\nexport const diffInTime = (startDate, endDate, unit, useFloat = false) => {\r\n  return moment(startDate).diff(endDate, unit, useFloat);\r\n};\r\n\r\n////////////////////////////\r\n// Parsing and formatting //\r\n////////////////////////////\r\n\r\nconst getTimeZoneMaybe = timeZone => {\r\n  if (timeZone) {\r\n    if (!isTimeZoneSupported()) {\r\n      throw new Error(`Your browser doesn't support time zones.`);\r\n    }\r\n\r\n    if (!isValidTimeZone(timeZone)) {\r\n      throw new Error(`Given time zone key (${timeZone}) is not valid.`);\r\n    }\r\n    return { timeZone };\r\n  }\r\n  return {};\r\n};\r\n\r\n/**\r\n * Format the given date. Printed string depends on how close the date is the current day.\r\n * E.g. \"Today, 9:10 PM\", \"Sun 6:02 PM\", \"Jul 20, 6:02 PM\", \"Jul 20 2020, 6:02 PM\"\r\n *\r\n * @param {Date} date Date to be formatted\r\n * @param {Object} intl Intl object from react-intl\r\n * @param {String} todayString translation for the current day\r\n * @param {Object} [opts] options. Can be used to pass in timeZone. It should represent IANA time zone key.\r\n *\r\n * @returns {String} formatted date\r\n */\r\nexport const formatDateWithProximity = (date, intl, todayString, opts = {}) => {\r\n  const paramsValid = intl && date instanceof Date && typeof todayString === 'string';\r\n  if (!paramsValid) {\r\n    throw new Error(`Invalid params for formatDate: (${date}, ${intl}, ${todayString})`);\r\n  }\r\n\r\n  // If timeZone parameter is set, use it as formatting option\r\n  const { timeZone } = opts;\r\n  const timeZoneMaybe = getTimeZoneMaybe(timeZone);\r\n\r\n  // By default we can use moment() directly but in tests we need to use a specific dates.\r\n  // Tests inject now() function to intl wich returns predefined date\r\n  const now = intl.now ? moment(intl.now()) : moment();\r\n\r\n  // isSame: if the two moments have different time zones, the time zone of the first moment will be used for the comparison.\r\n  const localizedNow = timeZoneMaybe.timeZone ? now.tz(timeZone) : now;\r\n\r\n  if (localizedNow.isSame(date, 'day')) {\r\n    // e.g. \"Today, 9:10 PM\"\r\n    const formattedTime = intl.formatDate(date, {\r\n      hour: 'numeric',\r\n      minute: 'numeric',\r\n      ...timeZoneMaybe,\r\n    });\r\n    return `${todayString}, ${formattedTime}`;\r\n  } else if (localizedNow.isSame(date, 'week')) {\r\n    // e.g.\r\n    // en-US: \"Sun 6:02 PM\"\r\n    // en-GB: \"Sun 18:02\"\r\n    // fr-FR: \"dim. 18:02\"\r\n    return intl.formatDate(date, {\r\n      weekday: 'short',\r\n      hour: 'numeric',\r\n      minute: 'numeric',\r\n      ...timeZoneMaybe,\r\n    });\r\n  } else if (localizedNow.isSame(date, 'year')) {\r\n    // e.g.\r\n    // en-US: \"Jul 20, 6:02 PM\"\r\n    // en-GB: \"20 Jul, 18:02\"\r\n    // fr-FR: \"20 juil., 18:02\"\r\n    return intl.formatDate(date, {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: 'numeric',\r\n      minute: 'numeric',\r\n      ...timeZoneMaybe,\r\n    });\r\n  } else {\r\n    // e.g.\r\n    // en-US: \"Jul 20, 2020, 6:02 PM\"\r\n    // en-GB: \"20 Jul 2020, 18:02\"\r\n    // fr-FR: \"20 juil. 2020, 18:02\"\r\n    return intl.formatDate(date, {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: 'numeric',\r\n      minute: 'numeric',\r\n      ...timeZoneMaybe,\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Formats date to into multiple different ways:\r\n * - date \"Mar 24\"\r\n * - time \"8:07 PM\"\r\n * - dateAndTime: \"Mar 24, 8:07 PM\"\r\n *\r\n * If date is on different year, it will show it.\r\n *\r\n * @param {Date} date to be formatted\r\n * @param {Object} intl Intl object from react-intl\r\n * @param {Object} [opts] options. Can be used to pass in timeZone. It should represent IANA time zone key.\r\n *\r\n * @returns {Object} \"{ date, time, dateAndTime }\"\r\n */\r\nexport const formatDateIntoPartials = (date, intl, opts = {}) => {\r\n  // If timeZone parameter is set, use it as formatting option\r\n  const { timeZone } = opts;\r\n  const timeZoneMaybe = getTimeZoneMaybe(timeZone);\r\n\r\n  // By default we can use moment() directly but in tests we need to use a specific dates.\r\n  // Tests inject now() function to intl wich returns predefined date\r\n  const now = intl.now ? moment(intl.now()) : moment();\r\n\r\n  // isSame: if the two moments have different time zones, the time zone of the first moment will be used for the comparison.\r\n  const localizedNow = timeZoneMaybe.timeZone ? now.tz(timeZone) : now;\r\n  const yearMaybe = localizedNow.isSame(date, 'year') ? {} : { year: 'numeric' };\r\n\r\n  return {\r\n    date: intl.formatDate(date, {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      ...yearMaybe,\r\n      ...timeZoneMaybe,\r\n    }),\r\n    time: intl.formatDate(date, {\r\n      hour: 'numeric',\r\n      minute: 'numeric',\r\n      ...timeZoneMaybe,\r\n    }),\r\n    dateAndTime: intl.formatDate(date, {\r\n      ...yearMaybe,\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: 'numeric',\r\n      minute: 'numeric',\r\n      ...timeZoneMaybe,\r\n    }),\r\n  };\r\n};\r\n\r\n/**\r\n * Parses given date string in ISO8601 format('YYYY-MM-DD') to date in\r\n * the given time zone.\r\n *\r\n * This is used in search when filtering by time-based availability.\r\n *\r\n * Example:\r\n * ('2020-04-15', 'Etc/UTC') => new Date('2020-04-15T00:00:00.000Z')\r\n * ('2020-04-15', 'Europe/Helsinki') => new Date('2020-04-14T21:00:00.000Z')\r\n *\r\n * @param {String} dateString in 'YYYY-MM-DD' format\r\n * @param {String} [timeZone] time zone id, see:\r\n *   https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\r\n *\r\n * @returns {Date} date\r\n */\r\nexport const parseDateFromISO8601 = (dateString, timeZone = null) => {\r\n  return timeZone\r\n    ? moment.tz(dateString, timeZone).toDate()\r\n    : moment(dateString, 'YYYY-MM-DD').toDate();\r\n};\r\n\r\n/**\r\n * Parses a date string that has format like \"YYYY-MM-DD HH:mm\" into localized date\r\n * @param {String} dateTimeString\r\n * @param {String} timeZone time zone id, see:\r\n *   https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\r\n * @returns returns Date object\r\n */\r\nexport const parseDateTimeString = (dateTimeString, timeZone = null) => {\r\n  return timeZone\r\n    ? moment.tz(dateTimeString, timeZone).toDate()\r\n    : moment(dateTimeString, 'YYYY-MM-DD HH:mm').toDate();\r\n};\r\n\r\n/**\r\n * Converts date to string ISO8601 format ('YYYY-MM-DD').\r\n * This string is used e.g. in urlParam.\r\n *\r\n * @param {Date} date\r\n * @param {String} [timeZone] time zone id, see:\r\n *   https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\r\n *\r\n * @returns {String} string in 'YYYY-MM-DD' format\r\n */\r\nexport const stringifyDateToISO8601 = (date, timeZone = null) => {\r\n  return timeZone\r\n    ? moment(date)\r\n        .tz(timeZone)\r\n        .format('YYYY-MM-DD')\r\n    : moment(date).format('YYYY-MM-DD');\r\n};\r\n\r\n///////////////////////\r\n// Time unit helpers //\r\n///////////////////////\r\n\r\n// NOTE: If your customization is using different time-units than hours\r\n// and different boundaries than sharp hours, you need to modify these functions:\r\n// - findBookingUnitBoundaries (DST changes)\r\n// - findNextBoundary\r\n// - getSharpHours\r\n// - getStartHours\r\n// - getEndHours\r\n\r\n// Helper function for exported function: getSharpHours\r\n// Recursively find boundaries for bookable time slots.\r\nconst findBookingUnitBoundaries = params => {\r\n  const {\r\n    cumulatedResults,\r\n    currentBoundary,\r\n    startMoment,\r\n    endMoment,\r\n    nextBoundaryFn,\r\n    intl,\r\n    timeZone,\r\n    timeUnit = 'hour',\r\n  } = params;\r\n\r\n  if (moment(currentBoundary).isBetween(startMoment, endMoment, null, '[]')) {\r\n    const timeOfDay = formatDateIntoPartials(currentBoundary, intl, { timeZone })?.time;\r\n\r\n    // Choose the previous (aka first) sharp hour boundary,\r\n    // if daylight saving time (DST) creates the same time of day two times.\r\n    const newBoundary =\r\n      cumulatedResults &&\r\n      cumulatedResults.length > 0 &&\r\n      cumulatedResults.slice(-1)[0].timeOfDay === timeOfDay\r\n        ? []\r\n        : [\r\n            {\r\n              timestamp: currentBoundary.valueOf(),\r\n              timeOfDay,\r\n            },\r\n          ];\r\n\r\n    return findBookingUnitBoundaries({\r\n      ...params,\r\n      cumulatedResults: [...cumulatedResults, ...newBoundary],\r\n      currentBoundary: moment(nextBoundaryFn(currentBoundary, timeUnit, timeZone)),\r\n    });\r\n  }\r\n  return cumulatedResults;\r\n};\r\n\r\n/**\r\n * Find the next sharp hour after the current moment.\r\n *\r\n * @param {Moment|Date} Start point for looking next sharp hour.\r\n * @param {String} timeUnit scope. e.g. 'hour', 'day'\r\n * @param {String} timezone name. It should represent IANA timezone key.\r\n *\r\n * @returns {Array} an array of localized hours.\r\n */\r\nexport const findNextBoundary = (currentMomentOrDate, timeUnit, timeZone) =>\r\n  moment(currentMomentOrDate)\r\n    .clone()\r\n    .tz(timeZone)\r\n    .add(1, timeUnit)\r\n    .startOf(timeUnit)\r\n    .toDate();\r\n\r\n/**\r\n * Find sharp hours inside given time window. Returned strings are localized to given time zone.\r\n *\r\n * > getSharpHours(new Date('2019-09-18T08:00:00.000Z'), new Date('2019-09-18T11:00:00.000Z'), 'Europe/Helsinki', intl);\r\n * => [\r\n *    {\r\n *      \"timestamp\": 1568793600000,\r\n *      \"timeOfDay\": \"11:00\",\r\n *    },\r\n *    {\r\n *      \"timestamp\": 1568797200000,\r\n *      \"timeOfDay\": \"12:00\",\r\n *    },\r\n *    {\r\n *      \"timestamp\": 1568800800000,\r\n *      \"timeOfDay\": \"13:00\",\r\n *    },\r\n *    {\r\n *      \"timestamp\": 1568804400000,\r\n *      \"timeOfDay\": \"14:00\",\r\n *    },\r\n *  ]\r\n *\r\n * @param {Date} Start point of available time window.\r\n * @param {Date} End point of available time window.\r\n * @param {String} timezone name. It should represent IANA timezone key.\r\n * @param {Object} intl containing formatting options for Intl.DateTimeFormat.\r\n *\r\n * @returns {Array} an array of objects with keys timestamp and timeOfDay.\r\n */\r\nexport const getSharpHours = (startTime, endTime, timeZone, intl) => {\r\n  if (!moment.tz.zone(timeZone)) {\r\n    throw new Error(\r\n      'Time zones are not loaded into moment-timezone. \"getSharpHours\" function uses time zones.'\r\n    );\r\n  }\r\n\r\n  // Select a moment before startTime to find next possible sharp hour.\r\n  // I.e. startTime might be a sharp hour.\r\n  const millisecondBeforeStartTime = new Date(startTime.getTime() - 1);\r\n  return findBookingUnitBoundaries({\r\n    currentBoundary: findNextBoundary(millisecondBeforeStartTime, 'hour', timeZone),\r\n    startMoment: moment(startTime),\r\n    endMoment: moment(endTime),\r\n    nextBoundaryFn: findNextBoundary,\r\n    cumulatedResults: [],\r\n    intl,\r\n    timeZone,\r\n    timeUnit: 'hour',\r\n  });\r\n};\r\n\r\n/**\r\n * Find sharp start hours for bookable time units (hour) inside given time window.\r\n * Returned strings are localized to given time zone.\r\n *\r\n * > getStartHours(new Date('2019-09-18T08:00:00.000Z'), new Date('2019-09-18T11:00:00.000Z'), 'Europe/Helsinki', intl);\r\n * => [\r\n *    {\r\n *      \"timestamp\": 1568793600000,\r\n *      \"timeOfDay\": \"11:00\",\r\n *    },\r\n *    {\r\n *      \"timestamp\": 1568797200000,\r\n *      \"timeOfDay\": \"12:00\",\r\n *    },\r\n *    {\r\n *      \"timestamp\": 1568800800000,\r\n *      \"timeOfDay\": \"13:00\",\r\n *    },\r\n *  ]\r\n *\r\n * @param {Date} Start point of available time window.\r\n * @param {Date} End point of available time window.\r\n * @param {String} timezone name. It should represent IANA timezone key.\r\n * @param {Object} intl containing formatting options for Intl.DateTimeFormat.\r\n *\r\n * @returns {Array} an array of objects with keys timestamp and timeOfDay.\r\n */\r\nexport const getStartHours = (startTime, endTime, timeZone, intl) => {\r\n  const hours = getSharpHours(startTime, endTime, timeZone, intl);\r\n  return hours.length < 2 ? hours : hours.slice(0, -1);\r\n};\r\n\r\n/**\r\n * Find sharp end hours for bookable time units (hour) inside given time window.\r\n * Returned strings are localized to given time zone.\r\n *\r\n * > getStartingHours(new Date('2019-09-18T08:00:00.000Z'), new Date('2019-09-18T11:00:00.000Z'), 'Europe/Helsinki', intl);\r\n * => [\r\n *    {\r\n *      \"timestamp\": 1568797200000,\r\n *      \"timeOfDay\": \"12:00\",\r\n *    },\r\n *    {\r\n *      \"timestamp\": 1568800800000,\r\n *      \"timeOfDay\": \"13:00\",\r\n *    },\r\n *    {\r\n *      \"timestamp\": 1568804400000,\r\n *      \"timeOfDay\": \"14:00\",\r\n *    },\r\n *  ]\r\n *\r\n * @param {Date} Start point of available time window.\r\n * @param {Date} End point of available time window.\r\n * @param {String} timezone name. It should represent IANA timezone key.\r\n * @param {Object} intl containing formatting options for Intl.DateTimeFormat.\r\n *\r\n * @returns {Array} an array of objects with keys timestamp and timeOfDay.\r\n */\r\nexport const getEndHours = (startTime, endTime, timeZone, intl) => {\r\n  const hours = getSharpHours(startTime, endTime, timeZone, intl);\r\n  return hours.length < 2 ? [] : hours.slice(1);\r\n};\r\n\r\n//////////\r\n// Misc //\r\n//////////\r\n\r\n/**\r\n * Return fucntion for react-dates that returns moment of correct initial visible month.\r\n * The time-of-day is converted to given time zone, since timeSlot query is tied to it.\r\n *\r\n * Note:  The moment object we pass to react-dates is without time zone info.\r\n * Otherwise, react-dates would start to behave erroneously.\r\n *\r\n * @param {Date} date\r\n * @param {String} timeZone name. It should represent IANA timezone key.\r\n * @returns {Moment} of correct month in the given time zone\r\n */\r\nexport const initialVisibleMonth = (date, timeZone) => () => {\r\n  return moment(\r\n    moment(date)\r\n      .tz(timeZone)\r\n      .format('YYYY-MM-DD HH:mm:ss')\r\n  );\r\n};\r\n\r\n/**\r\n * Format the given date to month id/string: 'YYYY-MM'.\r\n *\r\n * @param {Date} date to be formatted\r\n * @param {String} [timeZone] time zone name (optional parameter).\r\n *\r\n * @returns {String} formatted month string\r\n */\r\nexport const monthIdString = (date, timeZone = null) => {\r\n  return timeZone\r\n    ? moment(date)\r\n        .tz(timeZone)\r\n        .format('YYYY-MM')\r\n    : moment(date).format('YYYY-MM');\r\n};\r\n\r\n/**\r\n * Formats string ('YYYY-MM-DD') in given time zone to format ('0000-00-00T00:00:00.000Z') and adds one day.\r\n * This is used as end date of the search query.\r\n * One day must be added because end of the availability is exclusive in API.\r\n *\r\n * @param {String} string in 'YYYY-MM-DD'format\r\n * @param {String} timeZone time zone name.\r\n *\r\n * @returns {String} string in '0000-00-00T00:00:00.000Z' format\r\n */\r\nexport const getExclusiveEndDate = (dateString, timeZone) => {\r\n  return moment\r\n    .tz(dateString, timeZone)\r\n    .add(1, 'days')\r\n    .startOf('day')\r\n    .toDate();\r\n};\r\n\r\n/**\r\n * Get the day (number) of the week (similar to \"new Date().getDay()\")\r\n * @param {Date} date\r\n * @param {String} timeZone name. It should represent IANA timezone key.\r\n * @returns the day of week number 0(Sun) ... 6(Sat)\r\n */\r\nexport const getDayOfWeek = (date, timeZone) => {\r\n  return timeZone\r\n    ? moment(date)\r\n        .tz(timeZone)\r\n        .day()\r\n    : moment(date).day();\r\n};\r\n\r\n/**\r\n * Get the start of a week as a Momemnt instance.\r\n * This is used by react-dates library (e.g. WeeklyCalendar)\r\n * @param {Moment} dayMoment moment instance representing a day\r\n * @param {String} timeZone name. It should represent IANA timezone key.\r\n * @param {number} firstDayOfWeek (which weekday is the first day?)\r\n * @returns return moment object representing the first moment of the week where dayMoment belongs to\r\n */\r\nexport const getStartOfWeekAsMoment = (dayMoment, timeZone, firstDayOfWeek) => {\r\n  const m = timeZone ? dayMoment.clone().tz(timeZone) : dayMoment.clone();\r\n  let d = m.startOf('day');\r\n  const diffToSunday = d.day();\r\n  const adjustOffset =\r\n    diffToSunday === 0 && firstDayOfWeek > 0 ? -7 + firstDayOfWeek : firstDayOfWeek;\r\n  const startOfWeek = d.date() - diffToSunday + adjustOffset; // adjust when day is sunday\r\n  return d.clone().date(startOfWeek);\r\n};\r\n\r\n/**\r\n * Get the end of a week as a Momemnt instance.\r\n * This is used by react-dates library (e.g. WeeklyCalendar)\r\n *\r\n * @param {Moment} dayMoment moment instance representing a day\r\n * @param {String} timeZone name. It should represent IANA timezone key.\r\n * @param {number} firstDayOfWeek (which weekday is the first day?)\r\n * @returns return moment object representing the end day of the week where dayMoment belongs to\r\n */\r\nexport const getEndOfWeekAsMoment = (dayMoment, timeZone, firstDayOfWeek) => {\r\n  const startOfWeek = getStartOfWeekAsMoment(dayMoment, timeZone, firstDayOfWeek);\r\n  const endOfWeek = startOfWeek.add(6, 'days').startOf('day');\r\n  return endOfWeek;\r\n};\r\n\r\n/**\r\n * Get the start of a week as a Date instance.\r\n * This is used by react-dates library (e.g. WeeklyCalendar)\r\n * @param {Date} date instance\r\n * @param {String} timeZone name. It should represent IANA timezone key.\r\n * @param {number} firstDayOfWeek (which weekday is the first day?)\r\n * @returns a Date object representing the first day of the week where given date belongs to\r\n */\r\nexport const getStartOfWeek = (date, timeZone, firstDayOfWeek) => {\r\n  return getStartOfWeekAsMoment(moment(date).tz(timeZone), timeZone, firstDayOfWeek).toDate();\r\n};\r\n\r\n/**\r\n * Create moment instance from given Date object\r\n * This is used by react-dates library (e.g. WeeklyCalendar)\r\n *\r\n * @param {Date} date instance\r\n * @param {String} timeZone name. It should represent IANA timezone key.\r\n * @returns moment instance\r\n */\r\nexport const getMomentFromDate = (date, timeZone) =>\r\n  timeZone ? moment(date).tz(timeZone) : moment(date);\r\n","/**\r\n * ================ API error handling utilities ================\r\n *\r\n * This module exports helpers that can be used to check if API\r\n * response errors are some specific error cases.\r\n *\r\n * NOTE: most of the functions are tied to an endpoint, and should not\r\n * be used to check error responses from any other endpoint. Check the\r\n * name and the docstring of the function to ensure correct usage.\r\n */\r\n\r\nimport {\r\n  ERROR_CODE_TRANSACTION_LISTING_NOT_FOUND,\r\n  ERROR_CODE_TRANSACTION_INVALID_TRANSITION,\r\n  ERROR_CODE_TRANSACTION_ALREADY_REVIEWED_BY_CUSTOMER,\r\n  ERROR_CODE_TRANSACTION_ALREADY_REVIEWED_BY_PROVIDER,\r\n  ERROR_CODE_PAYMENT_FAILED,\r\n  ERROR_CODE_CHARGE_ZERO_PAYIN,\r\n  ERROR_CODE_EMAIL_TAKEN,\r\n  ERROR_CODE_EMAIL_NOT_FOUND,\r\n  ERROR_CODE_TOO_MANY_VERIFICATION_REQUESTS,\r\n  ERROR_CODE_UPLOAD_OVER_LIMIT,\r\n  ERROR_CODE_MISSING_STRIPE_ACCOUNT,\r\n  ERROR_CODE_TRANSACTION_BOOKING_TIME_NOT_AVAILABLE,\r\n  ERROR_CODE_TRANSACTION_LISTING_INSUFFICIENT_STOCK,\r\n  ERROR_CODE_STOCK_OLD_TOTAL_MISMATCH,\r\n} from './types';\r\n// NOTE: This file imports types.js, which may lead to circular dependency\r\n\r\nconst errorAPIErrors = error => {\r\n  return error && error.apiErrors ? error.apiErrors : [];\r\n};\r\n\r\nconst hasErrorWithCode = (error, code) => {\r\n  return errorAPIErrors(error).some(apiError => {\r\n    return apiError.code === code;\r\n  });\r\n};\r\n\r\n/**\r\n * return apiErrors from error response\r\n */\r\nconst responseAPIErrors = error => {\r\n  return error && error.data && error.data.errors ? error.data.errors : [];\r\n};\r\n\r\n/**\r\n * 429 Too Many Requests error\r\n */\r\nexport const isTooManyRequestsError = error => error && error.status === 429;\r\n\r\n/**\r\n * Check if the given API error (from `sdk.currentuser.create()`) is\r\n * due to the email address already being in use.\r\n */\r\nexport const isSignupEmailTakenError = error => hasErrorWithCode(error, ERROR_CODE_EMAIL_TAKEN);\r\n\r\n/**\r\n * Check if the given API error (from `sdk.currentuser.changeEmail()`) is\r\n * due to the email address already being in use.\r\n */\r\nexport const isChangeEmailTakenError = error => hasErrorWithCode(error, ERROR_CODE_EMAIL_TAKEN);\r\n\r\n/**\r\n * Check if the given API error (from\r\n * `sdk.currentUser.sendVerificationEmail()`) is due to too many\r\n * active email verification requests.\r\n *\r\n * There qre only a specific amount of active verification requests\r\n * allowed, and the user has to wait for them to expire to be able to\r\n * request sending new verification emails.\r\n */\r\nexport const isTooManyEmailVerificationRequestsError = error =>\r\n  hasErrorWithCode(error, ERROR_CODE_TOO_MANY_VERIFICATION_REQUESTS);\r\n\r\n/**\r\n * Check if the given API error (from\r\n * `sdk.images.upload()`) is due to the image being over\r\n * the size limit.\r\n */\r\nexport const isUploadImageOverLimitError = error =>\r\n  hasErrorWithCode(error, ERROR_CODE_UPLOAD_OVER_LIMIT);\r\n\r\n/**\r\n * Check if the given API error (from\r\n * `sdk.stock.compareAndSet()`) is due to the oldTotal being wrong.\r\n */\r\nexport const isOldTotalMismatchStockError = error =>\r\n  hasErrorWithCode(error, ERROR_CODE_STOCK_OLD_TOTAL_MISMATCH);\r\n\r\n/**\r\n * Check if the given API error (from `sdk.passwordReset.request()`)\r\n * is due to no user having the given email address.\r\n */\r\nexport const isPasswordRecoveryEmailNotFoundError = error =>\r\n  hasErrorWithCode(error, ERROR_CODE_EMAIL_NOT_FOUND);\r\n\r\n/**\r\n * Check if the given API error (from `sdk.transaction.initiate()` or\r\n * `sdk.transaction.initiateSpeculative()`) is due to the listing\r\n * being closed or deleted.\r\n */\r\nexport const isTransactionInitiateListingNotFoundError = error =>\r\n  hasErrorWithCode(error, ERROR_CODE_TRANSACTION_LISTING_NOT_FOUND);\r\n\r\n/**\r\n * Check if the given API error (from `sdk.transaction.initiate()` or\r\n * `sdk.transaction.initiateSpeculative()`) is due to missign Stripe\r\n * connection from the listing author.\r\n */\r\nexport const isTransactionInitiShwcseissingStripeAccountError = error =>\r\n  hasErrorWithCode(error, ERROR_CODE_MISSING_STRIPE_ACCOUNT);\r\n\r\n/**\r\n * Check if the given API error (from `sdk.transaction.initiate()` or\r\n * `sdk.transaction.initiateSpeculative()`) is due to selected booking\r\n * time already being booked.\r\n */\r\nexport const isTransactionInitiateBookingTimeNotAvailableError = error =>\r\n  hasErrorWithCode(error, ERROR_CODE_TRANSACTION_BOOKING_TIME_NOT_AVAILABLE);\r\n\r\n/**\r\n * Check if the given API error (from `sdk.transaction.initiate()` or\r\n * `sdk.transaction.initiateSpeculative()`) is due to insufficient stock.\r\n */\r\nexport const isTransactionInitiateListingInsufficientStockError = error =>\r\n  hasErrorWithCode(error, ERROR_CODE_TRANSACTION_LISTING_INSUFFICIENT_STOCK);\r\n\r\n/**\r\n * Check if the given API error (from `sdk.transaction.initiate()` or\r\n * `sdk.transaction.initiateSpeculative()`) is due to payment being zero.\r\n */\r\nexport const isTransactionZeroPaymentError = error =>\r\n  hasErrorWithCode(error, ERROR_CODE_CHARGE_ZERO_PAYIN);\r\n\r\n/**\r\n * Check if the given API error (from `sdk.transaction.initiate()`) is\r\n * due to the transaction total amount being too low for Stripe.\r\n */\r\nexport const isTransactionInitiateAmountTooLowError = error => {\r\n  const isZeroPayment = isTransactionZeroPaymentError(error);\r\n\r\n  const tooLowAmount = errorAPIErrors(error).some(apiError => {\r\n    const isPaymentFailedError =\r\n      apiError.status === 402 && apiError.code === ERROR_CODE_PAYMENT_FAILED;\r\n    let isAmountTooLow = false;\r\n\r\n    try {\r\n      // TODO: This is a temporary solution until a proper error code\r\n      // for this specific error is received in the response.\r\n      const msg = apiError.meta.stripeMessage;\r\n      isAmountTooLow =\r\n        msg.startsWith('Amount must be at least') ||\r\n        msg.startsWith('Amount must convert to at least');\r\n    } catch (e) {\r\n      // Ignore\r\n    }\r\n\r\n    return isPaymentFailedError && isAmountTooLow;\r\n  });\r\n\r\n  return isZeroPayment || tooLowAmount;\r\n};\r\n\r\n/**\r\n * Check if the given API error (from `sdk.transaction.initiate()`) is\r\n * due to the transaction charge creation disabled by Stripe.\r\n */\r\nexport const isTransactionChargeDisabledError = error => {\r\n  const chargeCreationDisabled = errorAPIErrors(error).some(apiError => {\r\n    const isPaymentFailedError =\r\n      apiError.status === 402 && apiError.code === ERROR_CODE_PAYMENT_FAILED;\r\n\r\n    let isChargeCreationDisabled = false;\r\n    try {\r\n      const msg = apiError.meta.stripeMessage;\r\n      isChargeCreationDisabled =\r\n        msg.startsWith('Your account cannot currently make charges.') ||\r\n        msg.match(/verification.disabled_reason/);\r\n    } catch (e) {\r\n      // Ignore\r\n    }\r\n\r\n    return isPaymentFailedError && isChargeCreationDisabled;\r\n  });\r\n\r\n  return chargeCreationDisabled;\r\n};\r\n\r\n/**\r\n * Check if the given API error (from `sdk.transaction.initiate()`) is\r\n * due to other error in Stripe.\r\n */\r\nexport const transactionInitiateOrderStripeErrors = error => {\r\n  if (error) {\r\n    return errorAPIErrors(error).reduce((messages, apiError) => {\r\n      const isPaymentFailedError =\r\n        apiError.status === 402 && apiError.code === ERROR_CODE_PAYMENT_FAILED;\r\n      const hasStripeError = apiError && apiError.meta && apiError.meta.stripeMessage;\r\n      const stripeMessageMaybe =\r\n        isPaymentFailedError && hasStripeError ? [apiError.meta.stripeMessage] : [];\r\n      return [...messages, ...stripeMessageMaybe];\r\n    }, []);\r\n  }\r\n  return null;\r\n};\r\n\r\n/**\r\n * Check if the given API error (from `sdk.transactions.transition(id, transition, params)`)\r\n * is due to invalid transition attempt.\r\n */\r\nexport const isTransactionsTransitionInvalidTransition = error =>\r\n  error &&\r\n  error.status === 409 &&\r\n  hasErrorWithCode(error, ERROR_CODE_TRANSACTION_INVALID_TRANSITION);\r\n\r\n/**\r\n * Check if the given API error (from `sdk.transactions.transition(id, transition, params)`)\r\n * is due to already sent review.\r\n */\r\nexport const isTransactionsTransitionAlreadyReviewed = error =>\r\n  error &&\r\n  error.status === 409 &&\r\n  (hasErrorWithCode(error, ERROR_CODE_TRANSACTION_ALREADY_REVIEWED_BY_CUSTOMER) ||\r\n    hasErrorWithCode(error, ERROR_CODE_TRANSACTION_ALREADY_REVIEWED_BY_PROVIDER));\r\n\r\n/**\r\n * Check if the given API error (from `sdk.currentUser.changeEmail(params)`)\r\n * is due to giving wrong password.\r\n */\r\nexport const isChangeEmailWrongPassword = error => error && error.status === 403;\r\n\r\n/**\r\n * Check if the given API error (from `sdk.currentUser.changePassword(params)`)\r\n * is due to giving wrong password.\r\n */\r\nexport const isChangePasswordWrongPassword = error => error && error.status === 403;\r\n\r\n/**\r\n * Check if the given API error (from\r\n * 'sdk.stripeAccount.create(payoutDetails)') is due to\r\n * invalid postal code in the given country.\r\n */\r\nexport const isStripeInvalidPostalCode = error => {\r\n  const msgRe = /^Invalid [A-Z]{2} postal code$/;\r\n  return errorAPIErrors(error).some(apiError => {\r\n    // Stripe doesn't seem to give an error code for this specific\r\n    // case, so we have to recognize it from the message.\r\n    const msg = apiError.meta && apiError.meta.stripeMessage ? apiError.meta.stripeMessage : '';\r\n    return msgRe.test(msg);\r\n  });\r\n};\r\n\r\nexport const isStripeError = error => {\r\n  return errorAPIErrors(error).some(apiError => {\r\n    // Stripe doesn't seem to give an error code for this specific\r\n    // case, so we have to recognize it from the message.\r\n    return !!(apiError.meta && apiError.meta.stripeMessage);\r\n  });\r\n};\r\n\r\n/**\r\n * Check if the given transition error is\r\n * due to no quantity information in the transition params.\r\n */\r\nexport const isTransitionQuantityInfoMissingError = error =>\r\n  error?.status === 400 &&\r\n  error?.statusText.startsWith('Error: transition should contain quantity information');\r\n\r\nexport const storableError = err => {\r\n  const error = err || {};\r\n  const { name, message, status, statusText } = error;\r\n  // Status, statusText, and data.errors are (possibly) added to the error object by SDK\r\n  const apiErrors = responseAPIErrors(error);\r\n\r\n  // Returned object is the same as prop type check in util/types -> error\r\n  return {\r\n    type: 'error',\r\n    name,\r\n    message,\r\n    status,\r\n    statusText,\r\n    apiErrors,\r\n  };\r\n};\r\n","import {\r\n  isAfterDate,\r\n  isInRange,\r\n  getDayOfWeek,\r\n  getStartOf,\r\n  stringifyDateToISO8601,\r\n  parseDateTimeString,\r\n} from './dates.js';\r\n// NOTE: This file imports sanitize.js, which may lead to circular dependency\r\n\r\n// This is the order of days as JavaScript understands them\r\n// The number returned by \"new Date().getDay()\" refers to day of week starting from sunday.\r\nconst WEEKDAYS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\r\n\r\n/**\r\n * Omit duplicates from given array according to function\r\n * that identifies relevant data.\r\n *\r\n * @param {Array} arr an array over which the uniqueness is applied\r\n * @param {function} f function to extract data that should be unique.\r\n * @returns array with desired properties being unique.\r\n */\r\nexport const uniqueBy = (arr, f) => {\r\n  var unique = {};\r\n  return arr.reduce((distinct, x) => {\r\n    var key = f(x);\r\n    if (key != null && !unique[key]) {\r\n      unique[key] = true;\r\n      return [...distinct, x];\r\n    }\r\n    return distinct;\r\n  }, []);\r\n};\r\n\r\n/**\r\n * Pipe initial state through given functions\r\n * Initial state is the first argument x0.\r\n * Other arguments should be functions: f3(f2(f1(x0)))\r\n *\r\n * @param {iterable} x0 initial state\r\n * @param  {...functions} fns functions that are applied.\r\n * @returns\r\n */\r\nexport const pipe = (x0, ...fns) => fns.reduce((x, f) => f(x), x0);\r\n\r\n/**\r\n * Yield iterable items through given function.\r\n *\r\n * @param {function} f carried function for the generator items.\r\n * @returns generator function that assumes iterable over which \"f\" is applied.\r\n */\r\nexport const map = f =>\r\n  function*(iterable) {\r\n    for (let x of iterable) {\r\n      yield f(x);\r\n    }\r\n  };\r\n\r\nconst getMillis = d => d.getTime();\r\nconst pastException = (x, startInMillis, endInMillis) =>\r\n  getMillis(x.attributes.start) <= startInMillis && getMillis(x.attributes.end) < endInMillis;\r\nconst exceptionInRange = (x, startInMillis, endInMillis) =>\r\n  startInMillis < getMillis(x.attributes.start) && getMillis(x.attributes.end) < endInMillis;\r\n\r\n/**\r\n * Generates inverted time slots between start and end\r\n * from iterable that goes through AvailabilityExceptions\r\n *\r\n * @param {Date} start start of time slot\r\n * @param {Date} end exclusive end for the time slot inversion\r\n * @returns generator function that generates new time slots that doesn't have exception inside.\r\n */\r\nconst invertedRangesFromExceptions = (start, end) =>\r\n  function*(iterable) {\r\n    // Range start and end in milliseconds\r\n    const startInMillis = getMillis(start);\r\n    const endInMillis = getMillis(end);\r\n    let currentStartInMillis = startInMillis;\r\n    // Iterate over eXceptions\r\n    for (let x of iterable) {\r\n      if (pastException(x, currentStartInMillis, endInMillis)) {\r\n        // Inconsequential past exception or range starts with an exception\r\n        // Move start index\r\n        currentStartInMillis = getMillis(x.attributes.end);\r\n      } else if (exceptionInRange(x, currentStartInMillis, endInMillis)) {\r\n        // Exception is completely inside the range\r\n        yield { start: new Date(currentStartInMillis), end: new Date(x.attributes.start) };\r\n        // Move start index\r\n        currentStartInMillis = getMillis(x.attributes.end);\r\n      } else {\r\n        // Exception.start in range, but exception.end happens after the end of the range\r\n        yield { start: new Date(currentStartInMillis), end: new Date(end) };\r\n        return;\r\n      }\r\n    }\r\n\r\n    // If iterable is completed, but there's still pending \"currentStartInMillis\",\r\n    // yeald it with given end.\r\n    if (currentStartInMillis < endInMillis) {\r\n      yield { start: new Date(currentStartInMillis), end };\r\n    }\r\n  };\r\n\r\n/**\r\n * Creates exception free time slots. Those slots are free for new exceptions (no clash).\r\n *\r\n * @param {Date} start of time range against which free slots are considered\r\n * @param {Date} end of time range against which free slots are considered\r\n * @param {Array<AvailabilityException>} exceptions\r\n * @returns Array of { start, end } objects.\r\n */\r\nexport const availableRanges = (start, end, exceptions) => {\r\n  const availableRanges = pipe(\r\n    exceptions,\r\n    invertedRangesFromExceptions(start, end)\r\n  );\r\n  return [...availableRanges];\r\n};\r\n\r\n/**\r\n *\r\n * @param {Date} start of generated Date objects\r\n * @param {string} unit unit that moment library understands (e.g. 'day')\r\n * @param {string} timeZone IANA time zone key\r\n * @param {function} untilFn function to determine, when to stop generator.\r\n * @param {integer} step when the next yielded Date object should be pointing at.\r\n * @param {string} stepUnit step unit that moment library understands (e.g. 'days')\r\n */\r\nconst timeUnitGenerator = function*(start, unit, timeZone, untilFn, step = 1, stepUnit = 'days') {\r\n  let s = getStartOf(start, unit, timeZone);\r\n  const defaultEnd = () => true;\r\n  const testEnd = untilFn || defaultEnd;\r\n\r\n  while (testEnd(s)) {\r\n    yield s;\r\n    s = getStartOf(s, unit, timeZone, step, stepUnit);\r\n  }\r\n};\r\n\r\n/**\r\n * Generates Date between given range on desired time zone.\r\n * Note: end is exclusive\r\n *\r\n * @param {Date} start of desired date range\r\n * @param {Date} end of desired date range\r\n * @param {String} timeZone IANA time zone key\r\n * @returns An array of date objects in desired time zone\r\n */\r\nexport const generateDates = (start, end, timeZone) => {\r\n  const untilFn = d => isAfterDate(end, d);\r\n  return [...timeUnitGenerator(start, 'day', timeZone, untilFn)];\r\n};\r\n/**\r\n * Generates Dates for months (start of moments) between given range on desired time zone.\r\n * Note: end is exclusive\r\n *\r\n * @param {Date} start of desired date range\r\n * @param {Date} end of desired date range\r\n * @param {String} timeZone IANA time zone key\r\n * @returns An array of date objects in desired time zone\r\n */\r\nexport const generShwcseonths = (start, end, timeZone) => {\r\n  const untilFn = d => isAfterDate(end, d);\r\n  return [...timeUnitGenerator(start, 'month', timeZone, untilFn, 1, 'months')];\r\n};\r\n\r\n/**\r\n * Curry function for 'map'. Connect all the available slots that touch a given day\r\n * into a new object that has form: { id: '2023-01-22', slots: [] }\r\n *\r\n * @param {Array<Objects>} availableSlots [{ start, end }]\r\n * @param {String} timeZone IANA time zone key (e.g. \"Europe/Helsinki\")\r\n * @returns function that gets day and available slots with them\r\n */\r\nconst toExceptionFreeSlotsPerDate = (availableSlots, timeZone) => day => {\r\n  const availableSlotsOnDate = availableSlots.filter(s => {\r\n    const dayStart = getStartOf(day, 'day', timeZone);\r\n    const dayEnd = getStartOf(day, 'day', timeZone, 1, 'day');\r\n    const dateRange = [dayStart, dayEnd];\r\n    const slotRange = [s.start, s.end];\r\n\r\n    const millisecondBeforeEndTime = end => new Date(end.getTime() - 1);\r\n    const dayIsInsideSlot =\r\n      isInRange(dayStart, ...slotRange, undefined, timeZone) &&\r\n      isInRange(millisecondBeforeEndTime(dayEnd), ...slotRange, undefined, timeZone);\r\n    const slotStartIsInsideDate = isInRange(s.start, ...dateRange, timeZone);\r\n    const slotEndIsInsideDate = isInRange(millisecondBeforeEndTime(s.end), ...dateRange, timeZone);\r\n    // Pick slots that overlap with the 'day'.\r\n    return dayIsInsideSlot || slotStartIsInsideDate || slotEndIsInsideDate;\r\n  });\r\n\r\n  return {\r\n    id: stringifyDateToISO8601(day, timeZone), // \"2022-12-24\"\r\n    slots: availableSlotsOnDate,\r\n  };\r\n};\r\n\r\n/**\r\n * Turn array of data to object literal where function extracts map key.\r\n * Given function needs to be able to return key value tuple out of each iterable item\r\n * > pipe([{ id: 'blaa', foo: 'bar' }], toHashMap(x => [x.id, x]))\r\n * //=> { blaa: { id: 'blaa', foo: 'bar' } }\r\n *\r\n * @param {function} f function to extract desired key and value tuple from iterable\r\n * @returns function that takes in iterator and returns object literal\r\n */\r\nconst toHashMap = f => iterator => {\r\n  let obj = {};\r\n  for (let x of iterator) {\r\n    const [key, value] = f(x);\r\n    obj[key] = value;\r\n  }\r\n  return obj;\r\n};\r\n\r\n//\r\n/**\r\n * Get all the dates between start and end and all the available slots\r\n * that touch any of the generated dates.\r\n *\r\n * This assumes that start and end are correct moments in desired time zone.\r\n * This returns a hash-map that might look like:\r\n * {\r\n *  '2022-12-24': { slots },\r\n *  '2022-12-25': { slots },\r\n *  '2022-12-26': { slots },\r\n * }\r\n *\r\n * @param {Date} start of desired date range\r\n * @param {Date} end of desired date range\r\n * @param {*} exceptions\r\n * @param {String} timeZone IANA time zone key (e.g. \"Europe/Helsinki\")\r\n * @returns hash-map with dateIds as keys.\r\n */\r\nexport const exceptionFreeSlotsPerDate = (start, end, exceptions, timeZone) => {\r\n  const s = getStartOf(start, 'day', timeZone);\r\n  const e = getStartOf(end, 'day', timeZone);\r\n  const availableSlots = availableRanges(s, e, exceptions);\r\n  return pipe(\r\n    generateDates(s, e, timeZone),\r\n    map(toExceptionFreeSlotsPerDate(availableSlots, timeZone)),\r\n    toHashMap(({ id, ...rest }) => [id, rest])\r\n  );\r\n};\r\n\r\n/**\r\n * Filter those exceptions that touch the given date (00:00 - 23:59.999)\r\n * @param {Array<Date>} dateRange array with start of date and end of date\r\n * @param {Array<AvailabilityException>} exceptions\r\n * @param {String} timeZone IANA time zone key (e.g. \"Europe/Helsinki\")\r\n * @returns filtered list of exceptions or empty array\r\n */\r\nconst getExceptionsOnDate = (dateRange, exceptions, timeZone) => {\r\n  const [dayStart, dayEnd] = dateRange;\r\n  return exceptions.filter(e => {\r\n    const exceptionRange = [e.attributes.start, e.attributes.end];\r\n\r\n    const inclusiveEndTime = end => new Date(end.getTime() - 1);\r\n    const dayStartInsideException = isInRange(dayStart, ...exceptionRange, undefined, timeZone);\r\n    const dayEndInsideException = isInRange(\r\n      inclusiveEndTime(dayEnd),\r\n      ...exceptionRange,\r\n      undefined,\r\n      timeZone\r\n    );\r\n    const dayIsInsideException = dayStartInsideException && dayEndInsideException;\r\n\r\n    const exceptionStartIsInsideDate = isInRange(e.attributes.start, ...dateRange, timeZone);\r\n    const exceptionEndIsInsideDate = isInRange(\r\n      inclusiveEndTime(e.attributes.end),\r\n      ...dateRange,\r\n      timeZone\r\n    );\r\n    // Pick slots that overlap with the 'day'.\r\n    return dayIsInsideException || exceptionStartIsInsideDate || exceptionEndIsInsideDate;\r\n  });\r\n};\r\n\r\n/**\r\n * Find next exception from given array that includes to the given date moment or starts after given date.\r\n * @param {Date} date (pointing to a certain millisecond moment)\r\n * @param {Array<AvailabilityException>} exceptions\r\n * @returns an exception entity\r\n */\r\nconst findNextException = (date, exceptions) => {\r\n  const dateInMillis = getMillis(date);\r\n  return exceptions.find(exception => {\r\n    const start = getMillis(exception.attributes.start);\r\n    const end = getMillis(exception.attributes.end);\r\n    // is inside entry or exception is after given date moment\r\n    return (start <= dateInMillis && dateInMillis < end) || start > dateInMillis;\r\n  });\r\n};\r\n\r\n/**\r\n * Parse ISO8601 time-string (14:00) to localized Date object.\r\n * @param {Date} date for which the hour info is going to be applied.\r\n * @param {String} timeString (E.g. 09:00)\r\n * @param {String} timeZone IANA time zone key (e.g. \"Europe/Helsinki\")\r\n * @returns Date object\r\n */\r\nconst parseLocalizedTime = (date, timeString, timeZone) => {\r\n  const dateString = stringifyDateToISO8601(date, timeZone);\r\n  return parseDateTimeString(`${dateString} ${timeString}`, timeZone);\r\n};\r\n\r\n/**\r\n * End time (00:00) means the start of the next day, but otherwise it refers the given date.\r\n * @param {Date} date for which the hour info is going to be applied.\r\n * @param {String} endTime (E.g. 23:00)\r\n * @param {String} timeZone IANA time zone key (e.g. \"Europe/Helsinki\")\r\n * @returns\r\n */\r\nconst getEndTimeAsDate = (date, endTime, timeZone) =>\r\n  endTime == '00:00'\r\n    ? getStartOf(date, 'day', timeZone, 1, 'days')\r\n    : parseLocalizedTime(date, endTime, timeZone);\r\n\r\n/**\r\n * Find the next entry of Availability plan:\r\n * either given date is included to the entry or next entry is picked.\r\n *\r\n * @param {Date} date\r\n * @param {Array<Any>} dayEntries [{ dayOfWeek: 'mon', startTime: '01:00', endTime: '14:00', seats: 1 }]\r\n * @param {String} timeZone IANA time zone key (e.g. \"Europe/Helsinki\")\r\n * @returns object literal like { start, end, seats } or null\r\n */\r\nconst findNextPlanEntryInfo = (date, dayEntries, timeZone) => {\r\n  const dateInMillis = getMillis(date);\r\n  const entry = dayEntries.find(e => {\r\n    const start = getMillis(parseLocalizedTime(date, e.startTime, timeZone));\r\n    const end = getMillis(getEndTimeAsDate(date, e.endTime, timeZone));\r\n    // is inside entry or entry is after given date moment\r\n    return (start <= dateInMillis && dateInMillis < end) || start > dateInMillis;\r\n  });\r\n\r\n  if (entry) {\r\n    const start = parseLocalizedTime(date, entry.startTime, timeZone);\r\n    const end = getEndTimeAsDate(date, entry.endTime, timeZone);\r\n    return { start, end, seats: entry.seats };\r\n  }\r\n  return null;\r\n};\r\n\r\n/**\r\n * Curry function that creates data for any \"day\" Date that the returned function gets.\r\n * Returned info: { id: \"2023-01-01\", planEntries, exceptions, ranges, hasAvailability }\r\n *\r\n * @param {AvailabilityPlan} plan\r\n * @param {Array<AvailabilityException>} exceptions\r\n * @param {String} timeZone IANA time zone key (e.g. \"Europe/Helsinki\")\r\n * @returns info of plan entries and exceptions relavant to the given \"day\" and seats-ranges inside it\r\n */\r\nconst toAvailabilityPerDate = (plan, exceptions, timeZone) => day => {\r\n  const entries = plan\r\n    ? plan.entries.filter(entry => entry.dayOfWeek === WEEKDAYS[getDayOfWeek(day, timeZone)])\r\n    : [];\r\n  const dayStart = getStartOf(day, 'day', timeZone);\r\n  const dayEnd = getStartOf(day, 'day', timeZone, 1, 'day');\r\n  const dateRange = [dayStart, dayEnd];\r\n  const exceptionsOnDate = getExceptionsOnDate(dateRange, exceptions, timeZone);\r\n\r\n  let hasAvailability = false;\r\n  let ranges = [];\r\n  let currentStart = dayStart;\r\n  // currentStart is the cursor within this loop\r\n  while (getMillis(currentStart) < getMillis(dayEnd)) {\r\n    // Find next relevant exception (if there is any)\r\n    const nextException = findNextException(currentStart, exceptionsOnDate);\r\n    const exceptionRange = [nextException?.attributes?.start, nextException?.attributes?.end];\r\n    const isInExceptionRange =\r\n      !!nextException && isInRange(currentStart, ...exceptionRange, undefined, timeZone);\r\n\r\n    // Find next plan entry (if there is any)\r\n    const nextPlanEntry = findNextPlanEntryInfo(currentStart, entries, timeZone);\r\n    const planRange = [nextPlanEntry?.start, nextPlanEntry?.end];\r\n    const isInPlanRange =\r\n      !!nextPlanEntry && isInRange(currentStart, ...planRange, undefined, timeZone);\r\n\r\n    if (isInExceptionRange) {\r\n      // If currentStart is inside an exception, the exception is picked as the next range\r\n      const end =\r\n        getMillis(nextException.attributes.end) < getMillis(dayEnd)\r\n          ? nextException.attributes.end\r\n          : dayEnd;\r\n      ranges.push({\r\n        start: currentStart,\r\n        end,\r\n        seats: nextException.attributes.seats,\r\n        exception: nextException,\r\n      });\r\n      hasAvailability = hasAvailability || !!nextException.attributes.seats;\r\n      currentStart = end; // update currentStart handle\r\n    } else if (isInPlanRange) {\r\n      // Alternatively, if currentStart is inside a plan entry,\r\n      // the entry is picked until next exception (or entry's own end)\r\n      const planEnd = nextPlanEntry.end;\r\n\r\n      const end =\r\n        nextException && getMillis(nextException.attributes.start) <= getMillis(planEnd)\r\n          ? nextException.attributes.start\r\n          : planEnd;\r\n\r\n      ranges.push({\r\n        start: currentStart,\r\n        end,\r\n        seats: nextPlanEntry.seats,\r\n        plan: nextPlanEntry,\r\n      });\r\n      hasAvailability = hasAvailability || !!nextPlanEntry.seats;\r\n      currentStart = end; // update currentStart handle\r\n    } else {\r\n      // If no exception or plan entry is relevant at currentStart,\r\n      // Then we create *seats: 0* range until next exception/entry/day end is found\r\n      const isNextRangeAnException =\r\n        nextException &&\r\n        (!nextPlanEntry ||\r\n          (nextPlanEntry &&\r\n            getMillis(nextException.attributes.start) <= getMillis(nextPlanEntry.start)));\r\n      const isNextRangeAPlanEntry = !isNextRangeAnException && nextPlanEntry;\r\n      const end = isNextRangeAnException\r\n        ? nextException.attributes.start\r\n        : isNextRangeAPlanEntry\r\n        ? nextPlanEntry.start\r\n        : dayEnd;\r\n      ranges.push({\r\n        start: currentStart,\r\n        end,\r\n        seats: 0,\r\n      });\r\n      currentStart = end;\r\n      // If found end happens after dayend, break the while-loop\r\n      if (getMillis(end) >= getMillis(dayEnd)) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    id: stringifyDateToISO8601(day, timeZone), // \"2022-12-24\"\r\n    planEntries: entries,\r\n    exceptions: exceptionsOnDate,\r\n    ranges,\r\n    hasAvailability,\r\n  };\r\n};\r\n\r\n/**\r\n * Generates a hashmap of date infos, where each date contains\r\n * - *id* (date id string in ISO 8601 format)\r\n * - *planEntries* that touch the date\r\n * - *exceptions* that touch the date\r\n * - *ranges* array generated from plan entries and exceptions\r\n * - *hasAvailability* (boolean) if any of the ranges has seats available\r\n *\r\n * { \"2023-01-01\": { id: \"2023-01-01\", planEntries, exceptions, ranges, hasAvailability } }\r\n *\r\n * @param {Date} start of generated range of date infos\r\n * @param {Date} end of generated range of date infos\r\n * @param {AvailabilityPlan} plan\r\n * @param {Array<AvailabilityException} exceptions\r\n * @returns hashmap of date info grouped by date id (e.g. \"2023-01-01\" )\r\n */\r\nexport const availabilityPerDate = (start, end, plan, exceptions) => {\r\n  const timeZone = plan?.timezone;\r\n  const s = getStartOf(start, 'day', timeZone);\r\n  const e = getStartOf(end, 'day', timeZone);\r\n  return pipe(\r\n    generateDates(s, e, timeZone),\r\n    map(toAvailabilityPerDate(plan, exceptions, timeZone)),\r\n    toHashMap(x => [x.id, x])\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nconst MAPBOX_SCRIPT_ID = 'mapbox_GL_JS';\r\nconst GOOGLE_MAPS_SCRIPT_ID = 'GoogleMapsApi';\r\n\r\n/**\r\n * Include scripts (like Map Provider).\r\n * These scripts are relevant for whole application: location search in Topbar and maps on different pages.\r\n * However, if you don't need location search and maps, you can just omit this component from app.js\r\n * Note: another common point to add <scripts>, <links> and <meta> tags is Page.js\r\n *       and Stripe script is added in public/index.html\r\n *\r\n * Note 2: When adding new external scripts/styles/fonts/etc.,\r\n *         if a Content Security Policy (CSP) is turned on, the new URLs\r\n *         should be whitelisted in the policy. Check: server/csp.js\r\n */\r\nexport const IncludeScripts = props => {\r\n  const { marketplaceRootURL: rootURL, maps, analytics } = props?.config || {};\r\n  const { googleAnalyticsId, plausibleDomains } = analytics;\r\n\r\n  const { mapProvider, googleMapsAPIKey, mapboxAccessToken } = maps || {};\r\n  const isGoogleMapsInUse = mapProvider === 'googleMaps';\r\n  const isMapboxInUse = mapProvider === 'mapbox';\r\n\r\n  // Add Google Analytics script if correct id exists (it should start with 'G-' prefix)\r\n  // See: https://developers.google.com/analytics/devguides/collection/gtagjs\r\n  const hasGoogleAnalyticsv4Id = googleAnalyticsId?.indexOf('G-') === 0;\r\n\r\n  // Collect relevant map libraries\r\n  let mapLibraries = [];\r\n  let analyticsLibraries = [];\r\n\r\n  if (isMapboxInUse) {\r\n    // NOTE: remember to update mapbox-sdk.min.js to a new version regularly.\r\n    // mapbox-sdk.min.js is included from static folder for CSP purposes.\r\n    mapLibraries.push(\r\n      <script key=\"mapboxSDK\" src={`${rootURL}/static/scripts/mapbox/mapbox-sdk.min.js`}></script>\r\n    );\r\n    // Add CSS for Mapbox map\r\n    mapLibraries.push(\r\n      <link\r\n        key=\"mapbox_GL_CSS\"\r\n        href=\"https://api.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.css\"\r\n        rel=\"stylesheet\"\r\n        crossOrigin\r\n      />\r\n    );\r\n    // Add Mapbox library\r\n    mapLibraries.push(\r\n      <script\r\n        id={MAPBOX_SCRIPT_ID}\r\n        key=\"mapbox_GL_JS\"\r\n        src=\"https://api.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.js\"\r\n        crossOrigin\r\n      ></script>\r\n    );\r\n  } else if (isGoogleMapsInUse) {\r\n    // Add Google Maps library\r\n    mapLibraries.push(\r\n      <script\r\n        id={GOOGLE_MAPS_SCRIPT_ID}\r\n        key=\"GoogleMapsApi\"\r\n        src={`https://maps.googleapis.com/maps/api/js?key=${googleMapsAPIKey}&libraries=places`}\r\n        crossOrigin\r\n      ></script>\r\n    );\r\n  }\r\n\r\n  if (googleAnalyticsId && hasGoogleAnalyticsv4Id) {\r\n    // Google Analytics: gtag.js\r\n    // NOTE: This template is a single-page application (SPA).\r\n    //       gtag.js sends initial page_view event after page load.\r\n    //       but we need to handle subsequent events for in-app navigation.\r\n    //       This is done in src/analytics/handlers.js\r\n    analyticsLibraries.push(\r\n      <script\r\n        key=\"gtag.js\"\r\n        async\r\n        src={`https://www.googletagmanager.com/gtag/js?id=${googleAnalyticsId}`}\r\n        crossOrigin\r\n      ></script>\r\n    );\r\n\r\n    analyticsLibraries.push(\r\n      <script key=\"gtag dataLayer\">\r\n        {`\r\n        window.dataLayer = window.dataLayer || [];\r\n        function gtag(){dataLayer.push(arguments);}\r\n        gtag('js', new Date());\r\n      \r\n        gtag('config', '${googleAnalyticsId}', {\r\n          cookie_flags: 'SameSite=None;Secure',\r\n        });\r\n        `}\r\n      </script>\r\n    );\r\n  }\r\n\r\n  if (plausibleDomains) {\r\n    // If plausibleDomains is not an empty string, include their script too.\r\n    analyticsLibraries.push(\r\n      <script\r\n        key=\"plausible\"\r\n        defer\r\n        src=\"https://plausible.io/js/script.js\"\r\n        data-domain={plausibleDomains}\r\n        crossOrigin\r\n      ></script>\r\n    );\r\n  }\r\n\r\n  const isBrowser = typeof window !== 'undefined';\r\n  const isMapboxLoaded = isBrowser && window.mapboxgl;\r\n\r\n  // If Mapbox is loaded, we can set the accessToken already here.\r\n  // This is the execution flow with the production build,\r\n  // since SSR includes those map libraries to <head> of the app.\r\n  if (isMapboxInUse && isMapboxLoaded && !window.mapboxgl.accessToken) {\r\n    // Add access token for Mapbox library\r\n    window.mapboxgl.accessToken = mapboxAccessToken;\r\n  }\r\n\r\n  // If the script is added on client side as a reaction to page navigation or\r\n  // the app is rendered on client side entirely (e.g. HMR/WebpackDevServer),\r\n  // we need to listen when the script is loaded.\r\n  const onMapLibLoaded = () => {\r\n    // At this point we know that map library is loaded after it's dynamically included\r\n    if (isMapboxInUse && !window.mapboxgl.accessToken) {\r\n      // Add access token for Mapbox sdk.\r\n      window.mapboxgl.accessToken = mapboxAccessToken;\r\n    }\r\n  };\r\n\r\n  // React Helmet Async doesn't support onLoad prop for scripts.\r\n  // However, it does have onChangeClientState functionality.\r\n  // We can use that to start listen 'load' events when the library is added on client-side.\r\n  const onChangeClientState = (newState, addedTags) => {\r\n    if (addedTags && addedTags.scriptTags) {\r\n      const foundScript = addedTags.scriptTags.find(s =>\r\n        [MAPBOX_SCRIPT_ID, GOOGLE_MAPS_SCRIPT_ID].includes(s.id)\r\n      );\r\n      if (foundScript) {\r\n        foundScript.addEventListener('load', onMapLibLoaded, { once: true });\r\n      }\r\n    }\r\n  };\r\n\r\n  const allScripts = [...analyticsLibraries, ...mapLibraries];\r\n  return <Helmet onChangeClientState={onChangeClientState}>{allScripts}</Helmet>;\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@sentry/browser\");","/**\r\n * Error logging\r\n *\r\n * Can be used to log errors to console or and eternal\r\n * error logging system, like Sentry for example.\r\n *\r\n */\r\n\r\nimport * as Sentry from '@sentry/browser';\r\nimport appSettings from '../config/settings';\r\n\r\n/**\r\n * Set up error handling. If a Sentry DSN is\r\n * provided a Sentry client will be installed.\r\n */\r\nexport const setup = () => {\r\n  if (appSettings.sentryDsn) {\r\n    // Configures the Sentry client. Adds a handler for\r\n    // any uncaught exception.\r\n    Sentry.init({\r\n      dsn: appSettings.sentryDsn,\r\n      environment: appSettings.env,\r\n    });\r\n  }\r\n};\r\n\r\n/**\r\n * Set user ID for the logger so that it\r\n * can be attached to Sentry issues.\r\n *\r\n * @param {String} userId ID of current user\r\n */\r\nexport const setUserId = userId => {\r\n  Sentry.configureScope(scope => {\r\n    scope.setUser({ id: userId });\r\n  });\r\n};\r\n\r\n/**\r\n * Clears the user ID.\r\n */\r\n\r\nexport const clearUserId = () => {\r\n  Sentry.configureScope(scope => {\r\n    scope.setUser(null);\r\n  });\r\n};\r\n\r\nconst printAPIErrorsAsConsoleTable = apiErrors => {\r\n  if (apiErrors != null && apiErrors.length > 0 && typeof console.table === 'function') {\r\n    console.log('Errors returned by Marketplace API call:');\r\n    console.table(apiErrors.map(err => ({ status: err.status, code: err.code, ...err.meta })));\r\n  }\r\n};\r\n\r\nconst responseAPIErrors = error => {\r\n  return error && error.data && error.data.errors ? error.data.errors : [];\r\n};\r\n\r\nconst responseApiErrorInfo = err =>\r\n  responseAPIErrors(err).map(e => ({\r\n    status: e.status,\r\n    code: e.code,\r\n    meta: e.meta,\r\n  }));\r\n\r\n/**\r\n * Logs an exception. If Sentry is configured\r\n * sends the error information there. Otherwise\r\n * prints the error to the console.\r\n *\r\n * @param {Error} e Error that occurred\r\n * @param {String} code Error code\r\n * @param {Object} data Additional data to be sent to Sentry\r\n */\r\nexport const error = (e, code, data) => {\r\n  const apiErrors = responseApiErrorInfo(e);\r\n  if (appSettings.sentryDsn) {\r\n    const extra = { ...data, apiErrorData: apiErrors };\r\n\r\n    Sentry.withScope(scope => {\r\n      scope.setTag('code', code);\r\n      Object.keys(extra).forEach(key => {\r\n        scope.setExtra(key, extra[key]);\r\n      });\r\n      Sentry.captureException(e);\r\n    });\r\n\r\n    printAPIErrorsAsConsoleTable(apiErrors);\r\n  } else {\r\n    console.error(e);\r\n    console.error('Error code:', code, 'data:', data);\r\n    printAPIErrorsAsConsoleTable(apiErrors);\r\n  }\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/memoize\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"seedrandom\");","import memoize from 'lodash/memoize';\r\nimport seedrandom from 'seedrandom';\r\nimport { types as sdkTypes } from './sdkLoader';\r\n\r\nconst { LatLng, LatLngBounds } = sdkTypes;\r\n\r\nconst EARTH_RADIUS = 6371000; /* meters  */\r\nconst DEG_TO_RAD = Math.PI / 180.0;\r\nconst THREE_PI = Math.PI * 3;\r\nconst TWO_PI = Math.PI * 2;\r\n\r\nconst degToRadians = latlng => {\r\n  const { lat, lng } = latlng;\r\n  const latR = lat * DEG_TO_RAD;\r\n  const lngR = lng * DEG_TO_RAD;\r\n  return { lat: latR, lng: lngR };\r\n};\r\n\r\nconst radToDegrees = latlngInRadians => {\r\n  const { lat: latR, lng: lngR } = latlngInRadians;\r\n  const lat = latR / DEG_TO_RAD;\r\n  const lng = lngR / DEG_TO_RAD;\r\n  return { lat, lng };\r\n};\r\n\r\n/**\r\n * This obfuscatedCoordinatesImpl function is a temporary solution for the coordinate obfuscation.\r\n * In the future, improved version needs to have protectedData working and\r\n * available in accepted transaction.\r\n *\r\n * Based on:\r\n * https://gis.stackexchange.com/questions/25877/generating-random-locations-nearby#answer-213898\r\n */\r\n\r\nconst obfuscatedCoordinatesImpl = (latlng, fuzzyOffset, cacheKey) => {\r\n  const { lat, lng } = degToRadians(latlng);\r\n  const sinLat = Math.sin(lat);\r\n  const cosLat = Math.cos(lat);\r\n\r\n  const randomizeBearing = cacheKey ? seedrandom(cacheKey)() : Math.random();\r\n  const randomizeDistance = cacheKey\r\n    ? seedrandom(\r\n        cacheKey\r\n          .split('')\r\n          .reverse()\r\n          .join('')\r\n      )()\r\n    : Math.random();\r\n\r\n  // Randomize distance and bearing\r\n  const distance = randomizeDistance * fuzzyOffset;\r\n  const bearing = randomizeBearing * TWO_PI;\r\n  const theta = distance / EARTH_RADIUS;\r\n  const sinBearing = Math.sin(bearing);\r\n  const cosBearing = Math.cos(bearing);\r\n  const sinTheta = Math.sin(theta);\r\n  const cosTheta = Math.cos(theta);\r\n\r\n  const newLat = Math.asin(sinLat * cosTheta + cosLat * sinTheta * cosBearing);\r\n  const newLng =\r\n    lng + Math.atan2(sinBearing * sinTheta * cosLat, cosTheta - sinLat * Math.sin(newLat));\r\n\r\n  // Normalize -PI -> +PI radians\r\n  const newLngNormalized = ((newLng + THREE_PI) % TWO_PI) - Math.PI;\r\n\r\n  const result = radToDegrees({ lat: newLat, lng: newLngNormalized });\r\n  return new LatLng(result.lat, result.lng);\r\n};\r\n\r\nconst obfuscationKeyGetter = (latlng, fuzzyOffset, cacheKey) => cacheKey;\r\n\r\nconst memoizedObfuscatedCoordinatesImpl = memoize(obfuscatedCoordinatesImpl, obfuscationKeyGetter);\r\n\r\n/**\r\n * Make the given coordinates randomly a little bit different.\r\n *\r\n * @param {LatLng} latlng coordinates\r\n * @param {number} fuzzyOffset configuration of how big offset should be used.\r\n * @param {String?} cacheKey if given, the results are memoized and\r\n * the same coordinates are returned for the same key as long as the\r\n * cache isn't cleared (e.g. with page refresh). This results in\r\n * e.g. same listings always getting the same obfuscated coordinates\r\n * if the listing id is used as the cache key.\r\n *\r\n * @return {LatLng} obfuscated coordinates\r\n */\r\nexport const obfuscatedCoordinates = (latlng, fuzzyOffset, cacheKey = null) => {\r\n  return cacheKey\r\n    ? memoizedObfuscatedCoordinatesImpl(latlng, fuzzyOffset, cacheKey)\r\n    : obfuscatedCoordinatesImpl(latlng, fuzzyOffset);\r\n};\r\n\r\n/**\r\n * Query the user's current location from the browser API\r\n *\r\n * @return {Promise<LatLng>} user's current location\r\n */\r\nexport const userLocation = () =>\r\n  new Promise((resolve, reject) => {\r\n    const geolocationAvailable = 'geolocation' in navigator;\r\n\r\n    if (!geolocationAvailable) {\r\n      reject(new Error('Geolocation not available in browser'));\r\n      return;\r\n    }\r\n\r\n    // Some defaults for user's current geolocation call\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition\r\n    // Note: without high accuracy, the given location might differ quite much.\r\n    //       We decided that true would be better default for a template app.\r\n    const options = {\r\n      enableHighAccuracy: true,\r\n      timeout: 5000,\r\n      maximumAge: 0,\r\n    };\r\n\r\n    const onSuccess = position =>\r\n      resolve(new LatLng(position.coords.latitude, position.coords.longitude));\r\n\r\n    const onError = error => reject(error);\r\n\r\n    navigator.geolocation.getCurrentPosition(onSuccess, onError, options);\r\n  });\r\n\r\n/**\r\n * Calculate a circular polyline around the given point\r\n *\r\n * See: https://stackoverflow.com/questions/7316963/drawing-a-circle-google-static-maps\r\n *\r\n * @param {LatLng} latlng - center of the circle\r\n * @param {Number} radius - radius of the circle\r\n *\r\n * @return {Array<Array<Number>>} array of `[lat, lng]` coordinate\r\n * pairs forming the circle\r\n */\r\nexport const circlePolyline = (latlng, radius) => {\r\n  const { lat, lng } = latlng;\r\n  const detail = 8;\r\n  const R = 6371;\r\n  const pi = Math.PI;\r\n\r\n  const _lat = (lat * pi) / 180;\r\n  const _lng = (lng * pi) / 180;\r\n  const d = radius / 1000 / R;\r\n\r\n  let points = [];\r\n  for (let i = 0; i <= 360; i += detail) {\r\n    const brng = (i * pi) / 180;\r\n\r\n    let pLat = Math.asin(\r\n      Math.sin(_lat) * Math.cos(d) + Math.cos(_lat) * Math.sin(d) * Math.cos(brng)\r\n    );\r\n    const pLng =\r\n      ((_lng +\r\n        Math.atan2(\r\n          Math.sin(brng) * Math.sin(d) * Math.cos(_lat),\r\n          Math.cos(d) - Math.sin(_lat) * Math.sin(pLat)\r\n        )) *\r\n        180) /\r\n      pi;\r\n    pLat = (pLat * 180) / pi;\r\n\r\n    points.push([pLat, pLng]);\r\n  }\r\n\r\n  return points;\r\n};\r\n\r\n/**\r\n * Cut some precision from bounds coordinates to tackle subtle map movements\r\n * when map is moved manually\r\n *\r\n * @param {LatLngBounds} sdkBounds - bounds to be changed to fixed precision\r\n * @param {Number} fixedPrecision - integer to be used on tofixed() change.\r\n *\r\n * @return {LatLngBounds} - bounds cut to given fixed precision\r\n */\r\nexport const sdkBoundsToFixedCoordinates = (sdkBounds, fixedPrecision) => {\r\n  const fixed = n => Number.parseFloat(n.toFixed(fixedPrecision));\r\n  const ne = new LatLng(fixed(sdkBounds.ne.lat), fixed(sdkBounds.ne.lng));\r\n  const sw = new LatLng(fixed(sdkBounds.sw.lat), fixed(sdkBounds.sw.lng));\r\n\r\n  return new LatLngBounds(ne, sw);\r\n};\r\n\r\n/**\r\n * Check if given bounds object have the same coordinates\r\n *\r\n * @param {LatLngBounds} sdkBounds1 - bounds #1 to be compared\r\n * @param {LatLngBounds} sdkBounds2 - bounds #2 to be compared\r\n *\r\n * @return {boolean} - true if bounds are the same\r\n */\r\nexport const hasSameSDKBounds = (sdkBounds1, sdkBounds2) => {\r\n  if (!(sdkBounds1 instanceof LatLngBounds) || !(sdkBounds2 instanceof LatLngBounds)) {\r\n    return false;\r\n  }\r\n  return (\r\n    sdkBounds1.ne.lat === sdkBounds2.ne.lat &&\r\n    sdkBounds1.ne.lng === sdkBounds2.ne.lng &&\r\n    sdkBounds1.sw.lat === sdkBounds2.sw.lat &&\r\n    sdkBounds1.sw.lng === sdkBounds2.sw.lng\r\n  );\r\n};\r\n\r\n/**\r\n * Return googleMapsAPIKey or mapboxAccessToken depending on which map provider is selected.\r\n *\r\n * @param {Object} mapConfig\r\n * @returns googleMapsAPIKey or mapboxAccessToken\r\n */\r\nexport const getMapProviderApiAccess = mapConfig => {\r\n  const isGoogleMapsInUse = mapConfig.mapProvider === 'googleMaps';\r\n  return isGoogleMapsInUse ? mapConfig.googleMapsAPIKey : mapConfig.mapboxAccessToken;\r\n};\r\n","//\r\n// Use common polyfill dependencies from package.json\r\n//\r\n\r\n// Smoothscroll\r\n// TODO: scroll-behaviour smooth was added to Safari on March 2022.\r\n//       We could consider removing this on 2023.\r\nrequire('smoothscroll-polyfill').polyfill();\r\n\r\n// To support browsers that do not have Intl.PluralRules (e.g IE11 & Safari 12-),\r\n// - add npm packaged to package.json: \"intl-pluralrules\": \"^1.3.1\",\r\n// - include this polyfill in your build:\r\n//\r\n// if (!Intl.PluralRules) {\r\n//   require('intl-pluralrules');\r\n// }\r\n\r\n// To support  browsers that do not have Intl.RelativeTimeFormat (e.g IE11, Edge, Safari 12-),\r\n// - add npm packaged to package.json: \"@formatjs/intl-relativetimeformat\": \"^9.3.2\",\r\n// - include this polyfill in your build along with individual CLDR data for each locale you support:\r\n//\r\n// if (!Intl.RelativeTimeFormat) {\r\n//   require('@formatjs/intl-relativetimeformat/polyfill');\r\n//   require('@formatjs/intl-relativetimeformat/locale-data/en');\r\n\r\n//   // By default, this library comes with en data. To load additional locale, you need include them on demand.\r\n//   // e.g.\r\n//   // require('@formatjs/intl-relativetimeformat/dist/locale-data/fr');\r\n// }\r\n","import { func, shape } from 'prop-types';\r\nimport {\r\n  IntlProvider,\r\n  FormattedMessage,\r\n  FormattedDate,\r\n  FormattedDateTimeRange,\r\n  createIntl,\r\n  createIntlCache,\r\n  injectIntl,\r\n  useIntl,\r\n} from 'react-intl';\r\n// Note: we import React Intl directly from dist directory, because\r\n// by default the library assumes the usage of ES modules\r\n// and that don't work with server-side rendering.\r\n// https://github.com/formatjs/formatjs/issues/1499#issuecomment-570151879\r\n\r\nconst intlShape = shape({\r\n  formatDate: func.isRequired,\r\n  formatDateTimeRange: func.isRequired,\r\n  formatMessage: func.isRequired,\r\n  formatNumber: func.isRequired,\r\n  formatPlural: func.isRequired,\r\n  formatRelativeTime: func.isRequired,\r\n  formatTime: func.isRequired,\r\n});\r\nexport {\r\n  IntlProvider,\r\n  FormattedMessage,\r\n  FormattedDate,\r\n  FormattedDateTimeRange,\r\n  createIntl,\r\n  createIntlCache,\r\n  injectIntl,\r\n  useIntl,\r\n  intlShape,\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/flow\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/flatMap\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/map\");","import React from 'react';\r\nimport flow from 'lodash/flow';\r\nimport flatMap from 'lodash/flatMap';\r\nimport map from 'lodash/map';\r\nimport { ExternalLink } from '../components';\r\n// NOTE: This file imports components/index.js, which may lead to circular dependency\r\n\r\n/**\r\n * Add zero width space (zwsp) around given breakchars (default '/') to make word break possible.\r\n * E.g. \"one/two/three\" => [\"one\", \"/\", \"two\" \"/\" \"three\"]\r\n *\r\n * @param {string} wordToBreak word to be broken from special character points.\r\n * @param {string} breakChars string containing possible chars that can be surrounded with zwsp.\r\n * @return {Array<string>} returns an array containing strings-\r\n */\r\nexport const zwspAroundSpecialCharsSplit = (wordToBreak, breakChars = '/') => {\r\n  if (typeof wordToBreak !== 'string') {\r\n    return wordToBreak;\r\n  }\r\n\r\n  const bcArray = breakChars.split('');\r\n\r\n  // Escape special regular expression chars\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\r\n  const escapedBCArray = bcArray.map(c => c.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'));\r\n  const reSplit = new RegExp('([' + escapedBCArray.join('') + '])');\r\n\r\n  const zwsp = '';\r\n  return wordToBreak.split(reSplit).map(w => (bcArray.includes(w) ? `${zwsp}${w}${zwsp}` : w));\r\n};\r\n\r\n/**\r\n * Layouts are not fixed sizes - So, long words in text make flexboxed items to grow too big.\r\n * This wraps long words with span and adds given class to it\r\n *\r\n * @param {string} word to be wrapped if requirement (longWordMinLength) is met\r\n * @param {number} key span needs a key in React/JSX\r\n * @param {number} longWordMinLength minimum length when word is considered long\r\n * @param {string} longWordClass class to be added to spans\r\n * @return {node} returns a string or component\r\n */\r\nexport const wrapLongWord = (word, key, options = {}) => {\r\n  const { longWordMinLength, longWordClass } = options;\r\n  if (typeof word !== 'string' || !(longWordMinLength && longWordClass)) {\r\n    return word;\r\n  }\r\n\r\n  const isShortWord = word.length <= longWordMinLength;\r\n  return isShortWord ? (\r\n    word\r\n  ) : (\r\n    <span key={key} className={longWordClass}>\r\n      {word}\r\n    </span>\r\n  );\r\n};\r\n\r\n/**\r\n * Find links from words and surround them with <ExternalLink> component\r\n *\r\n * @param {string} word to be linkified if requirement (link) is met\r\n * @param {number} key span needs a key in React/JSX\r\n * @param {Object} options than can contain keys: linkify, linkClass.\r\n * @return {Array<node>} returns a array containing ExternalLink component or strings\r\n */\r\nexport const linkifyOrWrapLinkSplit = (word, key, options = {}) => {\r\n  if (typeof word !== 'string') {\r\n    return word;\r\n  }\r\n  const { linkify, linkClass } = options;\r\n\r\n  // TODO This can't handle links that contain parenthesis:\r\n  // '(http://example.org/path_(etc))'\r\n  // Currently extracts:\r\n  // '(<a href=\\\"http://example.org/path_\\\" ...>http://example.org/path_</a>(etc))'\r\n  //\r\n  // We need to\r\n  // 1) track whether token before link contains parenthesis as a last character\r\n  //    before link token (\"word.split(urlRegex)[linkIndex - 1]\") and\r\n  // 2) add enough characters to the end of link-token from the next token\r\n  //    after link (\"word.split(urlRegex)[linkIndex + 1]\")\r\n\r\n  // urlRegex modified from examples in\r\n  // https://stackoverflow.com/questions/1500260/detect-urls-in-text-with-javascript\r\n\r\n  // eslint-disable-next-line no-useless-escape\r\n  const urlRegex = /(\\bhttps?:\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gi;\r\n  if (word.match(urlRegex)) {\r\n    // Split strings like \"(http://www.example.com)\" to [\"(\",\"http://www.example.com\",\")\"]\r\n    return word.split(urlRegex).map(w => {\r\n      return !w.match(urlRegex) ? (\r\n        w\r\n      ) : linkify ? (\r\n        <ExternalLink key={key} href={w} className={linkClass}>\r\n          {w}\r\n        </ExternalLink>\r\n      ) : linkClass ? (\r\n        <span key={key} className={linkClass}>\r\n          {w}\r\n        </span>\r\n      ) : (\r\n        w\r\n      );\r\n    });\r\n  } else {\r\n    return word;\r\n  }\r\n};\r\n\r\n/**\r\n * Scan text to fill in wrappers for long words and add links.\r\n * Wrap long words: options should contain longWordMinLength & longWordClass\r\n * Linkify found links: options should contain \"linkify: true\" (linkClass is optional)\r\n *\r\n * @param {string} text check text content\r\n * @param {object} options { longWordMinLength, longWordClass, linkify = false, linkClass }\r\n * @return {Array<node>} returns a child array containing strings and inline elements\r\n */\r\nexport const richText = (text, options) => {\r\n  if (typeof text !== 'string') {\r\n    return text;\r\n  }\r\n\r\n  // longWordMinLength & longWordClass are needed for long words to be spanned\r\n  // linkify = true is needed for links to be linkified (linkClass is optional)\r\n  const { longWordMinLength, longWordClass, linkify = false, linkClass, breakChars } = options;\r\n  const linkOrLongWordClass = linkClass ? linkClass : longWordClass;\r\n  const nonWhiteSpaceSequence = /([^\\s]+)/gi;\r\n  const breakCharsConfig = breakChars != null ? breakChars : '/,';\r\n\r\n  return text.split(nonWhiteSpaceSequence).reduce((acc, nextChild, i) => {\r\n    const parts = flow([\r\n      v =>\r\n        flatMap(v, w => linkifyOrWrapLinkSplit(w, i, { linkify, linkClass: linkOrLongWordClass })),\r\n      v => flatMap(v, w => zwspAroundSpecialCharsSplit(w, breakCharsConfig)),\r\n      v => map(v, (w, j) => wrapLongWord(w, `${i}${j}`, { longWordMinLength, longWordClass })),\r\n    ])([nextChild]);\r\n    return acc.concat(parts);\r\n  }, []);\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/find\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"path-to-regexp\");","import find from 'lodash/find';\r\nimport { matchPath } from 'react-router-dom';\r\nimport { compile } from 'path-to-regexp';\r\nimport { stringify } from './urlHelpers';\r\n// NOTE: This file imports urlHelpers.js, which may lead to circular dependency\r\n\r\nconst findRouteByName = (nameToFind, routes) => find(routes, route => route.name === nameToFind);\r\n\r\n/**\r\n * E.g. ```const toListingPath = toPathByRouteName('ListingPage', routes);```\r\n * Then we can generate listing paths with given params (```toListingPath({ id: uuidX })```)\r\n */\r\nconst toPathByRouteName = (nameToFind, routes) => {\r\n  const route = findRouteByName(nameToFind, routes);\r\n  if (!route) {\r\n    throw new Error(`Path \"${nameToFind}\" was not found.`);\r\n  }\r\n  return compile(route.path);\r\n};\r\n\r\n/**\r\n * Shorthand for single path call. (```pathByRouteName('ListingPage', routes, { id: uuidX });```)\r\n */\r\nexport const pathByRouteName = (nameToFind, routes, params = {}) => {\r\n  const hasEmptySlug = params && params.hasOwnProperty('slug') && params.slug === '';\r\n  const pathParams = hasEmptySlug ? { ...params, slug: 'no-slug' } : params;\r\n  return toPathByRouteName(nameToFind, routes)(pathParams);\r\n};\r\n\r\n/**\r\n * Find the matching routes and their params for the given pathname\r\n *\r\n * @param {String} pathname - Full URL path from root with possible\r\n * search params and hash included\r\n *\r\n * @return {Array<{ route, params }>} - All matches as { route, params } objects if matches has\r\n * exact flag set to false. If not, an array containing just the first matched exact route is returned.\r\n */\r\nexport const matchPathname = (pathname, routeConfiguration) => {\r\n  const matchedRoutes = routeConfiguration.reduce((matches, route) => {\r\n    const { path, exact = true } = route;\r\n    const match = matchPath(pathname, { path, exact });\r\n    if (match) {\r\n      matches.push({\r\n        route,\r\n        params: match.params || {},\r\n      });\r\n    }\r\n    return matches;\r\n  }, []);\r\n\r\n  const matchedExactRoute = matchedRoutes.find(r => {\r\n    return r.exact === true || r.exact == null;\r\n  });\r\n\r\n  // We return matched 'exact' path route only if such exists\r\n  // and all matches if no exact flag exists.\r\n  return matchedExactRoute ? [matchedExactRoute] : matchedRoutes;\r\n};\r\n\r\n/**\r\n * ResourceLocatorString is used to direct webapp to correct page.\r\n * In contrast to Universal Resource Locator (URL), this doesn't contain protocol, host, or port.\r\n */\r\nexport const createResourceLocatorString = (\r\n  routeName,\r\n  routes,\r\n  pathParams = {},\r\n  searchParams = {},\r\n  hash = ''\r\n) => {\r\n  const searchQuery = stringify(searchParams);\r\n  const includeSearchQuery = searchQuery.length > 0 ? `?${searchQuery}` : '';\r\n  const path = pathByRouteName(routeName, routes, pathParams);\r\n  return `${path}${includeSearchQuery}${hash}`;\r\n};\r\n\r\n/**\r\n * Find component related to route name\r\n * E.g. `const PageComponent = findComponentByRouteName('CheckoutPage', routes);`\r\n * Then we can call static methods of given component:\r\n * `dispatch(PageComponent.setInitialValues({ listing, bookingDates }));`\r\n *\r\n * @param {String} nameToFind - Route name\r\n * @param {Array<{ route }>} routes - Route configuration as flat array.\r\n *\r\n * @return {Route} - Route that matches the given route name.\r\n */\r\nexport const findRouteByRouteName = (nameToFind, routes) => {\r\n  const route = findRouteByName(nameToFind, routes);\r\n  if (!route) {\r\n    throw new Error(`Component \"${nameToFind}\" was not found.`);\r\n  }\r\n  return route;\r\n};\r\n\r\n/**\r\n * Get the canonical URL from the given location\r\n *\r\n * @param {Array<{ route }>} routes - Route configuration as flat array\r\n * @param {Object} location - location object from React Router\r\n *\r\n * @return {String} Canonical URL of the given location\r\n *\r\n */\r\nexport const canonicalRoutePath = (routes, location, pathOnly = false) => {\r\n  const { pathname, search, hash } = location;\r\n\r\n  const matches = matchPathname(pathname, routes);\r\n  const isListingRoute = matches.length === 1 && matches[0].route.name === 'ListingPage';\r\n\r\n  if (isListingRoute) {\r\n    // Remove the dynamic slug from the listing page canonical URL\r\n\r\n    // Remove possible trailing slash\r\n    const cleanedPathName = pathname.replace(/\\/$/, '');\r\n    const parts = cleanedPathName.split('/');\r\n\r\n    if (parts.length !== 4) {\r\n      throw new Error('Expected ListingPage route to have 4 parts');\r\n    }\r\n    const canonicalListingPathname = `/${parts[1]}/${parts[3]}`;\r\n    return pathOnly ? canonicalListingPathname : `${canonicalListingPathname}${search}${hash}`;\r\n  }\r\n\r\n  return pathOnly ? pathname : `${pathname}${search}${hash}`;\r\n};\r\n","/**\r\n * By default, React DOM escapes any values embedded in JSX before rendering them,\r\n * but sometimes it is necessary to sanitize the user-generated content of received entities.\r\n * If you use this data in component props without any sanitization or encoding,\r\n * it might create XSS vulnerabilities.\r\n *\r\n * You should especially consider how you are using extended data inside the app.\r\n */\r\n\r\nconst ESCAPE_TEXT_REGEXP = /[<>]/g;\r\nconst ESCAPE_TEXT_REPLACEMENTS = {\r\n  //fullwidth lesser-than character\r\n  '<': '\\uff1c',\r\n  //fullwidth greater-than character\r\n  '>': '\\uff1e',\r\n};\r\n\r\n// An example how you could sanitize text content.\r\n// This swaps some coding related characters to less dangerous ones\r\nconst sanitizeText = str =>\r\n  str == null\r\n    ? str\r\n    : typeof str === 'string'\r\n    ? str.replace(ESCAPE_TEXT_REGEXP, ch => ESCAPE_TEXT_REPLACEMENTS[ch])\r\n    : '';\r\n\r\n// Enum and multi-enum work with predefined option configuration\r\nconst sanitizeEnum = (str, options) => (options.map(o => `${o.option}`).includes(str) ? str : null);\r\nconst sanitizeMultiEnum = (arr, options) =>\r\n  Array.isArray(arr)\r\n    ? arr.reduce((ret, value) => {\r\n        const enumValue = sanitizeEnum(value, options);\r\n        return enumValue ? [...ret, enumValue] : ret;\r\n      }, [])\r\n    : [];\r\nconst sanitizeLong = lng => (lng == null || typeof lng === 'number' ? lng : null);\r\nconst sanitizeBoolean = bool => (bool == null || typeof bool === 'boolean' ? bool : null);\r\n\r\n// URL sanitizer. This code is adapted from\r\n// https://github.com/braintree/sanitize-url/\r\n// <sanitizeUrl>\r\nconst INVALID_PROTOCOL_REGEXP = /^([^\\w]*)(javascript|data|vbscript)/im;\r\nconst HTML_ENTITIES_REGEXP = /&#(\\w+)(^\\w|;)?/g;\r\nconst CTRL_CHARACTERS_REGEXP = /[\\u0000-\\u001F\\u007F-\\u009F\\u2000-\\u200D\\uFEFF]/gim;\r\nconst URL_SCHEME_REGEXP = /^([^:]+):/gm;\r\nconst RELATIVE_FIRST_CHARACTERS = ['.', '/'];\r\n\r\nfunction isRelativeUrlWithoutProtocol(url) {\r\n  return RELATIVE_FIRST_CHARACTERS.indexOf(url[0]) > -1;\r\n}\r\n\r\n// adapted from https://stackoverflow.com/a/29824550/2601552\r\nfunction decodeHtmlCharacters(str) {\r\n  return str.replace(HTML_ENTITIES_REGEXP, (match, dec) => {\r\n    return String.fromCharCode(dec);\r\n  });\r\n}\r\n\r\nexport function sanitizeUrl(url) {\r\n  const sanitizedUrl = decodeHtmlCharacters(url || '')\r\n    .replace(CTRL_CHARACTERS_REGEXP, '')\r\n    .trim();\r\n\r\n  if (!sanitizedUrl) {\r\n    return 'about:blank';\r\n  }\r\n\r\n  if (isRelativeUrlWithoutProtocol(sanitizedUrl)) {\r\n    return sanitizedUrl;\r\n  }\r\n\r\n  const urlSchemeParseResults = sanitizedUrl.match(URL_SCHEME_REGEXP);\r\n\r\n  if (!urlSchemeParseResults) {\r\n    return sanitizedUrl;\r\n  }\r\n\r\n  const urlScheme = urlSchemeParseResults[0];\r\n\r\n  if (INVALID_PROTOCOL_REGEXP.test(urlScheme)) {\r\n    return 'about:blank';\r\n  }\r\n\r\n  return sanitizedUrl;\r\n}\r\n// </sanitizeUrl>\r\n\r\n/**\r\n * Sanitize user entity.\r\n * If you add public data, you should probably sanitize it here.\r\n * By default, React DOM escapes any values embedded in JSX before rendering them,\r\n * but if you use this data on props, it might create XSS vulnerabilities\r\n * E.g. you should sanitize and encode URI if you are creating links from public data.\r\n */\r\nexport const sanitizeUser = entity => {\r\n  const { attributes, ...restEntity } = entity || {};\r\n  const { profile, ...restAttributes } = attributes || {};\r\n  const { bio, displayName, abbreviatedName, publicData, metadata } = profile || {};\r\n\r\n  const sanitizePublicData = publicData => {\r\n    // TODO: If you add public data, you should probably sanitize it here.\r\n    return publicData ? { publicData } : {};\r\n  };\r\n  const sanitizeMetadata = metadata => {\r\n    // TODO: If you add user-generated metadata through Integration API,\r\n    // you should probably sanitize it here.\r\n    return metadata ? { metadata } : {};\r\n  };\r\n\r\n  const profileMaybe = profile\r\n    ? {\r\n        profile: {\r\n          abbreviatedName: sanitizeText(abbreviatedName),\r\n          displayName: sanitizeText(displayName),\r\n          bio: sanitizeText(bio),\r\n          ...sanitizePublicData(publicData),\r\n          ...sanitizeMetadata(metadata),\r\n        },\r\n      }\r\n    : {};\r\n  const attributesMaybe = attributes ? { attributes: { ...profileMaybe, ...restAttributes } } : {};\r\n\r\n  return { ...attributesMaybe, ...restEntity };\r\n};\r\n\r\n/**\r\n * Sanitize extended data against configuration (against schemaType)\r\n * @param {any} value Any JSON value\r\n * @param {object} config containing \"schemaType\"\r\n * @returns sanitized value or null\r\n */\r\nconst sanitizedListingFields = (value, config) => {\r\n  const { schemaType, enumOptions } = config;\r\n  const sanitized =\r\n    schemaType === 'text'\r\n      ? sanitizeText(value)\r\n      : schemaType === 'enum'\r\n      ? sanitizeEnum(value, enumOptions)\r\n      : schemaType === 'multi-enum'\r\n      ? sanitizeMultiEnum(value, enumOptions)\r\n      : schemaType === 'long'\r\n      ? sanitizeLong(value)\r\n      : schemaType === 'boolean'\r\n      ? sanitizeBoolean(value)\r\n      : null;\r\n\r\n  return sanitized;\r\n};\r\n\r\n/**\r\n * Some of the public data is configurable. This validates that data against the given config.\r\n * (The config paramter contains listingFields config.)\r\n *\r\n * NOTE: this does not handle nested JSON-like objects or other extra data,\r\n * but there's handling for string type content ('<' & '>' characters are replaced with full-width ones).\r\n *\r\n * @param {object} publicData\r\n * @param {*} config\r\n * @returns\r\n */\r\nconst sanitizeConfiguredPublicData = (publicData, config = {}) => {\r\n  const sanitizedConfiguredPublicData = Object.entries(publicData).reduce((sanitized, entry) => {\r\n    const [key, value] = entry;\r\n    const foundListingFieldConfig = config?.listingFields?.find(d => d.key === key);\r\n    const sanitizedValue = ['listingType', 'transactionProcessAlias', 'unitType'].includes(key)\r\n      ? sanitizeText(value)\r\n      : foundListingFieldConfig\r\n      ? sanitizedListingFields(value, foundListingFieldConfig)\r\n      : typeof value === 'string'\r\n      ? sanitizeText(value)\r\n      : value;\r\n\r\n    return {\r\n      ...sanitized,\r\n      [key]: sanitizedValue,\r\n    };\r\n  }, {});\r\n  return sanitizedConfiguredPublicData;\r\n};\r\n\r\n/**\r\n * Sanitize listing entity.\r\n * If you add public data, you should probably sanitize it here.\r\n * By default, React DOM escapes any values embedded in JSX before rendering them,\r\n * but if you use this data on props, it might create XSS vulnerabilities\r\n * E.g. you should sanitize and encode URI if you are creating links from public data.\r\n */\r\nexport const sanitizeListing = (entity, config = {}) => {\r\n  const { attributes, ...restEntity } = entity;\r\n  const { title, description, publicData, ...restAttributes } = attributes || {};\r\n\r\n  const sanitizeLocation = location => {\r\n    const { address, building } = location || {};\r\n    return { address: sanitizeText(address), building: sanitizeText(building) };\r\n  };\r\n\r\n  const sanitizePublicData = publicData => {\r\n    // Here's an example how you could sanitize location and rules from publicData:\r\n    // TODO: If you add public data, you should probably sanitize it here.\r\n    const { location, ...restPublicData } = publicData || {};\r\n    const locationMaybe = location ? { location: sanitizeLocation(location) } : {};\r\n    const sanitizedConfiguredPublicData = sanitizeConfiguredPublicData(restPublicData, config);\r\n\r\n    return publicData ? { publicData: { ...locationMaybe, ...sanitizedConfiguredPublicData } } : {};\r\n  };\r\n\r\n  const attributesMaybe = attributes\r\n    ? {\r\n        attributes: {\r\n          title: sanitizeText(title),\r\n          description: sanitizeText(description),\r\n          ...sanitizePublicData(publicData),\r\n          ...restAttributes,\r\n        },\r\n      }\r\n    : {};\r\n\r\n  return { ...attributesMaybe, ...restEntity };\r\n};\r\n\r\n/**\r\n * Sanitize entities if needed.\r\n * Remember to add your own sanitization rules for your extended data\r\n */\r\nexport const sanitizeEntity = (entity, config) => {\r\n  const { type } = entity;\r\n  switch (type) {\r\n    case 'listing':\r\n      return sanitizeListing(entity, config);\r\n    case 'user':\r\n      return sanitizeUser(entity);\r\n    default:\r\n      return entity;\r\n  }\r\n};\r\n","import * as importedSdk from 'sharetribe-flex-sdk';\r\n\r\nlet exportSdk;\r\n\r\nconst isServer = () => typeof window === 'undefined';\r\n\r\nif (isServer()) {\r\n  // Use eval to skip webpack from bundling SDK in Node\r\n  // eslint-disable-next-line no-eval\r\n  exportSdk = eval('require')('sharetribe-flex-sdk');\r\n} else {\r\n  exportSdk = importedSdk;\r\n}\r\n\r\nconst { createInstance, types, transit, util } = exportSdk;\r\n\r\n// create image variant from variant name, desired width and aspectRatio\r\nconst createImageVariantConfig = (name, width, aspectRatio) => {\r\n  let variantWidth = width;\r\n  let variantHeight = Math.round(aspectRatio * width);\r\n\r\n  if (variantWidth > 3072 || variantHeight > 3072) {\r\n    console.error(`Dimensions of custom image variant (${name}) are too high (w:${variantWidth}, h:${variantHeight}).\r\n    Reduce them to max 3072px. https://www.sharetribe.com/api-reference/marketplace.html#custom-image-variants`);\r\n\r\n    if (variantHeight > 3072) {\r\n      variantHeight = 3072;\r\n      variantWidth = Math.round(variantHeight / aspectRatio);\r\n    } else if (variantHeight > 3072) {\r\n      variantWidth = 3072;\r\n      variantHeight = Math.round(aspectRatio * variantWidth);\r\n    }\r\n  }\r\n\r\n  return {\r\n    [`imageVariant.${name}`]: util.objectQueryString({\r\n      w: variantWidth,\r\n      h: variantHeight,\r\n      fit: 'crop',\r\n    }),\r\n  };\r\n};\r\n\r\nexport { createInstance, types, transit, util, createImageVariantConfig };\r\n","/**\r\n * SelectMultipleFilter needs to parse values from format\r\n * \"has_all:a,b,c,d\" or \"a,b,c,d\"\r\n */\r\nexport const parseSelectFilterOptions = uriComponentValue => {\r\n  const startsWithHasAll = uriComponentValue && uriComponentValue.indexOf('has_all:') === 0;\r\n  const startsWithHasAny = uriComponentValue && uriComponentValue.indexOf('has_any:') === 0;\r\n\r\n  if (startsWithHasAll) {\r\n    return uriComponentValue.substring(8).split(',');\r\n  } else if (startsWithHasAny) {\r\n    return uriComponentValue.substring(8).split(',');\r\n  } else {\r\n    return uriComponentValue.split(',');\r\n  }\r\n};\r\n\r\n/**\r\n * Create the name of the query parameter.\r\n *\r\n * @param {String} key Key extracted from listingExtendData config.\r\n * @param {String} scope Scope extracted from listingExtendData config.\r\n */\r\nconst constructQueryParamName = (key, scope) => {\r\n  const prefixedKey = scope === 'meta' ? `meta_${key}` : `pub_${key}`;\r\n  return prefixedKey.replace(/\\s/g, '_');\r\n};\r\n\r\n/**\r\n * Get parameter names for search query. Extract those from config.\r\n * The configuration of default filters has key, which is 1-on-1 mapping\r\n * with the name of the query parameter. E.g. 'price'.\r\n *\r\n * @param {Object} listingFieldsConfig Custom filters are checked agains extended data config of a listing entity.\r\n * @param {Object} defaultFiltersConfig Configuration of default filters.\r\n */\r\nexport const getQueryParamNames = (listingFieldsConfig, defaultFiltersConfig) => {\r\n  const queryParamKeysOfDefaultFilters = defaultFiltersConfig.map(config => config.key);\r\n  const queryParamKeysOfListingFields = listingFieldsConfig.reduce((params, config) => {\r\n    const param = constructQueryParamName(config.key, config.scope);\r\n    return config.filterConfig?.indexForSearch ? [...params, param] : params;\r\n  }, []);\r\n  return [...queryParamKeysOfDefaultFilters, ...queryParamKeysOfListingFields];\r\n};\r\n/**\r\n * Check if any of the filters (defined by filterKeys) have currently active query parameter in URL.\r\n */\r\nexport const isAnyFilterActive = (\r\n  filterKeys,\r\n  urlQueryParams,\r\n  listingFieldsConfig,\r\n  defaultFiltersConfig\r\n) => {\r\n  const queryParamKeys = getQueryParamNames(listingFieldsConfig, defaultFiltersConfig);\r\n\r\n  const getQueryParamKeysOfGivenFilters = (pickedKeys, key) => {\r\n    const isFilterIncluded = filterKeys.includes(key);\r\n    const addedQueryParamNamesMaybe = isFilterIncluded ? [key] : [];\r\n    return [...pickedKeys, ...addedQueryParamNamesMaybe];\r\n  };\r\n  const queryParamKeysOfGivenFilters = queryParamKeys.reduce(getQueryParamKeysOfGivenFilters, []);\r\n\r\n  const paramEntries = Object.entries(urlQueryParams);\r\n  const activeKey = paramEntries.find(entry => {\r\n    const [key, value] = entry;\r\n    return queryParamKeysOfGivenFilters.includes(key) && value != null;\r\n  });\r\n  return !!activeKey;\r\n};\r\n\r\n/**\r\n * Check if the main search type is 'keywords'\r\n */\r\nexport const isMainSearchTypeKeywords = config =>\r\n  config.search?.mainSearch?.searchType === 'keywords';\r\n\r\n/**\r\n * Check if the origin parameter is currently active.\r\n */\r\nexport const isOriginInUse = config =>\r\n  config.search?.mainSearch?.searchType === 'location' && config.maps?.search?.sortSearchByDistance;\r\n\r\n/**\r\n * Check if the stock management is currently active.\r\n */\r\nexport const isStockInUse = config => {\r\n  const listingTypes = config.listing.listingTypes;\r\n  const stockProcesses = ['default-purchase'];\r\n  const hasStockProcessesInUse = !!listingTypes.find(conf =>\r\n    stockProcesses.includes(conf.transactionType.process)\r\n  );\r\n\r\n  // Note: these are active processes!\r\n  return hasStockProcessesInUse;\r\n};\r\n","/**\r\n * This module defines custom PropTypes shared within the application.\r\n *\r\n * To learn about validating React component props with PropTypes, see:\r\n *\r\n *     https://facebook.github.io/react/docs/typechecking-with-proptypes.html\r\n *\r\n * For component specific PropTypes, it's perfectly ok to inline them\r\n * to the component itself. If the type is shared or external (SDK or\r\n * API), however, it should be in this file for sharing with other\r\n * components.\r\n *\r\n * PropTypes should usually be validated only at the lowest level\r\n * where the props are used, not along the way in parents that pass\r\n * along the props to their children. Those parents should usually\r\n * just validate the presense of the prop key and that the value is\r\n * defined. This way we get the validation errors only in the most\r\n * specific place and avoid duplicate errros.\r\n */\r\nimport {\r\n  arrayOf,\r\n  bool,\r\n  func,\r\n  instanceOf,\r\n  node,\r\n  number,\r\n  object,\r\n  objectOf,\r\n  oneOf,\r\n  oneOfType,\r\n  shape,\r\n  string,\r\n} from 'prop-types';\r\nimport Decimal from 'decimal.js';\r\nimport { types as sdkTypes } from './sdkLoader';\r\nimport {\r\n  getAllTransitionsForEveryProcess,\r\n  TX_TRANSITION_ACTORS,\r\n} from '../transactions/transaction';\r\n// NOTE: This file imports ../transactions/transaction.js, which may lead to circular dependency\r\n\r\nconst { UUID, LatLng, LatLngBounds, Money } = sdkTypes;\r\nconst TRANSITIONS = getAllTransitionsForEveryProcess();\r\n\r\n// Supported schema types for custom fields added to extended data through configuration.\r\nexport const SCHEMA_TYPE_ENUM = 'enum';\r\nexport const SCHEMA_TYPE_MULTI_ENUM = 'multi-enum';\r\nexport const SCHEMA_TYPE_TEXT = 'text';\r\nexport const SCHEMA_TYPE_LONG = 'long';\r\nexport const SCHEMA_TYPE_BOOLEAN = 'boolean';\r\nexport const EXTENDED_DATA_SCHEMA_TYPES = [\r\n  SCHEMA_TYPE_ENUM,\r\n  SCHEMA_TYPE_MULTI_ENUM,\r\n  SCHEMA_TYPE_TEXT,\r\n  SCHEMA_TYPE_LONG,\r\n  SCHEMA_TYPE_BOOLEAN,\r\n];\r\n\r\nconst propTypes = {};\r\n\r\n// Fixed value\r\npropTypes.value = val => oneOf([val]);\r\n\r\n// SDK type instances\r\npropTypes.uuid = instanceOf(UUID);\r\npropTypes.latlng = instanceOf(LatLng);\r\npropTypes.latlngBounds = instanceOf(LatLngBounds);\r\npropTypes.money = instanceOf(Money);\r\n\r\n// Configuration for currency formatting\r\npropTypes.currencyConfig = shape({\r\n  style: string.isRequired,\r\n  currency: string.isRequired,\r\n  currencyDisplay: string,\r\n  useGrouping: bool,\r\n  minimumFractionDigits: number,\r\n  maximumFractionDigits: number,\r\n});\r\n\r\n// Configuration for a single route\r\npropTypes.route = shape({\r\n  name: string.isRequired,\r\n  path: string.isRequired,\r\n  exact: bool,\r\n  strict: bool,\r\n  component: oneOfType([object, func]).isRequired,\r\n  loadData: func,\r\n});\r\n\r\n// Place object from LocationAutocompleteInput\r\npropTypes.place = shape({\r\n  address: string.isRequired,\r\n  origin: propTypes.latlng,\r\n  bounds: propTypes.latlngBounds, // optional viewport bounds\r\n});\r\n\r\n// Denormalised image object\r\npropTypes.image = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('image').isRequired,\r\n  attributes: shape({\r\n    variants: objectOf(\r\n      shape({\r\n        width: number.isRequired,\r\n        height: number.isRequired,\r\n        url: string.isRequired,\r\n      })\r\n    ),\r\n  }),\r\n});\r\n\r\n// ImageAsset type from Asset Delivery API\r\npropTypes.imageAsset = shape({\r\n  id: string.isRequired,\r\n  type: propTypes.value('imageAsset').isRequired,\r\n  attributes: shape({\r\n    variants: objectOf(\r\n      shape({\r\n        width: number.isRequired,\r\n        height: number.isRequired,\r\n        url: string.isRequired,\r\n      })\r\n    ),\r\n  }),\r\n});\r\n\r\n// Denormalised user object\r\npropTypes.currentUser = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('currentUser').isRequired,\r\n  attributes: shape({\r\n    banned: bool.isRequired,\r\n    email: string.isRequired,\r\n    emailVerified: bool.isRequired,\r\n    profile: shape({\r\n      firstName: string.isRequired,\r\n      lastName: string.isRequired,\r\n      displayName: string.isRequired,\r\n      abbreviatedName: string.isRequired,\r\n      bio: string,\r\n    }).isRequired,\r\n    stripeConnected: bool,\r\n  }),\r\n  profileImage: propTypes.image,\r\n});\r\n\r\nconst userAttributes = shape({\r\n  banned: propTypes.value(false).isRequired,\r\n  deleted: propTypes.value(false).isRequired,\r\n  profile: shape({\r\n    displayName: string.isRequired,\r\n    abbreviatedName: string.isRequired,\r\n    bio: string,\r\n  }),\r\n});\r\n\r\n// Listing queries can include author.\r\n// Banned and deleted are not relevant then\r\n// since banned and deleted users can't have listings.\r\nconst authorAttributes = shape({\r\n  profile: shape({\r\n    displayName: string.isRequired,\r\n    abbreviatedName: string.isRequired,\r\n    bio: string,\r\n  }),\r\n});\r\n\r\nconst deletedUserAttributes = shape({\r\n  deleted: propTypes.value(true).isRequired,\r\n});\r\n\r\nconst bannedUserAttributes = shape({\r\n  banned: propTypes.value(true).isRequired,\r\n});\r\n\r\n// Denormalised user object\r\npropTypes.user = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('user').isRequired,\r\n  attributes: oneOfType([\r\n    userAttributes,\r\n    authorAttributes,\r\n    deletedUserAttributes,\r\n    bannedUserAttributes,\r\n  ]).isRequired,\r\n  profileImage: propTypes.image,\r\n});\r\n\r\nexport const LISTING_STATE_DRAFT = 'draft';\r\nexport const LISTING_STATE_PENDING_APPROVAL = 'pendingApproval';\r\nexport const LISTING_STATE_PUBLISHED = 'published';\r\nexport const LISTING_STATE_CLOSED = 'closed';\r\n\r\nconst LISTING_STATES = [\r\n  LISTING_STATE_DRAFT,\r\n  LISTING_STATE_PENDING_APPROVAL,\r\n  LISTING_STATE_PUBLISHED,\r\n  LISTING_STATE_CLOSED,\r\n];\r\n\r\nconst listingAttributes = shape({\r\n  title: string.isRequired,\r\n  description: string,\r\n  geolocation: propTypes.latlng,\r\n  deleted: propTypes.value(false),\r\n  state: oneOf(LISTING_STATES),\r\n  price: propTypes.money,\r\n  publicData: object,\r\n});\r\n\r\nconst AVAILABILITY_PLAN_DAY = 'availability-plan/day';\r\nconst AVAILABILITY_PLAN_TIME = 'availability-plan/time';\r\nexport const DAYS_OF_WEEK = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat', 'sun'];\r\n\r\nconst availabilityPlan = shape({\r\n  type: oneOf([AVAILABILITY_PLAN_DAY, AVAILABILITY_PLAN_TIME]).isRequired,\r\n  timezone: string,\r\n  entries: arrayOf(\r\n    shape({\r\n      dayOfWeek: oneOf(DAYS_OF_WEEK).isRequired,\r\n      seats: number.isRequired,\r\n      start: string,\r\n      end: string,\r\n    })\r\n  ),\r\n});\r\n\r\npropTypes.availabilityPlan = availabilityPlan;\r\n\r\nconst ownListingAttributes = shape({\r\n  title: string.isRequired,\r\n  description: string,\r\n  geolocation: propTypes.latlng,\r\n  deleted: propTypes.value(false).isRequired,\r\n  state: oneOf(LISTING_STATES).isRequired,\r\n  price: propTypes.money,\r\n  availabilityPlan: availabilityPlan,\r\n  publicData: object.isRequired,\r\n});\r\n\r\nconst deletedListingAttributes = shape({\r\n  deleted: propTypes.value(true).isRequired,\r\n});\r\n\r\n// Denormalised listing object\r\npropTypes.listing = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('listing').isRequired,\r\n  attributes: oneOfType([listingAttributes, deletedListingAttributes]).isRequired,\r\n  author: propTypes.user,\r\n  images: arrayOf(propTypes.image),\r\n});\r\n\r\n// Denormalised ownListing object\r\npropTypes.ownListing = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('ownListing').isRequired,\r\n  attributes: oneOfType([ownListingAttributes, deletedListingAttributes]).isRequired,\r\n  author: propTypes.currentUser,\r\n  images: arrayOf(propTypes.image),\r\n});\r\n\r\nexport const BOOKING_STATE_PENDING = 'pending';\r\nexport const BOOKING_STATE_ACCEPTED = 'accepted';\r\nexport const BOOKING_STATE_DECLINED = 'declined';\r\nexport const BOOKING_STATE_CANCELLED = 'cancelled';\r\nexport const BOOKING_STATES = [\r\n  BOOKING_STATE_PENDING,\r\n  BOOKING_STATE_ACCEPTED,\r\n  BOOKING_STATE_DECLINED,\r\n  BOOKING_STATE_CANCELLED,\r\n];\r\n\r\n// Denormalised booking object\r\npropTypes.booking = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('booking').isRequired,\r\n  attributes: shape({\r\n    end: instanceOf(Date).isRequired,\r\n    start: instanceOf(Date).isRequired,\r\n    displayStart: instanceOf(Date),\r\n    displayEnd: instanceOf(Date),\r\n    state: oneOf(BOOKING_STATES),\r\n  }),\r\n});\r\n\r\n// A time slot that covers one day, having a start and end date.\r\nexport const TIME_SLOT_TIME = 'time-slot/time';\r\n\r\n// Denormalised time slot object\r\npropTypes.timeSlot = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('timeSlot').isRequired,\r\n  attributes: shape({\r\n    type: oneOf([TIME_SLOT_TIME]).isRequired,\r\n    end: instanceOf(Date).isRequired,\r\n    start: instanceOf(Date).isRequired,\r\n  }),\r\n});\r\n\r\n// Denormalised availability exception object\r\npropTypes.availabilityException = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('availabilityException').isRequired,\r\n  attributes: shape({\r\n    end: instanceOf(Date).isRequired,\r\n    seats: number.isRequired,\r\n    start: instanceOf(Date).isRequired,\r\n  }),\r\n});\r\n\r\nexport const STOCK_ONE_ITEM = 'oneItem';\r\nexport const STOCK_MULTIPLE_ITEMS = 'multipleItems';\r\nexport const STOCK_INFINITE_ONE_ITEM = 'infiniteOneItem';\r\nexport const STOCK_INFINITE_MULTIPLE_ITEMS = 'infiniteMultipleItems';\r\nexport const STOCK_INFINITE_ITEMS = [STOCK_INFINITE_ONE_ITEM, STOCK_INFINITE_MULTIPLE_ITEMS];\r\nexport const STOCK_TYPES = [\r\n  STOCK_ONE_ITEM,\r\n  STOCK_MULTIPLE_ITEMS,\r\n  STOCK_INFINITE_ONE_ITEM,\r\n  STOCK_INFINITE_MULTIPLE_ITEMS,\r\n];\r\n\r\npropTypes.transition = shape({\r\n  createdAt: instanceOf(Date).isRequired,\r\n  by: oneOf(TX_TRANSITION_ACTORS).isRequired,\r\n  transition: oneOf(TRANSITIONS).isRequired,\r\n});\r\n\r\n// Possible amount of stars in a review\r\nexport const REVIEW_RATINGS = [1, 2, 3, 4, 5];\r\n\r\n// Review types: review of a provider and of a customer\r\nexport const REVIEW_TYPE_OF_PROVIDER = 'ofProvider';\r\nexport const REVIEW_TYPE_OF_CUSTOMER = 'ofCustomer';\r\n\r\n// A review on a user\r\npropTypes.review = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  attributes: shape({\r\n    createdAt: instanceOf(Date).isRequired,\r\n    content: string,\r\n    rating: oneOf(REVIEW_RATINGS),\r\n    state: string.isRequired,\r\n    type: oneOf([REVIEW_TYPE_OF_PROVIDER, REVIEW_TYPE_OF_CUSTOMER]).isRequired,\r\n  }).isRequired,\r\n  author: propTypes.user,\r\n  subject: propTypes.user,\r\n});\r\n\r\n// A Stripe account entity\r\npropTypes.stripeAccount = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('stripeAccount').isRequired,\r\n  attributes: shape({\r\n    stripeAccountId: string.isRequired,\r\n    stripeAccountData: object,\r\n  }),\r\n});\r\n\r\npropTypes.defaultPaymentMethod = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('stripePaymentMethod').isRequired,\r\n  attributes: shape({\r\n    type: propTypes.value('stripe-payment-method/card').isRequired,\r\n    stripePaymentMethodId: string.isRequired,\r\n    card: shape({\r\n      brand: string.isRequired,\r\n      expirationMonth: number.isRequired,\r\n      expirationYear: number.isRequired,\r\n      last4Digits: string.isRequired,\r\n    }).isRequired,\r\n  }),\r\n});\r\n\r\nexport const LINE_ITEM_NIGHT = 'line-item/night';\r\nexport const LINE_ITEM_DAY = 'line-item/day';\r\nexport const LINE_ITEM_HOUR = 'line-item/hour';\r\nexport const LINE_ITEM_ITEM = 'line-item/item';\r\nexport const LINE_ITEM_CUSTOMER_COMMISSION = 'line-item/customer-commission';\r\nexport const LINE_ITEM_PROVIDER_COMMISSION = 'line-item/provider-commission';\r\nexport const LINE_ITEM_SHIPPING_FEE = 'line-item/shipping-fee';\r\nexport const LINE_ITEM_PICKUP_FEE = 'line-item/pickup-fee';\r\n\r\nexport const LINE_ITEMS = [\r\n  LINE_ITEM_NIGHT,\r\n  LINE_ITEM_DAY,\r\n  LINE_ITEM_HOUR,\r\n  LINE_ITEM_ITEM,\r\n  LINE_ITEM_CUSTOMER_COMMISSION,\r\n  LINE_ITEM_PROVIDER_COMMISSION,\r\n  LINE_ITEM_SHIPPING_FEE,\r\n  LINE_ITEM_PICKUP_FEE,\r\n];\r\nexport const LISTING_UNIT_TYPES = [LINE_ITEM_NIGHT, LINE_ITEM_DAY, LINE_ITEM_HOUR, LINE_ITEM_ITEM];\r\n\r\npropTypes.lineItemUnitType = oneOf(LISTING_UNIT_TYPES);\r\n\r\nconst requiredLineItemPropType = (props, propName, componentName) => {\r\n  const prop = props[propName];\r\n\r\n  if (!prop || prop === '') {\r\n    return new Error(`Missing line item code prop from ${componentName}.`);\r\n  }\r\n  if (!/^line-item\\/.+/.test(prop)) {\r\n    return new Error(`Invalid line item code value ${prop} passed to ${componentName}.`);\r\n  }\r\n};\r\n\r\npropTypes.lineItems = arrayOf(\r\n  shape({\r\n    code: requiredLineItemPropType,\r\n    includeFor: arrayOf(oneOf(['customer', 'provider'])).isRequired,\r\n    quantity: instanceOf(Decimal),\r\n    unitPrice: propTypes.money.isRequired,\r\n    lineTotal: propTypes.money.isRequired,\r\n    reversal: bool.isRequired,\r\n  })\r\n);\r\n\r\n// Denormalised transaction object\r\npropTypes.transaction = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('transaction').isRequired,\r\n  attributes: shape({\r\n    createdAt: instanceOf(Date),\r\n    processName: string.isRequired,\r\n    lastTransitionedAt: instanceOf(Date).isRequired,\r\n    lastTransition: oneOf(TRANSITIONS).isRequired,\r\n\r\n    // An inquiry won't need a total sum nor a booking so these are\r\n    // optional.\r\n    payinTotal: propTypes.money,\r\n    payoutTotal: propTypes.money,\r\n\r\n    lineItems: propTypes.lineItems,\r\n    transitions: arrayOf(propTypes.transition).isRequired,\r\n  }),\r\n  booking: propTypes.booking,\r\n  listing: propTypes.listing,\r\n  customer: propTypes.user,\r\n  provider: propTypes.user,\r\n  reviews: arrayOf(propTypes.review),\r\n});\r\n\r\n// Denormalised transaction message\r\npropTypes.message = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  type: propTypes.value('message').isRequired,\r\n  attributes: shape({\r\n    createdAt: instanceOf(Date).isRequired,\r\n    content: string.isRequired,\r\n  }).isRequired,\r\n  sender: propTypes.user,\r\n});\r\n\r\n// Pagination information in the response meta\r\npropTypes.pagination = shape({\r\n  page: number.isRequired,\r\n  perPage: number.isRequired,\r\n  totalItems: number,\r\n  totalPages: number,\r\n});\r\n\r\n// Search filter definition\r\npropTypes.filterConfig = arrayOf(\r\n  shape({\r\n    id: string.isRequired,\r\n    label: node,\r\n    type: string.isRequired,\r\n    group: oneOf(['primary', 'secondary']).isRequired,\r\n    queryParamNames: arrayOf(string).isRequired,\r\n    config: object,\r\n  }).isRequired\r\n);\r\n\r\n// Default search filters definition\r\npropTypes.defaultFiltersConfig = arrayOf(\r\n  shape({\r\n    key: string.isRequired,\r\n    schemaType: oneOf(['price', 'text', 'dates']).isRequired,\r\n    min: number,\r\n    max: number,\r\n    step: number,\r\n  }).isRequired\r\n);\r\n// Extended data config\r\npropTypes.listingFieldsConfig = arrayOf(\r\n  shape({\r\n    key: string.isRequired,\r\n    scope: string,\r\n    includeForListingTypes: arrayOf(string),\r\n    schemaType: oneOf(EXTENDED_DATA_SCHEMA_TYPES).isRequired,\r\n    enumOptions: arrayOf(\r\n      shape({\r\n        option: oneOfType([string, number]).isRequired,\r\n        label: string.isRequired,\r\n      })\r\n    ),\r\n    filterConfig: shape({\r\n      indexForSearch: bool,\r\n      label: string.isRequired,\r\n      group: oneOf(['primary', 'secondary']),\r\n      filterType: string,\r\n    }),\r\n    showConfig: shape({\r\n      label: string.isRequired,\r\n      isDetail: bool,\r\n    }),\r\n    saveConfig: shape({\r\n      label: string.isRequired,\r\n      placeholderMessage: string,\r\n      isRequired: bool,\r\n      requiredMessage: string,\r\n    }).isRequired,\r\n  })\r\n);\r\n\r\nconst sortConfigOptionWithLabel = shape({\r\n  key: oneOf(['createdAt', '-createdAt', 'price', '-price', 'relevance']).isRequired,\r\n  label: string.isRequired,\r\n  longLabel: string,\r\n});\r\n\r\nconst sortConfigOptionWithTranslationKey = shape({\r\n  key: oneOf(['createdAt', '-createdAt', 'price', '-price', 'relevance']).isRequired,\r\n  labelTranslationKey: string.isRequired,\r\n  labelTranslationKeyLong: string,\r\n});\r\n\r\npropTypes.sortConfig = shape({\r\n  active: bool,\r\n  queryParamName: oneOf(['sort']).isRequired,\r\n  relevanceKey: string.isRequired,\r\n  conflictingFilters: arrayOf(string),\r\n  options: arrayOf(oneOfType([sortConfigOptionWithLabel, sortConfigOptionWithTranslationKey])),\r\n});\r\n\r\nexport const ERROR_CODE_TRANSACTION_LISTING_NOT_FOUND = 'transaction-listing-not-found';\r\nexport const ERROR_CODE_TRANSACTION_INVALID_TRANSITION = 'transaction-invalid-transition';\r\nexport const ERROR_CODE_TRANSACTION_ALREADY_REVIEWED_BY_CUSTOMER =\r\n  'transaction-already-reviewed-by-customer';\r\nexport const ERROR_CODE_TRANSACTION_ALREADY_REVIEWED_BY_PROVIDER =\r\n  'transaction-already-reviewed-by-provider';\r\nexport const ERROR_CODE_TRANSACTION_BOOKING_TIME_NOT_AVAILABLE =\r\n  'transaction-booking-time-not-available';\r\nexport const ERROR_CODE_TRANSACTION_LISTING_INSUFFICIENT_STOCK =\r\n  'transaction-listing-insufficient-stock';\r\nexport const ERROR_CODE_PAYMENT_FAILED = 'transaction-payment-failed';\r\nexport const ERROR_CODE_CHARGE_ZERO_PAYIN = 'transaction-charge-zero-payin';\r\nexport const ERROR_CODE_CHARGE_ZERO_PAYOUT = 'transaction-charge-zero-payout';\r\nexport const ERROR_CODE_EMAIL_TAKEN = 'email-taken';\r\nexport const ERROR_CODE_EMAIL_NOT_FOUND = 'email-not-found';\r\nexport const ERROR_CODE_TOO_MANY_VERIFICATION_REQUESTS = 'email-too-many-verification-requests';\r\nexport const ERROR_CODE_UPLOAD_OVER_LIMIT = 'request-upload-over-limit';\r\nexport const ERROR_CODE_VALIDATION_INVALID_PARAMS = 'validation-invalid-params';\r\nexport const ERROR_CODE_VALIDATION_INVALID_VALUE = 'validation-invalid-value';\r\nexport const ERROR_CODE_NOT_FOUND = 'not-found';\r\nexport const ERROR_CODE_FORBIDDEN = 'forbidden';\r\nexport const ERROR_CODE_MISSING_STRIPE_ACCOUNT = 'transaction-missing-stripe-account';\r\nexport const ERROR_CODE_STOCK_OLD_TOTAL_MISMATCH = 'old-total-mismatch';\r\n\r\nconst ERROR_CODES = [\r\n  ERROR_CODE_TRANSACTION_LISTING_NOT_FOUND,\r\n  ERROR_CODE_TRANSACTION_INVALID_TRANSITION,\r\n  ERROR_CODE_TRANSACTION_ALREADY_REVIEWED_BY_CUSTOMER,\r\n  ERROR_CODE_TRANSACTION_ALREADY_REVIEWED_BY_PROVIDER,\r\n  ERROR_CODE_PAYMENT_FAILED,\r\n  ERROR_CODE_CHARGE_ZERO_PAYIN,\r\n  ERROR_CODE_CHARGE_ZERO_PAYOUT,\r\n  ERROR_CODE_EMAIL_TAKEN,\r\n  ERROR_CODE_EMAIL_NOT_FOUND,\r\n  ERROR_CODE_TOO_MANY_VERIFICATION_REQUESTS,\r\n  ERROR_CODE_UPLOAD_OVER_LIMIT,\r\n  ERROR_CODE_VALIDATION_INVALID_PARAMS,\r\n  ERROR_CODE_VALIDATION_INVALID_VALUE,\r\n  ERROR_CODE_NOT_FOUND,\r\n  ERROR_CODE_FORBIDDEN,\r\n  ERROR_CODE_MISSING_STRIPE_ACCOUNT,\r\n  ERROR_CODE_STOCK_OLD_TOTAL_MISMATCH,\r\n];\r\n\r\n// API error\r\npropTypes.apiError = shape({\r\n  id: propTypes.uuid.isRequired,\r\n  status: number.isRequired,\r\n  code: oneOf(ERROR_CODES).isRequired,\r\n  title: string.isRequired,\r\n  meta: object,\r\n});\r\n\r\npropTypes.assetDeliveryApiError = shape({\r\n  code: oneOf(ERROR_CODES).isRequired,\r\n  id: string.isRequired,\r\n  status: number.isRequired,\r\n  title: string.isRequired,\r\n});\r\n\r\n// Storable error prop type. (Error object should not be stored as it is.)\r\npropTypes.error = shape({\r\n  type: propTypes.value('error').isRequired,\r\n  name: string.isRequired,\r\n  message: string,\r\n  status: number,\r\n  statusText: string,\r\n  apiErrors: arrayOf(oneOfType([propTypes.apiError, propTypes.assetDeliveryApiError])),\r\n});\r\n\r\n// Options for showing just date or date and time on TimeRange and OrderBreakdown\r\nexport const DATE_TYPE_DATE = 'date';\r\nexport const DATE_TYPE_TIME = 'time';\r\nexport const DATE_TYPE_DATETIME = 'datetime';\r\n\r\npropTypes.dateType = oneOf([DATE_TYPE_DATE, DATE_TYPE_TIME, DATE_TYPE_DATETIME]);\r\n\r\nexport { propTypes };\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/throttle\");","import React, { Component as ReactComponent } from 'react';\r\nimport throttle from 'lodash/throttle';\r\n\r\n/**\r\n * A higher order component (HOC) that provides the current viewport\r\n * dimensions to the wrapped component as a `viewport` prop that has\r\n * the shape `{ width: 600, height: 400}`.\r\n */\r\nexport const withViewport = Component => {\r\n  // The resize event is flooded when the browser is resized. We'll\r\n  // use a small timeout to throttle changing the viewport since it\r\n  // will trigger rerendering.\r\n  const WAIT_MS = 100;\r\n\r\n  class WithViewportComponent extends ReactComponent {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = { width: 0, height: 0 };\r\n      this.handleWindowResize = this.handleWindowResize.bind(this);\r\n      this.setViewport = throttle(this.setViewport.bind(this), WAIT_MS);\r\n    }\r\n    componentDidMount() {\r\n      this.setViewport();\r\n      window.addEventListener('resize', this.handleWindowResize);\r\n      window.addEventListener('orientationchange', this.handleWindowResize);\r\n    }\r\n    componentWillUnmount() {\r\n      window.removeEventListener('resize', this.handleWindowResize);\r\n      window.removeEventListener('orientationchange', this.handleWindowResize);\r\n    }\r\n    handleWindowResize() {\r\n      this.setViewport();\r\n    }\r\n    setViewport() {\r\n      this.setState({\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n      });\r\n    }\r\n    render() {\r\n      const viewport = this.state;\r\n      const props = { ...this.props, viewport };\r\n      return <Component {...props} />;\r\n    }\r\n  }\r\n\r\n  WithViewportComponent.displayName = `withViewport(${Component.displayName || Component.name})`;\r\n\r\n  return WithViewportComponent;\r\n};\r\n\r\n/**\r\n * A higher order component (HOC) that provides dimensions to the wrapped component as a\r\n * `dimensions` prop that has the shape `{ width: 600, height: 400}`.\r\n *\r\n * @param {React.Component} Component to be wrapped by this HOC\r\n * @param {Object} options pass in options like maxWidth and maxHeight.\r\n *\r\n * @return {Object} HOC component which knows its dimensions\r\n */\r\nexport const withDimensions = (Component, options = {}) => {\r\n  // The resize event is flooded when the browser is resized. We'll\r\n  // use a small timeout to throttle changing the viewport since it\r\n  // will trigger rerendering.\r\n  const THROTTLE_WAIT_MS = 200;\r\n  // First render default wait after mounting (small wait for styled paint)\r\n  const RENDER_WAIT_MS = 100;\r\n\r\n  class WithDimensionsComponent extends ReactComponent {\r\n    constructor(props) {\r\n      super(props);\r\n      this.element = null;\r\n      this.defaultRenderTimeout = null;\r\n\r\n      this.state = { width: 0, height: 0 };\r\n\r\n      this.handleWindowResize = throttle(this.handleWindowResize.bind(this), THROTTLE_WAIT_MS);\r\n      this.setDimensions = this.setDimensions.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n      window.addEventListener('resize', this.handleWindowResize);\r\n      window.addEventListener('orientationchange', this.handleWindowResize);\r\n\r\n      this.defaultRenderTimeout = window.setTimeout(() => {\r\n        this.setDimensions();\r\n      }, RENDER_WAIT_MS);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      window.removeEventListener('resize', this.handleWindowResize);\r\n      window.removeEventListener('orientationchange', this.handleWindowResize);\r\n      window.clearTimeout(this.defaultRenderTimeout);\r\n    }\r\n\r\n    handleWindowResize() {\r\n      window.requestAnimationFrame(() => {\r\n        this.setDimensions();\r\n      });\r\n    }\r\n\r\n    setDimensions() {\r\n      this.setState(prevState => {\r\n        const { clientWidth, clientHeight } = this.element || { clientWidth: 0, clientHeight: 0 };\r\n        return { width: clientWidth, height: clientHeight };\r\n      });\r\n    }\r\n\r\n    render() {\r\n      // Dimensions from state (i.e. dimension after previous resize)\r\n      // These are needed for component rerenders\r\n      const { width, height } = this.state;\r\n\r\n      // Current dimensions from element reference\r\n      const { clientWidth, clientHeight } = this.element || { clientWidth: 0, clientHeight: 0 };\r\n      const hasDimensions =\r\n        (width !== 0 && height !== 0) || (clientWidth !== 0 && clientHeight !== 0);\r\n\r\n      // clientWidth and clientHeight\r\n      const currentDimensions =\r\n        clientWidth !== 0 && clientHeight !== 0\r\n          ? { width: clientWidth, height: clientHeight }\r\n          : width !== 0 && height !== 0\r\n          ? { width, height }\r\n          : {};\r\n\r\n      const props = { ...this.props, dimensions: currentDimensions };\r\n\r\n      // lazyLoadWithDimensions HOC needs to take all given space\r\n      // unless max dimensions are provided through options.\r\n      const { maxWidth, maxHeight } = options;\r\n      const maxWidthMaybe = maxWidth ? { maxWidth } : {};\r\n      const maxHeightMaybe = maxHeight ? { maxHeight } : {};\r\n      const style =\r\n        maxWidth || maxHeight\r\n          ? { width: '100%', height: '100%', ...maxWidthMaybe, ...maxHeightMaybe }\r\n          : { position: 'absolute', top: 0, right: 0, bottom: 0, left: 0 };\r\n\r\n      return (\r\n        <div\r\n          ref={element => {\r\n            this.element = element;\r\n          }}\r\n          style={style}\r\n        >\r\n          {hasDimensions ? <Component {...props} /> : null}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  WithDimensionsComponent.displayName = `withDimensions(${Component.displayName ||\r\n    Component.name})`;\r\n\r\n  return WithDimensionsComponent;\r\n};\r\n\r\n/**\r\n * A higher order component (HOC) that lazy loads the current element and provides\r\n * dimensions to the wrapped component as a `dimensions` prop that has\r\n * the shape `{ width: 600, height: 400}`.\r\n *\r\n * @param {React.Component} Component to be wrapped by this HOC\r\n * @param {Object} options pass in options like maxWidth and maxHeight. To load component after\r\n * initial rendering has passed or after user has interacted with the window (e.g. scrolled),\r\n * use`loadAfterInitialRendering: 1500` (value should be milliseconds).\r\n *\r\n * @return {Object} HOC component which knows its dimensions\r\n */\r\nexport const lazyLoadWithDimensions = (Component, options = {}) => {\r\n  // The resize event is flooded when the browser is resized. We'll\r\n  // use a small timeout to throttle changing the viewport since it\r\n  // will trigger rerendering.\r\n  const THROTTLE_WAIT_MS = 200;\r\n  // First render default wait after mounting (small wait for styled paint)\r\n  const RENDER_WAIT_MS = 100;\r\n\r\n  // Scrolling and other events that affect to viewport location have this safety margin\r\n  // for lazy loading\r\n  const NEAR_VIEWPORT_MARGIN = 50;\r\n\r\n  class LazyLoadWithDimensionsComponent extends ReactComponent {\r\n    constructor(props) {\r\n      super(props);\r\n      this.element = null;\r\n      this.defaultRenderTimeout = null;\r\n      this.afterRenderTimeout = null;\r\n\r\n      this.state = { width: 0, height: 0 };\r\n\r\n      this.handleWindowResize = throttle(this.handleWindowResize.bind(this), THROTTLE_WAIT_MS);\r\n      this.isElementNearViewport = this.isElementNearViewport.bind(this);\r\n      this.setDimensions = this.setDimensions.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n      window.addEventListener('scroll', this.handleWindowResize);\r\n      window.addEventListener('resize', this.handleWindowResize);\r\n      window.addEventListener('orientationchange', this.handleWindowResize);\r\n\r\n      this.defaultRenderTimeout = window.setTimeout(() => {\r\n        if (this.isElementNearViewport(0)) {\r\n          this.setDimensions();\r\n        } else {\r\n          const loadAfterInitialRendering = options.loadAfterInitialRendering;\r\n          if (typeof loadAfterInitialRendering === 'number') {\r\n            this.afterRenderTimeout = window.setTimeout(() => {\r\n              window.requestAnimationFrame(() => {\r\n                this.setDimensions();\r\n              });\r\n            }, loadAfterInitialRendering);\r\n          }\r\n        }\r\n      }, RENDER_WAIT_MS);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      window.removeEventListener('scroll', this.handleWindowResize);\r\n      window.removeEventListener('resize', this.handleWindowResize);\r\n      window.removeEventListener('orientationchange', this.handleWindowResize);\r\n      window.clearTimeout(this.defaultRenderTimeout);\r\n\r\n      if (this.afterRenderTimeout) {\r\n        window.clearTimeout(this.afterRenderTimeout);\r\n      }\r\n    }\r\n\r\n    handleWindowResize() {\r\n      const shouldLoadToImproveScrolling = typeof options.loadAfterInitialRendering === 'number';\r\n      if (this.isElementNearViewport(NEAR_VIEWPORT_MARGIN) || shouldLoadToImproveScrolling) {\r\n        window.requestAnimationFrame(() => {\r\n          this.setDimensions();\r\n        });\r\n      }\r\n    }\r\n\r\n    setDimensions() {\r\n      this.setState(prevState => {\r\n        const { clientWidth, clientHeight } = this.element || { clientWidth: 0, clientHeight: 0 };\r\n        return { width: clientWidth, height: clientHeight };\r\n      });\r\n    }\r\n\r\n    isElementNearViewport(safetyBoundary) {\r\n      if (this.element) {\r\n        const rect = this.element.getBoundingClientRect();\r\n        const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n        return (\r\n          (rect.top >= 0 && rect.top <= viewportHeight + safetyBoundary) ||\r\n          (rect.bottom >= -1 * safetyBoundary && rect.bottom <= viewportHeight)\r\n        );\r\n      }\r\n      return false;\r\n    }\r\n\r\n    render() {\r\n      const dimensions = this.state;\r\n      const { width, height } = dimensions;\r\n      const props = { ...this.props, dimensions };\r\n\r\n      // lazyLoadWithDimensions HOC needs to take all given space\r\n      // unless max dimensions are provided through options.\r\n      const { maxWidth, maxHeight } = options;\r\n      const maxWidthMaybe = maxWidth ? { maxWidth } : {};\r\n      const maxHeightMaybe = maxHeight ? { maxHeight } : {};\r\n      const style =\r\n        maxWidth || maxHeight\r\n          ? { width: '100%', height: '100%', ...maxWidthMaybe, ...maxHeightMaybe }\r\n          : { position: 'absolute', top: 0, right: 0, bottom: 0, left: 0 };\r\n\r\n      return (\r\n        <div\r\n          ref={element => {\r\n            this.element = element;\r\n          }}\r\n          style={style}\r\n        >\r\n          {width !== 0 && height !== 0 ? <Component {...props} /> : null}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  LazyLoadWithDimensionsComponent.displayName = `lazyLoadWithDimensions(${Component.displayName ||\r\n    Component.name})`;\r\n\r\n  return LazyLoadWithDimensionsComponent;\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"query-string\");","import queryString from 'query-string';\r\nimport { types as sdkTypes } from './sdkLoader';\r\n\r\nconst { LatLng, LatLngBounds } = sdkTypes;\r\n\r\nexport const LISTING_PAGE_PENDING_APPROVAL_VARIANT = 'pending-approval';\r\nexport const LISTING_PAGE_DRAFT_VARIANT = 'draft';\r\n\r\nexport const LISTING_PAGE_PARAM_TYPE_NEW = 'new';\r\nexport const LISTING_PAGE_PARAM_TYPE_DRAFT = 'draft';\r\nexport const LISTING_PAGE_PARAM_TYPE_EDIT = 'edit';\r\nexport const LISTING_PAGE_PARAM_TYPES = [\r\n  LISTING_PAGE_PARAM_TYPE_NEW,\r\n  LISTING_PAGE_PARAM_TYPE_DRAFT,\r\n  LISTING_PAGE_PARAM_TYPE_EDIT,\r\n];\r\n\r\n// Create slug from random texts\r\n// From Gist thread: https://gist.github.com/mathewbyrne/1280286\r\nexport const createSlug = str => {\r\n  let text = str\r\n    .toString()\r\n    .toLowerCase()\r\n    .trim();\r\n\r\n  const sets = [\r\n    { to: 'a', from: '' },\r\n    { to: 'c', from: '' },\r\n    { to: 'd', from: '' },\r\n    { to: 'e', from: '' },\r\n    { to: 'g', from: '' },\r\n    { to: 'h', from: '' },\r\n    { to: 'i', from: '' },\r\n    { to: 'j', from: '' },\r\n    { to: 'ij', from: '' },\r\n    { to: 'k', from: '' },\r\n    { to: 'l', from: '' },\r\n    { to: 'm', from: '' },\r\n    { to: 'n', from: '' },\r\n    { to: 'o', from: '' },\r\n    { to: 'oe', from: '' },\r\n    { to: 'p', from: '' },\r\n    { to: 'r', from: '' },\r\n    { to: 's', from: '' },\r\n    { to: 't', from: '' },\r\n    { to: 'u', from: '' },\r\n    { to: 'w', from: '' },\r\n    { to: 'x', from: '' },\r\n    { to: 'y', from: '' },\r\n    { to: 'z', from: '' },\r\n    { to: '-', from: \"/_,:;'\" },\r\n  ];\r\n\r\n  sets.forEach(set => {\r\n    text = text.replace(new RegExp(`[${set.from}]`, 'gi'), set.to);\r\n  });\r\n\r\n  const slug = encodeURIComponent(\r\n    text\r\n      .replace(/\\s+/g, '-') // Replace spaces with -\r\n      .replace(/[^\\w-]+/g, '') // Remove all non-word chars\r\n      .replace(/--+/g, '-') // Replace multiple - with single -\r\n      .replace(/^-+/, '') // Trim - from start of text\r\n      .replace(/-+$/, '') // Trim - from end of text\r\n  );\r\n\r\n  return slug.length > 0 ? slug : 'no-slug';\r\n};\r\n\r\n/**\r\n * Parse float from a string\r\n *\r\n * @param {String} str - string to parse\r\n *\r\n * @return {Number|null} number parsed from the string, null if not a number\r\n */\r\nexport const parseFloatNum = str => {\r\n  const trimmed = str && typeof str.trim === 'function' ? str.trim() : null;\r\n  if (!trimmed) {\r\n    return null;\r\n  }\r\n  const num = parseFloat(trimmed);\r\n  const isNumber = !isNaN(num);\r\n  const isFullyParsedNum = isNumber && num.toString() === trimmed;\r\n  return isFullyParsedNum ? num : null;\r\n};\r\n\r\n/**\r\n * Encode a location to use in a URL\r\n *\r\n * @param {LatLng} location - location instance to encode\r\n *\r\n * @return {String} location coordinates separated by a comma\r\n */\r\nexport const encodeLatLng = location => `${location.lat},${location.lng}`;\r\n\r\n/**\r\n * Decode a location from a string\r\n *\r\n * @param {String} str - string encoded with `encodeLatLng`\r\n *\r\n * @return {LatLng|null} location instance, null if could not parse\r\n */\r\nexport const decodeLatLng = str => {\r\n  const parts = str.split(',');\r\n  if (parts.length !== 2) {\r\n    return null;\r\n  }\r\n  const lat = parseFloatNum(parts[0]);\r\n  const lng = parseFloatNum(parts[1]);\r\n  if (lat === null || lng === null) {\r\n    return null;\r\n  }\r\n  return new LatLng(lat, lng);\r\n};\r\n\r\n/**\r\n * Encode a location bounds to use in a URL\r\n *\r\n * @param {LatLngBounds} bounds - bounds instance to encode\r\n *\r\n * @return {String} bounds coordinates separated by a comma\r\n */\r\nexport const encodeLatLngBounds = bounds => `${encodeLatLng(bounds.ne)},${encodeLatLng(bounds.sw)}`;\r\n\r\n/**\r\n * Decode a location bounds from a string\r\n *\r\n * @param {String} str - string encoded with `encodeLatLngBounds`\r\n *\r\n * @return {LatLngBounds|null} location bounds instance, null if could not parse\r\n */\r\nexport const decodeLatLngBounds = str => {\r\n  const parts = str.split(',');\r\n  if (parts.length !== 4) {\r\n    return null;\r\n  }\r\n  const ne = decodeLatLng(`${parts[0]},${parts[1]}`);\r\n  const sw = decodeLatLng(`${parts[2]},${parts[3]}`);\r\n  if (ne === null || sw === null) {\r\n    return null;\r\n  }\r\n  return new LatLngBounds(ne, sw);\r\n};\r\n\r\n// Serialise SDK types in given object values into strings\r\nconst serialiseSdkTypes = obj =>\r\n  Object.keys(obj).reduce((result, key) => {\r\n    const val = obj[key];\r\n    /* eslint-disable no-param-reassign */\r\n    if (val instanceof LatLngBounds) {\r\n      result[key] = encodeLatLngBounds(val);\r\n    } else if (val instanceof LatLng) {\r\n      result[key] = encodeLatLng(val);\r\n    } else {\r\n      result[key] = val;\r\n    }\r\n    /* eslint-enable no-param-reassign */\r\n    return result;\r\n  }, {});\r\n\r\n/**\r\n * Serialise given object into a string that can be used in a\r\n * URL. Encode SDK types into a format that can be parsed with `parse`\r\n * defined below.\r\n *\r\n * @param {Object} params - object with strings/numbers/booleans or\r\n * SDK types as values\r\n *\r\n * @return {String} query string with sorted keys and serialised\r\n * values, `undefined` and `null` values are removed\r\n */\r\nexport const stringify = params => {\r\n  const serialised = serialiseSdkTypes(params);\r\n  const cleaned = Object.keys(serialised).reduce((result, key) => {\r\n    const val = serialised[key];\r\n    /* eslint-disable no-param-reassign */\r\n    if (val !== null) {\r\n      result[key] = val;\r\n    }\r\n    /* eslint-enable no-param-reassign */\r\n    return result;\r\n  }, {});\r\n  return queryString.stringify(cleaned);\r\n};\r\n\r\n/**\r\n * Parse a URL search query. Converts numeric values into numbers,\r\n * 'true' and 'false' as booleans, and serialised LatLng and\r\n * LatLngBounds into respective instances based on given options.\r\n *\r\n * @param {String} search - query string to parse, optionally with a\r\n * leading '?' or '#' character\r\n *\r\n * @param {Object} options - Options for parsing:\r\n *\r\n * - latlng {Array<String} keys to parse as LatLng instances, null if\r\n *   not able to parse\r\n * - latlngBounds {Array<String} keys to parse as LatLngBounds\r\n *   instances, null if not able to parse\r\n *\r\n * @return {Object} key/value pairs parsed from the given String\r\n */\r\nexport const parse = (search, options = {}) => {\r\n  const { latlng = [], latlngBounds = [] } = options;\r\n  const params = queryString.parse(search);\r\n  return Object.keys(params).reduce((result, key) => {\r\n    const val = params[key];\r\n    /* eslint-disable no-param-reassign */\r\n    if (latlng.includes(key)) {\r\n      result[key] = decodeLatLng(val);\r\n    } else if (latlngBounds.includes(key)) {\r\n      result[key] = decodeLatLngBounds(val);\r\n    } else if (val === 'true') {\r\n      result[key] = true;\r\n    } else if (val === 'false') {\r\n      result[key] = false;\r\n    } else {\r\n      const num = parseFloatNum(val);\r\n      result[key] = num === null ? val : num;\r\n    }\r\n    /* eslint-enable no-param-reassign */\r\n    return result;\r\n  }, {});\r\n};\r\n\r\n/**\r\n * Create Twitter page url from twitterHandle\r\n *\r\n * @param {String} twitterHandle - handle is used for generating Twitter page URL\r\n *\r\n * @return {String} twitterPageURL\r\n */\r\nexport const twitterPageURL = twitterHandle => {\r\n  if (twitterHandle && twitterHandle.charAt(0) === '@') {\r\n    return `https://twitter.com/${twitterHandle.substring(1)}`;\r\n  } else if (twitterHandle) {\r\n    return `https://twitter.com/${twitterHandle}`;\r\n  }\r\n  return null;\r\n};\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/toPairs\");","import toPairs from 'lodash/toPairs';\r\nimport { types as sdkTypes } from './sdkLoader';\r\nimport { diffInTime } from './dates';\r\n\r\nconst { LatLng, Money } = sdkTypes;\r\n\r\nexport const PASSWORD_MIN_LENGTH = 8;\r\nexport const PASSWORD_MAX_LENGTH = 256;\r\n\r\nconst isNonEmptyString = val => {\r\n  return typeof val === 'string' && val.trim().length > 0;\r\n};\r\n\r\n/**\r\n * Validator functions and helpers for Final Forms\r\n */\r\n\r\n// Final Form expects and undefined value for a successful validation\r\nconst VALID = undefined;\r\n\r\nexport const required = message => value => {\r\n  if (typeof value === 'undefined' || value === null) {\r\n    // undefined or null values are invalid\r\n    return message;\r\n  }\r\n  if (typeof value === 'string') {\r\n    // string must be nonempty when trimmed\r\n    return isNonEmptyString(value) ? VALID : message;\r\n  }\r\n  return VALID;\r\n};\r\n\r\nexport const requiredStringNoTrim = message => value => {\r\n  return typeof value === 'string' && value.length > 0 ? VALID : message;\r\n};\r\n\r\n// DEPRECATED in favor of required\r\nexport const requiredBoolean = message => value => {\r\n  return typeof value === 'boolean' ? VALID : message;\r\n};\r\n\r\n// DEPRECATED in favor of required\r\nexport const requiredAndNonEmptyString = message => value => {\r\n  return isNonEmptyString(value) ? VALID : message;\r\n};\r\n\r\nexport const requiredFieldArrayCheckbox = message => value => {\r\n  if (!value) {\r\n    return message;\r\n  }\r\n\r\n  const entries = toPairs(value);\r\n  const hasSelectedValues = entries.filter(e => !!e[1]).length > 0;\r\n  return hasSelectedValues ? VALID : message;\r\n};\r\n\r\nexport const minLength = (message, minimumLength) => value => {\r\n  const hasLength = value && typeof value.length === 'number';\r\n  return hasLength && value.length >= minimumLength ? VALID : message;\r\n};\r\n\r\nexport const maxLength = (message, maximumLength) => value => {\r\n  if (!value) {\r\n    return VALID;\r\n  }\r\n  const hasLength = value && typeof value.length === 'number';\r\n  return hasLength && value.length <= maximumLength ? VALID : message;\r\n};\r\n\r\nexport const nonEmptyArray = message => value => {\r\n  return value && Array.isArray(value) && value.length > 0 ? VALID : message;\r\n};\r\n\r\nexport const autocompleteSearchRequired = message => value => {\r\n  return value && value.search ? VALID : message;\r\n};\r\n\r\nexport const autocompletePlaceSelected = message => value => {\r\n  const selectedPlaceIsValid =\r\n    value &&\r\n    value.selectedPlace &&\r\n    value.selectedPlace.address &&\r\n    value.selectedPlace.origin instanceof LatLng;\r\n  return selectedPlaceIsValid ? VALID : message;\r\n};\r\n\r\nexport const bookingDateRequired = inValidDShwcseessage => value => {\r\n  const dateIsValid = value && value.date instanceof Date;\r\n  return !dateIsValid ? inValidDShwcseessage : VALID;\r\n};\r\n\r\nexport const bookingDatesRequired = (inValidStartDShwcseessage, inValidEndDShwcseessage) => value => {\r\n  const startDateIsValid = value && value.startDate instanceof Date;\r\n  const endDateIsValid = value && value.endDate instanceof Date;\r\n\r\n  if (!startDateIsValid) {\r\n    return inValidStartDShwcseessage;\r\n  } else if (!endDateIsValid) {\r\n    return inValidEndDShwcseessage;\r\n  } else {\r\n    return VALID;\r\n  }\r\n};\r\n\r\n// Source: http://www.regular-expressions.info/email.html\r\n// See the link above for an explanation of the tradeoffs.\r\nconst EMAIL_RE = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i;\r\n\r\nexport const emailFormatValid = message => value => {\r\n  return value && EMAIL_RE.test(value) ? VALID : message;\r\n};\r\n\r\nexport const moneySubUnitAmountAtLeast = (message, minValue) => value => {\r\n  return value instanceof Money && value.amount >= minValue ? VALID : message;\r\n};\r\n\r\nconst parseNum = str => {\r\n  const num = Number.parseInt(str, 10);\r\n  return Number.isNaN(num) ? null : num;\r\n};\r\n\r\nexport const numberAtLeast = (message, minNumber) => value => {\r\n  const valueNum = parseNum(value);\r\n  return typeof valueNum === 'number' && valueNum >= minNumber ? VALID : message;\r\n};\r\n\r\nexport const ageAtLeast = (message, minYears) => value => {\r\n  const { year, month, day } = value;\r\n  const dayNum = parseNum(day);\r\n  const monthNum = parseNum(month);\r\n  const yearNum = parseNum(year);\r\n\r\n  // day, month, and year needs to be numbers\r\n  if (dayNum !== null && monthNum !== null && yearNum !== null) {\r\n    const now = new Date();\r\n    const age = new Date(yearNum, monthNum - 1, dayNum);\r\n    const ageInYears = diffInTime(now, age, 'years', true);\r\n\r\n    return age && age instanceof Date && ageInYears >= minYears ? VALID : message;\r\n  }\r\n  return message;\r\n};\r\n\r\nexport const validBusinessURL = message => value => {\r\n  if (typeof value === 'undefined' || value === null) {\r\n    return message;\r\n  }\r\n\r\n  const disallowedChars = /[^-A-Za-z0-9+&@#/%?=~_|!:,.;()]/;\r\n  const protocolTokens = value.split(':');\r\n  const includesProtocol = protocolTokens.length > 1;\r\n  const usesHttpProtocol = includesProtocol && !!protocolTokens[0].match(/^(https?)/);\r\n\r\n  const invalidCharacters = !!value.match(disallowedChars);\r\n  const invalidProtocol = !(usesHttpProtocol || !includesProtocol);\r\n  // Stripe checks against example.com\r\n  const isExampleDotCom = !!value.match(/^(https?:\\/\\/example\\.com|example\\.com)/);\r\n  const isLocalhost = !!value.match(/^(https?:\\/\\/localhost($|:|\\/)|localhost($|:|\\/))/);\r\n  return invalidCharacters || invalidProtocol || isExampleDotCom || isLocalhost ? message : VALID;\r\n};\r\n\r\nexport const validSsnLast4 = message => value => {\r\n  return value.length === 4 ? VALID : message;\r\n};\r\n\r\nexport const validHKID = message => value => {\r\n  // Accept value 000000000 for testing Stripe\r\n  if (value.length === 9 && value.match(/([0]{9})/)) {\r\n    return VALID;\r\n  }\r\n\r\n  // HKID format example: AB364912(5)\r\n  // ID can start with one or two letters and the check digit in the end can be in brackets or not\r\n  if (value.length < 8) {\r\n    return message;\r\n  }\r\n\r\n  // Handle possible brackets in value\r\n  if (value.charAt(value.length - 3) === '(' && value.charAt(value.length - 1) === ')') {\r\n    value = value.substring(0, value.length - 3) + value.charAt(value.length - 2);\r\n  }\r\n  value = value.toUpperCase();\r\n\r\n  // Check that pattern is correct and split value to array\r\n  const hkidPattern = /^([A-Z]{1,2})([0-9]{6})([A0-9])$/;\r\n  const matchArray = value.match(hkidPattern);\r\n\r\n  if (!matchArray) {\r\n    return message;\r\n  }\r\n\r\n  const charPart = matchArray[1];\r\n  const numPart = matchArray[2];\r\n  const checkDigit = matchArray[3];\r\n\r\n  // Calculate the checksum for character part.\r\n  // Transfer letters to numbers so that A=10, B=11, C=12 etc.\r\n  // If there is only one letter in the ID use 36 as the first value\r\n  // Total calculation is weighted so that 1st digit is x9, 2nd digit x8, 3rd digit x7 etc.\r\n\r\n  const strValidChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n  let checkSum = 0;\r\n\r\n  if (charPart.length === 2) {\r\n    checkSum += 9 * (10 + strValidChars.indexOf(charPart.charAt(0)));\r\n    checkSum += 8 * (10 + strValidChars.indexOf(charPart.charAt(1)));\r\n  } else {\r\n    checkSum += 9 * 36;\r\n    checkSum += 8 * (10 + strValidChars.indexOf(charPart));\r\n  }\r\n\r\n  // Calculate the checksum for numeric part\r\n\r\n  for (let i = 0, j = 7; i < numPart.length; i++, j--) {\r\n    checkSum += j * numPart.charAt(i);\r\n  }\r\n\r\n  // Verify the check digit\r\n  const remaining = checkSum % 11;\r\n  let verify = remaining === 0 ? 0 : 11 - remaining;\r\n  verify = verify.toString();\r\n  const isValid = verify === checkDigit || (verify === 10 && checkDigit === 'A');\r\n\r\n  return isValid ? VALID : message;\r\n};\r\n\r\nexport const validSGID = message => value => {\r\n  return value.length === 9 ? VALID : message;\r\n};\r\n\r\nexport const composeValidators = (...validators) => value =>\r\n  validators.reduce((error, validator) => error || validator(value), VALID);\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LinkedLogo_root__0EOnt\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalContainer\":\"OrderPanel_modalContainer__c19MJ marketplaceModalInMobileBaseStyles\",\"modalHeading\":\"OrderPanel_modalHeading__kSCZu\",\"heading\":\"OrderPanel_heading__e0qw2\",\"price\":\"OrderPanel_price__apnHP h4\",\"perUnit\":\"OrderPanel_perUnit__UZpAD h4\",\"author\":\"OrderPanel_author__QSgEy p\",\"providerAvatar\":\"OrderPanel_providerAvatar__+0kDO\",\"providerNamePlain\":\"OrderPanel_providerNamePlain__2yzup\",\"providerNameLinked\":\"OrderPanel_providerNameLinked__xRTLh\",\"orderHeading\":\"OrderPanel_orderHeading__egulG\",\"orderTitle\":\"OrderPanel_orderTitle__6p0tf\",\"orderHelp\":\"OrderPanel_orderHelp__YzlOV h5\",\"bookingForm\":\"OrderPanel_bookingForm__ptO-z\",\"openOrderForm\":\"OrderPanel_openOrderForm__FFxTq\",\"priceContainerInCTA\":\"OrderPanel_priceContainerInCTA__rxWP7\",\"priceContainer\":\"OrderPanel_priceContainer__0dhc9\",\"priceValue\":\"OrderPanel_priceValue__KO4cA h3\",\"perUnitInCTA\":\"OrderPanel_perUnitInCTA__ml4Tj marketplaceTinyFontStyles\",\"closedListingButton\":\"OrderPanel_closedListingButton__zpzA1\",\"receipt\":\"OrderPanel_receipt__V1h1S\",\"error\":\"OrderPanel_error__4Btxb h4\",\"errorSidebar\":\"OrderPanel_errorSidebar__Dd8F9\"};","module.exports = require(\"@fortawesome/free-solid-svg-icons\");","module.exports = require(\"@fortawesome/react-fontawesome\");","module.exports = require(\"classnames\");","module.exports = require(\"decimal.js\");","module.exports = require(\"final-form\");","module.exports = require(\"final-form-arrays\");","module.exports = require(\"invariant\");","module.exports = require(\"js-cookie\");","module.exports = require(\"lodash\");","module.exports = require(\"lodash/debounce\");","module.exports = require(\"lodash/difference\");","module.exports = require(\"lodash/differenceBy\");","module.exports = require(\"lodash/dropWhile\");","module.exports = require(\"lodash/groupBy\");","module.exports = require(\"lodash/intersection\");","module.exports = require(\"lodash/isEmpty\");","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"lodash/mapValues\");","module.exports = require(\"lodash/omit\");","module.exports = require(\"lodash/pick\");","module.exports = require(\"lodash/pickBy\");","module.exports = require(\"lodash/reduce\");","module.exports = require(\"lodash/truncate\");","module.exports = require(\"moment\");","module.exports = require(\"moment-timezone/builds/moment-timezone-with-data-10-year-range.min\");","module.exports = require(\"moment/locale/de\");","module.exports = require(\"moment/locale/es\");","module.exports = require(\"moment/locale/fi\");","module.exports = require(\"moment/locale/fr\");","module.exports = require(\"moment/locale/nl\");","module.exports = require(\"moment/min/locales.min\");","module.exports = require(\"prop-types\");","module.exports = require(\"react\");","module.exports = require(\"react-dates\");","module.exports = require(\"react-dates/initialize\");","module.exports = require(\"react-dom\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-final-form\");","module.exports = require(\"react-final-form-arrays\");","module.exports = require(\"react-helmet-async\");","module.exports = require(\"react-image-gallery\");","module.exports = require(\"react-intl\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"redux\");","module.exports = require(\"rehype-react\");","module.exports = require(\"rehype-sanitize\");","module.exports = require(\"remark-parse\");","module.exports = require(\"remark-rehype\");","module.exports = require(\"sharetribe-flex-sdk\");","module.exports = require(\"smoothscroll-polyfill\");","module.exports = require(\"unified\");","module.exports = require(\"@loadable/component\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","__webpack_require__.F = {};\n__webpack_require__.E = (chunkId) => {\n\tObject.keys(__webpack_require__.F).map((key) => {\n\t\t__webpack_require__.F[key](chunkId);\n\t});\n}","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + ({\"13\":\"LandingPage\",\"102\":\"ListingPageCoverPhoto\",\"125\":\"FieldDateRangeController\",\"173\":\"TransactionPage\",\"190\":\"BookingTimeForm\",\"319\":\"ProfileSettingsPage\",\"326\":\"ProductOrderForm\",\"352\":\"CheckoutPage\",\"383\":\"Topbar\",\"385\":\"PasswordChangePage\",\"407\":\"InquiryWithoutPaymentForm\",\"412\":\"SearchPageWithMap\",\"449\":\"PasswordResetPage\",\"460\":\"CMSPage\",\"464\":\"TermsOfServicePage\",\"470\":\"PageBuilder\",\"500\":\"ProfilePage\",\"510\":\"ListingPageCarousel\",\"534\":\"SearchPageWithGrid\",\"651\":\"ContactDetailsPage\",\"679\":\"FieldDateInput\",\"697\":\"PaymentMethodsPage\",\"711\":\"StripePayoutPage\",\"735\":\"BookingDatesForm\",\"756\":\"PrivacyPolicyPage\",\"778\":\"AuthenticationPage\",\"794\":\"FieldDateRangeInput\",\"803\":\"ManageListingsPage\",\"863\":\"LocationAutocompleteInputImpl\",\"904\":\"InboxPage\",\"920\":\"StyleguidePage\",\"922\":\"EmailVerificationPage\",\"946\":\"PasswordRecoveryPage\",\"981\":\"EditListingPage\"}[chunkId] || chunkId) + \".\" + {\"13\":\"bd3023b0\",\"102\":\"3a8edce4\",\"105\":\"db41e6ca\",\"125\":\"41b73383\",\"173\":\"2f8fc762\",\"190\":\"5b142633\",\"194\":\"0ce93b81\",\"314\":\"e2ae2f35\",\"319\":\"813c404e\",\"326\":\"67c94d42\",\"330\":\"9f7f4afb\",\"352\":\"e3ae9229\",\"383\":\"1dadbcb2\",\"385\":\"3be3e04a\",\"407\":\"2f145d34\",\"412\":\"6a5d350e\",\"449\":\"32994669\",\"460\":\"babb5118\",\"464\":\"e259c38a\",\"470\":\"cf97d4d3\",\"500\":\"47bbd0eb\",\"501\":\"4e08711b\",\"510\":\"5b293141\",\"534\":\"746aeab0\",\"651\":\"aba51db5\",\"661\":\"66b62f7d\",\"679\":\"e0740a3f\",\"697\":\"79295d4d\",\"711\":\"b6d51940\",\"735\":\"da137806\",\"736\":\"d39fe946\",\"756\":\"7dd2a35a\",\"760\":\"d0e6e624\",\"778\":\"aac97f7a\",\"794\":\"98488a01\",\"803\":\"650a55b6\",\"863\":\"e86f1516\",\"904\":\"fe9b162e\",\"920\":\"619a13fb\",\"922\":\"72305ea3\",\"946\":\"657037ee\",\"981\":\"245ae7f2\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/css/\" + ({\"13\":\"LandingPage\",\"102\":\"ListingPageCoverPhoto\",\"125\":\"FieldDateRangeController\",\"173\":\"TransactionPage\",\"190\":\"BookingTimeForm\",\"319\":\"ProfileSettingsPage\",\"326\":\"ProductOrderForm\",\"352\":\"CheckoutPage\",\"383\":\"Topbar\",\"385\":\"PasswordChangePage\",\"407\":\"InquiryWithoutPaymentForm\",\"412\":\"SearchPageWithMap\",\"449\":\"PasswordResetPage\",\"464\":\"TermsOfServicePage\",\"470\":\"PageBuilder\",\"500\":\"ProfilePage\",\"510\":\"ListingPageCarousel\",\"651\":\"ContactDetailsPage\",\"679\":\"FieldDateInput\",\"697\":\"PaymentMethodsPage\",\"711\":\"StripePayoutPage\",\"735\":\"BookingDatesForm\",\"756\":\"PrivacyPolicyPage\",\"778\":\"AuthenticationPage\",\"794\":\"FieldDateRangeInput\",\"803\":\"ManageListingsPage\",\"863\":\"LocationAutocompleteInputImpl\",\"904\":\"InboxPage\",\"920\":\"StyleguidePage\",\"922\":\"EmailVerificationPage\",\"946\":\"PasswordRecoveryPage\",\"981\":\"EditListingPage\"}[chunkId] || chunkId) + \".\" + {\"13\":\"189f6d52\",\"102\":\"4c0b0946\",\"105\":\"9558c2ce\",\"125\":\"27321a1b\",\"173\":\"440e644a\",\"190\":\"8cdaeb4f\",\"319\":\"f23a4f84\",\"326\":\"9f6da378\",\"330\":\"2a51c8da\",\"352\":\"ad46cb15\",\"383\":\"f6681304\",\"385\":\"53321d03\",\"407\":\"fe83d081\",\"412\":\"a5aab0c8\",\"449\":\"b3b512a8\",\"464\":\"d59bb5af\",\"470\":\"e500d33d\",\"500\":\"35c5ebc1\",\"501\":\"0c98b5c0\",\"510\":\"e6e34a6c\",\"651\":\"213437df\",\"679\":\"d4eb5f07\",\"697\":\"1d4deed2\",\"711\":\"dd55b4f9\",\"735\":\"32d8f40a\",\"756\":\"d59bb5af\",\"778\":\"ab9b7ded\",\"794\":\"ef0f91c2\",\"803\":\"e51f870a\",\"863\":\"c8718e61\",\"904\":\"60b0d39f\",\"920\":\"c2570d60\",\"922\":\"57948825\",\"946\":\"9fde1267\",\"981\":\"f9da2770\"}[chunkId] + \".chunk.css\";\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/shwcse-gh-pages/\";","var createStylesheet = (chunkId, fullhref, resolve, reject) => {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tvar onLinkComplete = (event) => {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + realHref + \")\");\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tlinkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\tdocument.head.appendChild(linkTag);\n\treturn linkTag;\n};\nvar findStylesheet = (href, fullhref) => {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = (chunkId) => {\n\treturn new Promise((resolve, reject) => {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t179: 0\n};\n\n__webpack_require__.f.miniCss = (chunkId, promises) => {\n\tvar cssChunks = {\"13\":1,\"102\":1,\"105\":1,\"125\":1,\"173\":1,\"190\":1,\"319\":1,\"326\":1,\"330\":1,\"352\":1,\"383\":1,\"385\":1,\"407\":1,\"412\":1,\"449\":1,\"464\":1,\"470\":1,\"500\":1,\"501\":1,\"510\":1,\"651\":1,\"679\":1,\"697\":1,\"711\":1,\"735\":1,\"756\":1,\"778\":1,\"794\":1,\"803\":1,\"863\":1,\"904\":1,\"920\":1,\"922\":1,\"946\":1,\"981\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(() => {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, (e) => {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"loaded\", otherwise not loaded yet\nvar installedChunks = {\n\t179: 1\n};\n\n__webpack_require__.O.require = (chunkId) => (installedChunks[chunkId]);\n\nvar installChunk = (chunk) => {\n\tvar moreModules = chunk.modules, chunkIds = chunk.ids, runtime = chunk.runtime;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tfor(var i = 0; i < chunkIds.length; i++)\n\t\tinstalledChunks[chunkIds[i]] = 1;\n\t__webpack_require__.O();\n};\n\n// require() chunk loading for javascript\n__webpack_require__.f.require = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\tinstallChunk(require(\"./\" + __webpack_require__.u(chunkId)));\n\t\t} else installedChunks[chunkId] = 1;\n\t}\n};\n\n// no external install chunk\n\n// no HMR\n\n// no HMR manifest","__webpack_require__.O(0, [179], () => {\n\t[105,102,510,736,330,412,534].map(__webpack_require__.E);\n}, 5);","// module factories are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\nvar __webpack_exports__ = __webpack_require__(6605);\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["messagesInLocale","addMissingTranslations","sourceLangTranslations","targetLangTranslations","sourceKeys","Object","keys","targetKeys","length","difference","reduce","addMissingTranslation","translations","missingKey","isTestEnv","process","localeMessages","mapValues","defaultMessages","val","key","MomentLocaleLoader","props","children","locale","isAlreadyImportedLocale","hardCodedLocale","NoLoader","React","MomentLocale","includes","loadable","resolved","chunkName","isReady","resolve","__webpack_modules__","importAsync","requireAsync","then","requireSync","id","__webpack_require__","moment","Configurations","appConfig","routeConfig","routeConfiguration","layout","localization","ConfigurationProvider","value","RouteConfigurationProvider","MaintenanceModeError","messages","helmetContext","IntlProvider","textComponent","HelmetProvider","context","MaintenanceMode","EnvironmentVariableWarning","suspiciousEnvKey","style","display","justifyContent","alignItems","height","width","toUpperCase","color","ClientApp","store","hostedTranslations","hostedConfig","mergeConfig","defaultConfig","appSettings","dev","envVars","envVarKeys","containsSECRET","str","suspiciousSECRETKey","find","startsWith","hasMandatoryConfigurations","elem","window","document","documentElement","branding","marketplaceColor","setProperty","marketplaceColorDark","marketplaceColorLight","logLoadDataCalls","env","Provider","IncludeScripts","config","BrowserRouter","Routes","ServerApp","url","canUseDOM","StaticRouter","location","renderApp","serverContext","preloadedState","collectChunks","configureStore","WithChunks","body","ReactDOMServer","helmet","head","AspectRatioWrapper","className","rootClassName","rest","classes","classNames","css","paddingBottom","concat","assign","defaultProps","AVATAR_SIZES_MEDIUM","AVATAR_IMAGE_VARIANTS","AvatarComponent","initialsClassName","user","renderSizes","disableProfileLink","intl","avatarUser","type","ensureCurrentUser","ensureUser","isBannedUser","attributes","banned","isDeletedUser","deleted","defaultUserDisplayName","formatMessage","displayName","userDisplayNameAsString","abbreviatedName","userAbbreviatedName","rootProps","title","linkProps","name","params","uuid","hasProfileImage","profileImage","profileLinkEnabled","IconBannedUser","NamedLink","ResponsiveImage","alt","image","variants","sizes","Avatar","injectIntl","AvatarSmall","AvatarMedium","AvatarLarge","PlainButton","mounted","setMounted","useState","useRouteConfiguration","useEffect","spinnerClassName","checkmarkClassName","inProgress","ready","disabled","enforcePagePreloadFor","rootClass","root","content","IconSpinner","spinner","IconCheckmark","checkmark","onOverButton","enforcePreloadOfPage","component","Page","findRouteByRouteName","preload","onOverButtonMaybe","onMouseOver","onTouchStart","buttonDisabled","ButtonWithPagePreload","restProps","Button","PrimaryButton","primaryButtonRoot","primaryButton","PrimaryButtonInline","primaryButtonInlineRoot","SecondaryButton","secondaryButtonRoot","secondaryButton","SecondaryButtonInline","secondaryButtonInlineRoot","secondaryButtonInline","InlineTextButton","inlineTextButtonRoot","inlineTextButton","SocialLoginButton","socialButtonRoot","socialButton","require","ExpandingTextarea","Component","constructor","super","this","timeoutId","textarea","update","bind","componentDidMount","setTimeout","autosize","addEventListener","componentDidUpdate","componentWillUnmount","clearTimeout","removeEventListener","render","ref","ExternalLink","target","rel","node","PropTypes","placeholder","trueLabel","falseLabel","selectProps","format","option","parse","FieldSelect","FieldCheckboxRenderer","label","optionLabelClassName","twoColumns","fields","options","meta","listClasses","map","index","fieldId","textClassNameMaybe","textClassName","FieldCheckbox","ValidationError","fieldMeta","FieldArray","IconCheckbox","checkedClassName","boxClassName","xmlns","fill","fillRule","transform","d","strokeWidth","FieldCheckboxComponent","svgClassName","useSuccessColor","successColorVariantMaybe","disabledColorMaybe","Field","input","onChange","event","handleOnChange","onBlur","htmlFor","Money","sdkTypes","getPrice","unformattedValue","currencyConfig","isEmptyString","convertUnitToSubUnit","unitDivisor","currency","e","CurrencyInputComponent","defaultValue","initialValueIsMoney","Error","log","inputValue","initialValue","convertMoneyToNumber","hasInitialValue","isNaN","usesComma","formatNumber","indexOf","truncateToSubUnitPrecision","ensureSeparator","toString","formattedValue","ensureDotSeparator","state","onInputChange","onInputBlur","onInputFocus","updateValues","preventDefault","stopPropagation","price","setState","prevState","onFocus","targetValue","trim","valueOrZero","targetDecimalValue","Decimal","isPositive","isSafeNumber","truncatedValueString","console","warn","placeholderText","allProps","inputProps","allowedInputProps","CurrencyInput","FieldCurrencyInputComponent","hideErrorMessage","valid","invalid","touched","error","hasError","inputSuccess","inputError","pickValidCharsForE164","phoneNumber","number","startsWithPlus","match","digitsOnly","replace","pickOnlyDigits","noLeadingZeroDigits","charAt","slice","FieldTextInput","IconRadioButton","showAsRequired","cx","cy","r","FieldRadioButtonComponent","radioButtonProps","FieldReviewRatingComponent","inputRootClass","customErrorText","checked","restInputProps","ratingFieldSet","rating","starCount","inputsAndLabels","i","starId","inputId","push","rateInput","IconReviewStar","star","createStarRating","string","shape","func","object","FieldSelectComponent","selectClassName","currentTarget","FieldTextInputComponent","onUnmount","isUncontrolled","inputRef","isTextarea","inputWithoutType","inputWithoutValue","refMaybe","inputClasses","rows","maxLength","PlainForm","contentRef","formProps","method","action","FormWithPagePreload","onOverForm","onOverFormProps","Form","Heading","as","styledAs","tagRef","otherProps","Tag","defaultPropsHeading","H1","H2","H3","H4","H5","H6","IconAdd","SIZE_SMALL","IconArrowHead","direction","size","isRight","isLeft","isDown","isUp","isBig","isSmall","viewBox","x1","y1","x2","y2","offset","strokeLinecap","strokeLinejoin","IconClose","x","y","rx","IconDelete","IconDisputeOrder","IconEdit","pencilClassName","IconEmailAttention","IconEmailSent","IconEmailSuccess","IconInquiry","IconKeysSuccess","IconKeys","version","stroke","isFilled","filledOrDefault","bool","IconReviewUser","IconSearch","IconSocialMediaFacebook","IconSocialMediaInstagram","IconSocialMediaTwitter","preserveAspectRatio","attributeName","calcMode","values","keyTimes","dur","begin","repeatCount","DelayedSpinner","showSpinner","setShowSpinner","delay","restOfProps","timer","Spinner","IconSuccess","fillColor","ImageFromFile","promisedImage","setPromisedImage","file","Promise","reject","reader","FileReader","onload","result","onerror","readAsDataURL","readImage","aspectWidth","aspectHeight","Promised","promise","renderFulfilled","dataURL","src","renderRejected","FormattedMessage","cache","parseAreas","areas","hasOwnProperty","areasString","split","filter","Boolean","row","areaNames","forEach","areaName","gridArea","s","l","camelize","substr","components","gridTemplateAreas","join","handleResponsiveAreasOnBrowser","responsiveAreas","setAreas","resizeListeners","entries","_ref","mediaQuery","mediaQueryList","matchMedia","matches","resizeListener","resize","callback","LayoutComposer","currentAreas","_responsiveAreas$firs","firstKey","firstAreasString","parseDefaultAreasFromProps","listener","LayoutSingleColumn","mainColumnClassName","topbar","topbarContent","footer","footerContent","layoutProps","Topbar","Main","Footer","useGlobalState","initialState","globalState","listeners","fromEntries","Set","setGlobalState","nextValue","add","delete","createGlobalState","scrollLeft","LayoutWrapperAccountSettingsSideNavComponent","setScrollLeft","currentPage","viewport","scrollTimeout","scrollToTab","el","querySelector","parent","parentElement","parentRect","getBoundingClientRect","maxScrollDistance","scrollWidth","hasParentScrolled","scrollPositionCurrent","diffLeftBetweenTabAndParent","left","scrollPositionNew","needsSmoothScroll","scrollTo","behavior","tabs","text","selected","TabNav","tabRootClassName","compose","withViewport","LayoutSideNavigation","containerClassName","sideNavClassName","sideNav","sideNavContent","useAccountSettingsNav","containerClasses","LayoutWrapperAccountSettingsSideNav","disabledPages","LimitedAccessBanner","isAuthenticated","authScopes","currentUser","onLogout","showBanner","firstName","lastName","profile","onClick","array","LazyImage","lazyLoadWithDimensions","loadAfterInitialRendering","PriceMaybe","publicData","listingType","foundListingTypeConfig","listing","listingTypes","conf","displayPrice","isBookable","isBookingProcessAlias","transactionProcessAlias","formattedPrice","priceTitle","priceData","formatMoney","unitType","ListingCardComponent","_firstImage$attribute","useConfiguration","setActiveListing","showAuthorInfo","currentListing","ensureListing","slug","createSlug","authorName","author","firstImage","images","variantPrefix","listingImage","k","setActivePropsMaybe","onMouseEnter","onMouseLeave","richText","longWordMinLength","longWordClass","ListingLink","richTitle","isPendingApproval","LISTING_STATE_PENDING_APPROVAL","isDraft","LISTING_STATE_DRAFT","variant","LISTING_PAGE_PENDING_APPROVAL_VARIANT","LISTING_PAGE_DRAFT_VARIANT","LocationAutocompleteInputImpl","LocationAutocompleteInputComponent","labelClassName","valueFromForm","locationAutocompleteProps","labelInfo","FieldLocationAutocompleteInput","LinkedLogo","logoClassName","logoImageClassName","Logo","HEIGHT_OPTIONS","isImageAsset","logo","getVariantNames","variantsObj","getVariantData","LogoComponent","marketplaceName","logoImageDesktop","logoImageMobile","logoSettings","hasValidLogoSettings","settings","logoClasses","logoImageClasses","variantNames","isDev","layoutWrapperMain","header","defaultMessage","circleLayer","center","mapsConfig","layerId","source","data","geometry","coordinates","circlePolyline","fuzzy","lat","lng","paint","circleColor","generateFuzzyLayerId","uniqueId","DynamicMapboxMap","mapContainer","centerMarker","fuzzyLayerId","updateFuzzyCirclelayer","zoom","position","mapboxgl","Map","container","scrollZoom","addControl","NavigationControl","showCompass","MultiTouch","enabled","on","addLayer","Marker","setLngLat","addTo","remove","prevProps","setZoom","centerChanged","setCenter","loaded","removeLayer","mapClassName","address","formatColor","mapOverlay","fuzzyCircleOverlay","strokeColor","path","styles","encodeURIComponent","polyline","markerOverlay","StaticMapboxMap","dimensions","overlay","mapboxAccessToken","crossOrigin","maxWidth","isMapsLibLoaded","DynamicGoogleMap","initializeMap","offsetHeight","offsetWidth","maps","google","mapConfig","mapTypeControl","scrollwheel","fullscreenControl","streetViewControl","zoomControlOptions","ControlPosition","LEFT_TOP","GoogleLatLng","LatLng","origin","radius","c","circleProps","fillOpacity","strokeOpacity","strokeWeight","clickable","Polygon","formatColorFromString","test","substring","convertOpacity","opacity","Math","floor","drawFuzzyCircle","circleRadius","circleStrokeColor","circleStrokeOpacity","circleFill","circleFillOpacity","encodedPolyline","StaticGoogleMap","shouldComponentUpdate","nextProps","currentData","pick","nextData","isEqual","targetMaybe","markers","srcParams","stringify","encodeLatLng","maptype","googleMapsAPIKey","mapRootClassName","obfuscatedCenter","useStaticMap","mapsConfiguration","hasApiAccessForMapProvider","getMapProviderApiAccess","isGoogleMapsInUse","mapProvider","StaticMap","googleMapsMap","mapboxMap","DynamicMap","mapClasses","zoomLevel","defaultZoomLevel","MenuContent","arrowPosition","contentClassName","isOpen","openClasses","contentClasses","arrowPositionStyle","right","top","arrow","child","MenuItem","role","MenuLabel","clickedWithMouse","onToggleActive","nativeEvent","clientX","clientY","isOpenClassName","isOpenClass","isControlledMenu","isOpenProp","onToggleActiveProp","Menu","onKeyDown","toggleOpen","prepareChildren","positionStyleForMenuContent","positionStyleForArrow","menu","menuContent","contains","relatedTarget","keyCode","enforcedState","contentPosition","windowWidth","innerWidth","rect","distanceToRight","menuWidth","contentWidthBiggerThanLabel","usePositionLeftFromLabel","contentPlacementOffset","minWidth","isPositionedRight","count","useArrow","positionStyles","menuChildren","tabIndex","ModalInMobileComponent","handleClose","changeOpenStatus","isModalOpenOnMobile","showAsModalMaxWidth","isChanging","isMobileLayout","onClose","closeButtonMessage","onManageDisableScrolling","usePortal","isOpenInMobile","closedClassName","Modal","isClosedClassName","sendVerificationEmailInProgress","sendVerificationEmailError","onResendVerificationEmail","email","resendEmailLink","fixEmailLink","resendErrorTranslationId","isTooManyEmailVerificationRequestsError","resendErrorMessage","MISSING_INFORMATION_MODAL_WHITELIST","EMAIL_VERIFICATION","ModalMissingInformation","showMissingInformationReminder","hasSeenMissingInformationReminder","handleMissingInformationReminder","currentUserHasListings","currentUserHasOrders","newLocation","routes","isPageWhitelisted","page","pathByRouteName","pathname","pathChanged","notRemindedYet","hasOrders","hasListingsOrOrders","emailUnverified","emailVerified","EmailReminder","Portal","createElement","portalRoot","appendChild","removeChild","ReactDOM","ModalComponent","handleBodyKeyUp","handleResize","refDiv","vh","innerHeight","getElementById","current","focus","scrollLayerClassName","lightCloseButton","closeModalMessage","closeButtonClasses","closeBtn","modalClass","scrollLayerClasses","NamedLinkComponent","onOver","to","active","activeClassName","aElemProps","Link","withRouter","NamedRedirect","search","Redirect","NotificationBadge","BookingPeriod","startDate","endDate","dateType","timeZone","timeZoneMaybe","timeFormatOptions","DATE_TYPE_DATE","weekday","hour","minute","dateFormatOptions","month","day","FormattedDate","LineItemBookingPeriod","booking","code","start","end","displayStart","displayEnd","localStartDate","localEndDateRaw","isNightly","LINE_ITEM_NIGHT","isHour","LINE_ITEM_HOUR","endDay","subtractTime","lineItems","isDaily","LINE_ITEM_DAY","isHourly","translationKey","unitPurchase","item","reversal","quantity","unitPrice","total","lineTotal","nonCommissionNonReversalLineItems","lineItem","LINE_ITEM_PROVIDER_COMMISSION","LINE_ITEM_CUSTOMER_COMMISSION","userRole","marketplaceCurrency","refund","showSubTotal","hasCommission","commissionLineItem","subTotalLineItems","subTotal","lineItemsTotal","amount","plus","formattedSubTotal","shippingFeeLineItem","LINE_ITEM_SHIPPING_FEE","pickupFeeLineItem","LINE_ITEM_PICKUP_FEE","isCustomer","customerCommissionLineItem","commissionItem","commission","formattedCommission","isProvider","providerCommissionLineItem","nonCommissionReversalLineItems","refundLineItems","formattedRefund","_transaction$attribut","_transaction$attribut2","_transaction$attribut3","transaction","processName","resolveLatestProcessName","getProcess","isCompleted","lastTransition","isRefunded","providerTotalMessageId","totalLabel","totalPrice","payoutTotal","payinTotal","formattedTotalPrice","allItems","LINE_ITEMS","items","includeFor","humanizeLineItemCode","formattedTotal","OrderBreakdownComponent","unitLineItem","LISTING_UNIT_TYPES","lineItemUnitType","hasCommissionLineItem","hasCustomerCommission","hasProviderCommission","LineItemBasePriceMaybe","LineItemShippingFeeMaybe","LineItemPickupFeeMaybe","LineItemUnknownItemsMaybe","LineItemSubTotalMaybe","LineItemRefundMaybe","LineItemCustomerCommissionMaybe","LineItemCustomerCommissionRefundMaybe","LineItemProviderCommissionMaybe","LineItemProviderCommissionRefundMaybe","LineItemTotalPrice","OrderBreakdown","BookingTimeForm","BookingDatesForm","InquiryWithoutPaymentForm","ProductOrderForm","MODAL_BREAKPOINT","TODAY","Date","openOrderModal","isOwnListing","isClosed","history","searchString","orderOpen","closeOrderModal","searchParams","omit","handleSubmit","isInquiryWithoutPayment","onSubmit","dateFormattingOptions","validListingTypes","showCurrencyMismatch","priceContainerInCTA","priceValue","perUnitInCTA","priceContainer","perUnit","OrderPanel","_listing$attributes","_listing$attributes2","_listing$attributes3","_listing$attributes3$","_listing$attributes4","_listing$currentStock","_listing$currentStock2","_listing$attributes5","titleClassName","lineItemUnitTypeMaybe","titleDesktop","authorLink","onFetchTimeSlots","monthlyTimeSlots","onFetchTransactionLineItems","onContactUser","dayCountAvailableForBooking","fetchLineItemsInProgress","fetchLineItemsError","payoutDetailsWarning","isPaymentProcess","INQUIRY_PROCESS_NAME","showPriceMissing","PriceMissing","showInvalidCurrency","InvalidCurrency","availabilityPlan","timezone","LISTING_STATE_CLOSED","isBooking","isBookingProcess","showBookingTimeForm","showBookingDatesForm","isPurchase","isPurchaseProcess","currentStock","isOutOfStock","LINE_ITEM_ITEM","showProductOrderForm","showInquiryForm","isKnownProcess","getSupportedProcessesInfo","info","pickupEnabled","shippingEnabled","listingTypeConfig","displayShipping","displayDeliveryShipping","displayPickup","displayDeliveryPickup","allowOrdersOfMultipleItems","STOCK_MULTIPLE_ITEMS","STOCK_INFINITE_MULTIPLE_ITEMS","stockType","showClosedListingHelpText","isOrderOpen","subTitleText","authorDisplayName","titleClasses","orderTitle","ModalInMobile","modalContainer","modalHeading","heading","orderHeading","orderHelp","providerAvatar","providerNameLinked","providerNamePlain","bookingForm","formId","listingId","startDatePlaceholder","formatDate","endDatePlaceholder","displayDeliveryMethod","errorSidebar","openOrderForm","closedListingButton","subTitle","OutsideClickHandler","handleClick","onOutsideClick","ensureOpenGraphLocale","metaTagProps","tagData","marketplaceRootURL","facebookAppId","siteTwitterHandle","googleSearchConsole","googleSiteVerification","googleSiteVerificationMaybe","defaultMeta","description","openGraphMeta","openGraphType","socialSharingTitle","socialSharingDescription","published","updated","facebookImages","property","openGraphMetaProps","twitterMeta","twitterHandle","twitterImages","twitterMetaProps","webmanifestURL","baseUrl","apiBaseUrl","PageComponent","scrollPosition","contentDiv","scrollingDisabledChanged","pageSchema","currentScrollingDisabled","scrollingDisabled","pageYOffset","scrollTop","_config$address","referrer","schema","socialSharing","shouldReturnPathOnly","canonicalPath","canonicalRoutePath","canonicalUrl","schemaTitle","schemaDescription","pageTitle","pageDescription","images1200","socialSharingImages1200","images600","socialSharingImages600","openGraphFallbackImages","facebookImage","defaultTwitterImageURL","twitterImage","metaToHead","sameOrganizationAs","siteFacebookPage","siteInstagramPage","v","hasSchema","schemaFromProps","Array","isArray","addressMaybe","streetAddress","schemaArrayJSONString","JSON","sameAs","logoImageMobileURL","scrollPositionStyles","marginTop","hasMarginTopStyle","requestAnimationFrame","faviconVariants","favicon","getFaviconVariants","appleTouchIcon","appIcon","appleTouchIconVariant","getAppleTouchIconURL","Helmet","htmlAttributes","lang","href","httpEquiv","metaProps","useLocation","useIntl","pgKey","PaginationLinksComponent","pageName","pagePathParams","pageSearchParams","pagination","totalPages","paginationLimit","paginationUnsupported","pageCountLimit","prevPage","nextPage","prevSearchParams","nextSearchParams","prevLinkEnabled","prev","arrowIcon","prevLinkDisabled","nextLinkEnabled","next","nextLinkDisabled","pageNumbersNavLinks","getPageNumbersArray","range","abs","newArray","p","isCurrentPage","pageClassNames","toPageLink","paginationGap","pageNumberListClassNames","pageNumberList","_isMounted","catch","IconCheck","isVisible","Item","isSelected","labelClass","PropertyGroup","selectedOptions","checkSelected","arrayOf","Handle","dragging","relativePos","handleRef","onMouseDown","onMouseMove","onMouseUp","onTouchMove","onTouchEnd","onStart","onMove","onEnd","onMouseMoveListener","onMouseUpListener","pageX","touchpageX","touches","pagePosition","offsetLeft","changeActive","min","max","positionToValue","currentValue","valueToPosition","Track","handles","positionFromIndex","ranges","h","RangeSliderComponent","activeHandle","toPosition","toValue","valueOffset","scale","round","step","ceil","handleIndex","RangeSliderComponentWithDimensions","withDimensions","RangeSlider","UUID","ResponsiveBackgroundImageContainer","_imageEntity$attribut","childrenWrapperClassName","useOverlay","imageEntity","scaled","overlayMaybe","childrenWrapperClassNameMaybe","NoImageIcon","noImageMessage","noImageClasses","noImageMessageText","imageVariants","imgProps","srcSet","variantName","ReviewRating","reviewStarClassName","stars","REVIEW_RATINGS","oneOf","Review","review","date","createdAt","dateString","year","UserDisplayName","ReviewsComponent","reviews","IconCard","brand","DEFAULT_CARD","REPLACE_CARD","SavedCardDetails","isModalOpen","setIsModalOpen","menuOpen","setMenuOpen","setActive","card","onDeleteCard","deletePaymentMethodInProgress","last4Digits","expirationMonth","expirationYear","paymentMethodPlaceholderDesktop","paymentMethodPlaceholderMobile","paymentMethodPlaceholder","replaceCardText","replaceCard","cardIcon","expiredCardText","expiredText","cardExpiredText","isCardExpired","isExpired","currentTime","currentYear","getFullYear","currentMonth","getMonth","defaultCard","savedPaymentMethod","expirationDateExpired","expirationDate","replaceCardTitle","removeCardModalTitle","removeCardModalContent","cancel","removeCard","deletePaymentMethod","showExpired","menuLabel","menuLabelWrapperExpired","menuLabelWrapper","menuItem","iconCheckmark","iconCheckmarkHidden","menuText","menuDivider","menuTextReplaceCard","handleDeleteCard","savedPaymentMethodDelete","closeIcon","modalContent","modalTitle","modalMessage","modalButtonsWrapper","cancelCardDelete","StripeBankAccountRequiredInput","inputType","formName","isTouched","showStripeError","showInColumns","showInputError","columnsClass","longForm","errorMessage","TokenInputFieldComponent","stripeError","BANK_ACCOUNT_INPUTS","formatFieldMessage","blurTimeoutId","requestToken","debounce","handleInputChange","handleInputFocus","handleInputBlur","Stripe","stripe","publishableKey","countryChanged","country","currencyChanged","supportedCountries","inputsNeeded","requiredInputs","missingValues","invalidValues","numbersMissing","numbersInvalid","accountData","inputValueObj","mapInputsToStripeAccountKeys","createToken","message","token","valuesAreUnchanged","translateStripeError","unChangedValues","acc","iType","inputData","formMeta","getSupportedCountryCodes","unsupportedCountryError","inputConfiguration","showingFieldErrors","some","showFormError","EnhancedTokenInputFieldComponent","ACCOUNT_NUMBER","ACCOUNT_OWNER_NAME","INSTITUTION_NUMBER","TRANSIT_NUMBER","CLEARING_CODE","BRANCH_CODE","BRANCH_NAME","BANK_NAME","BANK_CODE","CLABE","IBAN","ROUTING_NUMBER","SORT_CODE","stripeCountryConfigs","countryCode","bankAccountInputs","accountConfig","inputs","inputsAsStrings","inputTypeToString","andTranslated","inputsInString","account_number","cleanedString","routing_number","bank_name","branch_name","account_holder_name","messageType","countryCurrency","FieldHidden","unitTypeHidden","fieldRenderProps","CreateStripeAccountFields","countryLabel","form","currentUserId","defaultMCC","businessProfileURL","pathToProfilePage","createResourceLocatorString","hasMarketplaceRootURL","rootUrl","defaultBusinessURL","change","businessProfileMCC","sectionContainer","radioButtonRow","FieldRadioButton","selectCountry","autoComplete","validate","validators","StripeBankAccountTokenInputField","bankDetailsStripeField","UpdateStripeAccountFields","savedCountry","showCardUpdateInput","submitInProgress","setShowCardUpdateInput","stripeBankAccountLastDigits","savedInformation","accountInformationTitle","savedBankAccount","ErrorsMaybe","stripeAccountError","stripeAccountLinkError","isStripeError","stripeMessage","apiErrors","StripeConnectAccountFormComponent","isUpdate","stripeConnected","stripePublishableKey","FinalForm","mutators","arrayMutators","pristine","stripeAccountFetched","submitButtonText","accountDataLoaded","submitDisabled","stripeAccountFields","stripeConnectedAccountTermsLink","termsLink","submitButtonMaybe","termsText","missingStripeKey","onGetStripeConnectAccountLink","StripePaymentAddress","optionalText","addressLine1Label","addressLine1Placeholder","addressLine1Required","addressLine2Label","addressLine2Placeholder","postalCodeLabel","postalCodePlaceholder","postalCodeRequired","cityLabel","cityPlaceholder","cityRequired","stateLabel","statePlaceholder","countryPlaceholder","countryRequired","countryCodes","getCountryCodes","undefined","postalCode","LIGHT_SKIN","Tab","isDark","darkSkinClasses","linkClasses","buttonClasses","isButton","TabNavHorizontal","skin","tabClasses","tab","ButtonTabNavHorizontal","tabClassName","LinkTabNavHorizontal","Tabs","navRootClassName","rootClasses","tabNavTabs","tabId","tabLabel","tabLinkProps","selectedTabPanel","toArray","DASH","TimeRangeComponent","formatDateIntoPartials","isSingleDay","isSameDay","dateFormatting","formatted","formatDateTimeRange","rangePartial","DATE_TYPE_TIME","time","timeFormatting","DATE_TYPE_DATETIME","dateAndTime","deletedUserDisplayName","bannedUserDisplayName","hasAttributes","userIsDeleted","userIsBanned","userDisplayName","deletedUserDisplayNameInUse","bannedUserDisplayNameInUse","UserNav","ACCOUNT_SETTINGS_PAGES","FieldDateInput","FieldDateRangeController","FieldDateRangeInput","bsb","accountNumber","iban","transitNumber","institutionNumber","clearingCode","branchCode","bankName","branchName","bankCode","accountOwnerName","clabe","sortCode","routingNumber","listingFields","scope","schemaType","enumOptions","filterConfig","indexForSearch","filterType","group","showConfig","isDetail","saveConfig","placeholderMessage","isRequired","requiredMessage","searchMode","transactionType","alias","defaultListingFields","payoutDetails","enforceValidListingType","mainSearch","searchType","dateRangeFilter","availability","dateRangeMode","priceFilter","sortConfig","queryParamName","relevanceKey","relevanceFilter","conflictingFilters","labelTranslationKey","labelTranslationKeyLong","LatLngBounds","REACT_APP_GOOGLE_MAPS_API_KEY","suggestCurrentLocation","currentLocationBoundsDistance","defaults","sortSearchByDistance","logoImageDesktopURL","brandImageURL","brandImage","facebookImageURL","twitterImageURL","searchPage","variantType","listingPage","aspectRatio","googleAnalyticsId","REACT_APP_GOOGLE_ANALYTICS_ID","plausibleDomains","REACT_APP_PLAUSIBLE_DOMAINS","listingMinimumPriceSubUnits","REACT_APP_MARKETPLACE_NAME","analytics","firstDayOfWeek","appCdnAssets","transactionSize","addressCountry","addressRegion","verbose","sdk","clientId","REACT_APP_SHARETRIBE_SDK_BASE_URL","assetCdnBaseUrl","REACT_APP_SHARETRIBE_SDK_ASSET_CDN_BASE_URL","transitVerbose","REACT_APP_SHARETRIBE_SDK_TRANSIT_VERBOSE","getCurrencyFormatting","currencyFormatting","subUnitDivisors","sentryDsn","REACT_APP_SENTRY_DSN","usingSSL","REACT_APP_SHARETRIBE_USING_SSL","AUD","BGN","CAD","CHF","CNY","CZK","DKK","EUR","GBP","HKD","INR","JPY","MXN","NOK","NZD","PLN","RON","SEK","SGD","USD","currencies","currencyDisplay","useGrouping","minimumFractionDigits","maximumFractionDigits","TOS_ASSET_NAME","PRIVACY_POLICY_ASSET_NAME","loadData","dispatch","pageAsset","termsOfService","privacyPolicy","fetchPageAssets","SET_INITIAL_VALUES","INITIATE_ORDER_REQUEST","INITIATE_ORDER_SUCCESS","INITIATE_ORDER_ERROR","CONFIRM_PAYMENT_REQUEST","CONFIRM_PAYMENT_SUCCESS","CONFIRM_PAYMENT_ERROR","SPECULATE_TRANSACTION_REQUEST","SPECULATE_TRANSACTION_SUCCESS","SPECULATE_TRANSACTION_ERROR","STRIPE_CUSTOMER_REQUEST","STRIPE_CUSTOMER_SUCCESS","STRIPE_CUSTOMER_ERROR","INITIATE_INQUIRY_REQUEST","INITIATE_INQUIRY_SUCCESS","INITIATE_INQUIRY_ERROR","orderData","speculateTransactionInProgress","speculateTransactionError","speculatedTransaction","initiateOrderError","confirmPaymentError","stripeCustomerFetched","initiateInquiryInProgress","initiateInquiryError","checkoutPageReducer","arguments","payload","stripeCustomerFetchError","setInitialValues","initialValues","confirmPaymentRequest","confirmPaymentSuccess","orderId","initiateOrder","orderParams","processAlias","transactionId","transitionName","isPrivilegedTransition","getState","isTransition","deliveryMethod","bookingDates","otherOrderParams","quantityMaybe","stockReservationQuantity","bookingParamsMaybe","transitionParams","bodyParams","transition","queryParams","include","expand","handleSucces","response","order","denormalisedResponseEntities","initiateOrderSuccess","fetchCurrentUserHasOrdersSuccess","handleError","storableError","transactionIdMaybe","transitionPrivileged","isSpeculative","transactions","initiatePrivileged","initiate","confirmPayment","sendMessage","send","messageSuccess","txId","initiateInquiryWithoutPayment","inquiryParams","_listing","_listing$id","speculateTransaction","cardToken","handleSuccess","entities","tx","transitionSpeculative","initiateSpeculative","stripeCustomer","fetchCurrentUser","stripeCustomerError","SAVE_CONTACT_DETAILS_REQUEST","SAVE_CONTACT_DETAILS_SUCCESS","SAVE_EMAIL_ERROR","SAVE_PHONE_NUMBER_ERROR","SAVE_CONTACT_DETAILS_CLEAR","RESET_PASSWORD_REQUEST","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_ERROR","saveEmailError","savePhoneNumberError","saveContactDetailsInProgress","contactDetailsChanged","resetPasswordInProgress","resetPasswordError","reducer","saveContactDetailsSuccess","saveContactDetailsClear","requestSavePhoneNumber","updateProfile","protectedData","requestSaveEmail","currentPassword","changeEmail","saveContactDetails","currentEmail","currentPhoneNumber","emailChanged","phoneNumberChanged","promises","all","saveEmailUser","phoneNumberMergeSource","merge","currentUserShowSuccess","saveEmailAndPhoneNumber","saveEmail","savePhoneNumber","resetPassword","passwordReset","request","imageIds","img","imageId","updateUploadedImagesState","_payload$data","_payload$data$relatio","_payload$data$relatio2","uploadedImages","uploadedImagesOrder","attachedImageUUIDStrings","relationships","unattachedImg","_unattachedImg$imageI","getImageVariantInfo","listingImageConfig","fieldsImage","createImageVariantConfig","sortExceptionsByStartTime","a","b","getTime","mergeToWeeklyExceptionQueries","weeklyExceptionQueries","weekStartId","newDataProps","mergeToMonthlyExceptionQueries","monthlyExceptionQueries","monthId","requestAction","actionType","successAction","errorAction","MARK_TAB_UPDATED","CLEAR_UPDATED_TAB","CREATE_LISTING_DRAFT_REQUEST","CREATE_LISTING_DRAFT_SUCCESS","CREATE_LISTING_DRAFT_ERROR","PUBLISH_LISTING_REQUEST","PUBLISH_LISTING_SUCCESS","PUBLISH_LISTING_ERROR","UPDATE_LISTING_REQUEST","UPDATE_LISTING_SUCCESS","UPDATE_LISTING_ERROR","SHOW_LISTINGS_REQUEST","SHOW_LISTINGS_SUCCESS","SHOW_LISTINGS_ERROR","FETCH_EXCEPTIONS_REQUEST","FETCH_EXCEPTIONS_SUCCESS","FETCH_EXCEPTIONS_ERROR","FETCH_EXTRA_EXCEPTIONS_SUCCESS","ADD_EXCEPTION_REQUEST","ADD_EXCEPTION_SUCCESS","ADD_EXCEPTION_ERROR","DELETE_EXCEPTION_REQUEST","DELETE_EXCEPTION_SUCCESS","DELETE_EXCEPTION_ERROR","SET_STOCK_REQUEST","SET_STOCK_SUCCESS","SET_STOCK_ERROR","UPLOAD_IMAGE_REQUEST","UPLOAD_IMAGE_SUCCESS","UPLOAD_IMAGE_ERROR","REMOVE_LISTING_IMAGE","SAVE_PAYOUT_DETAILS_REQUEST","SAVE_PAYOUT_DETAILS_SUCCESS","SAVE_PAYOUT_DETAILS_ERROR","createListingDraftError","publishListingError","updateListingError","showListingsError","uploadImageError","setStockError","setStockInProgress","createListingDraftInProgress","submittedListingId","redirectToListing","removedImageIds","addExceptionError","addExceptionInProgress","allExceptions","deleteExceptionError","deleteExceptionInProgress","listingDraft","updatedTab","updateInProgress","payoutDetailsSaveInProgress","payoutDetailsSaved","_state$listingId","listingIdFromPayload","newData","fetchExceptionsError","fetchExceptionsInProgress","exceptionQueriesMaybe","exceptions","combinedExceptions","selectId","uniqueBy","sort","exception","removeListingImage","createListingDraftRequest","createListingDraftSuccess","publishListingRequest","publishListingSuccess","updateListingRequest","updateListingSuccess","showListingsRequest","showListingsSuccess","uploadImageRequest","uploadImageSuccess","setStockRequest","setStockSuccess","fetchAvailabilityExceptionsRequest","fetchAvailabilityExceptionsSuccess","fetchAvailabilityExceptionsError","fetchExtraAvailabilityExceptionsSuccess","addAvailabilityExceptionRequest","addAvailabilityExceptionSuccess","addAvailabilityExceptionError","deleteAvailabilityExceptionRequest","deleteAvailabilityExceptionSuccess","deleteAvailabilityExceptionError","savePayoutDetailsRequest","savePayoutDetailsSuccess","savePayoutDetailsError","requestShowListing","actionPayload","imageVariantInfo","ownListings","show","addMarketplaceEntities","updateStockOfListingMaybe","stockTotals","oldTotal","newTotal","stock","compareAndSet","compareAndSetStock","requestCreateListingDraft","stockUpdate","ownListingValues","createDraftResponse","createDraft","listingData","requestUpdateListing","_state$marketplaceDat","_state$marketplaceDat2","_state$marketplaceDat3","_rest$availabilityPla","ownListingUpdateValues","existingTimeZone","marketplaceData","ownListing","includedTimeZone","markTabUpdated","fetchLoadDataExceptions","requestPublishListingDraft","publishDraft","requestImageUpload","upload","resp","requestAddAvailabilityException","availabilityExceptions","create","availabilityException","requestDeleteAvailabilityException","requestFetchAvailabilityExceptions","isWeekly","fetchParams","timeUnitIdProp","stringifyDateToISO8601","monthIdString","query","extraPages","responses","denormalizedFlatResults","_listing$attributes$a","hasWindow","hasTimeZone","_listing$attributes$a2","getDefaultTimeZoneOnBrowser","todayInListingsTZ","getStartOf","locationSearch","selectedDate","parseDateFromISO8601","startOfWeek","getStartOfWeek","prevWeek","nextWeek","nextAfterNextWeek","nextMonth","nextAfterNextMonth","sharedData","savePayoutDetails","isUpdateCall","upsertThunk","updateStripeAccount","createStripeAccount","stripeAccount","fetchStripeAccount","_response$","_response$$data","_listing$attributes2$","SectionBuilder","resolveComponent","FooterComponent","footerSection","sectionId","sectionType","sections","sortedTransactions","txs","reverse","sortBy","lastTransitionedAt","FETCH_ORDERS_OR_SALES_REQUEST","FETCH_ORDERS_OR_SALES_SUCCESS","FETCH_ORDERS_OR_SALES_ERROR","entityRefs","entity","fetchInProgress","fetchOrdersOrSalesError","transactionRefs","inboxPageReducer","onlyFilter","orders","sales","apiQueryParams","only","lastTransitions","getAllTransitionsForEveryProcess","perPage","fetchOrdersOrSalesSuccess","ASSET_NAME","landingPage","SHOW_LISTING_REQUEST","SHOW_LISTING_ERROR","FETCH_REVIEWS_REQUEST","FETCH_REVIEWS_SUCCESS","FETCH_REVIEWS_ERROR","FETCH_TIME_SLOTS_REQUEST","FETCH_TIME_SLOTS_SUCCESS","FETCH_TIME_SLOTS_ERROR","FETCH_LINE_ITEMS_REQUEST","FETCH_LINE_ITEMS_SUCCESS","FETCH_LINE_ITEMS_ERROR","SEND_INQUIRY_REQUEST","SEND_INQUIRY_SUCCESS","SEND_INQUIRY_ERROR","showListingError","fetchReviewsError","sendInquiryInProgress","sendInquiryError","inquiryModalOpenForListingId","fetchTimeSlotsError","fetchTimeSlotsInProgress","timeSlots","showListingRequest","showListing","isOwn","listings","_config$listing","sanitizeConfig","fetchReviews","listing_id","fetchReviewsSuccess","fetchTimeSlots","fetchTimeSlotsRequest","timeslots","fetchTimeSlotsSuccess","sendInquiry","_listing$attributes$p","_getProcess","transitions","INQUIRE","fetchTransactionLineItems","transactionLineItems","fetchLineItemsSuccess","fetchMonthlyTimeSlots","_attributes$publicDat","tz","timeUnit","nextBoundary","findNextBoundary","FETCH_LISTINGS_REQUEST","FETCH_LISTINGS_SUCCESS","FETCH_LISTINGS_ERROR","OPEN_LISTING_REQUEST","OPEN_LISTING_SUCCESS","OPEN_LISTING_ERROR","CLOSE_LISTING_REQUEST","CLOSE_LISTING_SUCCESS","CLOSE_LISTING_ERROR","ADD_OWN_ENTITIES","queryInProgress","queryListingsError","currentPageResultIds","ownEntities","openingListing","openingListingError","closingListing","closingListingError","resultIds","sdkResponse","apiResponse","updatedEntities","updateListingAttributes","listingEntity","updatedListing","ownListingEntities","getOwnListingsById","listingIds","ManageListingsPage","resources","denormalisedEntities","queryOwnListings","queryListingsRequest","queryListingsSuccess","closeListing","closeListingRequest","close","closeListingSuccess","closeListingError","openListing","openListingRequest","open","openListingSuccess","openListingError","IconSearchDesktop","identity","KeywordSearchField","LocationSearchField","handleChange","_ref2","restInput","searchInput","LocationAutocompleteInput","iconClassName","inputClassName","predictionsClassName","SearchFormComponent","selectedPlace","formRenderProps","isKeywordSearch","submitFormFn","NotFoundPageComponent","staticContext","notfound","TopbarContainer","FooterContainer","SearchForm","keywords","bounds","connect","isScrollingDisabled","useHistory","isMainSearchTypeKeywords","CHANGE_PASSWORD_REQUEST","CHANGE_PASSWORD_SUCCESS","CHANGE_PASSWORD_ERROR","CHANGE_PASSWORD_CLEAR","changePasswordError","changePasswordInProgress","passwordChanged","changePasswordClear","changePassword","newPassword","RECOVERY_REQUEST","RECOVERY_SUCCESS","RECOVERY_ERROR","RETYPE_EMAIL","CLEAR_RECOVERY_ERROR","initialEmail","submittedEmail","recoveryError","recoveryInProgress","passwordRequested","retypePasswordRecoveryEmail","clearPasswordRecoveryError","recoverPassword","passwordRecoverySuccess","passwordRecoveryError","passwordResetToken","reset","SETUP_INTENT_REQUEST","SETUP_INTENT_SUCCESS","SETUP_INTENT_ERROR","setupIntentInProgress","setupIntentError","setupIntent","payoutMethodsPageReducer","createStripeSetupIntent","stripeSetupIntents","createStripeSetupIntentSuccess","setInitialValuesForPaymentMethods","_props$location","parsedQueryString","pageAssetName","assetPath","cmsPageRegex","RegExp","getPageAssetName","hasCMSPagePath","toTermsOfServicePage","toPrivacyPolicyPage","toCMSPage","pageId","toLandingPage","SET_INITIAL_STATE","SHOW_USER_REQUEST","SHOW_USER_SUCCESS","SHOW_USER_ERROR","QUERY_LISTINGS_REQUEST","QUERY_LISTINGS_SUCCESS","QUERY_LISTINGS_ERROR","QUERY_REVIEWS_REQUEST","QUERY_REVIEWS_SUCCESS","QUERY_REVIEWS_ERROR","userId","userListingRefs","userShowError","queryReviewsError","profilePageReducer","listingRefs","queryUserListings","author_id","queryUserReviews","subject_id","queryReviewsSuccess","showUser","showUserRequest","users","showUserError","CLEAR_UPDATED_FORM","UPDATE_PROFILE_REQUEST","UPDATE_PROFILE_SUCCESS","UPDATE_PROFILE_ERROR","uploadInProgress","updateProfileError","uploadedImage","uploadImage","SEARCH_LISTINGS_REQUEST","SEARCH_LISTINGS_SUCCESS","SEARCH_LISTINGS_ERROR","SEARCH_MAP_SET_ACTIVE_LISTING","searchInProgress","searchListingsError","searchMapListingIds","activeListingId","searchListings","searchListingsRequest","dates","priceMaybe","priceParam","inSubunits","priceSearchParams","datesMaybe","datesParam","searchTZ","datesFilter","defaultFilters","f","hasValues","isNightlyMode","isEntireRangeAvailable","endRaw","getExclusiveEndDate","today","possibleStartDate","hasValidDates","dayCount","daysBetween","minDuration","addTime","getProlongedEnd","datesSearchParams","stockMaybe","minStock","stockMode","stockFilters","sortMaybe","pub_listingType","searchListingsSuccess","latlng","latlngBounds","originMaybe","isOriginInUse","fromReturnURL","TopbarContainerComponent","authInProgress","currentSearchParams","hasGenericError","notificationCount","showGenericError","mapStateToProps","logoutError","auth","currentUserNotificationCount","hasCurrentUserErrors","authenticationInProgress","mapDispatchToProps","historyPush","logout","componentId","disableScrolling","manageDisableScrolling","sendVerificationEmail","REVIEW_TX_INCLUDES","FETCH_TRANSACTION_REQUEST","FETCH_TRANSACTION_SUCCESS","FETCH_TRANSACTION_ERROR","FETCH_TRANSITIONS_REQUEST","FETCH_TRANSITIONS_SUCCESS","FETCH_TRANSITIONS_ERROR","TRANSITION_REQUEST","TRANSITION_SUCCESS","TRANSITION_ERROR","FETCH_MESSAGES_REQUEST","FETCH_MESSAGES_SUCCESS","FETCH_MESSAGES_ERROR","SEND_MESSAGE_REQUEST","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_ERROR","SEND_REVIEW_REQUEST","SEND_REVIEW_SUCCESS","SEND_REVIEW_ERROR","fetchTransactionInProgress","fetchTransactionError","transactionRef","transitionInProgress","transitionError","fetchMessagesInProgress","fetchMessagesError","totalMessages","totalMessagePages","oldestMessagePageFetched","initialMessageFailedToTransaction","savePaymentMethodFailed","sendMessageInProgress","sendMessageError","sendReviewInProgress","sendReviewError","fetchTransitionsInProgress","fetchTransitionsError","processTransitions","mergeEntityArrays","aEntity","bEntity","transactionPageReducer","totalItems","sendMessageSuccess","sendReviewSuccess","getImageVariants","fetchTransaction","txRole","txResponse","listingRelationship","listingRef","denormalised","isInquiry","states","INQUIRY","fetchTransactionSuccess","ms","refreshTx","makeTransition","TransactionPage","transitionRequest","fetchCurrentUserNotifications","refreshTransactionEntity","_response$data","_response$data$data","_response$data$data$a","fetchMessages","paging","transaction_id","fetchedPage","fetchMessagesSuccess","fetchMoreMessages","messageId","sendReviewAsSecond","sendReview","transitionOptionsInfo","reviewAsFirst","reviewAsSecond","hasOtherPartyReviewedFirst","sendReviewAsFirst","isTransactionsTransitionInvalidTransition","isNonEmpty","isEmpty","fetchNextTransitions","res","txRef","transactionRole","pickBy","verificationToken","t","verify","getPageDataLoadingAPI","AuthenticationPage","AuthenticationPageLoader","LandingPage","LandingPageLoader","CheckoutPage","CheckoutPageInitialValues","CMSPage","CMSPageLoader","ContactDetailsPage","ContactDetailsPageLoader","EditListingPage","EditListingPageLoader","EmailVerificationPage","EmailVerificationPageLoader","InboxPage","InboxPageLoader","ListingPage","ListingPageLoader","ManageListingsPageLoader","PaymentMethodsPage","PaymentMethodsPageLoader","PrivacyPolicyPage","PrivacyPolicyPageLoader","ProfilePage","ProfilePageLoader","SearchPage","SearchPageLoader","StripePayoutPage","StripePayoutPageLoader","TermsOfServicePage","TermsOfServicePageLoader","TransactionPageLoader","TransactionPageInitialValues","ConfigurationContext","createContext","useContext","RouteConfigurationContext","authenticated","authInfo","isAnonymous","AUTH_INFO_REQUEST","AUTH_INFO_SUCCESS","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_ERROR","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_ERROR","SIGNUP_REQUEST","SIGNUP_SUCCESS","SIGNUP_ERROR","CONFIRM_REQUEST","CONFIRM_SUCCESS","CONFIRM_ERROR","USER_LOGOUT","authInfoLoaded","loginError","loginInProgress","logoutInProgress","signupError","signupInProgress","confirmError","confirmInProgress","scopes","authInfoSuccess","login","username","password","clearCurrentUser","signup","createUserParams","signupWithIdp","createUserWithIdp","VERIFICATION_REQUEST","VERIFICATION_SUCCESS","VERIFICATION_ERROR","isVerified","verificationError","verificationInProgress","emailVerification","verifyEmail","getFirstAssetData","_response$data$data$","_response$data$data$$","getMultiAssetData","_response$data2","getMultiAssetIncluded","_response$data3","included","findJSONAsset","assets","absolutePath","getAbsolutePath","ASSETS_REQUEST","ASSETS_SUCCESS","ASSETS_ERROR","PAGE_ASSETS_REQUEST","PAGE_ASSETS_SUCCESS","PAGE_ASSETS_ERROR","appAssets","pageAssetsData","currentPageAssets","assetReducer","fetchAppAssets","translationsPath","footerPath","assetEntries","nonConfigAssets","configPaths","pickHostedConfigPaths","excludeAssetNames","pickedPaths","fetchAssets","paths","assetsByVersion","assetsByAlias","separateAssetFetches","translationAsset","footerAsset","configAssets","getVersionHash","_response$data4","_response$data4$meta","versionInTranslationsCall","versionInFooterCall","versionInConfigsCall","getGoogleAnalyticsId","_jsonAsset$attributes","_jsonAsset$attributes2","configAssetsData","jsonAsset","measurementId","googleAnalytics","appAssetsSuccess","collectedAssets","assetEntry","_jsonAsset$attributes3","assetResponse","fetchedConfigAssets","denormalizeAssetData","hasFallback","_getState","_getState$hostedAsset","hostedAssets","assetKeys","assetByVersion","assetByAlias","sdkAssets","_ref3","_getState2","hostedAssetsState","fixedPageAssets","pickLatestPageAssetData","collected","pa","cmsPageData","pageAssets","pageAssetsSuccess","status","ADD_MARKETPLACE_ENTITIES","marketplaceDataReducer","getListingsById","getMarketplaceEntities","CREATE_STRIPE_CUSTOMER_REQUEST","CREATE_STRIPE_CUSTOMER_SUCCESS","CREATE_STRIPE_CUSTOMER_ERROR","ADD_PAYMENT_METHOD_REQUEST","ADD_PAYMENT_METHOD_SUCCESS","ADD_PAYMENT_METHOD_ERROR","DELETE_PAYMENT_METHOD_REQUEST","DELETE_PAYMENT_METHOD_SUCCESS","DELETE_PAYMENT_METHOD_ERROR","addPaymentMethodInProgress","addPaymentMethodError","deletePaymentMethodError","createStripeCustomerInProgress","createStripeCustomerError","createStripeCustomer","stripePaymentMethodId","stripeCustomerCreateSuccess","stripeCustomerCreateError","addPaymentMethod","addPaymentMethodSuccess","deletePaymentMethodSuccess","savePaymentMethod","hasAlreadyDefaultPaymentMethod","defaultPaymentMethod","savePromise","updatePaymentMethod","paymentMethods","errors","LOCATION_CHANGED","currentLocation","currentCanonicalPath","routingReducer","locationChanged","STRIPE_PI_HAS_PASSED_CONFIRM","STRIPE_ACCOUNT_CLEAR_ERROR","ACCOUNT_OPENER_CREATE_REQUEST","ACCOUNT_OPENER_CREATE_SUCCESS","ACCOUNT_OPENER_CREATE_ERROR","PERSON_CREATE_REQUEST","PERSON_CREATE_SUCCESS","PERSON_CREATE_ERROR","HANDLE_CARD_PAYMENT_REQUEST","HANDLE_CARD_PAYMENT_SUCCESS","HANDLE_CARD_PAYMENT_ERROR","HANDLE_CARD_SETUP_REQUEST","HANDLE_CARD_SETUP_SUCCESS","HANDLE_CARD_SETUP_ERROR","CLEAR_HANDLE_CARD_PAYMENT","RETRIEVE_PAYMENT_INTENT_REQUEST","RETRIEVE_PAYMENT_INTENT_SUCCESS","RETRIEVE_PAYMENT_INTENT_ERROR","confirmCardPaymentInProgress","confirmCardPaymentError","handleCardSetupInProgress","handleCardSetupError","paymentIntent","retrievePaymentIntentInProgress","retrievePaymentIntentError","createAccountOpenerError","createAccountOpenerInProgress","personAccountOpener","persons","createStripePersonError","createStripePersonInProgress","personToken","confirmCardPaymentSuccess","initializeCardPaymentData","retrievePaymentIntent","stripePaymentIntentClientSecret","err","doc_url","payment_intent","loggableError","paymentIntentStatus","confirmCardPayment","paymentParams","args","_response$paymentInte","containsPaymentIntent","handleCardSetup","setupIntentClientSecret","containsSetupIntent","setup_intent","STRIPE_ACCOUNT_CREATE_REQUEST","STRIPE_ACCOUNT_CREATE_SUCCESS","STRIPE_ACCOUNT_CREATE_ERROR","STRIPE_ACCOUNT_UPDATE_REQUEST","STRIPE_ACCOUNT_UPDATE_SUCCESS","STRIPE_ACCOUNT_UPDATE_ERROR","STRIPE_ACCOUNT_FETCH_REQUEST","STRIPE_ACCOUNT_FETCH_SUCCESS","STRIPE_ACCOUNT_FETCH_ERROR","GET_ACCOUNT_LINK_REQUEST","GET_ACCOUNT_LINK_SUCCESS","GET_ACCOUNT_LINK_ERROR","createStripeAccountInProgress","createStripeAccountError","updateStripeAccountInProgress","updateStripeAccountError","fetchStripeAccountInProgress","fetchStripeAccountError","getAccountLinkInProgress","getAccountLinkError","stripeAccountCreateSuccess","stripeAccountClearError","accountType","bankAccountToken","requestedCapabilities","accountInfo","business_type","tos_shown_and_accepted","accountToken","stripeAccountCreateError","stripeAccountUpdateSuccess","stripeAccountUpdateError","fetch","stripeAccountFetchSuccess","stripeAccountFetchError","getStripeConnectAccountLink","failureURL","successURL","stripeAccountLinks","collect","DISABLE_SCROLLING","disableScrollRequests","disableScrollRequestArray","ui","CURRENT_USER_SHOW_REQUEST","CURRENT_USER_SHOW_SUCCESS","CURRENT_USER_SHOW_ERROR","CLEAR_CURRENT_USER","FETCH_CURRENT_USER_HAS_LISTINGS_REQUEST","FETCH_CURRENT_USER_HAS_LISTINGS_SUCCESS","FETCH_CURRENT_USER_HAS_LISTINGS_ERROR","FETCH_CURRENT_USER_NOTIFICATIONS_REQUEST","FETCH_CURRENT_USER_NOTIFICATIONS_SUCCESS","FETCH_CURRENT_USER_NOTIFICATIONS_ERROR","FETCH_CURRENT_USER_HAS_ORDERS_REQUEST","FETCH_CURRENT_USER_HAS_ORDERS_SUCCESS","FETCH_CURRENT_USER_HAS_ORDERS_ERROR","SEND_VERIFICATION_EMAIL_REQUEST","SEND_VERIFICATION_EMAIL_SUCCESS","SEND_VERIFICATION_EMAIL_ERROR","mergeCurrentUser","oldCurrentUser","newCurrentUser","oId","oType","oAttr","oldRelationships","currentUserShowError","currentUserHasListingsError","currentUserNotificationCountError","currentUserHasOrdersError","hasListings","currentUserShowRequest","fetchCurrentUserHasListingsSuccess","fetchCurrentUserHasListings","hasPublishedListings","ensureOwnListing","fetchCurrentUserHasListingsError","fetchCurrentUserHasOrders","fetchCurrentUserHasOrdersError","transitionsNeedingAttention","getTransitionsNeedingProviderAttention","last_transitions","fetchCurrentUserNotificationsSuccess","fetchCurrentUserNotificationsError","parameters","sdkUtil","objectQueryString","w","fit","LoggingAnalyticsHandler","trackPageView","GoogleAnalyticsHandler","previousPath","gtag","page_path","_initialState$hostedA","__PRELOADED_STATE__","reviver","createInstance","secure","typeHandlers","apiUtils","analyticsHandlers","handlers","setupAnalyticsHandlers","shouldHydrate","cdnAssetsVersion","loadableReady","_","fetchedAppAssets","translationsRaw","collectedData","app","LoadableComponentErrorBoundaryPage","landingPagePath","handleOnClick","landingPageLink","link","LoadableComponentErrorBoundary","static","canShowComponent","route","callLoadData","routeName","handleLocationChanged","delayed","setPageScrollPosition","hash","scrollIntoView","block","scroll","RouteComponentRenderer","resetTimeoutId","RouteComponent","authPage","extraProps","canShow","unauthorized","from","RouteComponentContainer","Switch","renderProps","isExact","exact","Route","matchProps","NotFoundPage","pageDataLoadingAPI","ListingPageCoverPhoto","ListingPageCarousel","PasswordChangePage","PasswordRecoveryPage","PasswordResetPage","ProfileSettingsPage","SearchPageWithMap","SearchPageWithGrid","StyleguidePage","draftId","draftSlug","RedirectToLandingPage","layoutConfig","_layoutConfig$searchP","_layoutConfig$listing","_len","_key","_props$params","_props$params2","raw","PreviewResolverPage","appReducer","combineReducers","globalReducers","pageReducers","createReducer","appState","sessionStorage","clear","creShwcseiddleware","_store$getState","_store$getState$routi","routing","handler","middlewares","thunk","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","enhancer","applyMiddleware","createStore","REQUEST_PAYMENT","REQUEST_PAYMENT_AFTER_INQUIRY","CONFIRM_PAYMENT","EXPIRE_PAYMENT","MARK_DELIVERED","OPERATOR_MARK_DELIVERED","MARK_RECEIVED_FROM_PURCHASED","AUTO_CANCEL","CANCEL","MARK_RECEIVED","AUTO_MARK_RECEIVED","DISPUTE","OPERATOR_DISPUTE","AUTO_CANCEL_FROM_DISPUTED","CANCEL_FROM_DISPUTED","MARK_RECEIVED_FROM_DISPUTED","AUTO_COMPLETE","REVIEW_1_BY_PROVIDER","REVIEW_2_BY_PROVIDER","REVIEW_1_BY_CUSTOMER","REVIEW_2_BY_CUSTOMER","EXPIRE_CUSTOMER_REVIEW_PERIOD","EXPIRE_PROVIDER_REVIEW_PERIOD","EXPIRE_REVIEW_PERIOD","INITIAL","PENDING_PAYMENT","PAYMENT_EXPIRED","PURCHASED","DELIVERED","RECEIVED","DISPUTED","CANCELED","COMPLETED","REVIEWED","REVIEWED_BY_CUSTOMER","REVIEWED_BY_PROVIDER","graph","initial","isRelevantPastTransition","isCustomerReview","isProviderReview","isPrivileged","statesNeedingProviderAttention","ACCEPT","DECLINE","OPERATOR_ACCEPT","OPERATOR_DECLINE","EXPIRE","COMPLETE","OPERATOR_COMPLETE","PREAUTHORIZED","DECLINED","ACCEPTED","EXPIRED","INQUIRE_WITHOUT_PAYMENT","FREE_INQUIRY","DAY","NIGHT","PURCHASE_PROCESS_NAME","BOOKING_PROCESS_NAME","PROCESSES","purchaseProcess","unitTypes","bookingProcess","inquiryProcess","statesObjectFromGraph","getStateAfterTransition","_statesObj$fromState","_statesObj$fromState2","statesObj","fromState","stateName","_statesObj$stateName","getTransitionsToState","targetState","collectedTransitions","inspectedState","pickTransitionsToTargetState","transitionEntries","initialTransitions","pickedTransitions","transitionEntry","nextState","getTransitionsToStates","stateNames","hasPassedState","hasPassedTransition","_tx$attributes2","txTransitions","latestProcessName","processInfo","_tx$attributes","txLastTransition","accTransitions","isPurchaseProcessAlias","isFullDay","TX_TRANSITION_ACTOR_CUSTOMER","TX_TRANSITION_ACTOR_PROVIDER","TX_TRANSITION_ACTOR_SYSTEM","TX_TRANSITION_ACTOR_OPERATOR","TX_TRANSITION_ACTORS","getUserTxRole","ensureTransaction","customer","CONDITIONAL_RESOLVER_WILDCARD","ConditionalResolver","resolver","defaultResolver","cond","conditions","isDefined","isWildcard","isMatch","isPartialMatch","default","en","fr","es","de","countryName","BigDecimal","customType","writer","serialize","transit","write","deserialize","read","methods","credentials","headers","shouldSerializeBody","bodyMaybe","fetchOptions","contentTypeHeader","get","contentType","json","post","requestOptions","mergeCurrency","hostedCurrency","defaultCurrency","validateStripeCurrency","supportedCurrencies","validSupportedCountries","isSupported","mergeLocalizations","hostedLocalization","defaultLocalization","mergeAnalyticsConfig","hostedAnalyticsConfig","defaultAnalyticsConfig","plausibleHostedConfig","plausible","str1","str2","removeTrailingComma","joinStrings","domain","hexToCssHsl","hexColor","lightnessDiff","hex","parseInt","g","getVariantURL","socialSharingImage","_socialSharingImage$a","mergeBranding","brandingConfig","defaultBranding","marketplaceColors","loginBackgroundImage","mainColor","logoSettingsRaw","validLogoSettings","validVariantConfig","hostedVariant","defaultVariant","validVariantTypes","fallback","pickVariant","isValidVariant","Number","mergeLayouts","defaultLayout","validEnumString","defaultOption","isUndefined","isValidValue","isValid","validBoolean","isBoolean","validLabel","isStringType","pickOptionShapes","o","filterTypes","validFilterType","isEnumSchemaType","isKnownFilterType","shouldHaveFilterType","searchModes","validFilterConfig","isValidIndexForSearch","isValidLabel","isValidFilterType","isValidSearchMode","validSearchMode","isMultiEnumSchemaType","hasValidMode","isSearchModeValid","isValidGroup","validListingFields","listingTypesInUse","scopeOptions","validSchemaTypes","validationData","entry","prop","allKeys","lastIndexOf","validListingTypesForListingConfig","includeForListingTypes","isUndefinedOrNull","validatedListingTypes","hasValidListingTypes","validListingTypesForListingTypeConfig","limitToListingTypeIds","listingTypeIds","lt","validSchemaOptions","arrayContainsOptionShapes","isValidIsDetail","validShowConfig","isValidPlaceholder","validPlaceholderMessage","isValidIsRequired","isValidRequiredMessage","validRequiredMessage","validSaveConfig","validKey","hasFoundValid","_validationData$confi","includeForListingTypesMaybe","supportedProcessesInfo","validConfigs","restOfListingType","restOfTransactionType","isSupportedProcessName","isSupportedProcessAlias","isSupportedUnitType","_listingTypeConfig$de","displayLocation","_listingTypeConfig$de2","_listingTypeConfig$de3","pickup","_listingTypeConfig$de4","shipping","requirePayoutDetails","_listingTypeConfig$de5","union","arr1","arr2","obj","mergeListingConfig","defaultConfigs","_hostedConfig$listing","_hostedConfig$listing2","hostedListingTypes","transactionProcess","restructureListingTypes","hostedListingFields","listingField","defaultLabel","enumOptionsMaybe","required","restSaveConfig","restructureListingFields","defaultListingTypes","shouldMerge","getListingTypeStringsInUse","validDefaultFilters","isValidMode","isValidAvailability","validDatesConfig","isMaxBigger","validPriceConfig","validKeywordsConfig","mergeSearchConfig","hostedSearchConfig","defaultSearchConfig","searchConfig","keywordsFilter","getListingMinimumPrice","listingMinimumPrice","mergeMapConfig","hostedMapConfig","defaultMapConfig","restOfDefault","mapProviderPicked","provider","mapboxAccessTokenPicked","googleMapsAPIKeyPicked","googleMapsApiKey","hasMandatoryConfigs","_Object$keys","builtInPublicDataKeys","hasClash","field","hasClashWithBuiltInPublicDataKey","_configAsset$localiza","_configAsset$googleSe","configAsset","cleanedRootURL","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","decimalValue","gte","lte","has","useComma","TypeError","convertToDecimal","dotFormattedStr","convertDecimalToString","convertDivisorToDecimal","divisor","divisorAsDecimal","isNegative","inputString","subUnitDivisor","subUnitDivisorAsDecimal","trimmed","trimEnd","times","isInteger","decimalPrecisionMax2","toFixed","truncated","dividedBy","toNumber","isNumber","low_","high_","isGoogleMathLong","valueAsNumber","numberFormatOptions","formatCurrencyMajorUnit","valueWithoutSubunits","combinedResourceObjects","oldRes","newRes","attributesOld","attributesNew","attrs","oldRels","newRels","combinedRelationships","oldEntities","objects","newEntities","curr","sanitizeEntity","throwIfNotFound","entityData","ent","relRef","relName","hasMultipleRefs","multipleRefsEmpty","refs","rels","denormalizeJsonData","copy","datum","_value$_ref","_value$_ref2","_value$_ref3","hasImageRefAsValue","hasUnresolvedImageRef","foundRef","inc","_value$_ref4","assetJson","empty","ensureStripeCustomer","ensurePaymentMethodCard","stripePaymentMethod","cardPaymentMethod","_user$attributes","_user$attributes$prof","defaultUserAbbreviatedName","lowercase","START_DATE","END_DATE","isTimeZoneSupported","Intl","DateTimeFormat","dtf","resolvedOptions","isValidTimeZone","currentTimeZone","getTimeZoneNames","relevantZonesRegExp","allTimeZones","names","z","isDate","prototype","call","isSameDate","isAfterDate","dateA","dateB","isAfter","isDateSameOrAfter","isSameOrAfter","date1","date2","d1","d2","isSame","isInRange","dShwcseoment","millisecondBeforeEndTime","isBetween","isDayMomentInsideRange","dayMoment","startOfDay","inclusiveEndDate","timestampToDate","timestamp","timeOfDayFromLocalToTimeZone","toDate","timeOfDayFromTimeZoneToLocal","unit","offsetUnit","m","clone","startOfUnit","startOf","startOfUnitWithOffset","subtract","days","diff","minutesBetween","getTimeZoneMaybe","formatDateWithProximity","todayString","opts","paramsValid","now","localizedNow","formattedTime","yearMaybe","parseDateTimeString","dateTimeString","findBookingUnitBoundaries","cumulatedResults","currentBoundary","startMoment","endMoment","nextBoundaryFn","_formatDateIntoPartia","timeOfDay","newBoundary","valueOf","currentMomentOrDate","getSharpHours","startTime","endTime","zone","millisecondBeforeStartTime","getStartHours","hours","getEndHours","initialVisibleMonth","getDayOfWeek","getStartOfWeekAsMoment","diffToSunday","adjustOffset","getEndOfWeekAsMoment","getMomentFromDate","errorAPIErrors","hasErrorWithCode","apiError","isTooManyRequestsError","isSignupEmailTakenError","ERROR_CODE_EMAIL_TAKEN","isChangeEmailTakenError","ERROR_CODE_TOO_MANY_VERIFICATION_REQUESTS","isUploadImageOverLimitError","ERROR_CODE_UPLOAD_OVER_LIMIT","isOldTotalMismatchStockError","ERROR_CODE_STOCK_OLD_TOTAL_MISMATCH","isPasswordRecoveryEmailNotFoundError","ERROR_CODE_EMAIL_NOT_FOUND","isTransactionInitiateListingNotFoundError","ERROR_CODE_TRANSACTION_LISTING_NOT_FOUND","isTransactionInitiShwcseissingStripeAccountError","ERROR_CODE_MISSING_STRIPE_ACCOUNT","isTransactionInitiateBookingTimeNotAvailableError","ERROR_CODE_TRANSACTION_BOOKING_TIME_NOT_AVAILABLE","isTransactionInitiateListingInsufficientStockError","ERROR_CODE_TRANSACTION_LISTING_INSUFFICIENT_STOCK","isTransactionZeroPaymentError","ERROR_CODE_CHARGE_ZERO_PAYIN","isTransactionInitiateAmountTooLowError","isZeroPayment","tooLowAmount","isPaymentFailedError","ERROR_CODE_PAYMENT_FAILED","isAmountTooLow","msg","isTransactionChargeDisabledError","isChargeCreationDisabled","transactionInitiateOrderStripeErrors","hasStripeError","ERROR_CODE_TRANSACTION_INVALID_TRANSITION","isTransactionsTransitionAlreadyReviewed","ERROR_CODE_TRANSACTION_ALREADY_REVIEWED_BY_CUSTOMER","ERROR_CODE_TRANSACTION_ALREADY_REVIEWED_BY_PROVIDER","isChangeEmailWrongPassword","isChangePasswordWrongPassword","isTransitionQuantityInfoMissingError","statusText","responseAPIErrors","WEEKDAYS","arr","unique","distinct","pipe","x0","fns","iterable","getMillis","pastException","startInMillis","endInMillis","exceptionInRange","availableRanges","invertedRangesFromExceptions","currentStartInMillis","timeUnitGenerator","untilFn","stepUnit","defaultEnd","testEnd","generateDates","toHashMap","iterator","exceptionFreeSlotsPerDate","availableSlots","toExceptionFreeSlotsPerDate","availableSlotsOnDate","dayStart","dayEnd","dateRange","slotRange","dayIsInsideSlot","slotStartIsInsideDate","slotEndIsInsideDate","slots","findNextException","dateInMillis","parseLocalizedTime","timeString","getEndTimeAsDate","findNextPlanEntryInfo","dayEntries","seats","toAvailabilityPerDate","plan","dayOfWeek","exceptionsOnDate","getExceptionsOnDate","exceptionRange","inclusiveEndTime","dayStartInsideException","dayEndInsideException","dayIsInsideException","exceptionStartIsInsideDate","exceptionEndIsInsideDate","hasAvailability","currentStart","_nextException$attrib","_nextException$attrib2","nextException","isInExceptionRange","nextPlanEntry","planRange","isInPlanRange","planEnd","isNextRangeAnException","isNextRangeAPlanEntry","planEntries","availabilityPerDate","MAPBOX_SCRIPT_ID","GOOGLE_MAPS_SCRIPT_ID","rootURL","isMapboxInUse","hasGoogleAnalyticsv4Id","mapLibraries","analyticsLibraries","async","defer","isMapboxLoaded","accessToken","onMapLibLoaded","allScripts","onChangeClientState","newState","addedTags","scriptTags","foundScript","once","setup","Sentry","dsn","environment","setUserId","setUser","clearUserId","printAPIErrorsAsConsoleTable","table","extra","apiErrorData","setTag","setExtra","DEG_TO_RAD","PI","THREE_PI","TWO_PI","obfuscatedCoordinatesImpl","fuzzyOffset","cacheKey","degToRadians","sinLat","sin","cosLat","cos","randomizeBearing","seedrandom","random","randomizeDistance","bearing","theta","sinBearing","cosBearing","sinTheta","cosTheta","newLat","asin","latlngInRadians","latR","lngR","radToDegrees","atan2","memoizedObfuscatedCoordinatesImpl","memoize","obfuscationKeyGetter","obfuscatedCoordinates","userLocation","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","enableHighAccuracy","timeout","maximumAge","pi","_lat","_lng","points","brng","pLat","pLng","sdkBoundsToFixedCoordinates","sdkBounds","fixedPrecision","fixed","n","parseFloat","ne","sw","hasSameSDKBounds","sdkBounds1","sdkBounds2","formatPlural","formatRelativeTime","formatTime","linkify","linkClass","breakChars","linkOrLongWordClass","breakCharsConfig","nextChild","parts","flow","flatMap","word","urlRegex","linkifyOrWrapLinkSplit","wordToBreak","bcArray","escapedBCArray","reSplit","zwsp","zwspAroundSpecialCharsSplit","j","wrapLongWord","findRouteByName","nameToFind","toPathByRouteName","compile","hasEmptySlug","pathParams","matchPathname","matchedRoutes","matchPath","matchedExactRoute","searchQuery","includeSearchQuery","pathOnly","isListingRoute","canonicalListingPathname","ESCAPE_TEXT_REGEXP","ESCAPE_TEXT_REPLACEMENTS","sanitizeText","ch","sanitizeEnum","INVALID_PROTOCOL_REGEXP","HTML_ENTITIES_REGEXP","CTRL_CHARACTERS_REGEXP","URL_SCHEME_REGEXP","RELATIVE_FIRST_CHARACTERS","sanitizeUrl","sanitizedUrl","dec","String","fromCharCode","isRelativeUrlWithoutProtocol","urlSchemeParseResults","urlScheme","sanitizedListingFields","ret","enumValue","sanitizeConfiguredPublicData","sanitizedConfiguredPublicData","sanitized","_config$listingFields","foundListingFieldConfig","sanitizedValue","restEntity","restAttributes","sanitizeLocation","building","sanitizePublicData","restPublicData","locationMaybe","sanitizeListing","bio","metadata","profileMaybe","sanitizeMetadata","sanitizeUser","exportSdk","isServer","eval","importedSdk","types","util","variantWidth","variantHeight","parseSelectFilterOptions","uriComponentValue","startsWithHasAll","startsWithHasAny","getQueryParamNames","listingFieldsConfig","defaultFiltersConfig","_config$filterConfig","param","constructQueryParamName","isAnyFilterActive","filterKeys","urlQueryParams","queryParamKeysOfGivenFilters","getQueryParamKeysOfGivenFilters","pickedKeys","_config$search","_config$search$mainSe","_config$search2","_config$search2$mainS","_config$maps","_config$maps$search","TRANSITIONS","SCHEMA_TYPE_ENUM","SCHEMA_TYPE_MULTI_ENUM","SCHEMA_TYPE_TEXT","SCHEMA_TYPE_LONG","SCHEMA_TYPE_BOOLEAN","EXTENDED_DATA_SCHEMA_TYPES","propTypes","instanceOf","money","strict","oneOfType","place","objectOf","imageAsset","userAttributes","authorAttributes","deletedUserAttributes","bannedUserAttributes","LISTING_STATE_PUBLISHED","LISTING_STATES","listingAttributes","ownListingAttributes","deletedListingAttributes","BOOKING_STATES","TIME_SLOT_TIME","timeSlot","STOCK_INFINITE_ONE_ITEM","STOCK_INFINITE_ITEMS","by","REVIEW_TYPE_OF_PROVIDER","REVIEW_TYPE_OF_CUSTOMER","subject","stripeAccountId","stripeAccountData","requiredLineItemPropType","propName","componentName","sender","queryParamNames","sortConfigOptionWithLabel","longLabel","sortConfigOptionWithTranslationKey","ERROR_CODES","assetDeliveryApiError","WithViewportComponent","ReactComponent","handleWindowResize","setViewport","throttle","THROTTLE_WAIT_MS","RENDER_WAIT_MS","WithDimensionsComponent","element","defaultRenderTimeout","setDimensions","clientWidth","clientHeight","hasDimensions","currentDimensions","maxHeight","bottom","NEAR_VIEWPORT_MARGIN","LazyLoadWithDimensionsComponent","afterRenderTimeout","isElementNearViewport","shouldLoadToImproveScrolling","safetyBoundary","viewportHeight","LISTING_PAGE_PARAM_TYPE_NEW","LISTING_PAGE_PARAM_TYPE_DRAFT","LISTING_PAGE_PARAM_TYPE_EDIT","toLowerCase","set","parseFloatNum","num","decodeLatLng","decodeLatLngBounds","serialiseSdkTypes","serialised","cleaned","queryString","PASSWORD_MIN_LENGTH","PASSWORD_MAX_LENGTH","isNonEmptyString","VALID","requiredStringNoTrim","requiredBoolean","requiredAndNonEmptyString","requiredFieldArrayCheckbox","toPairs","minLength","minimumLength","maximumLength","nonEmptyArray","autocompleteSearchRequired","autocompletePlaceSelected","bookingDateRequired","inValidDShwcseessage","bookingDatesRequired","inValidStartDShwcseessage","inValidEndDShwcseessage","startDateIsValid","endDateIsValid","EMAIL_RE","emailFormatValid","moneySubUnitAmountAtLeast","minValue","parseNum","numberAtLeast","minNumber","valueNum","composeValidators","validator","module","exports","__webpack_module_cache__","moduleId","cachedModule","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","splice","F","E","chunkId","getter","__esModule","leafPrototypes","getProto","getPrototypeOf","mode","ns","def","getOwnPropertyNames","definition","defineProperty","enumerable","u","miniCssF","Symbol","toStringTag","loadStylesheet","fullhref","existingLinkTags","getElementsByTagName","dataHref","tag","getAttribute","existingStyleTags","findStylesheet","linkTag","errorType","realHref","parentNode","createStylesheet","installedCssChunks","miniCss","installedChunks","chunk","moreModules","modules","ids","runtime","installChunk","__webpack_exports__"],"sourceRoot":""}