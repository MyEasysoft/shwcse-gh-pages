"use strict";exports.id=319,exports.ids=[319],exports.modules={408:(e,t,a)=>{a.r(t),a.d(t,{ProfileSettingsPageComponent:()=>K,default:()=>$});var r=a(6689),l=a.n(r),i=a(6695),o=a(6022),s=a(6639),n=a(1233),m=(a(3665),a(4941)),d=a(6902),c=a(9930),g=a(2745),f=a(7600),u=a(2411),p=a(113),P=a.n(p),_=a(9003),E=a.n(_),S=a(1341),N=a(5074);const I="ProfileSettingsForm_root__08ZA6",F="ProfileSettingsForm_sectionContainer__b-9mI",h="ProfileSettingsForm_sectionTitle__7hzrL",b="ProfileSettingsForm_lastSection__RAzhW",v="ProfileSettingsForm_uploadAvatarInput__RyQpK",y="ProfileSettingsForm_uploadAvatarWrapper__4f6Ov",H="ProfileSettingsForm_label__8dLxQ",C="ProfileSettingsForm_avatarPlaceholder__RyHC7",U="ProfileSettingsForm_avatarContainer__Ctpxb",x="ProfileSettingsForm_avatarPlaceholderTextMobile__nKz01",k="ProfileSettingsForm_avatarPlaceholderText__8Q6-J",D="ProfileSettingsForm_avatarUploadError__8eEut",T="ProfileSettingsForm_error__sXHS5 h4",M="ProfileSettingsForm_avatar__JxnAW",L="ProfileSettingsForm_changeAvatar__8Gnur h5",w="ProfileSettingsForm_uploadingImage__miU4s",A="ProfileSettingsForm_uploadingImageOverlay__kwAOr",R="ProfileSettingsForm_avatarInvisible__71PPr",j="ProfileSettingsForm_tip__U1C9Z marketplaceDefaultFontStyles",W="ProfileSettingsForm_fileInfo__DBGRG h5",V="ProfileSettingsForm_nameContainer__7aef9",z="ProfileSettingsForm_firstName__RjFd2",O="ProfileSettingsForm_lastName__orpIw",X="ProfileSettingsForm_bioInfo__HTT+j textSmall",B="ProfileSettingsForm_submitButton__WjN6X";class Q extends r.Component{constructor(e){super(e),this.uploadDelayTimeoutId=null,this.state={uploadDelay:!1},this.submittedValues={}}componentDidUpdate(e){e.uploadInProgress&&!this.props.uploadInProgress&&(this.setState({uploadDelay:!0}),this.uploadDelayTimeoutId=window.setTimeout((()=>{this.setState({uploadDelay:!1})}),2e3))}componentWillUnmount(){window.clearTimeout(this.uploadDelayTimeoutId)}render(){return l().createElement(u.Form,Object.assign({},this.props,{render:e=>{const{className:t,currentUser:a,handleSubmit:r,intl:i,invalid:o,onImageUpload:s,pristine:d,profileImage:g,rootClassName:f,updateInProgress:p,updateProfileError:_,uploadImageError:Q,uploadInProgress:Z,form:q,marketplaceName:G,values:J}=e,K=(0,m.j0)(a),Y=i.formatMessage({id:"ProfileSettingsForm.firstNameLabel"}),$=i.formatMessage({id:"ProfileSettingsForm.firstNamePlaceholder"}),ee=i.formatMessage({id:"ProfileSettingsForm.firstNameRequired"}),te=S.C1(ee),ae=i.formatMessage({id:"ProfileSettingsForm.lastNameLabel"}),re=i.formatMessage({id:"ProfileSettingsForm.lastNamePlaceholder"}),le=i.formatMessage({id:"ProfileSettingsForm.lastNameRequired"}),ie=S.C1(le),oe=i.formatMessage({id:"ProfileSettingsForm.bioLabel"}),se=i.formatMessage({id:"ProfileSettingsForm.bioPlaceholder"}),ne=Z||this.state.uploadDelay?l().createElement("div",{className:A},l().createElement(c.vM,null)):null,me=!!Q&&!Z,de=E()({[D]:me}),ce=g.uploadedImage||K.profileImage,ge={...K,profileImage:ce},fe=!!g.file,ue=Z&&fe,pe=g.imageId&&this.state.uploadDelay,Pe=fe&&(ue||pe)?l().createElement(c.k0,{id:g.id,className:de,rootClassName:w,aspectWidth:1,aspectHeight:1,file:g.file},ne):null,_e=E()(de,M,{[R]:this.state.uploadDelay}),Ee=!ue&&g.imageId?l().createElement(c.qE,{className:_e,renderSizes:"(max-width: 767px) 96px, 240px",user:ge,disableProfileLink:!0}):null,Se=g.imageId||ue?l().createElement("div",{className:U},Pe,Ee,l().createElement("div",{className:L},l().createElement(n._H,{id:"ProfileSettingsForm.changeAvatar"}))):l().createElement("div",{className:C},l().createElement("div",{className:k},l().createElement(n._H,{id:"ProfileSettingsForm.addYourProfilePicture"})),l().createElement("div",{className:x},l().createElement(n._H,{id:"ProfileSettingsForm.addYourProfilePictureMobile"}))),Ne=_?l().createElement("div",{className:T},l().createElement(n._H,{id:"ProfileSettingsForm.updateProfileFailed"})):null,Ie=E()(f||I,t),Fe=p,he=Object.keys(this.submittedValues).length>0&&P()(J,this.submittedValues),be=o||d||he||Z||Fe;return l().createElement(c.l0,{className:Ie,onSubmit:e=>{this.submittedValues=J,r(e)}},l().createElement("div",{className:F},l().createElement(c.H4,{as:"h2",className:h},l().createElement(n._H,{id:"ProfileSettingsForm.yourProfilePicture"})),l().createElement(u.Field,{accept:"image/*",id:"profileImage",name:"profileImage",label:Se,type:"file",form:null,uploadImageError:Q,disabled:Z},(e=>{const{accept:t,id:a,input:r,label:i,disabled:o,uploadImageError:m}=e,{name:d,type:c}=r;let g=null;return(0,N.kv)(m)?g=l().createElement("div",{className:T},l().createElement(n._H,{id:"ProfileSettingsForm.imageUploadFailedFileTooLarge"})):m&&(g=l().createElement("div",{className:T},l().createElement(n._H,{id:"ProfileSettingsForm.imageUploadFailed"}))),l().createElement("div",{className:y},l().createElement("label",{className:H,htmlFor:a},i),l().createElement("input",{accept:t,id:a,name:d,className:v,disabled:o,onChange:e=>{const t=e.target.files[0];if(q.change("profileImage",t),q.blur("profileImage"),null!=t){const e="".concat(t.name,"_").concat(Date.now());s({id:e,file:t})}},type:c}),g)})),l().createElement("div",{className:j},l().createElement(n._H,{id:"ProfileSettingsForm.tip"})),l().createElement("div",{className:W},l().createElement(n._H,{id:"ProfileSettingsForm.fileInfo"}))),l().createElement("div",{className:F},l().createElement(c.H4,{as:"h2",className:h},l().createElement(n._H,{id:"ProfileSettingsForm.yourName"})),l().createElement("div",{className:V},l().createElement(c.gC,{className:z,type:"text",id:"firstName",name:"firstName",label:Y,placeholder:$,validate:te}),l().createElement(c.gC,{className:O,type:"text",id:"lastName",name:"lastName",label:ae,placeholder:re,validate:ie}))),l().createElement("div",{className:E()(F,b)},l().createElement(c.H4,{as:"h2",className:h},l().createElement(n._H,{id:"ProfileSettingsForm.bioHeading"})),l().createElement(c.gC,{type:"textarea",id:"bio",name:"bio",label:oe,placeholder:se}),l().createElement("p",{className:X},l().createElement(n._H,{id:"ProfileSettingsForm.bioInfo",values:{marketplaceName:G}}))),Ne,l().createElement(c.zx,{className:B,type:"submit",inProgress:Fe,disabled:be,ready:he},l().createElement(n._H,{id:"ProfileSettingsForm.saveChanges"})))}}))}}Q.defaultProps={rootClassName:null,className:null,uploadImageError:null,updateProfileError:null,updateProfileReady:!1};const Z=(0,i.compose)(n.XN)(Q);Z.displayName="ProfileSettingsForm";const q=Z;var G=a(3422);const J={root:"ProfileSettingsPage_root__Wc4ke",content:"ProfileSettingsPage_content__U-ScU",headingContainer:"ProfileSettingsPage_headingContainer__w4e5o",heading:"ProfileSettingsPage_heading__BCBVA",profileLink:"ProfileSettingsPage_profileLink__Q8Pad buttonSecondaryInline"},K=e=>{const t=(0,s.mX)(),{currentUser:a,image:r,onImageUpload:i,onUpdateProfile:o,scrollingDisabled:d,updateInProgress:u,updateProfileError:p,uploadImageError:P,uploadInProgress:_,intl:E}=e,S=(0,m.j0)(a),{firstName:N,lastName:I,bio:F}=S.attributes.profile,h=S.profileImage?S.profileImage.id:null,b=r||{imageId:h},v=S.id?l().createElement(q,{className:J.form,currentUser:a,initialValues:{firstName:N,lastName:I,bio:F,profileImage:S.profileImage},profileImage:b,onImageUpload:e=>((e,t)=>{const{id:a,imageId:r,file:l}=e;l&&t({id:a,imageId:r,file:l})})(e,i),uploadInProgress:_,updateInProgress:u,uploadImageError:P,updateProfileError:p,onSubmit:t=>{const{firstName:a,lastName:r,bio:l}=t,i=l||"",s={firstName:a.trim(),lastName:r.trim(),bio:i},n=e.image,m=n&&n.imageId&&n.file?{...s,profileImageId:n.imageId}:s;o(m)},marketplaceName:t.marketplaceName}):null,y=E.formatMessage({id:"ProfileSettingsPage.title"});return l().createElement(c.T3,{className:J.root,title:y,scrollingDisabled:d},l().createElement(c.ip,{topbar:l().createElement(l().Fragment,null,l().createElement(g.Z,{currentPage:"ProfileSettingsPage"}),l().createElement(c.Tb,{currentPage:"ProfileSettingsPage"})),footer:l().createElement(f.Z,null)},l().createElement("div",{className:J.content},l().createElement("div",{className:J.headingContainer},l().createElement(c.H3,{as:"h1",className:J.heading},l().createElement(n._H,{id:"ProfileSettingsPage.heading"})),S.id?l().createElement(c.RC,{className:J.profileLink,name:"ProfilePage",params:{id:S.id.uuid}},l().createElement(n._H,{id:"ProfileSettingsPage.viewProfileLink"})):null),v)))};K.defaultProps={currentUser:null,uploadImageError:null,updateProfileError:null,image:null,config:null};const Y=(0,i.compose)((0,o.connect)((e=>{const{currentUser:t}=e.user,{image:a,uploadImageError:r,uploadInProgress:l,updateInProgress:i,updateProfileError:o}=e.ProfileSettingsPage;return{currentUser:t,image:a,scrollingDisabled:(0,d.uS)(e),updateInProgress:i,updateProfileError:o,uploadImageError:r,uploadInProgress:l}}),(e=>({onImageUpload:t=>e((0,G.Ix)(t)),onUpdateProfile:t=>e((0,G.ck)(t))}))),n.XN)(K),$=Y}};
//# sourceMappingURL=ProfileSettingsPage.813c404e.chunk.js.map