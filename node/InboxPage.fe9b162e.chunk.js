"use strict";exports.id=904,exports.ids=[904],exports.modules={3363:(e,t,a)=>{a.r(t),a.d(t,{InboxItem:()=>K,InboxPageComponent:()=>X,default:()=>j});var s=a(6689),n=a.n(s),o=a(6695),i=a(6022),r=a(9003),l=a.n(r),c=a(6639),d=a(1233),m=a(3665),u=a(3176),p=a(7285),N=a(5863),E=a(6902),_=a(9930),g=a(2745),b=a(7600),v=a(6963),I=a(9288);const P="InboxPage_mobileTopbar__4PjGM",S="InboxPage_desktopTopbar__Xa66G",x="InboxPage_navigation__FV-nc",D="InboxPage_title__zSoVd",R="InboxPage_tabs__vAH6s",f="InboxPage_tab__p+Bq3",T="InboxPage_error__mXyRA",C="InboxPage_noResults__CfSks",y="InboxPage_itemList__TKDkD",k="InboxPage_listItemsLoading__dubhi",h="InboxPage_listItem__TbZxn",A="InboxPage_item__KE9NU",O="InboxPage_itemAvatar__9c1y1",F="InboxPage_itemLink__61KZ-",U="InboxPage_itemUsername__RWVM8 textSmall",L="InboxPage_rowNotificationDot__8q7bH",Y="InboxPage_notificationDot__9utFD",H="InboxPage_itemTitle__HmOsL marketplaceTinyFontStyles",V="InboxPage_itemDetails__1jowG marketplaceTinyFontStyles",q="InboxPage_itemState__RA4qF marketplaceTinyFontStyles",M="InboxPage_pagination__mqQEI",Q="InboxPage_stateName__at1xq",W="InboxPage_stateActionNeeded__cDfpI",B="InboxPage_stateNoActionNeeded__TBJ0K",G="InboxPage_stateConcluded__xCnHg",Z="InboxPage_bannedUserLink__NxshM",w=e=>{var t,a,s,o,i,r,l,c;const{transaction:d,...N}=e,E=(0,p.b$)(null===d||void 0===d||null===(t=d.attributes)||void 0===t?void 0:t.processName),g=(0,p.Yt)(E);if(g.getState(d)===g.states.INQUIRY)return null;const b=(null===d||void 0===d||null===(a=d.attributes)||void 0===a||null===(s=a.lineItems)||void 0===s?void 0:s.length)>0?null===(o=d.attributes)||void 0===o||null===(i=o.lineItems)||void 0===i?void 0:i.find((e=>m.Y8.includes(e.code)&&!e.reversal)):null,v=b?b.code:null,I=v===m.PC?m.In:m.FJ,P=(null===d||void 0===d||null===(r=d.listing)||void 0===r||null===(l=r.attributes)||void 0===l||null===(c=l.availabilityPlan)||void 0===c?void 0:c.timezone)||"Etc/UTC",{bookingStart:S,bookingEnd:x}=((e,t,a)=>{const{start:s,end:n,displayStart:o,displayEnd:i}=e.booking.attributes,r=o||s,l=i||n,c=t===m.mi,d=t===m.PC;return{bookingStart:r,bookingEnd:c||d?l:(0,u.U2)(l,1,"days",a)}})(d,v,P);return n().createElement(_.tn,Object.assign({startDate:S,endDate:x,dateType:I,timeZone:P},N))},K=e=>{var t,a;const{transactionRole:s,tx:o,intl:i,stateData:r,isBooking:c,stockType:u=m.p9}=e,{customer:N,provider:E,listing:g}=o,{processName:b,processState:v,actionNeeded:I,isSaleNotification:P,isFinal:S}=r,x=s===p.AL,D=null===(t=o.attributes)||void 0===t?void 0:t.lineItems,R=D.length>0,f=(e=>null===e||void 0===e?void 0:e.find((e=>m.Y8.includes(e.code)&&!e.reversal)))(D),T=R&&!c?f.quantity.toString():null,C=u===m.p9||T&&f.quantity>1,y=x?E:N,k=n().createElement(_.GI,{user:y,intl:i}),h=y.attributes.banned,M=P?n().createElement("div",{className:Y}):null,K=l()(F,{[Z]:h}),X=l()(Q,{[G]:S,[W]:I,[B]:!I});return n().createElement("div",{className:A},n().createElement("div",{className:O},n().createElement(_.qE,{user:y})),n().createElement(_.RC,{className:K,name:x?"OrderDetailsPage":"SaleDetailsPage",params:{id:o.id.uuid}},n().createElement("div",{className:L},M),n().createElement("div",{className:U},k),n().createElement("div",{className:H},null===g||void 0===g||null===(a=g.attributes)||void 0===a?void 0:a.title),n().createElement("div",{className:V},c?n().createElement(w,{transaction:o}):R&&C?n().createElement(d._H,{id:"InboxPage.quantity",values:{quantity:T}}):null),n().createElement("div",{className:q},n().createElement("div",{className:X},n().createElement(d._H,{id:"InboxPage.".concat(b,".").concat(v,".status"),values:{transactionRole:s}})))))},X=e=>{const t=(0,c.mX)(),{currentUser:a,fetchInProgress:s,fetchOrdersOrSalesError:o,intl:i,pagination:r,params:l,providerNotificationCount:m,scrollingDisabled:u,transactions:N}=e,{tab:E}=l;if(!("orders"===E||"sales"===E))return n().createElement(v.Z,null);const A="orders"===E,O=!s&&0===N.length&&!o,F=i.formatMessage({id:"InboxPage.ordersTitle"}),U=i.formatMessage({id:"InboxPage.salesTitle"}),L=A?F:U,Y=!s&&((e,t,a)=>{var s,n;return t?(null===a||void 0===a?void 0:a.id)&&e&&e.length>0&&e[0].customer.id.uuid===(null===a||void 0===a||null===(s=a.id)||void 0===s?void 0:s.uuid):(null===a||void 0===a?void 0:a.id)&&e&&e.length>0&&e[0].provider.id.uuid===(null===a||void 0===a||null===(n=a.id)||void 0===n?void 0:n.uuid)})(N,A,a),H=[{text:n().createElement("span",null,n().createElement(d._H,{id:"InboxPage.ordersTabTitle"})),selected:A,linkProps:{name:"InboxPage",params:{tab:"orders"}}},{text:n().createElement("span",null,n().createElement(d._H,{id:"InboxPage.salesTabTitle"}),m>0?n().createElement(_.Cc,{count:m}):null),selected:!A,linkProps:{name:"InboxPage",params:{tab:"sales"}}}];return n().createElement(_.T3,{title:L,scrollingDisabled:u},n().createElement(_.i_,{sideNavClassName:x,topbar:n().createElement(g.Z,{mobileRootClassName:P,desktopClassName:S,currentPage:"InboxPage"}),sideNav:n().createElement(n().Fragment,null,n().createElement(_.H2,{as:"h1",className:D},n().createElement(d._H,{id:"InboxPage.title"})),n().createElement(_.KT,{rootClassName:R,tabRootClassName:f,tabs:H})," "),footer:n().createElement(b.Z,null)},o?n().createElement("p",{className:T},n().createElement(d._H,{id:"InboxPage.fetchFailed"})):null,n().createElement("ul",{className:y},s?n().createElement("li",{className:k},n().createElement(_.vM,null)):N.map((e=>{var a,s,o;const r=A?p.AL:p.Q;let l=null;try{l=(0,I.O)({transaction:e,transactionRole:r,intl:i})}catch(_){}const c=(e=>{var a;const s=null===(a=t.listing)||void 0===a?void 0:a.listingTypes,{listingType:n}=e||{};var o;return null===s||void 0===s?void 0:s.find((o=n,e=>e.listingType===o))})((null===e||void 0===e||null===(a=e.listing)||void 0===a||null===(s=a.attributes)||void 0===s?void 0:s.publicData)||{}),{transactionType:d,stockType:m}=c||{},u=(null===e||void 0===e||null===(o=e.attributes)||void 0===o?void 0:o.processName)||(null===d||void 0===d?void 0:d.transactionType),N=(0,p.b$)(u),E=(0,p.YL)(N);return l?n().createElement("li",{key:e.id.uuid,className:h},n().createElement(K,{transactionRole:r,tx:e,intl:i,stateData:l,stockType:m,isBooking:E})):null})),O?n().createElement("li",{key:"noResults",className:C},n().createElement(d._H,{id:A?"InboxPage.noOrdersFound":"InboxPage.noSalesFound"})):null),Y&&r&&r.totalPages>1?n().createElement(_.iE,{className:M,pageName:"InboxPage",pagePathParams:l,pagination:r}):null))};X.defaultProps={currentUser:null,currentUserHasOrders:null,fetchOrdersOrSalesError:null,pagination:null,providerNotificationCount:0,sendVerificationEmailError:null};const j=(0,o.compose)((0,i.connect)((e=>{const{fetchInProgress:t,fetchOrdersOrSalesError:a,pagination:s,transactionRefs:n}=e.InboxPage,{currentUser:o,currentUserNotificationCount:i}=e.user;return{currentUser:o,fetchInProgress:t,fetchOrdersOrSalesError:a,pagination:s,providerNotificationCount:i,scrollingDisabled:(0,E.uS)(e),transactions:(0,N.EV)(e,n)}})),d.XN)(X)},9288:(e,t,a)=>{a.d(t,{O:()=>o});var s=a(580),n=a(7285);(0,s.shape)({processName:s.string.isRequired,processState:s.string.isRequired,actionNeeded:s.bool,isFinal:s.bool,isSaleNotification:s.bool});const o=e=>{var t;const{transaction:a}=e,s=(0,n.b$)(null===a||void 0===a||null===(t=a.attributes)||void 0===t?void 0:t.processName),o=(0,n.Yt)(s),i=()=>{const{getState:e,states:t}=o,n=e(a);return{processName:s,processState:n,states:t}};return s===n.fv?((e,t)=>{const{transactionRole:a}=e,{processName:s,processState:o,states:i}=t,r=n.h2;return new n.iW([o,a]).cond([i.INQUIRY,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.PENDING_PAYMENT,n.AL],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.PENDING_PAYMENT,n.Q],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.CANCELED,r],(()=>({processName:s,processState:o,isFinal:!0}))).cond([i.PURCHASED,n.Q],(()=>({processName:s,processState:o,actionNeeded:!0,isSaleNotification:!0}))).cond([i.DELIVERED,n.AL],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.DISPUTED,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.COMPLETED,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED_BY_PROVIDER,n.AL],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED_BY_CUSTOMER,n.Q],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED,r],(()=>({processName:s,processState:o,isFinal:!0}))).default((()=>({processName:s,processState:o}))).resolve()})(e,i()):s===n.j5?((e,t)=>{const{transactionRole:a}=e,{processName:s,processState:o,states:i}=t,r=n.h2;return new n.iW([o,a]).cond([i.INQUIRY,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.PENDING_PAYMENT,n.AL],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.CANCELED,r],(()=>({processName:s,processState:o,isFinal:!0}))).cond([i.PREAUTHORIZED,n.Q],(()=>({processName:s,processState:o,actionNeeded:!0,isSaleNotification:!0}))).cond([i.ACCEPTED,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.DECLINED,r],(()=>({processName:s,processState:o,isFinal:!0}))).cond([i.EXPIRED,r],(()=>({processName:s,processState:o,isFinal:!0}))).cond([i.DELIVERED,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED_BY_PROVIDER,n.AL],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED_BY_CUSTOMER,n.Q],(()=>({processName:s,processState:o,actionNeeded:!0}))).cond([i.REVIEWED,r],(()=>({processName:s,processState:o,isFinal:!0}))).default((()=>({processName:s,processState:o}))).resolve()})(e,i()):s===n.N5?((e,t)=>{const{transactionRole:a}=e,{processName:s,processState:o,states:i}=t,r=n.h2;return new n.iW([o,a]).cond([i.FREE_INQUIRY,r],(()=>({processName:s,processState:o,actionNeeded:!0}))).default((()=>({processName:s,processState:o}))).resolve()})(e,i()):{}}}};
//# sourceMappingURL=InboxPage.fe9b162e.chunk.js.map