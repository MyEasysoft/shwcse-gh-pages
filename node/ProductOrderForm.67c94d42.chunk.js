"use strict";exports.id=326,exports.ids=[326],exports.modules={8975:(e,t,r)=>{r.d(t,{Z:()=>g});var n=r(6689),i=r.n(n),o=r(9200),a=r.n(o),l=r(6319),d=r(1233),s=r(3665),c=r(5198),u=r(7285),m=r(9930),p=r(949);const{Money:y,UUID:v}=l.types,h=(e,t)=>{const r=e.reduce(((e,t)=>{const r=(0,c.ud)(t.lineTotal);return new(a())(r).add(e)}),new(a())(0)),n=e[0]&&e[0].unitPrice?e[0].unitPrice.currency:t;return new y((0,c.aV)(r.toNumber(),(0,c.p_)(n)),n)},M=function(e,t,r){const n={start:e,end:t};return{id:new v("estimated-booking"),type:"booking",attributes:{...n}}},g=e=>{const{breakdownData:t={},lineItems:r,timeZone:n,currency:o,marketplaceName:a,processName:l}=e,{startDate:c,endDate:y}=t;let g=null;try{g=(0,u.Yt)(l)}catch(k){return i().createElement("div",{className:p.Z.error},i().createElement(d._H,{id:"OrderPanel.unknownTransactionProcess"}))}const E=null===r||void 0===r?void 0:r.find((e=>s.Y8.includes(e.code)&&!e.reversal)),O=null===E||void 0===E?void 0:E.code,P=[s.E4,s.mi].includes(O),f=r&&r.length>0,F=!P||c&&y,_=O===s.PC?s.In:s.FJ,b=f&&F?((e,t,r,n,i,o,a,l)=>{const d=null===o||void 0===o?void 0:o.transitions,s=new Date,c=e.filter((e=>e.includeFor.includes("customer"))),m=e.filter((e=>e.includeFor.includes("provider"))),p=h(c,l),y=h(m,l),g=t&&r?{booking:M(t,r,n,i)}:{};return{id:new v("estimated-transaction"),type:"transaction",attributes:{createdAt:s,processName:a,lastTransitionedAt:s,lastTransition:d.REQUEST_PAYMENT,payinTotal:p,payoutTotal:y,lineItems:c,transitions:[{createdAt:s,by:u.AL,transition:d.REQUEST_PAYMENT}]},...g}})(r,c,y,O,n,g,l,o):null;return b?i().createElement(m.J0,{className:p.Z.receipt,userRole:"customer",transaction:b,booking:b.booking,dateType:_,timeZone:n,currency:o,marketplaceName:a}):null}},9461:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var n=r(6689),i=r.n(n),o=r(2411),a=r(1233),l=(r(3665),r(1341)),d=r(7285),s=r(9930),c=r(8975);const u="ProductOrderForm_bookingBreakdownTitle__epmbq",m="ProductOrderForm_totalDivider__x1b-R",p="ProductOrderForm_quantityField__SB1jH",y="ProductOrderForm_deliveryField__hsRoF",v="ProductOrderForm_singleDeliveryMethodLabel__Jm4QI label",h="ProductOrderForm_singleDeliveryMethodSelected__ML6x7",M="ProductOrderForm_breakdownWrapper__Pvcv5",g="ProductOrderForm_submitButton__PvTZR",E="ProductOrderForm_finePrint__LxKZ- marketplaceTinyFontStyles",O="ProductOrderForm_error__1Fy1Z h4",P=e=>{let{quantity:t,deliveryMethod:r,displayDeliveryMethod:n,listingId:i,isOwnListing:o,fetchLineItemsInProgress:a,onFetchTransactionLineItems:l}=e;const d=Number.parseInt(t,10);!("undefined"!==typeof window)||!d||n&&!r||a||l({orderData:{stockReservationQuantity:d,...r?{deliveryMethod:r}:{}},listingId:i,isOwnListing:o})},f=e=>{const{displayDeliveryMethod:t,hasMultipleDeliveryMethods:r,deliveryMethod:n,hasStock:o,formId:a,intl:d}=e,c=t&&n;return o?t&&r?i().createElement(s.Wy,{id:"".concat(a,".deliveryMethod"),className:y,name:"deliveryMethod",label:d.formatMessage({id:"ProductOrderForm.deliveryMethodLabel"}),validate:(0,l.C1)(d.formatMessage({id:"ProductOrderForm.deliveryMethodRequired"}))},i().createElement("option",{disabled:!0,value:""},d.formatMessage({id:"ProductOrderForm.selectDeliveryMethodOption"})),i().createElement("option",{value:"pickup"},d.formatMessage({id:"ProductOrderForm.pickupOption"})),i().createElement("option",{value:"shipping"},d.formatMessage({id:"ProductOrderForm.shippingOption"}))):c?i().createElement("div",{className:y},i().createElement(s.H3,{rootClassName:v},d.formatMessage({id:"ProductOrderForm.deliveryMethodLabel"})),i().createElement("p",{className:h},"shipping"===n?d.formatMessage({id:"ProductOrderForm.shippingOption"}):d.formatMessage({id:"ProductOrderForm.pickupOption"})),i().createElement(s.gC,{id:"".concat(a,".deliveryMethod"),className:y,name:"deliveryMethod",type:"hidden"})):null:null},F=e=>{const[t,r]=(0,n.useState)(!1),{handleSubmit:y,form:v,intl:h,formId:O,currentStock:F,allowOrdersOfMultipleItems:_,hasMultipleDeliveryMethods:b,displayDeliveryMethod:k,listingId:I,isOwnListing:D,onFetchTransactionLineItems:N,onContactUser:L,lineItems:w,fetchLineItemsInProgress:q,fetchLineItemsError:T,price:S,payoutDetailsWarning:H,marketplaceName:C,values:R}=e;(0,n.useEffect)((()=>{r(!0);const{quantity:t,deliveryMethod:n}=R;t&&!e.hasMultipleDeliveryMethods&&P({quantity:t,deliveryMethod:n,displayDeliveryMethod:k,listingId:I,isOwnListing:D,fetchLineItemsInProgress:q,onFetchTransactionLineItems:N})}),[]);const Z={},x=Z&&w&&!q&&!T,A="function"===typeof L,B=i().createElement(s.T5,{onClick:e=>{e.preventDefault(),L()}},i().createElement(a._H,{id:"ProductOrderForm.finePrintNoStockLinkText"})),Q=h.formatMessage({id:"ProductOrderForm.quantityRequired"}),U=null!=typeof F&&0===F,Y=F&&F>0,W=1===F,J=Y?[...Array(F>100?100:F).keys()].map((e=>e+1)):[],j=q,G=!Y;return i().createElement(s.l0,{onSubmit:e=>{const{quantity:t,deliveryMethod:r}=R||{};!t||t<1?(e.preventDefault(),v.blur("quantity"),v.focus("quantity")):k&&!r?(e.preventDefault(),v.blur("deliveryMethod"),v.focus("deliveryMethod")):y(e)}},i().createElement(o.FormSpy,{subscription:{values:!0},onChange:e=>{const{quantity:r,deliveryMethod:n}=e.values;t&&P({quantity:r,deliveryMethod:n,listingId:I,isOwnListing:D,fetchLineItemsInProgress:q,onFetchTransactionLineItems:N})}}),U?null:W||!_?i().createElement(s.gC,{id:"".concat(O,".quantity"),className:p,name:"quantity",type:"hidden",validate:(0,l.DG)(Q,1)}):i().createElement(s.Wy,{id:"".concat(O,".quantity"),className:p,name:"quantity",disabled:!Y,label:h.formatMessage({id:"ProductOrderForm.quantityLabel"}),validate:(0,l.DG)(Q,1)},i().createElement("option",{disabled:!0,value:""},h.formatMessage({id:"ProductOrderForm.selectQuantityOption"})),J.map((e=>i().createElement("option",{key:e,value:e},h.formatMessage({id:"ProductOrderForm.quantityOption"},{quantity:e}))))),i().createElement(f,{displayDeliveryMethod:k,hasMultipleDeliveryMethods:b,deliveryMethod:null===R||void 0===R?void 0:R.deliveryMethod,hasStock:Y,formId:O,intl:h}),x?i().createElement("div",{className:M},i().createElement(s.H6,{as:"h3",className:u},i().createElement(a._H,{id:"ProductOrderForm.breakdownTitle"})),i().createElement("hr",{className:m}),i().createElement(c.Z,{breakdownData:Z,lineItems:w,currency:S.currency,marketplaceName:C,processName:d.fv})):null,i().createElement("div",{className:g},i().createElement(s.KM,{type:"submit",inProgress:j,disabled:G},Y?i().createElement(a._H,{id:"ProductOrderForm.ctaButton"}):i().createElement(a._H,{id:"ProductOrderForm.ctaButtonNoStock"}))),i().createElement("p",{className:E},H||(Y&&D?i().createElement(a._H,{id:"ProductOrderForm.ownListing"}):Y?i().createElement(a._H,{id:"ProductOrderForm.finePrint"}):A?i().createElement(a._H,{id:"ProductOrderForm.finePrintNoStock",values:{contactSellerLink:B}}):null)))},_=e=>{const t=(0,a.YB)(),{price:r,currentStock:n,pickupEnabled:l,shippingEnabled:d,displayDeliveryMethod:s,allowOrdersOfMultipleItems:c}=e;if(s&&!l&&!d)return i().createElement("p",{className:O},i().createElement(a._H,{id:"ProductOrderForm.noDeliveryMethodSet"}));const u=l&&d,m={...n&&1===n||!c&&n>0?{quantity:"1"}:{},...d&&!l?{deliveryMethod:"shipping"}:!d&&l?{deliveryMethod:"pickup"}:{}};return i().createElement(o.Form,Object.assign({initialValues:m,hasMultipleDeliveryMethods:u,displayDeliveryMethod:s},e,{intl:t,render:F}))};_.defaultProps={rootClassName:null,className:null,price:null,currentStock:null,listingId:null,isOwnListing:!1,pickupEnabled:!1,shippingEnabled:!1,displayDeliveryMethod:!1,lineItems:null,fetchLineItemsError:null};const b=_}};
//# sourceMappingURL=ProductOrderForm.67c94d42.chunk.js.map